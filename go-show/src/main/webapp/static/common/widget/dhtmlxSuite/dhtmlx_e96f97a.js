function dtmlXMLLoaderObject(t,e,i,s){return this.xmlDoc="",this.async="undefined"!=typeof i?i:!0,this.onloadAction=t||null,this.mainObject=e||null,this.waitCall=null,this.rSeed=s||!1,this}function callerFunction(t,e){return this.handler=function(i){return i||(i=window.event),t(i,e),!0},this.handler}function getAbsoluteLeft(t){return getOffset(t).left}function getAbsoluteTop(t){return getOffset(t).top}function getOffsetSum(t){for(var e=0,i=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}}function getOffsetRect(t){var e=t.getBoundingClientRect(),i=document.body,s=document.documentElement,n=window.pageYOffset||s.scrollTop||i.scrollTop,o=window.pageXOffset||s.scrollLeft||i.scrollLeft,l=s.clientTop||i.clientTop||0,r=s.clientLeft||i.clientLeft||0,a=e.top+n-l,h=e.left+o-r;return{top:Math.round(a),left:Math.round(h)}}function getOffset(t){return t.getBoundingClientRect?getOffsetRect(t):getOffsetSum(t)}function convertStringToBoolean(t){switch("string"==typeof t&&(t=t.toLowerCase()),t){case"1":case"true":case"yes":case"y":case 1:case!0:return!0;default:return!1}}function getUrlSymbol(t){return-1!=t.indexOf("?")?"&":"?"}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function _dhtmlxError(){return this.catches||(this.catches=new Array),this}function dhtmlXHeir(t,e){for(var i in e)"function"==typeof e[i]&&(t[i]=e[i]);return t}function dhtmlxEvent(t,e,i){t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i)}function dataProcessor(t){return this.serverProcessor=t,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhtmlxEventable(this),this}function dhtmlXCellObject(t,e){this.cell=document.createElement("DIV"),this.cell.className="dhx_cell"+(e||""),this._idd=t,this._isCell=!0,this.conf={borders:!0,idx:{},css:e||"",idx_data:{cont:"dhx_cell_cont",pr1:"dhx_cell_progress_bar",pr2:"dhx_cell_progress_img",menu:"dhx_cell_menu",toolbar:"dhx_cell_toolbar",ribbon:"dhx_cell_ribbon",sb:"dhx_cell_statusbar"},ofs_nodes:{t:{},b:{}}},this.dataNodes={},this.views={};var i=document.createElement("DIV");return i.className="dhx_cell_cont"+this.conf.css,this.cell.appendChild(i),i=null,this._updateIdx=function(){for(var t in this.conf.idx)this.conf.idx[t]=null,delete this.conf.idx[t];for(var e=0;e<this.cell.childNodes.length;e++){var i=this.cell.childNodes[e].className;for(var t in this.conf.idx_data){var s=new RegExp(this.conf.idx_data[t]);null!=i.match(s)&&(this.conf.idx[t]=e)}}this.callEvent("_onIdxUpdated",[])},this._adjustAttached=function(){for(var t in this.dataNodes)null!=this.dataNodes[t]&&"function"==typeof this.dataNodes[t].setSizes&&this.dataNodes[t].setSizes();null!=this.dataObj&&"function"==typeof this.dataObj.setSizes&&this.dataObj.setSizes.apply(this.dataObj,arguments)},this._setSize=function(t,e,i,s,n,o,l){this.conf.size||(this.conf.size={}),this.conf.size.x=t,this.conf.size.y=e,this.conf.size.w=i,this.conf.size.h=s,this.cell.style.left=t+"px",this.cell.style.top=e+"px",this.cell.style.width=i+"px",this.cell.style.height=s+"px",this.callEvent("_onSetSize",[]),o!==!0?this._adjustCont(n,l):this._adjustAttached(n),this._adjustProgress()},this._adjustCont=function(t,e){var i=this.cell.childNodes[this.conf.idx.cont],s=0;for(var n in this.conf.ofs_nodes.t){var o=this.conf.ofs_nodes.t[n];s+="func"==o?this[n]():1==o?this.cell.childNodes[this.conf.idx[n]].offsetHeight:0}var l=0;for(var n in this.conf.ofs_nodes.b){var o=this.conf.ofs_nodes.b[n];l+="func"==o?this[n]():1==o?this.cell.childNodes[this.conf.idx[n]].offsetHeight:0}i.style.left="0px",i.style.top=s+"px",this.conf.cells_cont||(this.conf.cells_cont={},i.style.width=this.cell.offsetWidth+"px",i.style.height=Math.max(this.cell.offsetHeight-s-l,0)+"px",this.conf.cells_cont.w=parseInt(i.style.width)-i.offsetWidth,this.conf.cells_cont.h=parseInt(i.style.height)-i.offsetHeight),i.style.left="0px",i.style.top=s+"px",i.style.width=Math.max(this.cell.offsetWidth+this.conf.cells_cont.w,0)+"px",i.style.height=Math.max(this.conf.size.h-s-l+this.conf.cells_cont.h,0)+"px",i=null,this._adjustAttached(t),"expand"==e&&"editor"==this.dataType&&null!=this.dataObj&&this.dataObj._prepareContent(!0)},this._mtbUpdBorder=function(){for(var t=["menu","toolbar"],e=0;e<t.length;e++)if(null!=this.conf.idx[t[e]]){var i=this.cell.childNodes[this.conf.idx[t[e]]],s="dhx_cell_"+t[e]+"_no_borders",n="dhx_cell_"+t[e]+"_def";i.className=i.className.replace(new RegExp(this.conf.borders?s:n),this.conf.borders?n:s),i=null}},this._resetSizeState=function(){this.conf.cells_cont=null},this.conf.view="def",this.conf.views_loaded={},this.conf.views_loaded[this.conf.view]=!0,this._viewSave=function(t){this.views[t]={borders:this.conf.borders,ofs_nodes:{t:{},b:{}},dataType:this.dataType,dataObj:this.dataObj,cellCont:[],dataNodes:{},dataNodesCont:{}};for(var e=this.cell.childNodes[this.conf.idx.cont];e.childNodes.length>0;)this.views[t].cellCont.push(e.firstChild),e.removeChild(e.firstChild);this.dataType=null,this.dataObj=null;for(var i in this.dataNodes){for(var s in this.conf.ofs_nodes)"undefined"!=typeof this.conf.ofs_nodes[s][i]&&(this.views[t].ofs_nodes[s][i]=this.conf.ofs_nodes[s][i],this.conf.ofs_nodes[s][i]=null,delete this.conf.ofs_nodes[s][i]);this.views[t].dataNodesCont[i]=this.cell.childNodes[this.conf.idx[i]],this.cell.removeChild(this.cell.childNodes[this.conf.idx[i]]),this.views[t].dataNodes[i]=this.dataNodes[i],this.dataNodes[i]=null,delete this.dataNodes[i],this._updateIdx()}this.callEvent("_onViewSave",[t])},this._viewRestore=function(t){if(null!=this.views[t]){this.dataObj=this.views[t].dataObj,this.dataType=this.views[t].dataType;for(var e=0;e<this.views[t].cellCont.length;e++)this.cell.childNodes[this.conf.idx.cont].appendChild(this.views[t].cellCont[e]);for(var i in this.views[t].dataNodes)this.dataNodes[i]=this.views[t].dataNodes[i],"menu"==i&&this.cell.insertBefore(this.views[t].dataNodesCont[i],this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),"toolbar"==i&&this.cell.insertBefore(this.views[t].dataNodesCont[i],this.cell.childNodes[this.conf.idx.cont]),"sb"==i&&this.cell.appendChild(this.views[t].dataNodesCont[i]),this._updateIdx();for(var i in this.views[t].ofs_nodes)for(var s in this.views[t].ofs_nodes[i])this.conf.ofs_nodes[i][s]=this.views[t].ofs_nodes[i][s];this.conf.borders!=this.views[t].borders&&this[this.views[t].borders?"_showBorders":"_hideBorders"](!0),this.callEvent("_onViewRestore",[t]),this._viewDelete(t)}},this._viewDelete=function(t){if(null!=this.views[t]){this.views[t].borders=null;for(var e in this.views[t].ofs_nodes){for(var i in this.views[t].ofs_nodes[e])this.views[t].ofs_nodes[e][i]=null;this.views[t].ofs_nodes[e]=null}this.views[t].dataType=null,this.views[t].dataObj=null;for(var s=0;s<this.views[t].cellCont.length;s++)this.views[t].cellCont[s]=null;this.views[t].cellCont=null;for(var e in this.views[t].dataNodes)this.views[t].dataNodes[e]=null,this.views[t].dataNodesCont[e]=null;this.views[t].dataNodes=this.views[t].dataNodesCont=null,this.views[t]=null,delete this.views[t]}},window.dhx4._eventable(this),this._updateIdx(),this}function dhtmlXCalendarObject(t,e){this.i={};var i=null;if("string"==typeof t)var s=document.getElementById(t);else var s=t;s&&"object"==typeof s&&s.tagName&&"input"!=String(s.tagName).toLowerCase()&&(i=s),s=null,"object"==typeof t&&t.length||(t=[t]);for(var n=0;n<t.length;n++)"string"==typeof t[n]&&(t[n]=document.getElementById(t[n])||null),null!=t[n]&&t[n].tagName&&"input"==String(t[n].tagName).toLowerCase()?this.i[window.dhx4.newId()]={input:t[n]}:t[n]instanceof Array||!(t[n]instanceof Object)||null==t[n].input&&null==t[n].button||(null!=t[n].input&&"string"==typeof t[n].input&&(t[n].input=document.getElementById(t[n].input)),null!=t[n].button&&"string"==typeof t[n].button&&(t[n].button=document.getElementById(t[n].button)),this.i[window.dhx4.newId()]=t[n]),t[n]=null;this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhtmlxcalendar")||"dhx_skyblue",zi:window.dhx4.newId(),touch:"undefined"!=typeof window.ontouchstart},this.setSkin=function(t,e){(this.conf.skin!=t||e)&&(this.conf.skin=t,this.base.className="dhtmlxcalendar_"+this.conf.skin,this._ifrSize())},this.base=document.createElement("DIV"),this.base.style.display="none",this.base.appendChild(document.createElement("DIV")),null!=i?(this._hasParent=!0,i.appendChild(this.base),i=null):document.body.appendChild(this.base),this.setParent=function(t){this._hasParent&&("object"==typeof t?t.appendChild(this.base):"string"==typeof t&&document.getElementById(t).appendChild(this.base))},this.setSkin(this.conf.skin,!0),this.conf.touch?this.base.ontouchstart=function(t){t=t||event,t.preventDefault&&t.preventDefault(),t.cancelBubble=!0}:(this.base.onclick=function(t){t=t||event,t.cancelBubble=!0},this.base.onmousedown=function(){return!1}),this.loadUserLanguage=function(t){if(this.langData[t]&&(this.lang=t,this.setWeekStartDay(this.langData[this.lang].weekstart),this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this.msCont))for(var e=0,i=0;i<this.msCont.childNodes.length;i++)for(var s=0;s<this.msCont.childNodes[i].childNodes.length;s++)this.msCont.childNodes[i].childNodes[s].innerHTML=this.langData[this.lang].monthesSNames[e++]},this.contMonth=document.createElement("DIV"),this.contMonth.className="dhtmlxcalendar_month_cont",this.contMonth.onselectstart=function(t){return t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this.base.firstChild.appendChild(this.contMonth);var o=document.createElement("UL");o.className="dhtmlxcalendar_line",this.contMonth.appendChild(o);var l=document.createElement("LI");l.className="dhtmlxcalendar_cell dhtmlxcalendar_month_hdr",l.innerHTML="<div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_left\";'></div><span></span><div class='dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right' onmouseover='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right_hover\";' onmouseout='this.className=\"dhtmlxcalendar_month_arrow dhtmlxcalendar_month_arrow_right\";'></div>",o.appendChild(l);var r=this;l[this.conf.touch?"ontouchstart":"onclick"]=function(t){t=t||event;var e=t.target||t.srcElement;if(e.className&&0===e.className.indexOf("dhtmlxcalendar_month_arrow")){r._hideSelector();var i=e.parentNode.firstChild==e?-1:1,s=new Date(r._activeMonth);return r._drawMonth(new Date(r._activeMonth.getFullYear(),r._activeMonth.getMonth()+i,1,0,0,0,0)),void r._evOnArrowClick([s,new Date(r._activeMonth)])}return e.className&&"dhtmlxcalendar_month_label_month"==e.className?(t.cancelBubble=!0,void r._showSelector("month",Math.round(e.offsetLeft+e.offsetWidth/2),e.offsetTop+e.offsetHeight+2,"selector_month",!0)):e.className&&"dhtmlxcalendar_month_label_year"==e.className?(t.cancelBubble=!0,void r._showSelector("year",Math.round(e.offsetLeft+e.offsetWidth/2),e.offsetTop+e.offsetHeight+2,"selector_year",!0)):void r._hideSelector()},this.contDays=document.createElement("DIV"),this.contDays.className="dhtmlxcalendar_days_cont",this.base.firstChild.appendChild(this.contDays),this.setWeekStartDay=function(t){0==t&&(t=7),this._wStart=Math.min(Math.max(isNaN(t)?1:t,1),7),this._drawDaysOfWeek()},this._drawDaysOfWeek=function(){if(0==this.contDays.childNodes.length){var t=document.createElement("UL");t.className="dhtmlxcalendar_line",this.contDays.appendChild(t)}else var t=this.contDays.firstChild;var e=this._wStart,i=this.langData[this.lang].daysSNames;i.push(String(this.langData[this.lang].daysSNames[0]).valueOf());for(var s=0;8>s;s++){if(null==t.childNodes[s]){var n=document.createElement("LI");t.appendChild(n)}else var n=t.childNodes[s];0==s?(n.className="dhtmlxcalendar_cell_wn",n.innerHTML="<div class='dhtmlxcalendar_label'>"+(this.langData[this.lang].weekname||"w")+"</div>"):(n.className="dhtmlxcalendar_cell"+(e>=6?" dhtmlxcalendar_day_weekday_cell":"")+(1==s?"_first":""),n.innerHTML=i[e],++e>7&&(e=1))}null!=this._activeMonth&&this._drawMonth(this._activeMonth)},this._wStart=this.langData[this.lang].weekstart,this.setWeekStartDay(this._wStart),this.contDates=document.createElement("DIV"),this.contDates.className="dhtmlxcalendar_dates_cont",this.base.firstChild.appendChild(this.contDates),this.contDates[this.conf.touch?"ontouchend":"onclick"]=function(t){t=t||event;var e=t.target||t.srcElement;if(null!=e.parentNode&&null!=e.parentNode._date&&(e=e.parentNode),null!=e._date&&!e._css_dis){var i=r._activeDate.getHours(),s=r._activeDate.getMinutes(),n=e._date;if(r.checkEvent("onBeforeChange")&&!r.callEvent("onBeforeChange",[new Date(e._date.getFullYear(),e._date.getMonth(),e._date.getDate(),i,s)]))return;null!=r._activeDateCell&&(r._activeDateCell._css_date=!1,r._updateCellStyle(r._activeDateCell._q,r._activeDateCell._w));var o=r._activeDate.getFullYear()+"_"+r._activeDate.getMonth()!=n.getFullYear()+"_"+n.getMonth();r._nullDate=!1,r._activeDate=new Date(n.getFullYear(),n.getMonth(),n.getDate(),i,s),r._activeDateCell=e,r._activeDateCell._css_date=!0,r._activeDateCell._css_hover=!1,r._updateCellStyle(r._activeDateCell._q,r._activeDateCell._w),o&&r._drawMonth(r._activeDate),r._activeInp&&r.i[r._activeInp]&&null!=r.i[r._activeInp].input&&(r.i[r._activeInp].input.value=r._dateToStr(new Date(r._activeDate.getTime()))),r._hasParent||r._hide(),r._evOnClick([new Date(r._activeDate.getTime())])}},this.conf.touch||(this.contDates.onmouseover=function(t){t=t||event;var e=t.target||t.srcElement;if(null!=e.parentNode&&null!=e.parentNode._date&&(e=e.parentNode),null!=e._date){if(r._lastHover==e||e._css_hover)return;e._css_hover=!0,r._updateCellStyle(e._q,e._w),r._lastHover=e,r._evOnMouseOver([new Date(e._date.getFullYear(),e._date.getMonth(),e._date.getDate(),0,0,0,0),t]),e=null}},this.contDates.onmouseout=function(t){r._clearDayHover(t||event)}),this._lastHover=null,this._clearDayHover=function(t){this._lastHover&&(this._lastHover._css_hover=!1,this._updateCellStyle(this._lastHover._q,this._lastHover._w),r._evOnMouseOut([new Date(this._lastHover._date.getFullYear(),this._lastHover._date.getMonth(),this._lastHover._date.getDate(),0,0,0,0),t]),this._lastHover=null)};for(var n=0;6>n;n++){var o=document.createElement("UL");o.className="dhtmlxcalendar_line",this.contDates.appendChild(o);for(var a=0;7>=a;a++){var l=document.createElement("LI");l.className=0==a?"dhtmlxcalendar_cell_wn":"dhtmlxcalendar_cell",o.appendChild(l)}}this.contTime=document.createElement("DIV"),this.contTime.className="dhtmlxcalendar_time_cont",this.base.firstChild.appendChild(this.contTime),this.showTime=function(){this.contTime.style.display="",this._ifrSize()},this.hideTime=function(){this.contTime.style.display="none",this._ifrSize()};var o=document.createElement("UL");o.className="dhtmlxcalendar_line",this.contTime.appendChild(o);var l=document.createElement("LI");l.className="dhtmlxcalendar_cell dhtmlxcalendar_time_hdr",l.innerHTML="<div class='dhtmlxcalendar_time_img'></div><span class='dhtmlxcalendar_label_hours'></span><span class='dhtmlxcalendar_label_colon'> : </span><span class='dhtmlxcalendar_label_minutes'></span>",o.appendChild(l),l[this.conf.touch?"ontouchstart":"onclick"]=function(t){t=t||event;var e=t.target||t.srcElement;if(null!=e.tagName&&"span"==e.tagName.toLowerCase()&&1==e._par&&null!=e.parentNode&&(e=e.parentNode),e.className&&"dhtmlxcalendar_label_hours"==e.className){t.cancelBubble=!0;var i=r.contMonth.offsetHeight+r.contDays.offsetHeight+r.contDates.offsetHeight+e.offsetTop;return void r._showSelector("hours",Math.round(e.offsetLeft+e.offsetWidth/2),i-2,"selector_hours",!0)}if(e.className&&"dhtmlxcalendar_label_minutes"==e.className){if(t.cancelBubble=!0,1==r._minutesInterval){var s=r.getFormatedDate("%i");e.innerHTML="<span class='dhtmlxcalendar_selected_date'>"+s.charAt(0)+"</span>"+s.charAt(1),e.firstChild._par=!0,r._selectorMode=1}var i=r.contMonth.offsetHeight+r.contDays.offsetHeight+r.contDates.offsetHeight+e.offsetTop;return void r._showSelector("minutes",Math.round(e.offsetLeft+e.offsetWidth/2),i-2,"selector_minutes",!0)}r._hideSelector()},this._activeMonth=null,this._activeDate=new Date,this._activeDateCell=null,this.setDate=function(t){this._nullDate="undefined"==typeof t||""===t||!t,t instanceof Date||(t=this._strToDate(String(t||"")),"Invalid Date"==t&&(t=new Date));var e=t.getTime();this._isOutOfRange(e)||(this._activeDate=new Date(e),this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleHours(),this._updateVisibleMinutes())},this.getDate=function(t){if(this._nullDate)return null;var e=new Date(this._activeDate.getTime());return t?this._dateToStr(e):e},this._drawMonth=function(t){if(t instanceof Date){isNaN(t.getFullYear())&&(t=new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),1,0,0,0,0)),this._activeMonth=new Date(t.getFullYear(),t.getMonth(),1,0,0,0,0),this._activeDateCell=null;var e=new Date(this._activeMonth.getTime()),i=e.getDay(),s=i-this._wStart;0>s&&(s+=7),e.setDate(e.getDate()-s);for(var n=t.getMonth(),o=new Date(this._activeDate.getFullYear(),this._activeDate.getMonth(),this._activeDate.getDate(),0,0,0,0).getTime(),l=0,r=0;6>r;r++)for(var a=this._wStart,h=0;7>=h;h++)if(0==h){var d=this.getWeekNumber(new Date(e.getFullYear(),e.getMonth(),e.getDate()+l,0,0,0,0));this.contDates.childNodes[r].childNodes[h].innerHTML="<div class='dhtmlxcalendar_label'>"+d+"</div>"}else{var c=new Date(e.getFullYear(),e.getMonth(),e.getDate()+l,0,0,0,0),u=(c.getDay(),c.getTime()),_="dhtmlxcalendar_label";null!=this._tipData[u]?(this._tipData[u].usePopup&&"function"==typeof window.dhtmlXPopup?(this.contDates.childNodes[r].childNodes[h].removeAttribute("title"),this._initTooltipPopup()):this.contDates.childNodes[r].childNodes[h].setAttribute("title",this._tipData[u].text),this._tipData[u].showIcon&&(_+=" dhtmlxcalendar_label_title")):this.contDates.childNodes[r].childNodes[h].removeAttribute("title"),this.contDates.childNodes[r].childNodes[h].innerHTML="<div class='"+_+"'>"+c.getDate()+"</div>",this.contDates.childNodes[r].childNodes[h]._date=new Date(u),this.contDates.childNodes[r].childNodes[h]._q=r,this.contDates.childNodes[r].childNodes[h]._w=h,this.contDates.childNodes[r].childNodes[h]._css_month=c.getMonth()==n,this.contDates.childNodes[r].childNodes[h]._css_date=!this._nullDate&&u==o,this.contDates.childNodes[r].childNodes[h]._css_weekend=a>=6,this.contDates.childNodes[r].childNodes[h]._css_dis=this._isOutOfRange(u),this.contDates.childNodes[r].childNodes[h]._css_holiday=1==this._holidays[u],this._updateCellStyle(r,h),u==o&&(this._activeDateCell=this.contDates.childNodes[r].childNodes[h]),++a>7&&(a=1),l++}this.contMonth.firstChild.firstChild.childNodes[1].innerHTML=this._buildMonthHdr(t)}},this._updateCellStyle=function(t,e){var i=this.contDates.childNodes[t].childNodes[e],s="dhtmlxcalendar_cell dhtmlxcalendar_cell";s+=i._css_month?"_month":"",s+=i._css_date?"_date":"",s+=i._css_weekend?"_weekend":"",s+=i._css_holiday?"_holiday":"",s+=i._css_dis?"_dis":"",s+=i._css_hover&&!i._css_dis?"_hover":"",i.className=s,i=null},this._minutesInterval=5,this._initSelector=function(t,e){if(this._selCover||(this._selCover=document.createElement("DIV"),this._selCover.className="dhtmlxcalendar_selector_cover",this.base.firstChild.appendChild(this._selCover)),this._sel||(this._sel=document.createElement("DIV"),this._sel.className="dhtmlxcalendar_selector_obj",this.base.firstChild.appendChild(this._sel),this._sel.appendChild(document.createElement("TABLE")),this._sel.firstChild.className="dhtmlxcalendar_selector_table",this._sel.firstChild.cellSpacing=0,this._sel.firstChild.cellPadding=0,this._sel.firstChild.border=0,this._sel.firstChild.appendChild(document.createElement("TBODY")),this._sel.firstChild.firstChild.appendChild(document.createElement("TR")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.appendChild(document.createElement("TD")),this._sel.firstChild.firstChild.firstChild.childNodes[0].className="dhtmlxcalendar_selector_cell_left",this._sel.firstChild.firstChild.firstChild.childNodes[1].className="dhtmlxcalendar_selector_cell_middle",this._sel.firstChild.firstChild.firstChild.childNodes[2].className="dhtmlxcalendar_selector_cell_right",this._sel.firstChild.firstChild.firstChild.childNodes[0].innerHTML="&nbsp;",this._sel.firstChild.firstChild.firstChild.childNodes[2].innerHTML="&nbsp;",this.conf.touch||(this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_left dhtmlxcalendar_selector_cell_left_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[0].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_left"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseover=function(){this.className="dhtmlxcalendar_selector_cell_right dhtmlxcalendar_selector_cell_right_hover"},this._sel.firstChild.firstChild.firstChild.childNodes[2].onmouseout=function(){this.className="dhtmlxcalendar_selector_cell_right"},this._sel.onmouseover=function(t){t=t||event;var e=t.target||t.srcElement;e._cell===!0&&(r._selHover!=e&&r._clearSelHover(),null!=String(e.className).match(/^\s{0,}dhtmlxcalendar_selector_cell\s{0,}$/gi)&&(e.className+=" dhtmlxcalendar_selector_cell_hover",r._selHover=e))},this._sel.onmouseout=function(){r._clearSelHover()}),this._sel.firstChild.firstChild.firstChild.childNodes[0][this.conf.touch?"ontouchstart":"onclick"]=function(t){t=t||event,t.cancelBubble=!0,r._scrollYears(-1)},this._sel.firstChild.firstChild.firstChild.childNodes[2][this.conf.touch?"ontouchstart":"onclick"]=function(t){t=t||event,t.cancelBubble=!0,r._scrollYears(1)},this._sel._ta={},this._selHover=null,this._sel.appendChild(document.createElement("DIV")),this._sel.lastChild.className="dhtmlxcalendar_selector_obj_arrow"),1!=this._sel._ta[t]){if("month"==t){this._msCells={},this.msCont=document.createElement("DIV"),this.msCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.msCont);for(var i=0,s=0;4>s;s++){var n=document.createElement("UL");n.className="dhtmlxcalendar_selector_line",this.msCont.appendChild(n);for(var o=0;3>o;o++){var l=document.createElement("LI");l.innerHTML=this.langData[this.lang].monthesSNames[i],l.className="dhtmlxcalendar_selector_cell",n.appendChild(l),l._month=i,l._cell=!0,this._msCells[i++]=l}}this.msCont[this.conf.touch?"ontouchstart":"onclick"]=function(t){t=t||event,t.cancelBubble=!0;var e=t.target||t.srcElement;null!=e._month&&(r._hideSelector(),r._updateActiveMonth(),r._drawMonth(new Date(r._activeMonth.getFullYear(),e._month,1,0,0,0,0)),r._doOnSelectorChange())}}if("year"==t){this._ysCells={},this.ysCont=document.createElement("DIV"),this.ysCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.ysCont);for(var s=0;4>s;s++){var n=document.createElement("UL");n.className="dhtmlxcalendar_selector_line",this.ysCont.appendChild(n);for(var o=0;3>o;o++){var l=document.createElement("LI");l.className="dhtmlxcalendar_selector_cell",l._cell=!0,n.appendChild(l)}}this.ysCont[this.conf.touch?"ontouchstart":"onclick"]=function(t){t=t||event,t.cancelBubble=!0;var e=t.target||t.srcElement;null!=e._year&&(r._hideSelector(),r._drawMonth(new Date(e._year,r._activeMonth.getMonth(),1,0,0,0,0)),r._doOnSelectorChange())}}if("hours"==t){this._hsCells={},this.hsCont=document.createElement("DIV"),this.hsCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.hsCont);for(var i=0,s=0;4>s;s++){var n=document.createElement("UL");n.className="dhtmlxcalendar_selector_line",this.hsCont.appendChild(n);for(var o=0;6>o;o++){var l=document.createElement("LI");l.innerHTML=this._fixLength(i,2),l.className="dhtmlxcalendar_selector_cell",n.appendChild(l),l._hours=i,l._cell=!0,this._hsCells[i++]=l}}this.hsCont[this.conf.touch?"ontouchstart":"onclick"]=function(t){t=t||event,t.cancelBubble=!0;var e=t.target||t.srcElement;null!=e._hours&&(r._hideSelector(),r._activeDate.setHours(e._hours),r._updateActiveHours(),r._updateVisibleHours(),r._doOnSelectorChange())}}if("minutes"==t){var a=4,h=3,d=2;1==this._minutesInterval&&(1==this._selectorMode?(a=2,h=3,d=1):(a=2,h=5,d=1,e+="5")),10==this._minutesInterval&&(a=2),15==this._minutesInterval&&(a=1,h=4,e+="4"),this._rsCells={},this.rsCont=document.createElement("DIV"),this.rsCont.className="dhtmlxcalendar_area_"+e,this._sel.firstChild.firstChild.firstChild.childNodes[1].appendChild(this.rsCont);for(var i=0,s=0;a>s;s++){var n=document.createElement("UL");n.className="dhtmlxcalendar_selector_line",this.rsCont.appendChild(n);for(var o=0;h>o;o++){var l=document.createElement("LI");l.innerHTML=d>1?this._fixLength(i,d):i,l.className="dhtmlxcalendar_selector_cell",n.appendChild(l),l._minutes=i,l._cell=!0,this._rsCells[i]=l,i+=this._minutesInterval}}this.rsCont[this.conf.touch?"ontouchstart":"onclick"]=function(t){t=t||event,t.cancelBubble=!0;var e=t.target||t.srcElement;if(null!=e._minutes){if(1==r._minutesInterval){var i=r.getFormatedDate("%i");if(i=1==r._selectorMode?e._minutes.toString()+i.charAt(1):i.charAt(0)+e._minutes.toString(),r._activeDate.setMinutes(Number(i)),r._hideSelector(),1==r._selectorMode)return r._updateVisibleMinutes(!0),r._selectorMode=2,r._showSelector("minutes",r._sel._x,r._sel._y,"selector_minutes",!0),void r._updateActiveMinutes();r._selectorMode=1}else r._hideSelector(),r._activeDate.setMinutes(e._minutes),r._updateActiveMinutes();r._updateVisibleMinutes(),r._doOnSelectorChange()}}}this._sel._ta[t]=!0}},this._showSelector=function(t,e,i,s,n){if(n===!0&&null!=this._sel&&this._isSelectorVisible()&&t==this._sel._t)return void this._hideSelector();"dhx_terrace"==this.conf.skin&&(e+=12),this._sel&&this._sel._ta[t]||this._initSelector(t,s),t!=this._sel._t&&"minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i")),this._sel._x=e,this._sel._y=i,this._sel.style.visibility="hidden",this._sel.style.display="",this._selCover.style.width=this.base.offsetWidth-2+"px",this._selCover.style.top=this.contMonth.offsetHeight+"px",this._selCover.style.height=this.contDates.offsetHeight+this.contDays.offsetHeight-1+"px",this._selCover.style.display="",this._sel._t=t,this._sel.className="dhtmlxcalendar_selector_obj dhtmlxcalendar_"+s,this._sel.childNodes[0].firstChild.firstChild.childNodes[0].style.display=this._sel.childNodes[0].firstChild.firstChild.childNodes[2].style.display="year"==t?"":"none";var o=Math.max(0,e-Math.round(this._sel.offsetWidth/2));o+this._sel.offsetWidth>this._sel.parentNode.offsetWidth&&(o=this._sel.parentNode.offsetWidth-this._sel.offsetWidth),this._sel.style.left=o+"px",this._sel.style.top="hours"==t||"minutes"==t?i-this._sel.offsetHeight+"px":i+"px",this._sel.childNodes[1].style.width=this._sel.childNodes[0].offsetWidth+"px",this._sel.style.visibility="visible",this._doOnSelectorShow(t)},this._doOnSelectorShow=function(t){"month"==t&&this._updateActiveMonth(),"year"==t&&this._updateYearsList(this._activeMonth),"hours"==t&&this._updateActiveHours(),"minutes"==t&&this._updateActiveMinutes()},this._hideSelector=function(){this._sel&&(this._sel.style.display="none",this._sel.style.visible="hidden",this._selCover.style.display="none","minutes"==this._sel._t&&1==this._minutesInterval&&(this.contTime.firstChild.firstChild.childNodes[3].innerHTML=this.getFormatedDate("%i"),this._unloadSelector("minutes")))},this._isSelectorVisible=function(){return this._sel?"none"!=this._sel.style.display:!1},this._doOnSelectorChange=function(t){this.callEvent("onChange",[new Date(this._activeMonth.getFullYear(),this._activeMonth.getMonth(),this._activeDate.getDate(),this._activeDate.getHours(),this._activeDate.getMinutes(),this._activeDate.getSeconds()),t===!0])},this._clearSelHover=function(){this._selHover&&(this._selHover.className=String(this._selHover.className.replace(/dhtmlxcalendar_selector_cell_hover/gi,"")),this._selHover=null)},this._unloadSelector=function(t){if(this._sel&&this._sel._ta[t]){if("month"==t){this.msCont.onclick=this.msCont.ontouchstart=null,this._msActive=null;for(var e in this._msCells)this._msCells[e]._cell=null,this._msCells[e]._month=null,this._msCells[e].parentNode.removeChild(this._msCells[e]),this._msCells[e]=null;for(this._msCells=null;this.msCont.childNodes.length>0;)this.msCont.removeChild(this.msCont.lastChild);this.msCont.parentNode.removeChild(this.msCont),this.msCont=null}if("year"==t){this.ysCont.onclick=this.ysCont.ontouchstart=null;for(var e in this._ysCells)this._ysCells[e]._cell=null,this._ysCells[e]._year=null,this._ysCells[e].parentNode.removeChild(this._ysCells[e]),this._ysCells[e]=null;for(this._ysCells=null;this.ysCont.childNodes.length>0;)this.ysCont.removeChild(this.ysCont.lastChild);this.ysCont.parentNode.removeChild(this.ysCont),this.ysCont=null}if("hours"==t){this.hsCont.onclick=this.hsCont.ontouchstart=null,this._hsActive=null;for(var e in this._hsCells)this._hsCells[e]._cell=null,this._hsCells[e]._hours=null,this._hsCells[e].parentNode.removeChild(this._hsCells[e]),this._hsCells[e]=null;for(this._hsCells=null;this.hsCont.childNodes.length>0;)this.hsCont.removeChild(this.hsCont.lastChild);this.hsCont.parentNode.removeChild(this.hsCont),this.hsCont=null}if("minutes"==t){this.rsCont.onclick=this.rsCont.ontouchstart=null,this._rsActive=null;for(var e in this._rsCells)this._rsCells[e]._cell=null,this._rsCells[e]._minutes=null,this._rsCells[e].parentNode.removeChild(this._rsCells[e]),this._rsCells[e]=null;for(this._rsCells=null;this.rsCont.childNodes.length>0;)this.rsCont.removeChild(this.rsCont.lastChild);this.rsCont.parentNode.removeChild(this.rsCont),this.rsCont=null}this._sel._ta[t]=null}},this.setMinutesInterval=function(t){(1==t||5==t||10==t||15==t)&&(this._minutesInterval=t,this._unloadSelector("minutes"))},this._updateActiveMonth=function(){"undefined"!=typeof this._msActive&&"undefined"!=typeof this._msCells[this._msActive]&&(this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell"),this._msActive=this._activeMonth.getMonth(),this._msCells[this._msActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateActiveYear=function(){var t=this._activeMonth.getFullYear();this._ysCells[t]&&(this._ysCells[t].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")},this._updateYearsList=function(t){for(var e in this._ysCells)this._ysCells[e]=null,delete this._ysCells[e];for(var i=12*Math.floor(t.getFullYear()/12),s=0;4>s;s++)for(var n=0;3>n;n++)this.ysCont.childNodes[s].childNodes[n].innerHTML=i,this.ysCont.childNodes[s].childNodes[n]._year=i,this.ysCont.childNodes[s].childNodes[n].className="dhtmlxcalendar_selector_cell",this._ysCells[i++]=this.ysCont.childNodes[s].childNodes[n];this._updateActiveYear()},this._scrollYears=function(t){var e=(0>t?this.ysCont.firstChild.firstChild._year:this.ysCont.lastChild.lastChild._year)+t,i=new Date(e,this._activeMonth.getMonth(),1,0,0,0,0);
this._updateYearsList(i)},this._updateActiveHours=function(){"undefined"!=typeof this._hsActive&&"undefined"!=typeof this._hsCells[this._hsActive]&&(this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell"),this._hsActive=this._activeDate.getHours(),this._hsCells[this._hsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active"},this._updateVisibleHours=function(){this.contTime.firstChild.firstChild.childNodes[1].innerHTML=this._fixLength(this._activeDate.getHours(),2)},this._updateActiveMinutes=function(){null!=this._rsActive&&"undefined"!=typeof this._rsActive&&"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell"),this._rsActive=1==this._minutesInterval?this.getFormatedDate("%i").toString().charAt(1==this._selectorMode?0:1):this._activeDate.getMinutes(),"undefined"!=typeof this._rsCells[this._rsActive]&&(this._rsCells[this._rsActive].className="dhtmlxcalendar_selector_cell dhtmlxcalendar_selector_cell_active")},this._updateVisibleMinutes=function(t){var e=this._fixLength(this._activeDate.getMinutes(),2).toString();1==t&&(e=e.charAt(0)+"<span class='dhtmlxcalendar_selected_date'>"+e.charAt(1)+"</span>"),this.contTime.firstChild.firstChild.childNodes[3].innerHTML=e,1==t&&(this.contTime.firstChild.firstChild.childNodes[3].lastChild._par=!0)},this._fixLength=function(t,e){for(;String(t).length<e;)t="0"+String(t);return t},this._dateFormat="",this._dateFormatRE=null,this.setDateFormat=function(t){var e={};if(null!=this._strToDate)for(var i in this.i)if(null!=this.i[i].input&&this.i[i].input.value.length>0){var s=this._strToDate(this.i[i].input.value,this._dateFormat||this.langData[this.lang].dateformat||"%Y-%m-%d");s instanceof Date&&(e[i]=s)}this._dateFormat=t;var n=String(this._dateFormat).replace(/%[a-zA-Z]+/g,function(t){var e=t.replace(/%/,"");switch(e){case"n":case"h":case"j":case"g":case"G":return"\\d{1,2}";case"m":case"d":case"H":case"i":case"s":case"y":return"\\d{2}";case"Y":return"\\d{4}";case"M":return"("+r.langData[r.lang].monthesSNames.join("|").toLowerCase()+"){1,}";case"F":return"("+r.langData[r.lang].monthesFNames.join("|").toLowerCase()+"){1,}";case"D":return"[a-z]{2}";case"a":case"A":return"AM|PM"}return t});this._dateFormatRE=new RegExp(n,"i");for(var i in e)this.i[i].input.value=this._dateToStr(e[i]);e=null},this.setDateFormat(this.langData[this.lang].dateformat||"%Y-%m-%d"),this._getInd=function(t,e){for(var i=0;i<e.length;i++)if(e[i].toLowerCase()==t)return i;return-1},this._updateDateStr=function(t){if(this._dateFormatRE&&t.match(this._dateFormatRE)&&t!=this.getFormatedDate()){var e=this._strToDate(t);if(e instanceof Date){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds())]))return void(null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate()));this._nullDate=!1,this._activeDate=e,this._drawMonth(this._nullDate?new Date:this._activeDate),this._updateVisibleMinutes(),this._updateVisibleHours(),this._sel&&this._isSelectorVisible()&&this._doOnSelectorShow(this._sel._t),this._doOnSelectorChange(!0)}}},this.showMonth=function(t){"string"==typeof t&&(t=this._strToDate(t)),t instanceof Date&&this._drawMonth(t)},this.setFormatedDate=function(t,e,i,s){var n=this._strToDate(e,t);return s?n:void this.setDate(n)},this.getFormatedDate=function(t,e){if(!(e&&e instanceof Date)){if(this._nullDate)return"";e=new Date(this._activeDate)}return this._dateToStr(e,t)},this.getWeekNumber=function(t){if("string"==typeof t&&(t=this._strToDate(t)),!(t instanceof Date))return"Invalid Date";"undefined"==typeof this._ftDay&&(this._ftDay=4);var e=this._wStart,i=4,s=new Date(t.getFullYear(),0,1,0,0,0,0),n=s.getDay();0==n&&(n=7),e>i&&(i+=7,n+=7);var o=0;n>=e&&i>=n||(o=1);var l=n-e,r=new Date(t.getFullYear(),0,1-l+7*o,0,0,0,0),a=6048e5,h=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,0,0,0,0),d=Math.ceil((h.getTime()-r.getTime())/a);return d},this.showWeekNumbers=function(){this.base.firstChild.className="dhtmlxcalendar_wn"},this.hideWeekNumbers=function(){this.base.firstChild.className=""},this.show=function(t){if(!t&&this._hasParent)return void this._show();if("object"==typeof t&&"undefined"!=typeof t._dhtmlxcalendar_uid&&this.i[t._dhtmlxcalendar_uid]==t)return void this._show(t._dhtmlxcalendar_uid);if("undefined"==typeof t)for(var e in this.i)t||(t=e);t&&this._show(t)},this.hide=function(){this._isVisible()&&this._hide()},this.isVisible=function(){return this._isVisible()},this._activeInp=null,this.pos="bottom",this.setPosition=function(t,e){this._px=null,this._py=null,"right"==t||"bottom"==t?this.pos=t:(this.pos="int","undefined"==typeof t||isNaN(t)||(this.base.style.left=t+"px",this._px=t),"undefined"==typeof e||isNaN(e)||(this.base.style.top=e+"px",this._py=e),this._ifrSize())},this._show=function(t,e){if(e===!0&&this._activeInp==t&&this._isVisible())return void this._hide();if(this.base.style.visibility="hidden",this.base.style.display="",t){-1==this.base.className.indexOf("dhtmlxcalendar_in_input")&&(this.base.className+=" dhtmlxcalendar_in_input");var i=this.i[t].input||this.i[t].button,s=-1!=navigator.appVersion.indexOf("MSIE"),n=Math.max((s?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),o=n+(s?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0,document.body.clientHeight||0):window.innerHeight);if("right"==this.pos)this.base.style.left=this._getLeft(i)+i.offsetWidth+"px",this.base.style.top=Math.min(this._getTop(i),o-this.base.offsetHeight)+"px";else if("bottom"==this.pos){var l=this._getTop(i)+i.offsetHeight+1;l+this.base.offsetHeight>o&&(l=this._getTop(i)-this.base.offsetHeight),this.base.style.left=this._getLeft(i)+"px",this.base.style.top=l+"px"}else this.base.style.left=(this._px||0)+"px",this.base.style.top=(this._py||0)+"px";this._activeInp=t,i=null}else this._px&&this._py?(this.base.style.left=this._px+"px",this.base.style.top=this._py+"px"):(this.base.style.left="0px",this.base.style.top="0px");this._hideSelector(),this.base.style.visibility="visible",this.base.style.zIndex=window.dhx4.zim.reserve(this.conf.zi),this._ifrSize(),this._ifr&&(this._ifr.style.display=""),this.callEvent("onShow",[])},this._hide=function(){this._hideSelector(),this.base.style.display="none",window.dhx4.zim.clear(this.conf.zi),this.base.className.indexOf("dhtmlxcalendar_in_input")>=0&&(this.base.className=this.base.className.replace(/\s{0,}dhtmlxcalendar_in_input/gi,"")),this._activeInp=null,this._ifr&&(this._ifr.style.display="none"),this.callEvent("onHide",[])},this._isVisible=function(){return"none"!=this.base.style.display},this._getLeft=function(t){return this._posGetOffset(t).left},this._getTop=function(t){return this._posGetOffset(t).top},this._posGetOffsetSum=function(t){for(var e=0,i=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}},this._posGetOffsetRect=function(t){var e=t.getBoundingClientRect(),i=document.body,s=document.documentElement,n=window.pageYOffset||s.scrollTop||i.scrollTop,o=window.pageXOffset||s.scrollLeft||i.scrollLeft,l=s.clientTop||i.clientTop||0,r=s.clientLeft||i.clientLeft||0,a=e.top+n-l,h=e.left+o-r;return{top:Math.round(a),left:Math.round(h)}},this._posGetOffset=function(t){return this[t.getBoundingClientRect?"_posGetOffsetRect":"_posGetOffsetSum"](t)},this._rangeActive=!1,this._rangeFrom=null,this._rangeTo=null,this._rangeSet={},this.setInsensitiveDays=function(t){for(var e=this._extractDates(t),i=0;i<e.length;i++)this._rangeSet[new Date(e[i].getFullYear(),e[i].getMonth(),e[i].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)},this.clearInsensitiveDays=function(){this._clearRangeSet(),this._drawMonth(this._activeMonth)},this._holidays={},this.setHolidays=function(t){if(null==t)this._clearHolidays();else if(null!=t)for(var e=this._extractDates(t),i=0;i<e.length;i++)this._holidays[new Date(e[i].getFullYear(),e[i].getMonth(),e[i].getDate(),0,0,0,0).getTime()]=!0;this._drawMonth(this._activeMonth)},this._extractDates=function(t){("string"==typeof t||t instanceof Date)&&(t=[t]);for(var e=[],i=0;i<t.length;i++)if("string"==typeof t[i])for(var s=t[i].split(","),n=0;n<s.length;n++)e.push(this._strToDate(s[n]));else t[i]instanceof Date&&e.push(t[i]);return e},this._clearRange=function(){this._rangeActive=!1,this._rangeType=null,this._rangeFrom=null,this._rangeTo=null},this._clearRangeSet=function(){for(var t in this._rangeSet)this._rangeSet[t]=null,delete this._rangeSet[t]},this._clearHolidays=function(){for(var t in this._holidays)this._holidays[t]=null,delete this._holidays[t]},this._isOutOfRange=function(t){if(1==this._rangeSet[t])return!0;if(this._rangeActive){if("in"==this._rangeType&&(t<this._rangeFrom||t>this._rangeTo))return!0;if("out"==this._rangeType&&t>=this._rangeFrom&&t<=this._rangeTo)return!0;if("from"==this._rangeType&&t<this._rangeFrom)return!0;if("to"==this._rangeType&&t>this._rangeTo)return!0}var e=new Date(t);return this._rangeWeek&&this._rangeWeekData[e.getDay()]===!0?!0:this._rangeMonth&&this._rangeMonthData[e.getDate()]===!0?!0:this._rangeYear&&this._rangeYearData[e.getMonth()+"_"+e.getDate()]===!0?!0:!1},this.clearSensitiveRange=function(){this._clearRange(),this._drawMonth(this._activeMonth)},this.setSensitiveRange=function(t,e,i){var s=!1;if(null!=t&&null!=e){if(t instanceof Date||(t=this._strToDate(t)),e instanceof Date||(e=this._strToDate(e)),t.getTime()>e.getTime())return;this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="in",s=!0}s||null==t||null!=e||(t instanceof Date||(t=this._strToDate(t)),this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),this._rangeTo=null,i===!0&&this._rangeFrom++,this._rangeActive=!0,this._rangeType="from",s=!0),s||null!=t||null==e||(e instanceof Date||(e=this._strToDate(e)),this._rangeFrom=null,this._rangeTo=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime(),i===!0&&this._rangeTo--,this._rangeActive=!0,this._rangeType="to",s=!0),s&&this._drawMonth(this._activeMonth)},this.setInsensitiveRange=function(t,e){if(null!=t&&null!=e){if(t instanceof Date||(t=this._strToDate(t)),e instanceof Date||(e=this._strToDate(e)),t.getTime()>e.getTime())return;return this._rangeFrom=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),this._rangeTo=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime(),this._rangeActive=!0,this._rangeType="out",void this._drawMonth(this._activeMonth)}return null!=t&&null==e?void this.setSensitiveRange(null,t,!0):null==t&&null!=e?void this.setSensitiveRange(e,null,!0):void 0},this.disableDays=function(t,e){if("week"==t){"object"!=typeof e&&"undefined"==typeof e.length&&(e=[e]),this._rangeWeekData||(this._rangeWeekData={});for(var i in this._rangeWeekData)this._rangeWeekData[i]=!1,delete this._rangeWeekData[i];for(var s=0;s<e.length;s++)this._rangeWeekData[e[s]]=!0,7==e[s]&&(this._rangeWeekData[0]=!0);this._rangeWeek=!0}if("month"==t){"object"!=typeof e&&"undefined"==typeof e.length&&(e=[e]),this._rangeMonthData||(this._rangeMonthData={});for(var i in this._rangeMonthData)this._rangeMonthData[i]=!1,delete this._rangeMonthData[i];for(var s=0;s<e.length;s++)this._rangeMonthData[e[s]]=!0;this._rangeMonth=!0}if("year"==t){var n=this._extractDates(e);this._rangeYearData||(this._rangeYearData={});for(var i in this._rangeYearData)this._rangeYearData[i]=!1,delete this._rangeYearData[i];for(var s=0;s<n.length;s++)this._rangeYearData[n[s].getMonth()+"_"+n[s].getDate()]=!0;this._rangeYear=!0}this._drawMonth(this._activeMonth)},this.enableDays=function(t){"week"==t&&(this._rangeWeek=!1),"month"==t&&(this._rangeMonth=!1),"year"==t&&(this._rangeYear=!1),this._drawMonth(this._activeMonth)},this._tipData={},this._tipTM=null,this._tipTMTime=400,this._tipEvs=!1,this._tipPopup=null,this._tipCellDate=null,this._tipCellDim=null,this.setTooltip=function(t,e,i,s){for(var n=this._extractDates(t),o=0;o<n.length;o++){var l=new Date(n[o].getFullYear(),n[o].getMonth(),n[o].getDate(),0,0,0,0).getTime();this._tipData[l]={text:e,showIcon:i,usePopup:s}}this._drawMonth(this._activeMonth)},this.clearTooltip=function(t){for(var e=this._extractDates(t),i=0;i<e.length;i++){var s=new Date(e[i].getFullYear(),e[i].getMonth(),e[i].getDate(),0,0,0,0).getTime();this._tipData[s]=null,delete this._tipData[s]}this._drawMonth(this._activeMonth)},this._initTooltipPopup=function(){this._tipEvs||(this.attachEvent("onMouseOver",function(t){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime();null!=this._tipData[e]&&(this._tipTM&&window.clearTimeout(this._tipTM),this._tipCellDate=t,this._tipCellDim=this.getCellDimension(t),this._tipText=this._tipData[e].text,this._tipTM=window.setTimeout(this._showTooltipPopup,this._tipTMTime))}),this.attachEvent("onMouseOut",this._hideTooltipPopup),this._tipEvs=!0)},this._showTooltipPopup=function(){r._tipPopup||(r._tipPopup=new dhtmlXPopup({mode:"top"})),r._tipPopup.attachHTML(r._tipText),r._tipPopup.show(r._tipCellDim.x,r._tipCellDim.y,r._tipCellDim.w,r._tipCellDim.h),r.callEvent("onPopupShow",[r._tipCellDate])},this._hideTooltipPopup=function(){this._tipTM&&window.clearTimeout(this._tipTM),null!=this._tipPopup&&this._tipPopup.isVisible()&&(this._tipPopup.hide(),this.callEvent("onPopupHide",[this._tipCellDate]))},this.getPopup=function(){return this._tipPopup},this.getCellDimension=function(t){if("string"==typeof t&&(t=this._strToDate(t)),!(t instanceof Date))return null;for(var e=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime(),i=null,s=0;s<this.contDates.childNodes.length;s++)for(var n=0;n<this.contDates.childNodes[s].childNodes.length;n++){var o=this.contDates.childNodes[s].childNodes[n];null!=o._date&&o._date.getTime()==e&&(i={x:this._getLeft(o),y:this._getTop(o),w:o.offsetWidth,h:o.offsetHeight}),o=null}return i},this._updateFromInput=function(t){if(this._nullInInput&&0==t.value.replace(/\s/g,"").length){if(this.checkEvent("onBeforeChange")&&!this.callEvent("onBeforeChange",[null]))return void(null!=this.i&&null!=this._activeInp&&null!=this.i[this._activeInp]&&null!=this.i[this._activeInp].input&&(this.i[this._activeInp].input.value=this.getFormatedDate()));this.setDate(null)}else this._updateDateStr(t.value);t=null},this._doOnClick=function(t){t=t||event;var e=t.target||t.srcElement;return e._dhtmlxcalendar_uid&&e._dhtmlxcalendar_uid!=r._activeInp&&r._isVisible()&&r._activeInp?void r._hide():void(e._dhtmlxcalendar_uid&&r.i[e._dhtmlxcalendar_uid]||(r._isSelectorVisible()?r._hideSelector():!r._hasParent&&r._isVisible()&&r._hide()))},this._doOnKeyDown=function(t){t=t||event,(27==t.keyCode||13==t.keyCode)&&(r._isSelectorVisible()?r._hideSelector():r._isVisible()&&!r._hasParent&&r._hide())},this._doOnInpClick=function(t){t=t||event;var e=t.target||t.srcElement;e._dhtmlxcalendar_uid&&(r._listenerEnabled||r._updateFromInput(e),r._show(e._dhtmlxcalendar_uid,!0))},this._doOnInpKeyUp=function(t){t=t||event;var e=t.target||t.srcElement;13!=t.keyCode&&e._dhtmlxcalendar_uid&&(r._listenerEnabled||r._updateFromInput(e))},this._doOnBtnClick=function(t){t=t||event;var e=t.target||t.srcElement;e._dhtmlxcalendar_uid&&(null!=r.i[e._dhtmlxcalendar_uid].input&&r._updateFromInput(r.i[e._dhtmlxcalendar_uid].input),r._show(e._dhtmlxcalendar_uid,!0))},this._doOnUnload=function(){r&&r.unload&&r.unload()},"function"==typeof window.addEventListener?(document.body.addEventListener(this.conf.touch?"touchstart":"click",r._doOnClick,!1),window.addEventListener("keydown",r._doOnKeyDown,!1),window.addEventListener("unload",r._doOnUnload,!1)):(document.body.attachEvent("onclick",r._doOnClick),document.body.attachEvent("onkeydown",r._doOnKeyDown),window.attachEvent("onunload",r._doOnUnload)),this.attachObj=function(t){var e=window.dhx4.newId();return"string"==typeof t?this.i[e]={input:document.getElementById(t)}:"undefined"!=typeof t.tagName?this.i[e]={input:t}:"object"!=typeof t||null==t.input&&null==t.button||(this.i[e]={},null!=t.input&&(this.i[e].input="string"==typeof t.input?document.getElementById(t.input):t.input),null!=t.button&&(this.i[e].button="string"==typeof t.button?document.getElementById(t.button):t.button)),this._attachEventsToObject(e),e},this.detachObj=function(t){var e=null;if(null!=this.i[t]?e=t:"string"==typeof t?(t=document.getElementById(t),e=t._dhtmlxcalendar_uid):"undefined"!=typeof t.tagName?e=t._dhtmlxcalendar_uid:"object"!=typeof t||null==t.input&&null==t.button||(null==e&&null!=t.input&&(e=("string"==typeof t.input?document.getElementById(t.input):t.input)._dhtmlxcalendar_uid),null==e&&null!=t.button&&(e=("string"==typeof t.button?document.getElementById(t.button):t.button)._dhtmlxcalendar_uid)),null!=e&&null!=this.i[e]){this._detachEventsFromObject(e);for(var i in this.i[i])this.i[e][i]._dhtmlxcalendar_uid=null,this.i[e][i]=null,delete this.i[e][i];return this.i[e]=null,delete this.i[e],!0}return!1},this._attachEventsToObject=function(t){null!=this.i[t].button?(this.i[t].button._dhtmlxcalendar_uid=t,"function"==typeof window.addEventListener?this.i[t].button.addEventListener(this.conf.touch?"touchstart":"click",r._doOnBtnClick,!1):this.i[t].button.attachEvent("onclick",r._doOnBtnClick)):null!=this.i[t].input&&(this.i[t].input._dhtmlxcalendar_uid=t,"function"==typeof window.addEventListener?(this.i[t].input.addEventListener(this.conf.touch?"touchstart":"click",r._doOnInpClick,!1),this.i[t].input.addEventListener("keyup",r._doOnInpKeyUp,!1)):(this.i[t].input.attachEvent("onclick",r._doOnInpClick),this.i[t].input.attachEvent("onkeyup",r._doOnInpKeyUp)))},this._detachEventsFromObject=function(t){null!=this.i[t].button?"function"==typeof window.addEventListener?this.i[t].button.removeEventListener(this.conf.touch?"touchstart":"click",r._doOnBtnClick,!1):this.i[t].button.detachEvent("onclick",r._doOnBtnClick):null!=this.i[t].input&&("function"==typeof window.addEventListener?(this.i[t].input.removeEventListener(this.conf.touch?"touchstart":"click",r._doOnInpClick,!1),this.i[t].input.removeEventListener("keyup",r._doOnInpKeyUp,!1)):(this.i[t].input.detachEvent("onclick",r._doOnInpClick),this.i[t].input.detachEvent("onkeyup",r._doOnInpKeyUp)))},this.enableListener=function(t){t&&("function"==typeof window.addEventListener?(t.addEventListener("focus",r._listenerEvFocus,!1),t.addEventListener("blur",r._listenerEvBlur,!1)):(t.attachEvent("onfocus",r._listenerEvFocus),t.attachEvent("onblur",r._listenerEvBlur)),t=null)},this.disableListener=function(t){t&&(t._f0=!1,this._tmListener&&window.clearTimeout(this._tmListener),"function"==typeof window.addEventListener?(t.removeEventListener("focus",r._listenerEvFocus,!1),t.removeEventListener("blur",r._listenerEvBlur,!1)):(t.detachEvent("onfocus",r._listenerEvFocus),t.detachEvent("onblur",r._listenerEvBlur)),t=null)},this._startListener=function(t){this._tmListener&&window.clearTimeout(this._tmListener),"undefined"==typeof t._v1&&(t._v1=t.value),t._v1!=t.value&&(this._updateFromInput(t),t._v1=t.value),t._f0&&(this._tmListener=window.setTimeout(function(){r._startListener(t)},100))},this._listenerEvFocus=function(t){t=t||event;var e=t.target||t.srcElement;e._f0=!0,r._startListener(e),e=null},this._listenerEvBlur=function(t){t=t||event;var e=t.target||t.srcElement;e._f0=!1,e=null};for(var h in this.i)this._attachEventsToObject(h);return window.dhx4._eventable(this),this._evOnArrowClick=function(t){return this.callEvent("onArrowClick",t)},this._evOnClick=function(t){return this.callEvent("onClick",t)},this._evOnMouseOut=function(t){return this.callEvent("onMouseOut",t)},this._evOnMouseOver=function(t){return this.callEvent("onMouseOver",t)},this.unload=function(){this._activeDate=null,this._activeDateCell=null,this._activeInp=null,this._activeMonth=null,this._dateFormat=null,this._dateFormatRE=null,this._lastHover=null,this._tmListener&&window.clearTimeout(this._tmListener),this._tmListener=null,"function"==typeof window.addEventListener?(document.body.removeEventListener(this.conf.touch?"touchstart":"click",r._doOnClick,!1),window.removeEventListener("keydown",r._doOnKeyDown,!1),window.removeEventListener("unload",r._doOnUnload,!1)):(document.body.detachEvent("onclick",r._doOnClick),document.body.detachEvent("onkeydown",r._doOnKeyDown),window.detachEvent("onunload",r._doOnKeyDown)),this._doOnClick=null,this._doOnKeyDown=null,this._doOnUnload=null;for(var t in this.i)this.i[t]._dhtmlxcalendar_uid=null,this._detachEventsFromObject(t),this.disableListener(this.i[t].input),this.i[t]=null,delete this.i[t];for(this.i=null,this._doOnInpClick=null,this._doOnInpKeyUp=null,window.dhx4._eventable(this,"clear"),this.contMonth.onselectstart=null,this.contMonth.firstChild.firstChild.onclick=null,this.contMonth.firstChild.firstChild.ontouchstart=null,this.contMonth.firstChild.firstChild.firstChild.onmouseover=null,this.contMonth.firstChild.firstChild.firstChild.onmouseout=null,this.contMonth.firstChild.firstChild.lastChild.onmouseover=null,this.contMonth.firstChild.firstChild.lastChild.onmouseout=null;this.contMonth.firstChild.firstChild.childNodes.length>0;)this.contMonth.firstChild.firstChild.removeChild(this.contMonth.firstChild.firstChild.lastChild);for(this.contMonth.firstChild.removeChild(this.contMonth.firstChild.firstChild),this.contMonth.removeChild(this.contMonth.firstChild),this.contMonth.parentNode.removeChild(this.contMonth),this.contMonth=null;this.contDays.firstChild.childNodes.length>0;)this.contDays.firstChild.removeChild(this.contDays.firstChild.lastChild);for(this.contDays.removeChild(this.contDays.firstChild),this.contDays.parentNode.removeChild(this.contDays),this.contDays=null,this.contDates.onclick=null,this.contDates.ontouchstart=null,this.contDates.onmouseover=null,this.contDates.onmouseout=null;this.contDates.childNodes.length>0;){for(;this.contDates.lastChild.childNodes.length>0;)this.contDates.lastChild.lastChild._css_date=null,this.contDates.lastChild.lastChild._css_month=null,this.contDates.lastChild.lastChild._css_weekend=null,this.contDates.lastChild.lastChild._css_hover=null,this.contDates.lastChild.lastChild._date=null,this.contDates.lastChild.lastChild._q=null,this.contDates.lastChild.lastChild._w=null,this.contDates.lastChild.removeChild(this.contDates.lastChild.lastChild);this.contDates.removeChild(this.contDates.lastChild)}for(this.contDates.parentNode.removeChild(this.contDates),this.contDates=null,this.contTime.firstChild.firstChild.onclick=null,this.contTime.firstChild.firstChild.ontouchstart=null;this.contTime.firstChild.firstChild.childNodes.length>0;)this.contTime.firstChild.firstChild.removeChild(this.contTime.firstChild.firstChild.lastChild);if(this.contTime.firstChild.removeChild(this.contTime.firstChild.firstChild),this.contTime.removeChild(this.contTime.firstChild),this.contTime.parentNode.removeChild(this.contTime),this.contTime=null,this._lastHover=null,this._unloadSelector("month"),this._unloadSelector("year"),this._unloadSelector("hours"),this._unloadSelector("minutes"),this._selCover&&(this._selCover.parentNode.removeChild(this._selCover),this._selCover=null),this._sel){for(var t in this._sel._ta)this._sel._ta[t]=null;for(this._sel._ta=null,this._sel._t=null,this._sel.onmouseover=null,this._sel.onmouseout=null;this._sel.firstChild.firstChild.firstChild.childNodes.length>0;)this._sel.firstChild.firstChild.firstChild.lastChild.onclick=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseover=null,this._sel.firstChild.firstChild.firstChild.lastChild.onmouseout=null,this._sel.firstChild.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild.lastChild);for(this._sel.firstChild.firstChild.removeChild(this._sel.firstChild.firstChild.firstChild),this._sel.firstChild.removeChild(this._sel.firstChild.firstChild);this._sel.childNodes.length>0;)this._sel.removeChild(this._sel.lastChild);this._sel.parentNode.removeChild(this._sel),this._sel=null}this.base.onclick=null,this.base.onmousedown=null,this.base.ontouchstart=null,this.base.onmouseout=null,this.base.parentNode.removeChild(this.base),this.base=null,this._clearDayHover=null,this._clearSelHover=null,this._doOnSelectorChange=null,this._doOnSelectorShow=null,this._drawMonth=null,this._fixLength=null,this._getLeft=null,this._getTop=null,this._ifrSize=null,this._hide=null,this._hideSelector=null,this._initSelector=null,this._isSelectorVisible=null,this._isVisible=null,this._posGetOffset=null,this._posGetOffsetRect=null,this._posGetOffsetSum=null,this._scrollYears=null,this._show=null,this._showSelector=null,this._strToDate=null,this._updateActiveHours=null,this._updateActiveMinutes=null,this._updateActiveMonth=null,this._updateActiveYear=null,this._updateCellStyle=null,this._updateDateStr=null,this._updateVisibleHours=null,this._updateVisibleMinutes=null,this._updateYearsList=null,this.enableIframe=null,this.hide=null,this.hideTime=null,this.setDate=null,this.setDateFormat=null,this.setYearsRange=null,this.show=null,this.showTime=null,this.unload=null,null!=this._tipPopup&&(this._tipPopup.unload(),this._tipPopup=null);for(var t in this)delete this[t];t=r=null},this.setDate(this._activeDate),this}function dhtmlXCombo(t,e,i,s){var n=this,o=null,l=null;"object"!=typeof t||t.tagName||(o=t,t=o.parent,i=o.width,e=o.name,s=o.mode,l=o.skin),this.cont="string"==typeof t?document.getElementById(t):t,this.conf={skin:null,form_name:e||"dhxcombo",combo_width:(parseInt(i)||this.cont.offsetWidth||120)-(dhx4.isFF||dhx4.isIE?2:0),combo_image:!1,combo_focus:!1,opts_type:"string"==typeof s&&"undefined"!=typeof this.modes[s]?s:"option",opts_count:8,opts_count_min:3,opts_width:null,item_h:null,list_zi_id:window.dhx4.newId(),allow_free_text:!0,allow_empty_value:!0,enabled:!0,img_path:"",img_def:"",img_def_dis:!0,template:{input:"#text#",option:"#text#"},f_mode:!1,f_url:!1,f_cache:!1,f_cache_data:{},f_dyn:!1,f_dyn_end:!1,f_mask:"",f_ac:!0,f_ac_text:"",f_server_tm:null,f_server_last:"",last_hover:null,last_selected:null,last_match:null,last_text:"",last_value:"",tm_hover:null,tm_confirm_blur:null,clear_click:!1,clear_blur:!1,clear_bsp:!1,clear_key:!1,sp:{dhx_skyblue:{list_ofs:1},dhx_web:{list_ofs:0},dhx_terrace:{list_ofs:1}}},this.conf.combo_image=1==this.modes[this.conf.opts_type].image,this.t={},this.base=document.createElement("DIV"),this.base.style.width=this.conf.combo_width+"px",this.base.innerHTML="<input type='text' class='dhxcombo_input' style='width:"+(this.conf.combo_width-24-(this.conf.combo_image?23:0))+"px;"+(this.conf.combo_image?"margin-left:23px;":"")+"' autocomplete='off'><input type='hidden' value=''><input type='hidden' value='false'><div class='dhxcombo_select_button'><div class='dhxcombo_select_img'></div></div>"+(this.conf.combo_image?"<div class='dhxcombo_top_image'>"+this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled)+"</div>":""),this.cont.appendChild(this.base),this.list=document.createElement("DIV"),this.list.style.display="none",document.body.insertBefore(this.list,document.body.firstChild),this.setSkin(l||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcombo")||"dhx_skyblue"),this._updateTopImage=function(t){this.conf.combo_image&&(this.base.lastChild.innerHTML=null!=t?this.t[t].obj.getTopImage(this.t[t].item,this.conf.enabled):this.modes[this.conf.opts_type].getTopImage(null,this.conf.enabled))},this._filterOpts=function(t){this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm);var e=String(this.base.firstChild.value).replace(new RegExp(this.conf.f_ac_text+"$","i"),"");if(this.conf.f_server_last==e.toLowerCase())return void this._checkForMatch();if(null!=this.conf.f_url&&this.checkEvent("onDynXLS"))return this.conf.f_server_last=e.toLowerCase(),void this.callEvent("onDynXLS",[e]);if(null!=this.conf.f_url){if(0==e.length)return this.conf.f_server_last=e.toLowerCase(),void this.clearAll();if(1==this.conf.f_cache&&null!=this.conf.f_cache_data[e]){this.clearAll(),this.conf.f_server_last=e.toLowerCase();for(var i=0;i<this.conf.f_cache_data[e].data.length;i++)this.load(this.conf.f_cache_data[e].data[i]);this.conf.f_dyn&&(this.conf.f_dyn_end=this.conf.f_cache_data[e].dyn_end,this.conf.f_mask=this.conf.f_cache_data[e].mask),t!==!0&&(this._showList(!0),this._checkForMatch())}else this.conf.f_server_tm=window.setTimeout(function(){n.conf.f_server_last=e.toLowerCase(),n.conf.f_mask=e;var i="mask="+encodeURIComponent(e);n.conf.f_dyn&&(i+="&pos=0",n.conf.f_dyn_end=!1);var s=function(i){if(n.conf.f_cache&&(n.conf.f_cache_data[e]||(n.conf.f_cache_data[e]={data:[],dyn_end:!1,mask:e}),n.conf.f_cache_data[e].data.push(i.xmlDoc.responseXML)),n.clearAll(),n.load(i.xmlDoc.responseXML),n.conf.f_ac&&"start"==n.conf.f_mode&&0==n.conf.clear_bsp&&null!=n.list.firstChild){var o=n.list.firstChild._optId,l=String(n.t[o].obj.getText(n.list.firstChild,!0));0===String(l).toLowerCase().indexOf(String(e).toLowerCase())&&(n.base.firstChild.value=l,n._selectRange(e.length,l.length))}t!==!0&&(n._showList(!0),n._checkForMatch()),s=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(n.conf.f_url,i,s):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(n.conf.f_url+(String(n.conf.f_url).indexOf("?")>=0?"&":"?")+i,s)},200)}else{this.conf.f_server_last=e.toLowerCase();var s=0==e.length?!0:new RegExp(("start"==this.conf.f_mode?"^":"")+e,"i"),o=null;for(var l in this.t){var r=this.t[l].obj.getText(this.t[l].item,!0);s===!0||1==s.test(r)?(this.t[l].item.style.display="",null==o&&e.length>0&&(o=String(this.t[l].obj.getText(this.t[l].item,!0)))):this.t[l].item.style.display="none"}this.conf.f_ac&&"start"==this.conf.f_mode&&0==this.conf.clear_bsp&&null!=o&&(this.conf.f_ac_text=o.replace(new RegExp("^"+e,"i"),""),this.base.firstChild.value=o,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)),"between"==this.conf.f_mode&&1==this.conf.clear_bsp&&this._checkForMatch(!0),t!==!0&&(this._showList(!0),this._checkForMatch())}},this._initObj=function(t){"undefined"!=typeof t.template&&this.setTemplate(t.template),this.addOption(t.options)},this._xmlToObj=function(t,e){var i={options:[]},s=1==e?t:t.getElementsByTagName("complete");if(s.length>0){for(var n=s[0].childNodes,o=0;o<n.length;o++)if("undefined"!=typeof n[o].tagName){if("template"==String(n[o].tagName).toLowerCase())for(var l=0;l<n[o].childNodes.length;l++)if(null!=n[o].childNodes[l].tagName){var r=n[o].childNodes[l].tagName;"undefined"!=typeof this.conf.template[r]&&(this.conf.template[r]=null!=n[o].childNodes[l].firstChild?n[o].childNodes[l].firstChild.nodeValue:"")}if("option"==String(n[o].tagName).toLowerCase()){var a=!1;a=1==e?window.dhx4.s2b(n[o].selected)||null!=n[o].getAttribute("selected"):window.dhx4.s2b(n[o].getAttribute("selected"));var h={value:n[o].getAttribute("value"),text:null!=n[o].firstChild?n[o].firstChild.nodeValue:"",selected:a,checked:window.dhx4.s2b(n[o].getAttribute("checked"))};for(var d in{img:1,img_dis:1,img_src:1,img_src_dis:1})null!=n[o].getAttribute(d)&&(h[d]=n[o].getAttribute(d));for(var l=0;l<n[o].childNodes.length;l++)if(null!=n[o].childNodes[l].tagName&&"text"==String(n[o].childNodes[l].tagName).toLowerCase()){h.text={};for(var c=n[o].childNodes[l],u=0;u<c.childNodes.length;u++)null!=c.childNodes[u].tagName&&(h.text[c.childNodes[u].tagName]=null!=c.childNodes[u].firstChild?c.childNodes[u].firstChild.nodeValue:"")}i.options.push(h)}}s=n=null}return i},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","complete",{data:!0}),window.dhx4._eventable(this),this._getNearItem=function(t,e){for(var i=null;null!=t;)t=t[0>e?"previousSibling":"nextSibling"],null==i&&null!=t&&""==t.style.display&&null!=t._optId&&(i=t,t=null);return i},this.setName(this.conf.form_name),this._doOnListMouseMove=function(t){t=t||event;
for(var e=t.target||t.srcElement;null!=e&&e!=this;)"undefined"!=typeof e._optId&&(n.conf.tm_hover&&window.clearTimeout(n.conf.tm_hover),n._setSelected(e._optId)),e=e.parentNode;e=null},this._doOnListMouseDown=function(t){t=t||event,t.cancelBubble=!0,n.conf.clear_click=!0,window.setTimeout(function(){n.base.firstChild.focus()},1)},this._doOnListMouseUp=function(t){t=t||event;for(var e=t.target||t.srcElement;null!=e&&e!=this;){if("undefined"!=typeof e._optId){var i=!0;"function"==typeof n.t[e._optId].obj.optionClick&&n.t[e._optId].obj.optionClick(e,t,n)!==!0&&(i=!1),i&&(n._setSelected(e._optId,null,!0),n._confirmSelect("click"))}e=e.parentNode}e=null},this._doOnListMouseOut=function(){n.conf.tm_hover&&window.clearTimeout(n.conf.tm_hover),n.conf.tm_hover=window.setTimeout(function(){var t=n.conf.last_match||n.conf.last_selected;null==n.conf.last_match&&null!=n.t[t]&&n.base.firstChild.value!=n.t[t].obj.getText(n.t[t].item,!0)&&(t=null),n._setSelected(t,null,!0)},1)},this._doOnBaseMouseDown=function(t){if(n.conf.enabled){n.conf.clear_click=!0,t=t||event;var e=t.target||t.srcElement;if(e!=this.firstChild){window.setTimeout(function(){n.base.firstChild.focus()},1);for(var i=e;i!=this&&null!=i;)if(i==this.lastChild){if("function"==typeof n.modes[n.conf.opts_type].topImageClick){var s=n.conf.last_hover||n.conf.last_selected,o=null!=s?n.t[s].item:null;if(n.modes[n.conf.opts_type].topImageClick(o,n)!==!0)return void(s=o=null)}i=null}else i=i.parentNode}n._isListVisible()?n._hideList():(e!=this.firstChild&&(n.conf.clear_blur=!0),n._showList(),n._setSelected(n.conf.last_selected,!0,!0)),e=null}},this._doOnBodyMouseDown=function(){return n.conf.clear_click?void(n.conf.clear_click=!1):void n._confirmSelect("blur")},this._doOnInputFocus=function(){n.conf.clear_blur=!1,n.conf.tm_confirm_blur&&window.clearTimeout(n.conf.tm_confirm_blur),0==n.conf.combo_focus&&(n.conf.combo_focus=!0,n.callEvent("onFocus",[]))},this._doOnInputBlur=function(){return 1==n.conf.clear_blur?void(n.conf.clear_blur=!1):(n.conf.tm_confirm_blur&&window.clearTimeout(n.conf.tm_confirm_blur),void(n.conf.tm_confirm_blur=window.setTimeout(function(){0==n.conf.clear_click&&(n._confirmSelect("blur"),n.conf.combo_focus=!1,n.callEvent("onBlur",[]))},20)))},this._doOnInputKeyUp=function(t){return t=t||event,0!=n.conf.f_mode?(n.conf.clear_bsp=8==t.keyCode||46==t.keyCode,void n._filterOpts()):void n._checkForMatch()},this._doOnInputKeyDown=function(t){t=t||event,38!=t.keyCode&&40!=t.keyCode||t.ctrlKey||t.shiftKey||t.altKey||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,n._keyOnUpDown(38==t.keyCode?-1:1)),113==t.keyCode&&(n._isListVisible()||(n._showList(),n.base.firstChild.value==n.conf.last_text?(n._setSelected(n.conf.last_selected,!0,!0),n.base.firstChild.value=n.conf.last_text,n.conf.f_server_last=n.base.firstChild.value.toLowerCase()):(n.conf.f_server_last=n.base.firstChild.value.toLowerCase(),0==n.conf.f_mode&&n._checkForMatch()))),27==t.keyCode&&(t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,n._cancelSelect()),13==t.keyCode&&(t.preventDefault&&t.preventDefault(),n._confirmSelect("kbd")),n.conf.clear_key=!0,n.callEvent("onKeyPressed",[t.keyCode||t.charCode])},this._doOnInputKeyPress=function(t){return n.conf.clear_key?void(n.conf.clear_key=!1):(t=t||event,void n.callEvent("onKeyPressed",[t.keyCode||t.charCode]))},this._keyOnUpDown=function(t){var e=null;if(this.conf.last_hover?e=this.t[this.conf.last_hover].item:this.conf.last_selected&&(e=this.t[this.conf.last_selected].item),(e||0!=this._getListVisibleCount())&&(null!=e&&""!=e.style.display&&(e=null),this._showList(),null!=e?this.t[e._optId].obj.isSelected(e)&&(e=this._getNearItem(e,t)):(e=this.list.firstChild,""!=e.style.display&&(e=this._getNearItem(e,1))),null!=e)){if(this._setSelected(e._optId,!0,!0),0==this.conf.f_mode)this.base.firstChild.value=this.t[e._optId].obj.getText(e,!0);else{var i=String(this.t[e._optId].obj.getText(e,!0));"start"==this.conf.f_mode&&1==this.conf.f_ac?0===i.toLowerCase().indexOf(this.conf.f_server_last)?(this.conf.f_ac_text=i.substring(this.conf.f_server_last.length,i.length),this.base.firstChild.value=i,this._selectRange(this.conf.f_server_last.length,this.base.firstChild.value.length)):(this.base.firstChild.value=i,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this._selectRange(0,this.base.firstChild.value.length)):(this.base.firstChild.value=i,this.conf.f_server_last=this.base.firstChild.value.toLowerCase())}e=null}},this.conf.evs_nodes=[{node:document.body,evs:{mousedown:"_doOnBodyMouseDown"}},{node:this.base,evs:{mousedown:"_doOnBaseMouseDown"}},{node:this.base.firstChild,evs:{keyup:"_doOnInputKeyUp",keydown:"_doOnInputKeyDown",keypress:"_doOnInputKeyPress",focus:"_doOnInputFocus",blur:"_doOnInputBlur"}},{node:this.list,evs:{mousemove:"_doOnListMouseMove",mousedown:"_doOnListMouseDown",mouseup:"_doOnListMouseUp",mouseout:"_doOnListMouseOut"}}];for(var r=0;r<this.conf.evs_nodes.length;r++)for(var a in this.conf.evs_nodes[r].evs)window.addEventListener?this.conf.evs_nodes[r].node.addEventListener(a,this[this.conf.evs_nodes[r].evs[a]],!1):this.conf.evs_nodes[r].node.attachEvent("on"+a,this[this.conf.evs_nodes[r].evs[a]]);return this.unload=function(){this.clearAll(),this.t=null;for(var t=0;t<this.conf.evs_nodes.length;t++){for(var e in this.conf.evs_nodes[t].evs)window.addEventListener?this.conf.evs_nodes[t].node.removeEventListener(e,this[this.conf.evs_nodes[t].evs[e]],!1):this.conf.evs_nodes[t].node.detachEvent("on"+e,this[this.conf.evs_nodes[t].evs[e]]),this.conf.evs_nodes[t].evs[e]=null,delete this.conf.evs_nodes[t].evs[e];this.conf.evs_nodes[t].node=null,this.conf.evs_nodes[t].evs=null,delete this.conf.evs_nodes[t].node,delete this.conf.evs_nodes[t].evs,this.conf.evs_nodes[t]=null}window.dhx4._eventable(this,"clear"),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this.DOMelem_input=this.DOMelem_button=this.DOMlist=null;for(var e in this.conf)this.conf[e]=null,delete this.conf[e];this.conf=null,this.base.parentNode.removeChild(this.base),this.list.parentNode.removeChild(this.list),this.base=this.list=this.cont=null,this.modes=null;for(var e in this)"function"==typeof this[e]&&(this[e]=null);n=null},this.DOMelem_input=this.base.firstChild,this.DOMelem_button=this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)],this.DOMlist=this.list,this.DOMelem=this.base,this.DOMParent=t,t=null,null!=o&&(null!=o.filter&&("string"==typeof o.filter?this.enableFilteringMode(!0,o.filter,window.dhx4.s2b(o.filter_cache),window.dhx4.s2b(o.filter_sub_load)):this.enableFilteringMode(!0)),null!=o.image_path&&this.setImagePath(o.image_path),(null!=o.default_image||null!=o.default_image_dis)&&this.setDefaultImage(o.default_image,o.default_image_dis),(o.items||o.options)&&this.addOption(o.items||o.options),(o.xml||o.json)&&this.load(o.xml||o.json),"undefined"!=typeof o.readonly&&this.readonly(o.readonly),o=null),this}function dhtmlXComboFromSelect(t){"string"==typeof t&&(t=document.getElementById(t));var e=t.offsetWidth,i=t.getAttribute("name")||null,s=document.createElement("SPAN");t.parentNode.insertBefore(s,t);var n=t.getAttribute("mode")||t.getAttribute("opt_type")||"option",o=new dhtmlXCombo(s,i,e,n);s=null;var l=t.getAttribute("imagePath");l&&o.setImagePath(l);var r=t.getAttribute("defaultImage"),a=t.getAttribute("defaultImageDis");1==window.dhx4.s2b(a)&&(a=!0),(null!=r||null!=a)&&o.setDefaultImage(r,a);var h=o._xmlToObj([t],!0);return h.options.length>0&&o.addOption(h.options),h=null,t.parentNode.removeChild(t),t=null,o}function dhtmlXComboExtend(t,e){for(var i in dhtmlXCombo.prototype.modes[e])"undefined"==typeof dhtmlXCombo.prototype.modes[t][i]&&(dhtmlXCombo.prototype.modes[t][i]=dhtmlXCombo.prototype.modes[e][i])}function dhtmlXColorPicker(t){if(!(this instanceof dhtmlXColorPicker))return new dhtmlXColorPicker(t);dhx4._eventable(this);var e,i,s,n=this,o=void 0,l=null;switch(this._nodes=[],this.activeNode=null,this._inputListenerId=null,this.base=null,this._globalNode=null,this.memory=null,this.skin=null,this.conf={cp_id:dhx4.newId(),x:0,y:0,c:0,indent:2,position:"right",customColors:!1,selectedColor:null,hide:!1,hideOnSelect:!1,lang:"en",closeable:!0},this.value={red:null,blue:null,green:null,hue:null,sat:null,lum:null},this._initMoveSelection=function(t){return t=t||event,"function"==typeof window.addEventListener?(n._controllerNodes.colorArea.addEventListener("mousemove",n._setMoveSelection,!1),document.body.addEventListener("mouseup",n._cleanMoveSelection,!1)):(n._controllerNodes.colorArea.attachEvent("onmousemove",n._setMoveSelection),document.body.attachEvent("onmouseup",n._cleanMoveSelection)),n._setMoveSelection(t,n._controllerNodes.colorArea),!1},this._cleanMoveSelection=function(){return"function"==typeof window.removeEventListener?(n._controllerNodes.colorArea.removeEventListener("mousemove",n._setMoveSelection,!1),document.body.removeEventListener("mouseup",n._cleanMoveSelection,!1)):(n._controllerNodes.colorArea.detachEvent("onmousemove",n._setMoveSelection),document.body.detachEvent("onmouseup",n._cleanMoveSelection)),!1},this._setMoveSelection=function(t){t=t||event;var e=n._getOffsetPosition(t,n._controllerNodes.colorArea);return n._controllerNodes.fr_cover?setTimeout(function(){n._setColorAreaXY(e.x,e.y),n._setColorByXYC()},0):(n._setColorAreaXY(e.x,e.y),n._setColorByXYC()),!1},this._initMoveContrast=function(t){t=t||event,"function"==typeof window.addEventListener?(document.body.addEventListener("mousemove",n._setMoveContrast,!1),document.body.addEventListener("mouseup",n._cleanMoveContrast,!1)):(document.body.attachEvent("onmousemove",n._setMoveContrast),document.body.attachEvent("onmouseup",n._cleanMoveContrast)),n._setMoveContrast(t,n._controllerNodes.contrastArea)},this._cleanMoveContrast=function(){"function"==typeof window.removeEventListener?(document.body.removeEventListener("mousemove",n._setMoveContrast,!1),document.body.removeEventListener("mouseup",n._cleanMoveContrast,!1)):(document.body.detachEvent("onmousemove",n._setMoveContrast),document.body.detachEvent("onmouseup",n._cleanMoveContrast))},this._setMoveContrast=function(t){t=t||event;var e=n._getOffsetPosition(t,n._controllerNodes.contrastArea);n._setContrastY(e.y),n._setColorByXYC(!0)},this._doOnSelectColor=function(){var t=n.colorAIP.rgb2hex({r:n.value.red,g:n.value.green,b:n.value.blue});null!=n.activeNode&&(n.activeNode.valueCont&&(n.activeNode.valueCont.value=t),n.activeNode.valueColor&&(n.activeNode.valueColor.style.backgroundColor=t)),(n.base._dhx_remove||n.conf.hideOnSelect)&&n.hide(),n.callEvent("onSelect",[t,n.activeNode?n.activeNode.node:null])},this._doOnCancel=function(){1==n.callEvent("onCancel",[n.activeNode?n.activeNode.node:null])&&1==n.conf.closeable&&n.hide()},this._doOnFocusByInput=function(){var t=this!=window?this:event.srcElement,e=n.activeNode&&n.activeNode.valueCont&&n.activeNode.valueCont==t?n.activeNode:n._getNodeByValueCont(t);n.activeNode=e,e&&e==n.activeNode&&n._initListenerInput()},this._doOnBlurByInput=function(){var t=this!=window?this:event.srcElement,e=n.activeNode&&n.activeNode.valueCont&&n.activeNode.valueCont==t?n.activeNode:n._getNodeByValueCont(t);e&&e==n.activeNode&&n._removeListenerInput()},this._doOnClickByNode=function(t){t=t||event;var e=this!=window?this:event.srcElement;n.activeNode=n.activeNode.node!=e?n._getNodeByElement(e):n.activeNode,n.isVisible()||n.show()},this.saveColor=function(){n.memory.setValue(n.value)},this._onSelectMemoryEl=function(t){var e;n._refreshCoordinatesByHSL(t.value.hue,t.value.sat,t.value.lum);for(e in t.value)n.value[e]=t.value[e];n._refreshContrast(),n._refreshInputValues(),n._refreshColorValue()},this._doOnClickByBody=function(t){t=t||event;var e=!0,i=t.target||t.srcElement;n._isBaseNode(i)&&(e=!1),e&&n.activeNode&&(n.activeNode.node==i||n.activeNode.valueCont==i)&&(e=!1),e&&n.hide()},this._doOnChangeHSL=function(){var t,e=parseInt(n._controllerNodes.hue.value),i=parseInt(n._controllerNodes.sat.value),s=parseInt(n._controllerNodes.lum.value);isNaN(e)||e>359||0>e?n._controllerNodes.hue.value=n.value.hue:n.value.hue=e,isNaN(i)||i>100||0>i?n._controllerNodes.sat.value=n.value.sat:n.value.sat=i,isNaN(s)||s>100||0>s?n._controllerNodes.lum.value=n.value.lum:n.value.lum=s,t=n.colorAIP.hsl2rgb(n.value.hue,n.value.sat/100,n.value.lum/100),n.value.red=Math.round(255*t.r),n.value.green=Math.round(255*t.g),n.value.blue=Math.round(255*t.b),n._refreshCoordinatesByHSL(n.value.hue,n.value.sat,n.value.lum),n._refreshContrast(),n._refreshInputValues(),n._refreshColorValue()},this._doOnChangeRGB=function(){var t,e=parseInt(n._controllerNodes.red.value),i=parseInt(n._controllerNodes.green.value),s=parseInt(n._controllerNodes.blue.value);isNaN(e)||e>255||0>e?n._controllerNodes.red.value=n.value.red:n.value.red=e,isNaN(i)||i>255||0>i?n._controllerNodes.green.value=n.value.green:n.value.green=i,isNaN(s)||s>255||0>s?n._controllerNodes.blue.value=n.value.blue:n.value.blue=s,t=n.colorAIP.rgb2hsl(n.value.red/255,n.value.green/255,n.value.blue/255),n.value.hue=Math.round(t.h),n.value.sat=Math.round(100*t.s),n.value.lum=Math.round(100*t.l),n._refreshCoordinatesByHSL(n.value.hue,n.value.sat,n.value.lum),n._refreshContrast(),n._refreshInputValues(),n._refreshColorValue()},this._doOnChangeHSV=function(){n._controllerNodes.hsv.value=n.setColor(n._controllerNodes.hsv.value)},this._checkType=function(t){var e;if(!(t instanceof Array))return void 0==t?null:"string"==typeof t?"string":t.tagName&&"input"==t.tagName.toLowerCase()?"input":t.tagName&&"textarea"==t.tagName.toLowerCase()?"textarea":t.tagName?"container":"object"==typeof t?"object":void 0;switch(e=n._checkType(t[0])){case"string":return"array_string";case"input":case"textarea":return"array_input";case"object":return"array_object";default:return void 0}},this._initByObject=function(t){t.parent&&t.parent.tagName?n.base=t.parent:"string"==typeof t.parent?n.base=document.getElementById(t.parent):(n.base=document.createElement("div"),n.base._dhx_remove=!0),t.color&&(n.conf.selectedColor=t.color),"undefined"!=typeof t.closeable&&(this.conf.closeable=dhx4.s2b(t.closeable)),t.custom_colors&&(this._tempInitCC=function(){var e,i;if(this.initMemoryColors(),this.conf.customColors=!0,t.custom_colors instanceof Array)for(i=t.custom_colors.length,e=0;i>e;e++)this.setCustomColors(t.custom_colors[e]);this.base.parentNode&&this.showMemory(),delete this._tempInitCC}),t.hide&&(n.conf.hide=!0),t.input&&n._addNode(t.input,t.target_color,t.target_value);var e=t.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxcolorpicker")||"dhx_skyblue";n.setSkin(e),t.colors&&(n.initMemoryColors(),n.conf.customColors=!0),t.link&&n._addNode(t.link)},this.unload=function(){var t,e,i;for(this.isVisible()&&this.hide(),this.destructMemory(),e=this._nodes.length,t=0;e>t;t++){this._detachEventsFromNode(this._nodes[t]);for(i in this._nodes[t])this._nodes[t][i]=null;delete this._nodes[t]}this._nodes=null,this.base._dhx_remove?delete this.base._dhx_remove:this.base.className=this.base.className.replace(/\s?dhtmlxcp_\S*/,""),"function"==typeof window.addEventListener?(this._controllerNodes.colorArea.removeEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.removeEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.removeEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.removeEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.removeEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.removeEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.removeEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.removeEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.detachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.detachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.detachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.detachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.detachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.detachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.detachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.detachEvent("onchange",this._doOnChangeHSV)),this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover),delete this._controllerNodes.fr_cover),dhx4.zim.clear(this.conf.cp_id),dhx4._eventable(this,"clear");for(i in this)this[i]=null;n=null,l=null,s=null},o=this._checkType(t)){case"object":n._initByObject(t);break;case"input":case"textarea":n._initByObject({}),this._addNode(t);break;case"string":return l=document.getElementById(t),new dhtmlXColorPicker(l);case"container":n._initByObject({parent:t});break;case null:n._initByObject({});break;case"array_string":case"array_input":for(n._initByObject({}),i=t.length,e=0;i>e;e++)this._addNode(t[e]);break;case"array_object":for(n._initByObject({}),i=t.length,e=0;i>e;e++)s=this._addNode(t[e].input,t[e].target_color,t[e].target_value).conf,s.customColors=void 0!=t[e].custom_colors?dhx4.s2b(t[e].custom_colors):s.customColors,s.selectedColor=void 0!=t[e].color?t[e].color:s.selectedColor}if(this.base.innerHTML="<div class='dhxcp_g_area'><div class='dhxcp_sub_area'><div class='dhxcp_g_color_area'><div class='dhxcp_color_selector'><div class='dhxcp_v_line'></div><div class='dhxcp_h_line'></div></div><div class='dhxcp_contrast_area'><div class='dhxcp_h_line'></div></div></div><div class='dhxcp_g_input_area'><div class='dhxcp_value_cont'><div class='dhxcp_value_color'></div><input type='text' class='dhxcp_value'/></div><table class='dhxcp_inputs_cont' cellpadding='0' cellspacing='0' border='0'><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelHue+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelRed+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelSat+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelGreen+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr><tr><td class='dhxcp_label_hsl'>"+this.i18n[this.conf.lang].labelLum+"</td><td class='dhxcp_input_hsl'><input type='text' class='dhxcp_input_hsl'/></td><td class='dhxcp_label_rgb'>"+this.i18n[this.conf.lang].labelBlue+"</td><td class='dhxcp_input_rgb'><input type='text' class='dhxcp_input_rgb'/></td></tr></table></div><div class='dhxcp_g_memory_area'></div><div class='dhxcp_buttons_area'><button class='dhx_button_save'>"+this.i18n[this.conf.lang].btnSelect+"</button><button class='dhx_button_cancel'>"+this.i18n[this.conf.lang].btnCancel+"</button></div></div>",this._globalNode=this.base.firstChild,this._controllerNodes={colorArea:this._globalNode.firstChild.firstChild.firstChild,v_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[0],h_line:this._globalNode.firstChild.firstChild.firstChild.childNodes[1],contrastArea:this._globalNode.firstChild.firstChild.childNodes[1],contrast_line:this._globalNode.firstChild.firstChild.childNodes[1].firstChild,color:this._globalNode.firstChild.childNodes[1].childNodes[0].firstChild,hsv:this._globalNode.firstChild.childNodes[1].childNodes[0].childNodes[1],hue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[1].firstChild,sat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[1].firstChild,lum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[1].firstChild,red:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[3].firstChild,green:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[3].firstChild,blue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[3].firstChild,memory_block:this._globalNode.firstChild.childNodes[2],button_save:this._globalNode.firstChild.childNodes[3].firstChild,button_cancel:this._globalNode.firstChild.childNodes[3].childNodes[1]},this._labelNodes={labelHue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].firstChild,labelSat:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].firstChild,labelLum:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].firstChild,labelRed:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[0].childNodes[2],labelGreen:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[1].childNodes[2],labelBlue:this._globalNode.firstChild.childNodes[1].childNodes[1].firstChild.childNodes[2].childNodes[2],btnAddColor:null,btnSelect:this._globalNode.firstChild.childNodes[3].firstChild,btnCancel:this._globalNode.firstChild.childNodes[3].childNodes[1]},"function"==typeof this._tempInitCC&&this._tempInitCC(),"function"==typeof window.addEventListener?(this._controllerNodes.colorArea.addEventListener("mousedown",this._initMoveSelection,!1),this._controllerNodes.colorArea.addEventListener("dblclick",this._doOnSelectColor,!1),this._controllerNodes.contrastArea.addEventListener("mousedown",this._initMoveContrast,!1),this._controllerNodes.button_save.addEventListener("click",this._doOnSelectColor,!1),this._controllerNodes.button_cancel.addEventListener("click",this._doOnCancel,!1),this._controllerNodes.hue.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.sat.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.lum.addEventListener("change",this._doOnChangeHSL,!1),this._controllerNodes.red.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.green.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.blue.addEventListener("change",this._doOnChangeRGB,!1),this._controllerNodes.hsv.addEventListener("change",this._doOnChangeHSV,!1)):(this._controllerNodes.colorArea.attachEvent("onmousedown",this._initMoveSelection),this._controllerNodes.colorArea.attachEvent("ondblclick",this._doOnSelectColor),this._controllerNodes.contrastArea.attachEvent("onmousedown",this._initMoveContrast),this._controllerNodes.button_save.attachEvent("onclick",this._doOnSelectColor),this._controllerNodes.button_cancel.attachEvent("onclick",this._doOnCancel),this._controllerNodes.hue.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.sat.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.lum.attachEvent("onchange",this._doOnChangeHSL),this._controllerNodes.red.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.green.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.blue.attachEvent("onchange",this._doOnChangeRGB),this._controllerNodes.hsv.attachEvent("onchange",this._doOnChangeHSV)),this.conf.selectedColor?this.setColor(this.conf.selectedColor):(this._setColorAreaXY(10,10),this._setContrastY(10),n._setColorByXYC()),this._nodes.length)for(var e=0;e<this._nodes.length;e++)this._attachEventsToNode(this._nodes[e]);this.conf.hide&&this.hide(),"function"==typeof this._cpInitFRM&&this._cpInitFRM()}function dhtmlXSlider(t){var e=this;this.conf={size:null,skin:null,vertical:!1,min:0,max:99,value:0,step:1,margin:2,border:1,disabled:!1,tooltip:!1,visible:!0,linkTo:void 0},this._attachedNode={},this.base=null;var i=null;if(arguments.length>1)return new dhtmlXSlider(this._renderArgumets(arguments));if("string"==typeof t||"object"==typeof t&&t.tagName)return new dhtmlXSlider({parent:t});this.base="string"==typeof t.parent?document.getElementById(t.parent):t.parent,this._mergeConfig(this._readAttFormNode(this.base)),this._mergeConfig(t),(null==this.conf.size||void 0==this.conf.size)&&(this.conf.size=this.conf.vertical?this.base.offsetHeight:this.base.offsetWidth);var s=this.conf.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxslider")||"dhx_skyblue";return this.setSkin(s),this.base.innerHTML="<div class='dhxsl_container'><div class='dhxsl_track'></div><div class='dhxsl_runner'></div></div>",this._nodes={cont:this.base.firstChild,track:this.base.firstChild.firstChild,runner:this.base.firstChild.childNodes[1]},this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=function(t){return t=t||event,"function"==typeof t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this.conf.value=this._normalize(this.conf.value),this._setOrient(this.conf.vertical),this.setSize(this.conf.size),this._initMover=function(t){return t=t||event,i={},i.value=e.conf.value,i.coord=e.conf.vertical?t.clientY:t.clientX,0==e.conf.disabled&&("function"==typeof window.addEventListener?(window.addEventListener("mousemove",e._move,!1),window.addEventListener("mouseup",e._cleanMove,!1)):(document.body.attachEvent("onmousemove",e._move),document.body.attachEvent("onmouseup",e._cleanMove))),e.callEvent("_onRunnerMouseDown",[]),!1},this._move=function(t){t=t||event;var s=e.conf.vertical?e._nodes.runner.offsetHeight:e._nodes.runner.offsetWidth,n=e.conf.max-e.conf.min,o=e.conf.vertical?t.clientY:t.clientX,l=i.value+(o-i.coord)*n/(e.conf.size-s);e.setValue(Math.round(l),!0)},this._cleanMove=function(){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",e._move,!1),window.removeEventListener("mouseup",e._cleanMove,!1)):(document.body.detachEvent("onmousemove",e._move),document.body.detachEvent("onmouseup",e._cleanMove)),i=null,e.callEvent("onSlideEnd",[e.conf.value]),e.callEvent("_onRunnerMouseUp",[])},this._doOnSetValue=function(t){if(i)return!1;t=t||event;var s=e.conf.vertical?t.offsetY||t.layerY:t.offsetX||t.layerX,n=(e.conf.vertical?e._nodes.runner.offoffsetHeightsetHe:e._nodes.runner.offsetWidth,e.conf.max-e.conf.min),o=s*n/e.conf.size+e.conf.min;return e.setValue(Math.round(o),!0),i||e._initMover(t),!1},this._doOnChangeInput=function(t){t=t||event;var i=t.target||t.srcElement;e.setValue(i.value)},this._doOnKeyDown=function(t){t=t||event;var i=t.target||t.srcElement;13==t.keyCode&&e.setValue(i.value)},this._attachEvents(this._nodes),this.unload=function(){dhx4._eventable(this,"clear"),this._detachNode(),this._detachEvents(this._nodes),this.base.removeChild(this._nodes.cont),this._nodes.cont.onmousedown=this._nodes.track.onmousedown=this._nodes.cont.onselectstart=this._nodes.track.onselectstart=null,delete this._nodes.cont,delete this._nodes.track,delete this._nodes.max,delete this._nodes.min,delete this._nodes.runner,/\s?dhtmlxslider_\S*/.test(this.base.className)&&(this.base.className=this.base.className.replace(/\s?dhtmlxslider_\S*/,""));for(var t in this)this[t]=null;e=null},dhx4._eventable(this),this.conf.disabled&&this.disable(),this.conf.tooltip&&this.enableTooltip(),this.conf.visible||this.hide(),this.conf.linkTo&&this.linkTo(this.conf.linkTo),this}function dhtmlXPopup(t){var e=this;if(this.conf=t||{},t=null,this.mode=this.conf.mode||"bottom",this.conf.zi=window.dhx4.newId(),this.conf.isIE=navigator.userAgent.indexOf("MSIE")>=0,this.p=document.createElement("DIV"),this.p.style.display="none",this.p.innerHTML="<div class='dhx_popup_area"+(this.conf.isIE?" dhx_popup_area_ie":"")+"'><table cellspacing='0' cellpadding='0' border='0' class='dhx_popup_table'><tbody></tbody></table></div><div class='dhx_popup_arrow dhx_popup_arrow_"+this.mode+"'></div>",document.body.appendChild(this.p),this.skinParams={dhx_terrace:{t0:19,t1:9,t2:19,t3:9},dhx_skyblue:{t0:12,t1:9,t2:12,t3:9},dhx_web:{t0:12,t1:9,t2:12,t3:9}},this.p.onclick=function(t){if(t=t||event,e._clearClick=!0,null!=e._nodeObj)return e.callEvent("onContentClick",[]),!0;for(var i=t.target||t.srcElement,s=null;i!=e.p&&null!=i;)"undefined"==typeof i._idd||i._isSeparator?i=i.parentNode:(s=i._idd,i=null);i=null,null!=s&&(e.callEvent("onClick",[s]),null!=e&&null!=e.isVisible&&e.isVisible()&&e.callEvent("onBeforeHide",["select",t,s])===!0&&(t.cancelBubble=!0,e.hide()))},this.separator="DHXSEP_"+window.dhx4.newId(),this.tpl=[],this._setTemplate=function(t){this.tpl=t.split(",")},this.show=function(t){var e=null;if(1==arguments.length){if(t){if(!this._idExists(t))return}else t=this.conf.id[0];this.conf.toolbar&&(e=this.conf.toolbar._getItemDim(t)),this.conf.ribbon&&(e=this.conf.ribbon._getItemDim(t)),this.conf.form&&(e=this.conf.form._getItemDim(t))}else 4==arguments.length&&(this._clearClick=!0,e={left:arguments[0],top:arguments[1],width:arguments[2],height:arguments[3]},t=null);e&&(this.p.style.visibility="hidden",this.p.style.display="",this._setPos(e),this.p.style.zIndex=window.dhx4.zim.reserve(this.conf.zi),this.p.style.visibility="visible",this._lastId=t,this.callEvent("onShow",[t]))},this._setPos=function(t,e){var i=t.left,s=t.top,n=t.width,o=t.height;this._posData={left:i,top:s,width:n,height:o};var l=window.dhx4.screenDim(),r=e||this.mode;"undefined"==typeof e&&(e=!1);var a={top:s-this.p.offsetHeight-l.top,bottom:l.bottom-(s+o+this.p.offsetHeight),left:i-this.p.offsetWidth-l.left,right:l.right-(i+n+this.p.offsetWidth)};if(!e&&a[r]<0){var h=this._getAvailPos(r,a);if(h!==!1)return void this._setPos(t,h)}if("top"==r||"bottom"==r){var d=this.skinParams[this.conf.skin].t2,c=this.skinParams[this.conf.skin].t3,u=Math.round(this.p.offsetWidth/2),_=Math.round(this.p.lastChild.offsetWidth/2);if(i<l.left){var f=Math.min(i+n,l.left);n=i+n-f,i=f}i+n>l.right&&(n=l.right-i);var p=Math.round(i+n/2),m=p-u,g=p-d-_,b=p+_+d-this.p.offsetWidth;m<l.left-c?m=Math.min(l.left-c,g):m+this.p.offsetWidth>l.right+c&&(m=Math.max(b,l.right+c-this.p.offsetWidth)),this.p.style.left=m+"px",this.p.style.top=("top"==r?s-this.p.offsetHeight:s+o)+"px",p=p-m-_,this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+r,this.p.lastChild.style.top=("top"==r?this.p.offsetHeight-this.p.lastChild.offsetHeight:0)+"px",this.p.lastChild.style.left=p+"px"}if("left"==r||"right"==r){var d=this.skinParams[this.conf.skin].t0,c=this.skinParams[this.conf.skin].t1,v=Math.round(this.p.offsetHeight/2),y=Math.round(this.p.lastChild.offsetHeight/2);if(s<l.top){var x=Math.min(s+o,l.top);o=s+o-x,s=x}s+o>l.bottom&&(o=l.bottom-s);var p=Math.round(s+o/2),w=p-v,C=p-d-y,N=p+y+d-this.p.offsetHeight;w<l.top-c?w=Math.min(l.top-c,C):w+this.p.offsetHeight>l.bottom+c&&(w=Math.max(N,l.bottom+c-this.p.offsetHeight)),this.p.style.left=("left"==r?i-this.p.offsetWidth:i+n)+"px",this.p.style.top=w+"px",p=p-w-y,this.p.lastChild.className="dhx_popup_arrow dhx_popup_arrow_"+r,this.p.lastChild.style.left=("left"==r?this.p.offsetWidth-this.p.lastChild.offsetWidth:0)+"px",this.p.lastChild.style.top=p+"px"}if(this._IEDisp&&null!=this._nodeId){var I=document.getElementById(this._nodeId);window.setTimeout(function(){I.style.visibility="visible",I=null},1)}},this._getAvailPos=function(t,e){for(var i={top:["bottom","right","left"],bottom:["top","right","left"],left:["right","bottom","top"],right:["left","bottom","top"]},s=null,n=0;n<i[t].length;n++)null==s&&e[i[t][n]]>0&&(s=i[t][n]);
if(null==s){s="bottom";for(var o in e)e[o]>e[s]&&(s=o)}return s==t?!1:s},this._repaint=function(){this.isVisible()&&this._setPos(this._posData)},this.clear=function(){if(this._nodeObj&&(this.conf.isIE&&"undefined"!=typeof dhtmlXLayoutObject&&this._nodeObj instanceof dhtmlXLayoutObject&&(this.p.onmousedown=null),this._nodeObj.unload?this._nodeObj.unload():this._nodeObj.destruct&&this._nodeObj.destruct(),this._nodeObj=this._nodeId=null,null!=this._nodeObjEv)){for(var t=0;t<this._nodeObjEv.length;t++)this.detachEvent(this._nodeObjEv[t]);this._nodeObjEv=null}this._IEHoverInited&&this._IEHoverClear();for(var e=this.p.firstChild.firstChild.firstChild;e.childNodes.length>0;)e.removeChild(e.lastChild);e=null,this.itemData={}},this.hide=function(){if("none"!=this.p.style.display){this.p.style.display="none",window.dhx4.zim.clear(this.conf.zi);var t=this._lastId;this._lastId=null,this.callEvent("onHide",[t])}},this.isVisible=function(){return""==this.p.style.display},this.itemData={},this.getItemData=function(t){return t?this.itemData[t]?this.itemData[t]:{}:this.itemData},this.setSkin=function(t){this.conf.skin=t,this.p.className="dhx_popup_"+this.conf.skin,null!=this._nodeObj&&"function"==typeof this._nodeObj.setSkin&&this._nodeObj.setSkin(this.conf.skin),this._repaint()},this.attachList=function(t,e){this._setTemplate(t),this.clear();for(var i=this.p.firstChild.firstChild.firstChild,s=0;s<e.length;s++){var n=document.createElement("TR");if(e[s]!=this.separator){if("undefined"==typeof e[s].id||null==e[s].id)for(n._idd=window.dhx4.newId();null!=this.itemData[n._idd];)n._idd=window.dhx4.newId();else n._idd=e[s].id;this.itemData[n._idd]=e[s]}if(i.appendChild(n),e[s]==this.separator){n.className="dhx_popup_sep",n._isSeparator=!0;var o=document.createElement("TD");o.className="dhx_popup_sep",o.colSpan=this.tpl.length,o.innerHTML="<div class='dhx_popup_sep'>&nbsp;</div>",n.appendChild(o),o=null}else{for(var l=0;l<this.tpl.length;l++){var r="dhx_popup_td";!this._IEFirstLast||1!=this.tpl.length&&0!=l&&l!=this.tpl.length-1||(r+=1==this.tpl.length?" dhx_popup_td_single":0==l?" dhx_popup_td_first":" dhx_popup_td_last");var o=document.createElement("TD");o.className=r,o.innerHTML=e[s][this.tpl[l]]||"&nbsp;",n.appendChild(o),o=null}this._IEHover&&(n._IEHover=!0,this._IEHoverInited||this._IEHoverInit())}n=null}i=null,this._repaint()},this._attachNode=function(t,e){this.clear(),this._nodeId="dhxpopup_node_"+window.dhx4.newId();var i=this.p.firstChild.firstChild.firstChild,s=document.createElement("TR");s.className="dhxnode",i.appendChild(s);var n=document.createElement("TD");return n.className="dhx_popup_td",n.innerHTML="<div id='"+this._nodeId+"' style='position:relative;'></div>",e.width&&(n.firstChild.style.width=e.width+"px"),e.height&&(n.firstChild.style.height=e.height+"px"),s.appendChild(n),n=s=i=null,"function"==typeof this["_attach_init_"+t]&&(this["_attach_init_"+t](e),this._enableIEVFix()),this._repaint(),this._nodeObj},this.unload=function(){if("function"==typeof window.addEventListener?(window.removeEventListener("click",this._doOnClick,!1),window.removeEventListener("keyup",this._doOnKeyUp,!1),window.removeEventListener("unload",this._doOnUnload,!1)):(document.body.detachEvent("onclick",this._doOnClick,!1),document.body.detachEvent("onkeyup",this._doOnKeyUp,!1),document.body.detachEvent("onunload",this._doOnUnload,!1)),this.clear(),this._doOnClick=null,this._doOnUnload=null,this._doOnKeyUp=null,null!=this.conf.toolbarEvent&&null!=this.conf.toolbar&&(null!=this.conf.toolbar.detachEvent?this.conf.toolbar.detachEvent(this.conf.toolbarEvent):this.conf.toolbar._getItemDim=null),null!=this.conf.ribbonEvent&&null!=this.conf.ribbon&&(null!=this.conf.ribbon.detachEvent?this.conf.ribbon.detachEvent(this.conf.ribbonEvent):this.conf.ribbon._getItemDim=null),this.conf.slider){for(var t=0;t<this.conf.slider_events.length;t++)this.conf.slider.detachEvent(this.conf.slider_events[t]);this.conf.slider_events=null,this._sliderShow=this._sliderHide=null,this.conf.slider=null}window.dhx4._eventable(this,"clear"),this.attachList=this.attachAccordion=this.attachCalendar=this.attachForm=this.attachGrid=this.attachLayout=this.attachTabbar=this.attachTree=this.attachHTML=this.attachObject=this._attachNode=null,this.show=this.hide=this.isVisible=this._setTemplate=this._repaint=this._setPos=this.getItemData=this.clear=this._idExists=this._doOnToolbarClick=this._doOnRibbonClick=this.setSkin=null,this.tpl=this.itemData=this.separator=this.mode=null,this._clearClick=this._lastId=this._posData=this.skinParams=this.skinParent=null,this.p.onclick=null,this.p.parentNode.removeChild(this.p),this.p=null,this.conf.toolbar=this.conf.toolbarEvent=this.conf.ribbon=this.conf.ribbonEvent=this.conf.form=this.conf.id=null,this.conf=null,this._IEHover=this._IEHoverTM=this._IEHoverInit=this._IEHoverClear=this._IEHoverRender=this._IEHoverInited=null,this._IEDisp=null,this.unload=null,e=null},window.dhx4._eventable(this),this._doOnClick=function(t){if(t=t||event,e._clearClick)return void(e._clearClick=!1);if(null!=e.conf.form){var i,s=t.target||t.srcElement;if("option"==(s.tagName||"").toLowerCase()&&(s=s.parentNode),null!=s.className&&s.className.search("dhxform")>=0)null!=s.parentNode&&null!=s.parentNode.parentNode&&null!=s.parentNode.parentNode._idd&&(i=s.parentNode.parentNode._idd,"ra"==s.parentNode.parentNode._type&&(i=[s.parentNode.parentNode._group,s.parentNode.parentNode._value]));else{for(var n=!0,o=!1;n&&!o;){var l=(s.className||"").toLowerCase();l.length>0&&(o="dhxform_btn"==l||l.search(/dhxeditor_inside/gi)>=0||"dhxcombo_input"==l||l.search(/dhxcombolist/gi)>=0),s=s.parentNode,n=null!=s}if(o)return}if(s=null,null!=i&&e._idExists(i))return}e.isVisible()&&e.callEvent("onBeforeHide",["click",t])===!0&&e.hide()},this._doOnKeyUp=function(t){t=t||event,27==t.keyCode&&e.isVisible()&&e.callEvent("onBeforeHide",["esc",t])===!0&&e.hide()},this._doOnUnload=function(){e.unload()},"function"==typeof window.addEventListener?(window.addEventListener("click",this._doOnClick,!1),window.addEventListener("keyup",this._doOnKeyUp,!1),window.addEventListener("unload",this._doOnUnload,!1)):(document.body.attachEvent("onclick",this._doOnClick,!1),document.body.attachEvent("onkeyup",this._doOnKeyUp,!1),document.body.attachEvent("onunload",this._doOnUnload,!1)),this._idExists=function(t){for(var e=!1,i=0;i<this.conf.id.length;i++)e=this.conf.id[i]instanceof Array?e||this.conf.id[i][0]==t[0]&&this.conf.id[i][1]==t[1]:e||this.conf.id[i]==t;return e},this._IEDisp=this.conf.isIE&&(navigator.userAgent.search("MSIE 6.0")>=0||"CSS1Compat"!=document.compatMode),this._IEHover=this.conf.isIE&&navigator.userAgent.search("MSIE 6.0")>=0,this._IEHover&&(this._IEHoverInit=function(){this.p.onmouseover=function(){for(var t=event.srcElement;t!=this&&1!=t._IEHover;)t=t.parentNode;if(t._IEHover){if(e._IEHoverTM&&window.clearTimeout(e._IEHoverTM),e._lastIEHover==t)return;e._IEHoverRender(t),t=null}},this.p.onmouseout=function(){e._IEHoverTM&&window.clearTimeout(e._IEHoverTM),e._IEHoverTM=window.setTimeout(function(){e._IEHoverRender(null)},1)},this._IEHoverRender=function(t){null!=this._lastIEHover&&this._lastIEHover.className.search(/tr_hover/gi)>=0&&(this._lastIEHover.className=this._lastIEHover.className.replace(/\s{0,}tr_hover/gi,""),this._lastIEHover=null),null!=t&&t.className.search(/tr_hover/gi)<0&&(t.className+=" tr_hover",e._lastIEHover=t)},this._IEHoverInited=!0},this._IEHoverClear=function(){this.p.onmouseover=null,this.p.onmouseout=null,this._IEHoverInited=!1}),this._IEFirstLast=this.conf.isIE&&navigator.userAgent.search(/MSIE [6,7,8]\.0/i)>=0,this._enableIEVFix=function(){if(this.conf.isIE&&navigator.userAgent.search("MSIE 6.0")>=0){var t=this.attachEvent("onHide",function(){document.getElementById(this._nodeId).style.visibility="hidden"}),e=this.attachEvent("onShow",function(){document.getElementById(this._nodeId).style.visibility="visible"});null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(t,e)}},"undefined"!=typeof window.dhtmlXToolbarObject&&null!=this.conf.toolbar&&this.conf.toolbar instanceof window.dhtmlXToolbarObject&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.skinParent=this.conf.toolbar.conf.skin,this._doOnToolbarClick=function(t){for(var i=0;i<e.conf.id.length;i++)t==e.conf.id[i]&&t!=e._lastId&&(e.show(t),e._clearClick=!0)},"undefined"==typeof dhtmlXToolbarObject.prototype._getItemDim&&(dhtmlXToolbarObject.prototype._getItemDim=function(t){var e=this.objPull[this.idPrefix+t],i={left:window.dhx4.absLeft(e.obj),top:window.dhx4.absTop(e.obj),width:e.obj.offsetWidth+(e.arw?e.arw.offsetWidth:0),height:e.obj.offsetHeight};return e=null,i}),this.conf.toolbarEvent=this.conf.toolbar.attachEvent("onClick",this._doOnToolbarClick)),"undefined"!=typeof window.dhtmlXRibbon&&null!=this.conf.ribbon&&this.conf.ribbon instanceof window.dhtmlXRibbon&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.skinParent=this.conf.ribbon.conf.skin,this._doOnRibbonClick=function(t){for(var i=0;i<e.conf.id.length;i++)t==e.conf.id[i]&&t!=e._lastId&&(e.show(t),e._clearClick=!0)},"undefined"==typeof dhtmlXRibbon.prototype._getItemDim&&(dhtmlXRibbon.prototype._getItemDim=function(t){var e=this._items[t].base,i={left:window.dhx4.absLeft(e),top:window.dhx4.absTop(e),width:e.offsetWidth,height:e.offsetHeight};return e=null,i}),this.conf.ribbonEvent=this.conf.ribbon.attachEvent("_showPopup",this._doOnRibbonClick)),"undefined"!=typeof window.dhtmlXForm&&null!=this.conf.form&&this.conf.form instanceof window.dhtmlXForm&&null!=this.conf.id&&(this.conf.id instanceof Array||(this.conf.id=[this.conf.id]),this.conf.mode||(this.mode="right"),this.skinParent=this.conf.form.skin,"undefined"==typeof dhtmlXForm.prototype._getItemDim)){dhtmlXForm.prototype._getItemDim=function(t){return this.doWithItem(t,"_getDim")};for(var i in{input:1,password:1,select:1,multiselect:1,checkbox:1,radio:1,button:1,combo:1,btn2state:1,calendar:1,colorpicker:1,editor:1})null!=dhtmlXForm.prototype.items[i]&&(dhtmlXForm.prototype.items[i]._getDim=function(t){var e=t;({ta:!0,pw:!0,se:!0,calendar:!0,colorpicker:1,editor:!0})[t._type]&&(e=t.childNodes[t._ll?1:0].childNodes[0]),{ch:!0,ra:!0,btn2state:!0}[t._type]&&(e=t.childNodes[t._ll?1:0].childNodes[1]),{bt:!0}[t._type]&&(e=t.firstChild),{combo:!0}[t._type]&&(e=t._combo.DOMParent.firstChild);var i={left:window.dhx4.absLeft(e),top:window.dhx4.absTop(e),width:e.offsetWidth,height:e.offsetHeight};return e=null,i})}return"undefined"!=typeof window.dhtmlXSlider&&null!=this.conf.slider&&this.conf.slider instanceof window.dhtmlXSlider&&(this.conf.mode||(this.mode="top"),this.conf.slider_tm=null,this._sliderShow=function(){e.conf.slider_tm&&window.clearTimeout(e.conf.slider_tm);var t=e.conf.slider._nodes.runner,i={left:window.dhx4.absLeft(t),top:window.dhx4.absTop(t),width:t.offsetWidth,height:t.offsetHeight};e.show(i.left,i.top,i.width,i.height)},this._sliderHide=function(){e.conf.slider_tm=window.setTimeout(function(){e.hide()},200)},this.conf.slider_events=[this.conf.slider.attachEvent("_onRunnerMouseDown",this._sliderShow),this.conf.slider.attachEvent("_onRunnerMouseUp",this._sliderHide),this.conf.slider.attachEvent("onChange",this._sliderShow)]),this.setSkin(this.skinParent||this.conf.skin||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_popup")||"dhx_skyblue"),this}function dhtmlXMenuObject(t,e){var i=this;if(this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxmenu")||"dhx_skyblue",mode:"web",align:"left",is_touched:!1,selected:-1,last_click:-1,fixed_pos:!1,rtl:!1,icons_path:"",arrow_ff_fix:navigator.userAgent.indexOf("MSIE")>=0&&"BackCompat"==document.compatMode,live_id:window.dhx4.newId(),tags:{root:"menu",item:"item",text_ext:"itemtext",userdata:"userdata",tooltip:"tooltip",hotkey:"hotkey",href:"href"},autoload:{},hide_tm:{},top_mode:!0,top_tmtime:200,v_enabled:!1,v:{x1:null,x2:null,y1:null,y2:null},dir_toplv:"bottom",dir_sublv:"right",auto_overflow:!1,overflow_limit:0,of_utm:null,of_utime:20,of_ustep:3,of_dtm:null,of_dtime:20,of_dstep:3,tm_sec:400,tm_handler:null,dload:!1,dload_url:"",dload_icon:!1,dload_params:{action:"loadMenu"},dload_pid:"parentId",tl_botmarg:1,tl_rmarg:0,tl_ofsleft:1,context:!1,ctx_zoneid:!1,ctx_autoshow:!0,ctx_autohide:!0,ctx_hideall:!0,ctx_zones:{},ctx_baseid:null,selected_sub:[],opened_poly:[]},"object"==typeof t&&null!=t&&"undefined"==typeof t.tagName){(null!=t.icons_path||null!=t.icon_path)&&(this.conf.icons_path=t.icons_path||t.icon_path),null!=t.skin&&(this.conf.skin=t.skin),t.visible_area&&(this.conf.v_enabled=!0,this.conf.v={x1:t.visible_area.x1,x2:t.visible_area.x2,y1:t.visible_area.y1,y2:t.visible_area.y2});for(var s in{json:1,xml:1,items:1,top_text:1,align:1,open_mode:1,overflow:1,dynamic:1,dynamic_icon:1,context:1,onload:1,onclick:1,oncheckboxclick:1,onradioclick:1})null!=t[s]&&(this.conf.autoload[s]=t[s]);t=t.parent}if(null==t)this.base=document.body;else{var n="string"==typeof t?document.getElementById(t):t;null!=n?(this.base=n,this.base.id||(this.base.id=(new Date).valueOf()),this.base.className+=" dhtmlxMenu_"+this.conf.skin+"_Middle dir_left",this.base._autoSkinUpdate=!0,this.base.oncontextmenu&&(this.base._oldContextMenuHandler=this.base.oncontextmenu),this.conf.ctx_baseid=this.base.id,this.base.onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this.base.oncontextmenu=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1}):this.base=document.body}this.idPrefix="",this.topId="dhxWebMenuTopId",this.idPull={},this.itemPull={},this.userData={},this.radio={},this.setSkin=function(t){var e=this.conf.skin;switch(this.conf.skin=t,this.conf.skin){case"dhx_skyblue":case"dhx_web":this.conf.tl_botmarg=2,this.conf.tl_rmarg=1,this.conf.tl_ofsleft=1;break;case"dhx_terrace":this.conf.tl_botmarg=0,this.conf.tl_rmarg=0,this.conf.tl_ofsleft=0}this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+e+"_Middle","")+" dhtmlxMenu_"+this.conf.skin+"_Middle");for(var i in this.idPull)this.idPull[i].className=String(this.idPull[i].className).replace(e,this.conf.skin)},this.setSkin(this.conf.skin),this._addSubItemToSelected=function(t,e){for(var i=!0,s=0;s<this.conf.selected_sub.length;s++)this.conf.selected_sub[s][0]==t&&this.conf.selected_sub[s][1]==e&&(i=!1);return 1==i&&this.conf.selected_sub.push(new Array(t,e)),i},this._removeSubItemFromSelected=function(t,e){for(var i=new Array,s=!1,n=0;n<this.conf.selected_sub.length;n++)this.conf.selected_sub[n][0]==t&&this.conf.selected_sub[n][1]==e?s=!0:i[i.length]=this.conf.selected_sub[n];return 1==s&&(this.conf.selected_sub=i),s},this._getSubItemToDeselectByPolygon=function(t){for(var e=new Array,i=0;i<this.conf.selected_sub.length;i++)if(this.conf.selected_sub[i][1]==t){e[e.length]=this.conf.selected_sub[i][0],e=e.concat(this._getSubItemToDeselectByPolygon(this.conf.selected_sub[i][0]));for(var s=!0,n=0;n<this.conf.opened_poly.length;n++)this.conf.opened_poly[n]==this.conf.selected_sub[i][0]&&(s=!1);1==s&&(this.conf.opened_poly[this.conf.opened_poly.length]=this.conf.selected_sub[i][0]),this.conf.selected_sub[i][0]=-1,this.conf.selected_sub[i][1]=-1}return e},this._hidePolygon=function(t){if(null!=this.idPull["polygon_"+t]){if(null!=this.idPull["polygon_"+t]._zId&&window.dhx4.zim.clear(this.idPull["polygon_"+t]._zId),"undefined"!=typeof this._menuEffect&&this._menuEffect!==!1)this._hidePolygonEffect("polygon_"+t);else{if("none"==this.idPull["polygon_"+t].style.display)return;this.idPull["polygon_"+t].style.display="none",null!=this.idPull["arrowup_"+t]&&(this.idPull["arrowup_"+t].style.display="none"),null!=this.idPull["arrowdown_"+t]&&(this.idPull["arrowdown_"+t].style.display="none"),this._updateItemComplexState(t,!0,!1),window.dhx4.isIE6&&null!=this.idPull["polygon_"+t+"_ie6cover"]&&(this.idPull["polygon_"+t+"_ie6cover"].style.display="none")}t=String(t).replace(this.idPrefix,""),t==this.topId&&(t=null),this.callEvent("onHide",[t]),null!=t&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+t].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+t,!0)}},this._showPolygon=function(t,e){var i=this._countVisiblePolygonItems(t);if(0!=i){var s="polygon_"+t;if(null!=this.idPull[s]&&null!=this.idPull[t]){if(this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context&&!this.idPull[t]._mouseOver&&e==this.conf.dir_toplv)return;this.conf.fixed_pos||this._autoDetectVisibleArea();var n=0,o=0,l=null,r=null;if(null==this.idPull[s]._zId&&(this.idPull[s]._zId=window.dhx4.newId()),this.idPull[s]._zInd=window.dhx4.zim.reserve(this.idPull[s]._zId),this.idPull[s].style.visibility="hidden",this.idPull[s].style.left="0px",this.idPull[s].style.top="0px",this.idPull[s].style.display="",this.idPull[s].style.zIndex=this.idPull[s]._zInd,this.conf.auto_overflow)if(this.idPull[s].firstChild.offsetHeight>this.conf.v.y1+this.conf.v.y2){var a=Math.floor((this.conf.v.y2-this.conf.v.y1-35)/24);this.conf.overflow_limit=a}else this.conf.overflow_limit=0,null!=this.idPull["arrowup_"+t]&&this._removeUpArrow(String(t).replace(this.idPrefix,"")),null!=this.idPull["arrowdown_"+t]&&this._removeDownArrow(String(t).replace(this.idPrefix,""));if(this.conf.overflow_limit>0&&this.conf.overflow_limit<i&&(null==this.idPull["arrowup_"+t]&&this._addUpArrow(String(t).replace(this.idPrefix,"")),null==this.idPull["arrowdown_"+t]&&this._addDownArrow(String(t).replace(this.idPrefix,"")),l=this.idPull["arrowup_"+t],l.style.display="none",r=this.idPull["arrowdown_"+t],r.style.display="none"),this.conf.overflow_limit>0&&(this.conf.overflow_limit<i?(this.idPull[s].childNodes[1].style.height=24*this.conf.overflow_limit+"px",l.style.width=r.style.width=this.idPull[s].childNodes[1].style.width=this.idPull[s].childNodes[1].childNodes[0].offsetWidth+"px",this.idPull[s].childNodes[1].scrollTop=0,l.style.display="",n=l.offsetHeight,r.style.display="",o=r.offsetHeight):(this.idPull[s].childNodes[1].style.height="",this.idPull[s].childNodes[1].style.width="")),null!=this.itemPull[t]){"polygon_"+this.itemPull[t].parent}else if(this.conf.context){this.idPull[this.idPrefix+this.topId]}var h=null!=this.idPull[t].tagName?window.dhx4.absLeft(this.idPull[t]):this.idPull[t][0],d=null!=this.idPull[t].tagName?window.dhx4.absTop(this.idPull[t]):this.idPull[t][1],c=null!=this.idPull[t].tagName?this.idPull[t].offsetWidth:0,u=null!=this.idPull[t].tagName?this.idPull[t].offsetHeight:0,_=0,f=0,p=this.idPull[s].offsetWidth,m=this.idPull[s].childNodes[1].offsetHeight+n+o;if("bottom"==e&&(_=this.conf.rtl?h+(null!=c?c:0)-p:"right"==this.conf.align?h+c-p:h-1+(e==this.conf.dir_toplv?this.conf.tl_rmarg:0),f=d-1+u+this.conf.tl_botmarg),"right"==e&&(_=h+c-1,f=d+2),"left"==e&&(_=h-this.idPull[s].offsetWidth+2,f=d+2),"top"==e&&(_=h-1,f=d-m+2),this.conf.fixed_pos)var g=65536,b=65536;else{var g=null!=this.conf.v.x2?this.conf.v.x2:0,b=null!=this.conf.v.y2?this.conf.v.y2:0;0==g&&(window.innerWidth?(g=window.innerWidth,b=window.innerHeight):(g=document.body.offsetWidth,b=document.body.scrollHeight))}if(_+p>g&&!this.conf.rtl&&(_=h-p+2),_<this.conf.v.x1&&this.conf.rtl&&(_=h+c-2),0>_&&(_=0),f+m>b&&null!=this.conf.v.y2&&(f=Math.max(d+u-m+2,this.conf.v_enabled?this.conf.v.y1+2:2),this.conf.context&&this.idPrefix+this.topId==t&&null!=r&&(f-=2),null==this.itemPull[t]||this.conf.context||this.itemPull[t].parent==this.idPrefix+this.topId&&(f-=this.base.offsetHeight)),this.idPull[s].style.left=_+"px",this.idPull[s].style.top=f+"px","undefined"!=typeof this._menuEffect&&this._menuEffect!==!1)this._showPolygonEffect(s);else if(this.idPull[s].style.visibility="",this.conf.overflow_limit>0&&this.conf.overflow_limit<i&&(this.idPull[s].childNodes[1].scrollTop=0,this._checkArrowsState(t)),window.dhx4.isIE6){var v=s+"_ie6cover";if(null==this.idPull[v]){var y=document.createElement("IFRAME");y.className="dhtmlxMenu_IE6CoverFix_"+this.conf.skin,y.frameBorder=0,y.setAttribute("src","javascript:false;"),document.body.insertBefore(y,document.body.firstChild),this.idPull[v]=y}this.idPull[v].style.left=_+"px",this.idPull[v].style.top=f+"px",this.idPull[v].style.width=this.idPull[s].offsetWidth+"px",this.idPull[v].style.height=this.idPull[s].offsetHeight+"px",this.idPull[v].style.zIndex=this.idPull[s].style.zIndex-1,this.idPull[v].style.display=""}t=String(t).replace(this.idPrefix,""),t==this.topId&&(t=null),this.callEvent("onShow",[t]),null!=t&&"dhx_terrace"==this.conf.skin&&this.itemPull[this.idPrefix+t].parent==this.idPrefix+this.topId&&this._improveTerraceButton(this.idPrefix+t,!1)}}},this._redistribSubLevelSelection=function(t,e){for(;this.conf.opened_poly.length>0;)this.conf.opened_poly.pop();var i=this._getSubItemToDeselectByPolygon(e);this._removeSubItemFromSelected(-1,-1);for(var s=0;s<i.length;s++)null!=this.idPull[i[s]]&&i[s]!=t&&"enabled"==this.itemPull[i[s]].state&&(this.idPull[i[s]].className="sub_item");for(var s=0;s<this.conf.opened_poly.length;s++)this.conf.opened_poly[s]!=e&&this._hidePolygon(this.conf.opened_poly[s]);if("enabled"==this.itemPull[t].state){if(this.idPull[t].className="sub_item_selected",this.itemPull[t].complex&&this.conf.dload&&"no"==this.itemPull[t].loaded){1==this.conf.dload_icon&&this._updateLoaderIcon(t,!0),this.itemPull[t].loaded="get";var n=t.replace(this.idPrefix,"");this._dhxdataload.onBeforeXLS=function(){var t={params:{}};t.params[this.conf.dload_pid]=n;for(var e in this.conf.dload_params)t.params[e]=this.conf.dload_params[e];return t},this.loadStruct(this.conf.dload_url)}(this.itemPull[t].complex||this.conf.dload&&"yes"==this.itemPull[t].loaded)&&this.itemPull[t].complex&&null!=this.idPull["polygon_"+t]&&(this._updateItemComplexState(t,!0,!0),this._showPolygon(t,this.conf.dir_sublv)),this._addSubItemToSelected(t,e),this.conf.selected=t}},this._doOnClick=function(t,e,i){if(this.conf.last_click=t,null!=this.itemPull[this.idPrefix+t].href_link&&"enabled"==this.itemPull[this.idPrefix+t].state){var s=document.createElement("FORM"),n=String(this.itemPull[this.idPrefix+t].href_link).split("?");if(s.action=n[0],null!=n[1])for(var o=String(n[1]).split("&"),l=0;l<o.length;l++){var r=String(o[l]).split("="),a=document.createElement("INPUT");a.type="hidden",a.name=r[0]||"",a.value=r[1]||"",s.appendChild(a)}return null!=this.itemPull[this.idPrefix+t].href_target&&(s.target=this.itemPull[this.idPrefix+t].href_target),s.style.display="none",document.body.appendChild(s),s.submit(),void(null!=s&&(document.body.removeChild(s),s=null))}if("c"!=e.charAt(0)&&"d"!=e.charAt(1)&&"s"!=e.charAt(2)){if(this.checkEvent("onClick"))this.callEvent("onClick",[t,this.conf.ctx_zoneid,i]);else if("d"==e.charAt(1)||"win"==this.conf.mode&&"t"==e.charAt(2))return;this.conf.context&&this._isContextMenuVisible()&&this.conf.ctx_autohide?this._hideContextMenu():this._clearAndHide&&this._clearAndHide()}},this._doOnTouchMenu=function(t){0==this.conf.is_touched&&(this.conf.is_touched=!0,this.checkEvent("onTouch")&&this.callEvent("onTouch",[t]))},this._searchMenuNode=function(t,e){for(var i=new Array,s=0;s<e.length;s++)if("object"==typeof e[s]){5==e[s].length&&"object"!=typeof e[s][0]&&e[s][0].replace(this.idPrefix,"")==t&&0==s&&(i=e);var n=this._searchMenuNode(t,e[s]);n.length>0&&(i=n)}return i},this._getMenuNodes=function(t){var e=new Array;for(var i in this.itemPull)this.itemPull[i].parent==t&&(e[e.length]=i);return e},this._genStr=function(t){for(var e="",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s=0;t>s;s++)e+=i.charAt(Math.round(Math.random()*(i.length-1)));return e},this.getItemType=function(t){return t=this.idPrefix+t,null==this.itemPull[t]?null:this.itemPull[t].type},this.forEachItem=function(t){for(var e in this.itemPull)t(String(e).replace(this.idPrefix,""))},this._clearAndHide=function(){for(i.conf.selected=-1,i.conf.last_click=-1;i.conf.opened_poly.length>0;)i.conf.opened_poly.pop();for(var t=0;t<i.conf.selected_sub.length;t++){var e=i.conf.selected_sub[t][0];null!=i.idPull[e]&&"enabled"==i.itemPull[e].state&&("sub_item_selected"==i.idPull[e].className&&(i.idPull[e].className="sub_item"),i.idPull[e].className=="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Selected"&&(i.idPull[e].className=null!=i.itemPull[e].cssNormal?i.itemPull[e].cssNormal:"dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Normal")),i._hidePolygon(e)}i.conf.is_touched=!1,i.conf.context&&i.conf.ctx_hideall&&i._hidePolygon(i.idPrefix+i.topId)},this._showSubLevelItem=function(t,e){null!=document.getElementById("arrow_"+this.idPrefix+t)&&(document.getElementById("arrow_"+this.idPrefix+t).style.display=e?"none":""),null!=document.getElementById("image_"+this.idPrefix+t)&&(document.getElementById("image_"+this.idPrefix+t).style.display=e?"none":""),null!=document.getElementById(this.idPrefix+t)&&(document.getElementById(this.idPrefix+t).style.display=e?"":"none")},this._hideSubLevelItem=function(t){this._showSubLevelItem(t,!0)},this.idPrefix=this._genStr(12)+"_",this._bodyClick=function(t){t=t||event,2==t.button||window.dhx4.isOpera&&1==t.ctrlKey||(i.conf.context?i.conf.ctx_autohide&&(!window.dhx4.isOpera||i._isContextMenuVisible()&&window.dhx4.isOpera)&&i._hideContextMenu():i._clearAndHide&&i._clearAndHide())},this._bodyContext=function(t){t=t||event;var e=String((t.srcElement||t.target).className);if(-1==e.search("dhtmlxMenu")||-1==e.search("SubLevelArea")){for(var s=!0,n=t.target||t.srcElement;null!=n;)null!=n.id&&i.isContextZone(n.id)&&(s=!1),n==document.body&&(s=!1),n=n.parentNode;s&&i.hideContextMenu()}},"undefined"!=typeof window.addEventListener?(window.addEventListener("click",this._bodyClick,!1),window.addEventListener("contextmenu",this._bodyContext,!1)):(document.body.attachEvent("onclick",this._bodyClick),document.body.attachEvent("oncontextmenu",this._bodyContext)),this.unload=function(){window.dhx4._eventable(this,"clear"),dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=null;try{delete dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]}catch(t){}if(this.conf.live_id=null,"function"==typeof window.addEventListener?(window.removeEventListener("click",this._bodyClick,!1),window.removeEventListener("contextmenu",this._bodyContext,!1)):(document.body.detachEvent("onclick",this._bodyClick),document.body.detachEvent("oncontextmenu",this._bodyContext)),this._bodyClick=null,this._bodyContext=null,this.removeItem(this.idPrefix+this.topId,!0),this.itemPull=null,this.idPull=null,this.conf.context)for(var e in this.conf.ctx_zones)this.removeContextZone(e);null!=this.cont&&(this.cont.className="",this.cont.parentNode.removeChild(this.cont),this.cont=null),null!=this.base&&(this.base.className="",this.conf.context||(this.base.oncontextmenu=this.base._oldContextMenuHandler||null),this.base.onselectstart=null,this.base=null);for(var e in this)this[e]=null;i=null},dhtmlXMenuObject.prototype.liveInst[this.conf.live_id]=this,window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson",this.conf.tags.root,{struct:!0}),window.dhx4._eventable(this),1==window.dhx4.s2b(this.conf.autoload.context)&&this.renderAsContextMenu(),null!=this.conf.autoload.dynamic?this.enableDynamicLoading(this.conf.autoload.dynamic,window.dhx4.s2b(this.conf.autoload.dynamic_icon)):null!=this.conf.autoload.items?this.loadStruct(this.conf.autoload.items,this.conf.autoload.onload):null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):null!=this.conf.autoload.xml&&this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload);for(var s in{onclick:1,oncheckboxclick:1,onradioclick:1})null!=this.conf.autoload[s]&&("function"==typeof this.conf.autoload[s]?this.attachEvent(s,this.conf.autoload[s]):"function"==typeof window[this.conf.autoload[s]]&&this.attachEvent(s,window[this.conf.autoload[s]]));null!=this.conf.autoload.top_text&&this.setTopText(this.conf.autoload.top_text),null!=this.conf.autoload.align&&this.setAlign(this.conf.autoload.align),null!=this.conf.autoload.open_mode&&this.setOpenMode(this.conf.autoload.open_mode),null!=this.conf.autoload.overflow&&this.setOverflowHeight(this.conf.autoload.overflow);for(var s in this.conf.autoload)this.conf.autoload[s]=null,delete this.conf.autoload[s];return this.conf.autoload=null,this}function dhtmlXRibbon(t){var e,i,s=this;this.conf={type:"ribbon",icons_path:t&&t.icons_path?t.icons_path:"",skin:"dhx_skyblue"},this._eventHandlers={},this._base=null,this._items={},this._tabbar=null,this.childIds=[],"string"==typeof t?i=t:t&&t.tagName?i=t:t&&t.parent&&(t.parent.tagName||"string"==typeof t.parent)&&(i=t.parent),this._doOnHighlight0=function(t){t=t||event;var e=t.target||t.srcElement,i=s._findItemByNode(e),n=s._items[i._dhx_ribbonId];return n.conf.disable?void 0:s.items[n.type]&&"function"==typeof s.items[n.type].mouseover&&1!=s.items[n.type].mouseover(n,s,t)?!1:void(/dhxrb_highlight0/.test(i.className)||(i.className+=" dhxrb_highlight0"))},this._doOffHighlight0=function(t){t=t||event;var e=t.target||t.srcElement,i=s._findItemByNode(e),n=s._items[i._dhx_ribbonId];if(!n.conf.disable){if(s.items[n.type]&&"function"==typeof s.items[n.type].mouseout&&1!=s.items[n.type].mouseout(n,s,t))return!1;/dhxrb_highlight1/.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_highlight1/,"")),/dhxrb_highlight0/.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_highlight0/,""))}},this._doOnHighlight1=function(t){t=t||event;var e=t.target||t.srcElement,i=s._findItemByNode(e),n=s._items[i._dhx_ribbonId];return n.conf.disable?void 0:(s.callEvent("_showPopup",[n.id]),s.items[n.type]&&"function"==typeof s.items[n.type].mousedown&&1!=s.items[n.type].mousedown(n,s,t)?!1:void(/dhxrb_highlight1/.test(i.className)||(i.className+=" dhxrb_highlight1")))},this._doOffHighlight1=function(t){t=t||event;var e=t.target||t.srcElement,i=s._findItemByNode(e),n=s._items[i._dhx_ribbonId];return n.conf.disable?void 0:s.items[n.type]&&"function"==typeof s.items[n.type].mouseup&&1!=s.items[n.type].mouseup(n,s,t)?!1:void(/dhxrb_highlight1/.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_highlight1/,"")))},this._doOnClick=function(t){t=t||event;var e=t.target||t.srcElement,i=s._findItemByNode(e),n=s._items[i._dhx_ribbonId];n.conf.disable||s.items[n.type]&&"function"==typeof s.items[n.type].click&&s.items[n.type].click(n,s,t)},this._doOnFocus=function(t){t=t||event;var e=t.target||t.srcElement,i=s._findItemByNode(e),n=s._items[i._dhx_ribbonId];n.conf.disable||(s.callEvent("_showPopup",[n.id]),s.items[n.type]&&"function"==typeof s.items[n.type].focus&&s.items[n.type].focus(n,s,t))},this._doOnBlur=function(t){t=t||event;var e=t.target||t.srcElement,i=s._findItemByNode(e),n=s._items[i._dhx_ribbonId];n.conf.disable||s.items[n.type]&&"function"==typeof s.items[n.type].blur&&s.items[n.type].blur(n,s,t)},this._doOnChange=function(t){t=t||event;var e=t.target||t.srcElement,i=s._findItemByNode(e),n=s._items[i._dhx_ribbonId];n.conf.disable||s.items[n.type]&&"function"==typeof s.items[n.type].change&&s.items[n.type].change(n,s,t)},this._doOnKeydown=function(t){t=t||event;var e=t.target||t.srcElement,i=s._findItemByNode(e),n=s._items[i._dhx_ribbonId];n.conf.disable||s.items[n.type]&&"function"==typeof s.items[n.type].keydown&&s.items[n.type].keydown(n,s,t)},this._tabCustomApi={enable:function(t,e){var i=null,n=null;if(e=e||!1,1!=e){i=s._items[this._idd];for(n in i.childIds)n=parseInt(n),s.enable(i.childIds[n])}return s._tabOriginalApi.enable.apply(this,[t])},disable:function(t,e){var i=null,n=null;if(0!=e){i=s._items[this._idd];for(n in i.childIds)n=parseInt(n),s.disable(i.childIds[n])}return s._tabOriginalApi.disable.apply(this,[t])},close:function(t){var e,i=s._items[this._idd];s._removeTab(i),s._tabOriginalApi.close.apply(this,[t]);for(e in s._tabOriginalApi)this[e]=null}},this._attachEventTabbar=function(){this._tabbar.attachEvent("onSelect",function(){return s.callEvent("onSelect",arguments)}),this._tabbar.attachEvent("onTabClick",function(){return s.callEvent("onTabClick",arguments)
}),this._tabbar.attachEvent("onTabClose",function(){return s.callEvent("onTabClose",arguments)})},"string"==typeof i?this._base=document.getElementById(i):i&&i.tagName?this._base=i:(this._base=document.createElement("div"),this._base._dhx_remove=!0,document.body.firstChild?document.body.insertBefore(this._base,document.body.firstChild):document.body.appendChild(this._base)),e=dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||dhx4.skinDetect("dhtmlxribbon")||"dhx_skyblue","object"==typeof t&&t.skin&&(e=t.skin),this.setSkin(e),dhx4._eventable(this),dhx4._enableDataLoading(this,"_renderData","_xmlToJson","ribbon",{struct:!0}),this.attachEvent("_onHeightChanged",function(){this.conf.inited=!0}),this._base.className+=" dhxrb_without_tabbar",this._base.innerHTML="<div class='dhxrb_background_area'></div>",null!=t&&(t.json?this.loadStruct(t.json,t.onload):t.xml?this.loadStruct(t.xml,t.onload):this._renderData(t)),this.unload=function(){var t=null,e=[];for(t in this.childIds)t=parseInt(t),e.push(this.childIds[t]);dhx4._enableDataLoading(this,null,null,null,"clear"),dhx4._eventable(this,"clear");for(t in e)t=parseInt(t),"tab"==this._items[e[t]].type?this.tabs(e[t]).close(!1):this.removeItem(e[t]);this._tabbar&&(this._tabbar.unload(),this._tabbar=null),this._base.innerHTML="",this._base._dhx_remove?this._base.parentNode.removeChild(this._base):this._base.className=this._base.className.replace(/\s?(dhtmlx|dhxrb)(\S*)/gi,"");for(t in this)this[t]=null;s=null}}function dhtmlXToolbarObject(t,e){var i=this;for(this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtoolbar")||"dhx_skyblue",align:"left",align_autostart:"left",icons_path:"",iconSize:18,sel_ofs_x:0,sel_ofs_y:0,xml_autoload:null,items_autoload:null},"object"==typeof t&&null!=t&&"undefined"==typeof t.tagName&&((null!=t.icons_path||null!=t.icon_path)&&(this.conf.icons_path=t.icons_path||t.icon_path),null!=t.icons_size&&(this.conf.icons_size_autoload=t.icons_size),null!=t.json&&(this.conf.json_autoload=t.json),null!=t.xml&&(this.conf.xml_autoload=t.xml),null!=t.onload&&(this.conf.onload_autoload=t.onload),null!=t.items&&(this.conf.items_autoload=t.items),null!=t.skin&&(this.conf.skin=t.skin),null!=t.align&&(this.conf.align_autostart=t.align),t=t.parent),this.cont="object"!=typeof t?document.getElementById(t):t;this.cont.childNodes.length>0;)this.cont.removeChild(this.cont.childNodes[0]);return t=null,this.cont.dir="ltr",this.base=document.createElement("DIV"),this.base.className="dhxtoolbar_float_left",this.cont.appendChild(this.base),window.dhx4.isIPad&&(this.cont.ontouchstart=function(t){return t=t||event,"input"==String(t.target.tagName||"").toLowerCase()?!0:(t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1)}),this.setSkin(this.conf.skin),this.objPull={},this.anyUsed="none",this._genStr=function(t){for(var e="",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s=0;t>s;s++)e+=i.charAt(Math.round(Math.random()*(i.length-1)));return e},this.rootTypes=new Array("button","buttonSelect","buttonTwoState","separator","label","slider","text","buttonInput"),this.idPrefix=this._genStr(12),window.dhx4._enableDataLoading(this,"_initObj","_xmlToJson","toolbar",{struct:!0}),window.dhx4._eventable(this),this._getObj=function(t,e){for(var i=null,s=0;s<t.childNodes.length;s++)null!=t.childNodes[s].tagName&&String(t.childNodes[s].tagName).toLowerCase()==String(e).toLowerCase()&&(i=t.childNodes[s]);return i},this._addImgObj=function(t){var e=document.createElement("IMG");return t.childNodes.length>0?t.insertBefore(e,t.childNodes[0]):t.appendChild(e),e},this._setItemImage=function(t,e,i){if(1==i?t.imgEn=e:t.imgDis=e,!(!t.state&&1==i||t.state&&0==i)){var s=this._getObj(t.obj,"img");null==s&&(s=this._addImgObj(t.obj)),s.src=this.conf.icons_path+e}},this._clearItemImage=function(t,e){if(1==e?t.imgEn="":t.imgDis="",!(!t.state&&1==e||t.state&&0==e)){var i=this._getObj(t.obj,"img");null!=i&&i.parentNode.removeChild(i)}},this._setItemText=function(t,e){var i=this._getObj(t.obj,"div");return null==e||0==e.length?void(null!=i&&i.parentNode.removeChild(i)):(null==i&&(i=document.createElement("DIV"),i.className="dhxtoolbar_text",t.obj.appendChild(i)),void(i.innerHTML=e))},this._getItemText=function(t){var e=this._getObj(t.obj,"div");return null!=e?e.innerHTML:""},this._enableItem=function(t){if(!t.state){t.state=!0,"buttonTwoState"==this.objPull[t.id].type&&1==this.objPull[t.id].obj.pressed?(t.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",t.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"):(t.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",t.obj.renderAs=t.obj.className),t.arw&&(t.arw.className=String(t.obj.className).replace("btn","arw"));var e=this._getObj(t.obj,"img");""!=t.imgEn?(null==e&&(e=this._addImgObj(t.obj)),e.src=this.conf.icons_path+t.imgEn):null!=e&&e.parentNode.removeChild(e)}},this._disableItem=function(t){if(t.state){t.state=!1,t.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+("buttonTwoState"==this.objPull[t.id].type&&t.obj.pressed?"pres_":"")+"dis",t.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",t.arw&&(t.arw.className=String(t.obj.className).replace("btn","arw"));var e=this._getObj(t.obj,"img");""!=t.imgDis?(null==e&&(e=this._addImgObj(t.obj)),e.src=this.conf.icons_path+t.imgDis):null!=e&&e.parentNode.removeChild(e),null!=t.polygon&&"none"!=t.polygon.style.display&&(window.dhx4.zim.clear(t.polygon._idd),t.polygon.style.display="none",t.polygon._ie6cover&&(t.polygon._ie6cover.style.display="none"),"dhx_terrace"==this.conf.skin&&this._improveTerraceButtonSelect(t.id,!0)),this.anyUsed="none"}},this.clearAll=function(){for(var t in this.objPull)this._removeItem(String(t).replace(this.idPrefix,""))},this._doOnClick=function(){i&&i.forEachItem&&i.forEachItem(function(t){if("buttonSelect"==i.objPull[i.idPrefix+t].type){var e=i.objPull[i.idPrefix+t];e.arw._skip===!0?e.arw._skip=!1:"none"!=e.polygon.style.display&&(e.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",e.obj.className=e.obj.renderAs,e.arw.className=String(e.obj.renderAs).replace("btn","arw"),i.anyUsed="none",window.dhx4.zim.clear(e.polygon._idd),e.polygon.style.display="none",e.polygon._ie6cover&&(e.polygon._ie6cover.style.display="none"),"dhx_terrace"==i.conf.skin&&i._improveTerraceButtonSelect(e.id,!0))}})},window.dhx4.isIPad?document.addEventListener("touchstart",this._doOnClick,!1):"undefined"!=typeof window.addEventListener?window.addEventListener("mousedown",this._doOnClick,!1):document.body.attachEvent("onmousedown",this._doOnClick),null!=this.conf.icons_size_autoload&&(this.setIconSize(this.conf.icons_size_autoload),this.conf.icons_size_autoload=null),null!=this.conf.items_autoload?(this.loadStruct(this.conf.items_autoload,this.conf.onload_autoload),this.conf.items_autoload=null):null!=this.conf.json_autoload?(this.loadStruct(this.conf.json_autoload,this.conf.onload_autoload),this.conf.json_autoload=null):null!=this.conf.xml_autoload&&(this.loadStruct(this.conf.xml_autoload,this.conf.onload_autoload),this.conf.xml_autoload=null),this.conf.align_autostart!=this.conf.align&&(this.setAlign(this.conf.align_autostart),this.conf.align_autostart=null),this}function dhtmlXEditor(t,e){var i=this;for(this.conf={content:"",contentHTML:"",resizeTM:null,resizeTMTime:100,roMode:!1,toolbar:!1,iconsPath:"",evs:["focus","blur","keydown","keyup","keypress","mouseup","mousedown","click"]},this._doOnFocusChanged=null,this._doOnAccess=null,"object"==typeof t&&null!=t&&null==t.tagName&&(e=t.skin,null!=t.content&&(this.conf.content=t.content),null!=t.contentHTML&&(this.conf.contentHTML=t.contentHTML),null!=t.iconsPath&&(this.conf.iconsPath=t.iconsPath),null!=t.toolbar&&(this.conf.toolbar=window.dhx4.s2b(t.toolbar)),null!=t.onFocusChanged&&(this._doOnFocusChanged=t.onFocusChanged),null!=t.onAccess&&(this._doOnAccess=t.onAccess),t=t.parent),this.conf.skin=e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxeditor")||"dhx_skyblue","string"==typeof t&&(t=document.getElementById(t)),this.base=t,this.base.className+=" dhxeditor_"+this.conf.skin;this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);var s=window.dhx4.isIE?this.base.currentStyle.position:window.getComputedStyle(this.base,null).getPropertyValue("position");"relative"!=s&&"absolute"!=s&&(this.base.style.position="relative"),this.cell=new dhtmlXEditorCell(window.dhx4.newId(),this),this.base.appendChild(this.cell.cell),this.setSizes(),this.cBlock=document.createElement("DIV"),this.cBlock.className="dhxcont_content_blocker",this.cBlock.style.display="none",this.base.appendChild(this.cBlock),this.editor=document.createElement("IFRAME"),this.editor.className="dhxeditor_mainiframe",this.editor.frameBorder=0,window.dhx4.isOpera&&(this.editor.scrolling="yes");var n=this.editor;return"undefined"!=typeof window.addEventListener?n.onload=function(){for(var t=0;t<i.conf.evs.length;t++)n.contentWindow.addEventListener(i.conf.evs[t],i._ev,!1)}:n.onreadystatechange=function(){if("undefined"!=typeof n.readyState&&"complete"==n.readyState)try{for(var t=0;t<i.conf.evs.length;t++)n.contentWindow.document.body.attachEvent("on"+i.conf.evs[t],i._ev)}catch(e){}},this._ev=function(t){t=t||event;var e=t.type;i.callEvent("onAccess",[e,t]),"function"==typeof i._doOnAccess?i._doOnAccess(e,t):"string"==typeof i._doOnAccess&&"function"==typeof window[i._doOnAccess]&&window[i._doOnAccess](e,t)},this._focus=function(){window.dhx4.isIE?this.editor.contentWindow.document.body.focus():this.editor.contentWindow.focus()},this.cell.attachObject(this.editor),this.edWin=this.editor.contentWindow,this.edDoc=this.edWin.document,this._prepareContent=function(t,e){var i="";t===!0&&null!=this.getContent&&(i=this.getContent());var s=this.editor.contentWindow.document;if(s.open("text/html","replace"),s.write(window.dhx4.isOpera?"<html><head><style> html, body { overflow:auto;-webkit-overflow-scrolling: touch; padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(e!==!0?"contenteditable='true'":"")+" tabindex='0'></body></html>":window.dhx4.isKHTML?"<html><head><style> html {overflow-x: auto;-webkit-overflow-scrolling: touch; overflow-y: auto;} body { overflow: auto; overflow-y: scroll;} html,body { padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(e!==!0?"contenteditable='true'":"")+" tabindex='0'></body></html>":window.dhx4.isIE?"<html><head><style> html {overflow-y: auto;} body {overflow-y: scroll;-webkit-overflow-scrolling: touch;} html,body { overflow-x: auto; padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color: #ffffff; outline: none;} </style></head><body "+(e!==!0?"contenteditable='true'":"")+" tabindex='0'></body></html>":"<html><head><style> html,body { overflow-x: auto; overflow-y:-webkit-overflow-scrolling: touch; scroll; padding:0px; padding-left:5px !important; height:100%; margin:0px; font-family:Tahoma; font-size:12px; background-color:#ffffff;} </style></head><body "+(e!==!0?"contenteditable='true'":"")+" tabindex='0'></body></html>"),s.close(),window.dhx4.isIE?s.contentEditable=e!==!0:s.designMode=e!==!0?"On":"Off",window.dhx4.isFF)try{s.execCommand("useCSS",!1,!0)}catch(n){}t===!0&&null!=this.setContent&&this.setContent(i)},this._prepareContent(),this._doOnResize=function(){window.clearTimeout(i.conf.resizeTM),i.conf.resizeTM=window.setTimeout(function(){i.setSizes&&i.setSizes()},i.conf.resizeTMTime)},this._runCommand=function(t,e){if(this.conf.roMode!==!0){arguments.length<2&&(e=null),window.dhx4.isIE&&this.edWin.focus();try{var i=this.editor.contentWindow.document;i.execCommand(t,!1,e)}catch(s){}if(window.dhx4.isIE){this.edWin.focus();var n=this;window.setTimeout(function(){n.edWin.focus(),n=null},1)}}},this.applyBold=function(){this._runCommand("Bold")},this.applyItalic=function(){this._runCommand("Italic")},this.applyUnderscore=function(){this._runCommand("Underline")},this.clearFormatting=function(){this._runCommand("RemoveFormat")},this._doOnClick=function(t){var e=t||window.event,s=e.target||e.srcElement;i._showInfo(s)},this._doOnMouseDown=function(t){var e=t||window.event,s=e.target||e.srcElement;i._showInfo(s)},this._doOnKeyUp=function(t){var e=t||window.event,s=e.keyCode,n=e.target||e.srcElement;1=={37:1,38:1,39:1,40:1,13:1}[s]&&i._showInfo(n)},this._getParentByTag=function(t,e){e=e.toLowerCase();var i=t;do if(""==e||i.nodeName.toLowerCase()==e)return i;while(i=i.parentNode);return t},this._isStyleProperty=function(t,e,i,s){e=e.toLowerCase();var n=t;do if(n.nodeName.toLowerCase()==e&&n.style[i]==s)return!0;while(n=n.parentNode);return!1},this._setStyleProperty=function(t,e){this.style[e]=!1;var i=this._getParentByTag(t,e);i&&i.tagName.toLowerCase()==e&&(this.style[e]=!0),"del"==e&&this._getParentByTag(t,"strike")&&"strike"==this._getParentByTag(t,"strike").tagName.toLowerCase()&&(this.style.del=!0)},this._showInfo=function(t){var t=this._getSelectionBounds().end?this._getSelectionBounds().end:t;if(t&&this._setStyleProperty)try{if(this.edWin.getComputedStyle){var e=this.edWin.getComputedStyle(t,null),i=401==e.getPropertyValue("font-weight")?700:e.getPropertyValue("font-weight");this.style={fontStyle:e.getPropertyValue("font-style"),fontSize:e.getPropertyValue("font-size"),textDecoration:e.getPropertyValue("text-decoration"),fontWeight:i,fontFamily:e.getPropertyValue("font-family"),textAlign:e.getPropertyValue("text-align")},window.dhx4.isKHTML&&(this.style.fontStyle=e.getPropertyValue("font-style"),this.style.vAlign=e.getPropertyValue("vertical-align"),this.style.del=this._isStyleProperty(t,"span","textDecoration","line-through"),this.style.u=this._isStyleProperty(t,"span","textDecoration","underline"))}else{var e=t.currentStyle;this.style={fontStyle:e.fontStyle,fontSize:e.fontSize,textDecoration:e.textDecoration,fontWeight:e.fontWeight,fontFamily:e.fontFamily,textAlign:e.textAlign}}this._setStyleProperty(t,"h1"),this._setStyleProperty(t,"h2"),this._setStyleProperty(t,"h3"),this._setStyleProperty(t,"h4"),window.dhx4.isKHTML||(this._setStyleProperty(t,"del"),this._setStyleProperty(t,"sub"),this._setStyleProperty(t,"sup"),this._setStyleProperty(t,"u")),this.callEvent("onFocusChanged",[this.style,e])}catch(s){return null}},this._getSelectionBounds=function(){var t,e,i,s;if(this.edWin.getSelection){var n=this.edWin.getSelection();return t=n.getRangeAt(n.rangeCount-1),i=t.startContainer,s=t.endContainer,e=t.commonAncestorContainer,"#text"==i.nodeName&&(e=e.parentNode),"#text"==i.nodeName&&(i=i.parentNode),"body"==i.nodeName.toLowerCase()&&(i=i.firstChild),"#text"==s.nodeName&&(s=s.parentNode),"body"==s.nodeName.toLowerCase()&&(s=s.lastChild),i==s&&(e=i),{root:e,start:i,end:s}}if(this.edWin.document.selection){if(t=this.edDoc.selection.createRange(),!t.duplicate)return null;e=t.parentElement();var o=t.duplicate(),l=t.duplicate();return o.collapse(!0),l.moveToElementText(o.parentElement()),l.setEndPoint("EndToStart",o),i=o.parentElement(),o=t.duplicate(),l=t.duplicate(),l.collapse(!1),o.moveToElementText(l.parentElement()),o.setEndPoint("StartToEnd",l),s=l.parentElement(),"body"==i.nodeName.toLowerCase()&&(i=i.firstChild),"body"==s.nodeName.toLowerCase()&&(s=s.lastChild),i==s&&(e=i),{root:e,start:i,end:s}}return null},this.getContent=function(){return this.edDoc.body?window.dhx4.isFF?this.editor.contentWindow.document.body.innerHTML.replace(/<\/{0,}br\/{0,}>\s{0,}$/gi,""):window.dhx4.isIE&&0==this.edDoc.body.innerText.length?"":this.edDoc.body.innerHTML:""},this.setContent=function(t){if(t=t||"",this.edDoc.body){var e=!1;if(window.dhx4.isFF){var s=navigator.userAgent.match(/Firefox\/(\d*)/);e=null!=s&&s[1]<28}e?("undefined"==typeof this.conf.ffTest&&(this.editor.contentWindow.document.body.innerHTML="",this._runCommand("InsertHTML","test"),this.conf.ffTest=this.editor.contentWindow.document.body.innerHTML.length>0),this.conf.ffTest?this.editor.contentWindow.document.body.innerHTML=t:(this.editor.contentWindow.document.body.innerHTML="",0==t.length&&(t=" "),this._runCommand("InsertHTML",t))):this.editor.contentWindow.document.body.innerHTML=t,this.callEvent("onContentSet",[])}else this.conf.firstLoadEv||(this.conf.firstLoadEv=!0,this.conf.firstLoadData=t,this._onFirstLoad=function(){i.setContent(i.conf.firstLoadData),"function"==typeof window.addEventListener?i.edWin.removeEventListener("load",i._onFirstLoad,!1):i.edWin.detachEvent("onload",i._onFirstLoad),i.conf.firstLoadData=null,i.conf.firstLoadEv=!1,i._onFirstLoad=null},"function"==typeof window.addEventListener?this.edWin.addEventListener("load",this._onFirstLoad,!1):this.edWin.attachEvent("onload",this._onFirstLoad))},this.setContentHTML=function(t){window.dhx4.ajax.get(t,function(t){null!=t.xmlDoc.responseText&&i.setContent(t.xmlDoc.responseText)})},window.dhx4._eventable(this),this.attachEvent("onFocusChanged",function(t){"function"==typeof this._doOnFocusChanged?this._doOnFocusChanged(t):"string"==typeof this._doOnFocusChanged&&"function"==typeof window[this._doOnFocusChanged]&&window[this._doOnFocusChanged](t)}),"function"==typeof window.addEventListener?(window.addEventListener("resize",this._doOnResize,!1),this.edDoc.addEventListener("click",this._doOnClick,!1),this.edDoc.addEventListener("keyup",this._doOnKeyUp,!1),window.dhx4.isOpera&&this.edDoc.addEventListener("mousedown",this._doOnMouseDown,!1)):(window.attachEvent("onresize",this._doOnResize),this.edDoc.attachEvent("onclick",this._doOnClick),this.edDoc.attachEvent("onkeyup",this._doOnKeyUp)),this.unload=function(){if("function"==typeof window.addEventListener){window.removeEventListener("resize",this._doOnResize,!1),this.edDoc.removeEventListener("click",this._doOnClick,!1),this.edDoc.removeEventListener("keyup",this._doOnKeyUp,!1),window.dhx4.isOpera&&this.edDoc.removeEventListener("mousedown",this._doOnMouseDown,!1);for(var t=0;t<i.conf.evs.length;t++)n.contentWindow.removeEventListener(i.conf.evs[t],i._ev,!1)}else{window.detachEvent("onresize",this._doOnResize,!1),this.edDoc.detachEvent("onclick",this._doOnClick),this.edDoc.detachEvent("onkeyup",this._doOnKeyUp);for(var t=0;t<i.conf.evs.length;t++)n.contentWindow.document.body.detachEvent("on"+i.conf.evs[t],i._ev)}for(this._doOnAccess=null,this._doOnFocusChanged=null,"function"==typeof window.addEventListener?this.editor.onload=null:this.editor.onreadystatechange=null,this.editor.parentNode.removeChild(this.editor),this.editor=null,this.edDoc=null,this.edWin=null,this.cell._unload(),this.cell=null,this.tb=null,window.dhx4._eventable(this,"clear"),this.cBlock.parentNode.removeChild(this.cBlock),this.cBlock=null,this.base.className=String(this.base.className).replace(new RegExp("\\s{0,}dhxeditor_"+this.conf.skin),"");this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);this.base=null,this._doOnClick=null,this._doOnKeyUp=null,this._doOnMouseDown=null,this._ev=null,this._focus=null,this._prepareContent=null,this._doOnResize=null,this.setIconsPath=null,this.init=null,this.setSizes=null,this._runCommand=null,this.applyBold=null,this.applyItalic=null,this.applyUnderscore=null,this.clearFormatting=null,this._showInfo=null,this._getSelectionBounds=null,this.getContent=null,this.setContent=null,this.setContentHTML=null,this.setReadonly=null,this.isReadonly=null,this.unload=null,i=n=null},1==this.conf.toolbar&&"function"==typeof this.attachToolbar&&"function"==typeof window.dhtmlXToolbarObject&&this.attachToolbar(this.conf.iconsPath),this.setIconsPath=function(t){this.conf.iconsPath=t},this.conf.content.length>0?(this.setContent(this.conf.content),this.conf.content=""):this.conf.contentHTML.length>0&&(this.setContentHTML(this.conf.contentHTML),this.conf.contentHTML=""),this}function xmlPointer(t){this.d=t}function dhtmlXTreeObject(t,e,i,s){if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(n){}this.parentObject="object"!=typeof t?document.getElementById(t):t,this.parentObject.style.overflow="hidden",this._itim_dg=!0,this.dlmtr=",",this.dropLower=!1,this.enableIEImageFix(),this.xmlstate=0,this.mytype="tree",this.smcheck=!0,this.width=e,this.height=i,this.rootId=s,this.childCalc=null,this.def_img_x="18px",this.def_img_y="18px",this.def_line_img_x="18px",this.def_line_img_y="24px",this._dragged=new Array,this._selected=new Array,this.style_pointer="pointer",this._aimgs=!0,this.htmlcA=" [",this.htmlcB="]",this.lWin=window,this.cMenu=0,this.mlitems=0,this.iconURL="",this.dadmode=0,this.slowParse=!1,this.autoScroll=!0,this.hfMode=0,this.nodeCut=new Array,this.XMLsource=0,this.XMLloadingWarning=0,this._idpull={},this._pullSize=0,this.treeLinesOn=!0,this.tscheck=!1,this.timgen=!0,this.dpcpy=!1,this._ld_id=null,this._oie_onXLE=[],this.imPath=window.dhx_globalImgPath||"",this.checkArray=new Array("iconUncheckAll.gif","iconCheckAll.gif","iconCheckGray.gif","iconUncheckDis.gif","iconCheckDis.gif","iconCheckDis.gif"),this.radioArray=new Array("radio_off.gif","radio_on.gif","radio_on.gif","radio_off.gif","radio_on.gif","radio_on.gif"),this.lineArray=new Array("line2.gif","line3.gif","line4.gif","blank.gif","blank.gif","line1.gif"),this.minusArray=new Array("minus2.gif","minus3.gif","minus4.gif","minus.gif","minus5.gif"),this.plusArray=new Array("plus2.gif","plus3.gif","plus4.gif","plus.gif","plus5.gif"),this.imageArray=new Array("leaf.gif","folderOpen.gif","folderClosed.gif"),this.cutImg=new Array(0,0,0),this.cutImage="but_cut.gif",dhtmlxEventable(this),this.dragger=new dhtmlDragAndDropObject,this.htmlNode=new dhtmlXTreeItemObject(this.rootId,"",0,this),this.htmlNode.htmlNode.childNodes[0].childNodes[0].style.display="none",this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[0].className="hiddenRow",this.allTree=this._createSelf(),this.allTree.appendChild(this.htmlNode.htmlNode),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),_isFF&&(this.allTree.childNodes[0].width="100%",this.allTree.childNodes[0].style.overflow="hidden");var o=this;return this.allTree.onselectstart=new Function("return false;"),_isMacOS&&(this.allTree.oncontextmenu=function(t){return o._doContClick(t||window.event,!0)}),this.allTree.onmousedown=function(t){return o._doContClick(t||window.event)},this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe),_isIE&&this.preventIECashing(!0),this.selectionBar=document.createElement("DIV"),this.selectionBar.className="selectionBar",this.selectionBar.innerHTML="&nbsp;",this.selectionBar.style.display="none",this.allTree.appendChild(this.selectionBar),window.addEventListener&&window.addEventListener("unload",function(){try{o.destructor()}catch(t){}},!1),window.attachEvent&&window.attachEvent("onunload",function(){try{o.destructor()}catch(t){}}),this.setImagesPath=this.setImagePath,this.setIconsPath=this.setIconPath,dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path),dhtmlx.skin&&this.setSkin(dhtmlx.skin),this}function cObject(){return this}function dhtmlXTreeItemObject(t,e,i,s,n,o){return this.htmlNode="",this.acolor="",this.scolor="",this.tr=0,this.childsCount=0,this.tempDOMM=0,this.tempDOMU=0,this.dragSpan=0,this.dragMove=0,this.span=0,this.closeble=1,this.childNodes=new Array,this.userData=new cObject,this.checkstate=0,this.treeNod=s,this.label=e,this.parentObject=i,this.actionHandler=n,this.images=new Array(s.imageArray[0],s.imageArray[1],s.imageArray[2]),this.id=s._globalIdStorageAdd(t,this),this.htmlNode=this.treeNod.checkBoxOff?this.treeNod._createItem(1,this,o):this.treeNod._createItem(0,this,o),this.htmlNode.objBelong=this,this}function dhx_dragSomethingInTree(){this.lWin=window,this._createDragNode=function(t){var e=document.createElement("div");return e.style.position="absolute",e.innerHTML=t.innerHTML||t.value,e.className="dragSpanDiv",e},this._preventNsDrag=function(t){return(t||window.event).cancelBubble=!0,t&&t.preventDefault?(t.preventDefault(),!1):!1},this._nonTrivialNode=function(t,e,i,s){if(this._customDrop)return this._customDrop(t,s.img.id,e.id,i?i.id:null);var n=s.img.getAttribute("image")||"",o=s.img.id||"new",l=s.img.getAttribute("text")||(_isIE?s.img.innerText:s.img.textContent);t[i?"insertNewNext":"insertNewItem"](i?i.id:e.id,o,l,"",n,n,n)}}function jsonPointer(t,e){this.d=t,this.dp=e}function dhtmlXTreeFromHTML(obj){"object"!=typeof obj&&(obj=document.getElementById(obj));for(var n=obj,id=n.id,cont="",j=0;j<obj.childNodes.length;j++)if("1"==obj.childNodes[j].nodeType){if("XMP"==obj.childNodes[j].tagName)for(var cHead=obj.childNodes[j],m=0;m<cHead.childNodes.length;m++)cont+=cHead.childNodes[m].data;else"ul"==obj.childNodes[j].tagName.toLowerCase()&&(cont=dhx_li2trees(obj.childNodes[j],new Array,0));break}obj.innerHTML="";var t=new dhtmlXTreeObject(obj,"100%","100%",0),z_all=new Array;for(b in t)z_all[b.toLowerCase()]=b;for(var atr=obj.attributes,a=0;a<atr.length;a++)if(0==atr[a].name.indexOf("set")||0==atr[a].name.indexOf("enable")){var an=atr[a].name;t[an]||(an=z_all[atr[a].name]),t[an].apply(t,atr[a].value.split(","))}if("object"==typeof cont){t.XMLloadingWarning=1;for(var i=0;i<cont.length;i++){var n=t.insertNewItem(cont[i][0],cont[i][3],cont[i][1]);cont[i][2]&&t._setCheck(n,cont[i][2])}t.XMLloadingWarning=0,t.lastLoadedXMLId=0,t._redrawFrom(t)}else t.loadXMLString("<tree id='0'>"+cont+"</tree>");window[id]=t;var oninit=obj.getAttribute("oninit");return oninit&&eval(oninit),t}function dhx_init_trees(){for(var t=document.getElementsByTagName("div"),e=0;e<t.length;e++)"dhtmlxTree"==t[e].className&&dhtmlXTreeFromHTML(t[e])}function dhx_li2trees(t,e,i){for(var s=0;s<t.childNodes.length;s++){var n=t.childNodes[s];if(1==n.nodeType&&"li"==n.tagName.toLowerCase()){for(var o="",l=null,r=n.getAttribute("checked"),a=0;a<n.childNodes.length;a++){var h=n.childNodes[a];3==h.nodeType?o+=h.data:"ul"!=h.tagName.toLowerCase()?o+=dhx_outer_html(h):l=h}e[e.length]=[i,o,r,n.id||e.length+1],l&&(e=dhx_li2trees(l,e,n.id||e.length))}}return e}function dhx_outer_html(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("DIV");return e.appendChild(t.cloneNode(!0)),e=e.innerHTML}function setCookie(t,e){document.cookie=t+"="+e}function getCookie(t){var e=t+"=";if(document.cookie.length>0){var i=document.cookie.indexOf(e);if(-1!=i){i+=e.length;var s=document.cookie.indexOf(";",i);return-1==s&&(s=document.cookie.length),document.cookie.substring(i,s)}}}function dhtmlxArray(t){return dhtmlXHeir(t||new Array,dhtmlxArray._master)}function dhtmlXGridObject(id){if(_isIE)try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}id?"object"==typeof id?(this.entBox=id,this.entBox.id||(this.entBox.id="cgrid2_"+this.uid())):this.entBox=document.getElementById(id):(this.entBox=document.createElement("DIV"),this.entBox.id="cgrid2_"+this.uid()),this.entBox.innerHTML="",dhtmlxEventable(this);var self=this;this._wcorr=0,this.fontWidth=7,this.cell=null,this.row=null,this.iconURL="",this.editor=null,this._f2kE=!0,this._dclE=!0,this.combos=new Array(0),this.defVal=new Array(0),this.rowsAr={},this.rowsBuffer=dhtmlxArray(),this.rowsCol=dhtmlxArray(),this._data_cache={},this._ecache={},this._ud_enabled=!0,this.xmlLoader=new dtmlXMLLoaderObject(this.doLoadDetails,this,!0,this.no_cashe),this._maskArr=[],this.selectedRows=dhtmlxArray(),this.UserData={},this._sizeFix=this._borderFix=0,this.entBox.className+=" gridbox",this.entBox.style.width=this.entBox.getAttribute("width")||(window.getComputedStyle?this.entBox.style.width||window.getComputedStyle(this.entBox,null).width:this.entBox.currentStyle?this.entBox.currentStyle.width:this.entBox.style.width||0)||"100%",this.entBox.style.height=this.entBox.getAttribute("height")||(window.getComputedStyle?this.entBox.style.height||window.getComputedStyle(this.entBox,null).height:this.entBox.currentStyle?this.entBox.currentStyle.height:this.entBox.style.height||0)||"100%",this.entBox.style.cursor="default",this.entBox.onselectstart=function(){return!1};var t_creator=function(t){var e=document.createElement("TABLE");return e.cellSpacing=e.cellPadding=0,e.style.cssText="width:100%;table-layout:fixed;",e.className=t.substr(2),e};return this.obj=t_creator("c_obj"),this.hdr=t_creator("c_hdr"),this.hdr.style.marginRight="20px",this.hdr.style.paddingRight="20px",this.objBox=document.createElement("DIV"),this.objBox.style.width="100%",this.objBox.style.overflow="auto",this.objBox.appendChild(this.obj),this.objBox.className="objbox",dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this),this.hdrBox=document.createElement("DIV"),this.hdrBox.style.width="100%",this.hdrBox.style.height="25px",this.hdrBox.style.overflow="hidden",this.hdrBox.className="xhdr",this.preloadImagesAr=new Array(0),this.sortImg=document.createElement("DIV"),this.sortImg.style.display="none",this.hdrBox.appendChild(this.sortImg),this.hdrBox.appendChild(this.hdr),this.hdrBox.style.position="relative",this.entBox.appendChild(this.hdrBox),this.entBox.appendChild(this.objBox),this.entBox.grid=this,this.objBox.grid=this,this.hdrBox.grid=this,this.obj.grid=this,this.hdr.grid=this,this.cellWidthPX=[],this.cellWidthPC=[],this.cellWidthType=this.entBox.cellwidthtype||"px",this.delim=this.entBox.delimiter||",",this._csvDelim=",",this.hdrLabels=[],this.columnIds=[],this.columnColor=[],this._hrrar=[],this.cellType=dhtmlxArray(),this.cellAlign=[],this.initCellWidth=[],this.fldSort=[],this._srdh=_isIE&&"BackCompat"!=document.compatMode?22:20,this.imgURL=window.dhx_globalImgPath||"",this.isActive=!1,this.isEditable=!0,this.useImagesInHeader=!1,this.pagingOn=!1,this.rowsBufferOutSize=0,dhtmlxEvent(window,"unload",function(){try{self.destructor&&self.destructor()}catch(t){}}),this.setSkin=function(t){this.skin_name=t,this._imgURL&&this.setImagePath(this._imgURL);var e=this.entBox.className.split(" gridbox")[0];switch(this.entBox.className=e+" gridbox gridbox_"+t+(_isIE?" isIE":" isModern"),this.skin_h_correction=0,this.enableAlterCss("ev_"+t,"odd_"+t,this.isTreeGrid()),this._fixAlterCss(),t){case"clear":this._topMb=document.createElement("DIV"),this._topMb.className="topMumba",this._topMb.innerHTML="<img style='left:0px'   src='"+this.imgURL+"skinC_top_left.gif'><img style='right:20px' src='"+this.imgURL+"skinC_top_right.gif'>",this.entBox.appendChild(this._topMb),this._botMb=document.createElement("DIV"),this._botMb.className="bottomMumba",this._botMb.innerHTML="<img style='left:0px'   src='"+this.imgURL+"skinD_bottom_left.gif'><img style='right:20px' src='"+this.imgURL+"skinD_bottom_right.gif'>",this.entBox.appendChild(this._botMb),"absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative"),this.skin_h_correction=20;break;case"dhx_terrace":this._srdh=33,this.forceDivInHeader=!0;break;case"dhx_skyblue":case"dhx_web":case"glassy_blue":case"dhx_black":case"dhx_blue":case"modern":case"light":this._srdh=29,this.forceDivInHeader=!0;break;case"xp":this.forceDivInHeader=!0,this._srdh=_isIE&&"BackCompat"!=document.compatMode?26:22;break;case"mt":this._srdh=_isIE&&"BackCompat"!=document.compatMode?26:22;break;case"gray":_isIE&&"BackCompat"!=document.compatMode&&(this._srdh=22);break;case"sbdark":}if(_isIE&&this.hdr){var i=this.hdr.parentNode;i.removeChild(this.hdr),i.appendChild(this.hdr)}this.setSizes()},_isIE&&this.preventIECaching(!0),window.dhtmlDragAndDropObject&&(this.dragger=new dhtmlDragAndDropObject),this._doOnScroll=function(t,e){this.callEvent("onScroll",[this.objBox.scrollLeft,this.objBox.scrollTop]),this.doOnScroll(t,e)},this.doOnScroll=function(t,e){this.hdrBox.scrollLeft=this.objBox.scrollLeft,this.ftr&&(this.ftr.parentNode.scrollLeft=this.objBox.scrollLeft),e||this._srnd&&(this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dLoadTimer=window.setTimeout(function(){self._update_srnd_view&&self._update_srnd_view()},100))},this.attachToObject=function(t){t.appendChild(this.globalBox?this.globalBox:this.entBox),this.setSizes()},this.init=function(t){if(this.isTreeGrid()&&!this._h2&&(this._h2=new dhtmlxHierarchy,this._fake&&!this._realfake&&(this._fake._h2=this._h2),this._tgc={imgURL:null}),this._hstyles){if(this.skin_name||this.setSkin("dhx_skyblue"),this.editStop(),this.lastClicked=null,this.resized=null,this.fldSorted=this.r_fldSorted=null,this.cellWidthPX=[],this.cellWidthPC=[],this.hdr.rows.length>0){var e=this.xmlFileUrl;
this.clearAll(!0),this.xmlFileUrl=e}for(var i=this.hdr.insertRow(0),s=0;s<this.hdrLabels.length;s++)i.appendChild(document.createElement("TH")),i.childNodes[s]._cellIndex=s,i.childNodes[s].style.height="0px";_isIE&&8>_isIE&&document.body.style.msTouchAction==this.undefined?i.style.position="absolute":i.style.height="auto";var i=this.hdr.insertRow(_isKHTML?2:1);i._childIndexes=new Array;for(var n=0,s=0;s<this.hdrLabels.length;s++)i._childIndexes[s]=s-n,this.hdrLabels[s]!=this.splitSign||0==s?(i.insertCell(s-n),i.childNodes[s-n]._cellIndex=s,i.childNodes[s-n]._cellIndexS=s,this.setColumnLabel(s,this.hdrLabels[s])):(_isKHTML&&i.insertCell(s-n),i.cells[s-n-1].colSpan=(i.cells[s-n-1].colSpan||1)+1,i.childNodes[s-n-1]._cellIndex++,n++,i._childIndexes[s]=s-n);0==n&&(i._childIndexes=null),this._cCount=this.hdrLabels.length,_isIE&&window.setTimeout(function(){self.setSizes&&self.setSizes()},1),this.obj.firstChild||this.obj.appendChild(document.createElement("TBODY"));var o=this.obj.firstChild;if(!o.firstChild){o.appendChild(document.createElement("TR")),o=o.firstChild,_isIE&&8>_isIE&&document.body.style.msTouchAction==this.undefined?o.style.position="absolute":o.style.height="auto";for(var s=0;s<this.hdrLabels.length;s++)o.appendChild(document.createElement("TH")),o.childNodes[s].style.height="0px"}this._c_order=null,1!=this.multiLine&&(this.obj.className+=" row20px"),this.sortImg.style.position="absolute",this.sortImg.style.display="none",this.sortImg.className="dhxgrid_sort_desc",this.sortImg.defLeft=0,this.noHeader?this.hdrBox.style.display="none":this.noHeader=!1,this._ivizcol&&this.setColHidden(),this.attachHeader(),this.attachHeader(0,0,"_aFoot"),this.setSizes(),t&&this.parseXML(),this.obj.scrollTop=0,this.dragAndDropOff&&this.dragger.addDragLanding(this.entBox,this),this._initDrF&&this._initD(),this._init_point&&this._init_point()}},this.setColumnSizes=function(t){for(var e=0,i=[],s=0,n=0;n<this._cCount;n++)if("*"!=this.initCellWidth[n]||this._hrrar[n]){if("%"==this.cellWidthType){"undefined"==typeof this.cellWidthPC[n]&&(this.cellWidthPC[n]=this.initCellWidth[n]);var o=t*this.cellWidthPC[n]/100||0;s>.5&&(o++,s--);var l=this.cellWidthPX[n]=Math.floor(o),s=s+o-l}else"undefined"==typeof this.cellWidthPX[n]&&(this.cellWidthPX[n]=this.initCellWidth[n]);this._hrrar[n]||(e+=1*this.cellWidthPX[n])}else this._awdth=!1,i.push(n);if(i.length){var r=Math.floor((t-e)/i.length);0>r&&(r=1);for(var n=0;n<i.length;n++){var a=Math.max(this._drsclmW?this._drsclmW[i[n]]||0:0,r);this.cellWidthPX[i[n]]=a,e+=a}if(t>e){var h=i[i.length-1];this.cellWidthPX[h]=this.cellWidthPX[h]+(t-e),e=t}this._setAutoResize()}return this.obj.style.width=e+"px",this.hdr.style.width=e+"px",this.ftr&&(this.ftr.style.width=e+"px"),this.chngCellWidth(),e},this.setSizes=function(){if(this.hdr.rows[0]){var t=this.quirks=_isIE&&"BackCompat"==document.compatMode,e=(this.entBox.offsetWidth-this.entBox.clientWidth)/2;if(!this.dontSetSizes)if(this.globalBox){var i=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._delta_x&&!this._realfake){var s=this.globalBox.clientWidth;this.globalBox.style.width=this._delta_x,this.entBox.style.width=Math.max(0,this.globalBox.clientWidth+(t?2*i:0)-this._fake.entBox.clientWidth)+"px",s!=this.globalBox.clientWidth&&this._fake._correctSplit(this._fake.entBox.clientWidth)}this._delta_y&&!this._realfake&&(this.globalBox.style.height=this._delta_y,this.entBox.style.overflow=this._fake.entBox.style.overflow="hidden",this.entBox.style.height=this._fake.entBox.style.height=this.globalBox.clientHeight+(t?2*i:0)+"px")}else this._delta_x&&(this.entBox.parentNode&&"TD"==this.entBox.parentNode.tagName?(this.entBox.style.width="1px",this.entBox.style.width=parseInt(this._delta_x)*this.entBox.parentNode.clientWidth/100-2*e+"px"):this.entBox.style.width=this._delta_x),this._delta_y&&(this.entBox.style.height=this._delta_y);if(window.clearTimeout(this._sizeTime),!(this.entBox.offsetWidth||this.globalBox&&this.globalBox.offsetWidth))return void(this._sizeTime=window.setTimeout(function(){self.setSizes&&self.setSizes()},250));var n=this._wthB||!this.entBox.cmp&&!this._delta_x||0!=(this.skin_name||"").indexOf("dhx")||t?0:2,o=this._wthB||!this.entBox.cmp&&!this._delta_y||0!=(this.skin_name||"").indexOf("dhx")||t?0:2;this._sizeFix&&(n-=this._sizeFix,o-=this._sizeFix);var l=this.parentGrid?!1:this.objBox.scrollHeight>this.objBox.offsetHeight,r=dhtmlx.$customScroll?0:18,a=this.entBox.clientWidth-(this.skin_h_correction||0)*(t?0:1)-n,h=this.entBox.clientWidth-(this.skin_h_correction||0)-n,d=this.entBox.clientHeight-o,c=this.setColumnSizes(h-(l?r:0)-(this._correction_x||0)),u=this.parentGrid?!1:this.objBox.scrollWidth>this.objBox.offsetWidth||"scroll"==this.objBox.style.overflowX,_=this.hdr.clientHeight,f=this.ftr?this.ftr.clientHeight:0,p=a,m=d-_-f;if(this._awdth&&this._awdth[0]&&99999==this._awdth[1]&&(u=0),this._ahgr&&(m=this._ahgrMA?this.entBox.parentNode.clientHeight-_-f:this.obj.offsetHeight+(u?r:0)+(this._correction_y||0),this._ahgrM&&(m=this._ahgrF?Math.min(this._ahgrM,m+_+f)-_-f:Math.min(this._ahgrM,m)),l&&m>=this.obj.scrollHeight+(u?r:0)&&(l=!1,this.setColumnSizes(h-(this._correction_x||0)))),this._awdth&&this._awdth[0]){"%"==this.cellWidthType&&(this.cellWidthType="px"),this._fake&&(c+=this._fake.entBox.clientWidth);var p=Math.min(Math.max(c+(l?r:0),this._awdth[2]),this._awdth[1])+(this._correction_x||0);this.objBox.style.overflowX=!l&&this.objBox.scrollWidth<=p?"hidden":"auto",this._fake&&(p-=this._fake.entBox.clientWidth)}m=Math.max(0,m),this._ff_size_delta=.1==this._ff_size_delta?.2:.1,_isFF||(this._ff_size_delta=0),this.dontSetSizes||(this.entBox.style.width=Math.max(0,p+(t?2:0)*e+this._ff_size_delta)+"px",this.entBox.style.height=m+(t?2:0)*e+_+f+"px"),this.objBox.style.height=m+(t&&!l?2:0)*e+"px",this.hdrBox.style.height=_+"px",m!=d&&this.doOnScroll(0,!this._srnd);var g=this["setSizes_"+this.skin_name];g&&g.call(this),this.setSortImgPos(),_!=this.hdr.clientHeight&&this._ahgr&&this.setSizes(),this.callEvent("onSetSizes",[])}},this.setSizes_clear=function(){var t=this.hdr.offsetHeight,e=this.entBox.offsetWidth,i=t+this.objBox.offsetHeight;this._topMb.style.top=(t||0)+"px",this._topMb.style.width=e+20+"px",this._botMb.style.top=i-3+"px",this._botMb.style.width=e+20+"px"},this.chngCellWidth=function(){_isOpera&&this.ftr&&(this.ftr.width=this.objBox.scrollWidth+"px");for(var t=this._cCount,e=0;t>e;e++)this.hdr.rows[0].cells[e].style.width=this.cellWidthPX[e]+"px",this.obj.rows[0].childNodes[e].style.width=this.cellWidthPX[e]+"px",this.ftr&&(this.ftr.rows[0].cells[e].style.width=this.cellWidthPX[e]+"px")},this.setDelimiter=function(t){this.delim=t},this.setInitWidthsP=function(t){this.cellWidthType="%",this.initCellWidth=t.split(this.delim.replace(/px/gi,"")),arguments[1]||this._setAutoResize()},this._setAutoResize=function(){if(!this._realfake){var t=this;dhtmlxEvent(window,"resize",function(){window.clearTimeout(t._resize_timer),t._setAutoResize&&(t._resize_timer=window.setTimeout(function(){t.setSizes&&t.setSizes(),t._fake&&t._fake._correctSplit()},100))})}},this.setInitWidths=function(t){if(this.cellWidthType="px",this.initCellWidth=t.split(this.delim),_isFF)for(var e=0;e<this.initCellWidth.length;e++)"*"!=this.initCellWidth[e]&&(this.initCellWidth[e]=parseInt(this.initCellWidth[e]))},this.enableMultiline=function(t){this.multiLine=convertStringToBoolean(t)},this.enableMultiselect=function(t){this.selMultiRows=convertStringToBoolean(t)},this.setImagePath=function(t){this._imgURL=t,this.imgURL=t+"dhxgrid_"+(this.skin_name||"dhx_skyblue").replace("dhx_","")+"/",this.iconTree=this.imgURL+"tree/"},this.setImagesPath=this.setImagePath,this.setIconPath=function(t){this.iconURL=t},this.setIconsPath=this.setIconPath,this.changeCursorState=function(t){var e=t.target||t.srcElement;if("TD"!=e.tagName&&(e=this.getFirstParentOfType(e,"TD")),e){if("TD"==e.tagName&&this._drsclmn&&!this._drsclmn[e._cellIndex])return e.style.cursor="default";var i=(t.layerX||0)+(_isIE||"DIV"!=t.target.tagName?0:e.offsetLeft);e.style.cursor=e.offsetWidth-(t.offsetX||-1*(parseInt(this.getPosition(e,this.hdrBox))-i))<(_isOpera?20:10)?"E-resize":"default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this.startColResize=function(t){this.resized&&this.stopColResize(),this.resized=null;var e=t.target||t.srcElement;"TD"!=e.tagName&&(e=this.getFirstParentOfType(e,"TD"));var i=t.clientX,s=this.hdr.offsetWidth,n=parseInt(e.offsetWidth);if("TD"==e.tagName&&"default"!=e.style.cursor){if(this._drsclmn&&!this._drsclmn[e._cellIndex])return;self._old_d_mm=document.body.onmousemove,self._old_d_mu=document.body.onmouseup,document.body.onmousemove=function(t){self&&self.doColResize(t||window.event,e,n,i,s)},document.body.onmouseup=function(){self&&self.stopColResize()}}},this.stopColResize=function(){document.body.onmousemove=self._old_d_mm||"",document.body.onmouseup=self._old_d_mu||"",this.setSizes(),this.doOnScroll(0,1),this.callEvent("onResizeEnd",[this])},this.doColResize=function(t,e,i,s,n){e.style.cursor="E-resize",this.resized=e;{var o=i+(t.clientX-s);n+(t.clientX-s)}if(this.callEvent("onResize",[e._cellIndex,o,this])){if(_isIE&&(this.objBox.scrollLeft=this.hdrBox.scrollLeft),e.colSpan>1){for(var l=new Array,r=0;r<e.colSpan;r++)l[r]=Math.round(o*this.hdr.rows[0].childNodes[e._cellIndexS+r].offsetWidth/e.offsetWidth);for(var r=0;r<e.colSpan;r++)this._setColumnSizeR(e._cellIndexS+1*r,l[r])}else this._setColumnSizeR(e._cellIndex,o);this.doOnScroll(0,1),this.setSizes(),this._fake&&this._awdth&&this._fake._correctSplit()}},this._setColumnSizeR=function(t,e){if(e>(this._drsclmW&&!this._notresize?this._drsclmW[t]||10:10)){if(this.obj.rows[0].childNodes[t].style.width=e+"px",this.hdr.rows[0].childNodes[t].style.width=e+"px",this.ftr&&(this.ftr.rows[0].childNodes[t].style.width=e+"px"),"px"==this.cellWidthType)this.cellWidthPX[t]=e;else{var i=parseInt(this.entBox.offsetWidth);this.objBox.scrollHeight>this.objBox.offsetHeight&&(i-=17);var s=Math.round(e/i*100);this.cellWidthPC[t]=s}"none"!=this.sortImg.style.display&&this.setSortImgPos()}},this.setSortImgState=function(t,e,i,s){if(i=(i||"asc").toLowerCase(),!convertStringToBoolean(t))return this.sortImg.style.display="none",void(this.fldSorted=this.r_fldSorted=null);this.sortImg.className="asc"==i?"dhxgrid_sort_asc":"dhxgrid_sort_desc",this.sortImg.style.display="",this.fldSorted=this.hdr.rows[0].childNodes[e];var n=this.hdr.rows[s||1];if(n){for(var o=0;o<n.childNodes.length;o++)if(n.childNodes[o]._cellIndexS==e)return this.r_fldSorted=n.childNodes[o],this.setSortImgPos();return this.setSortImgState(t,e,i,(s||1)+1)}},this.setSortImgPos=function(t,e,i,s){if(!this._hrrar||!this._hrrar[this.r_fldSorted?this.r_fldSorted._cellIndex:t]){if(!s)if(t)var s=this.hdr.rows[i||0].cells[t];else var s=this.r_fldSorted;if(null!=s){var n=this.getPosition(s,this.hdrBox),o=s.offsetWidth;this.sortImg.style.left=Number(n[0]+o-13)+"px",this.sortImg.defLeft=parseInt(this.sortImg.style.left),this.sortImg.style.top=Number(n[1]+5)+"px",this.useImagesInHeader||e||(this.sortImg.style.display="inline"),this.sortImg.style.left=this.sortImg.defLeft+"px"}}},this.setActive=function(t){if(0==arguments.length)var t=!0;1==t?(globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject!=this&&(globalActiveDHTMLGridObject.editStop(),globalActiveDHTMLGridObject.callEvent("onBlur",[globalActiveDHTMLGridObject])),globalActiveDHTMLGridObject=this,this.isActive=!0):(this.isActive=!1,this.callEvent("onBlur",[this]))},this._doClick=function(t){var e=0,i=this.getFirstParentOfType(_isIE?t.srcElement:t.target,"TD");if(i&&i.parentNode&&i.parentNode.idd){var s=!0;if(this.markedCells){var n=0;return(t.shiftKey||t.metaKey)&&(n=1),t.ctrlKey&&(n=2),this.doMark(i,n),!0}0!=this.selMultiRows&&(t.shiftKey&&null!=this.row&&this.selectedRows.length&&(e=1),(t.ctrlKey||t.metaKey)&&(e=2)),this.doClick(i,s,e,!1)}},this._doContClick=function(t){var e=this.getFirstParentOfType(_isIE?t.srcElement:t.target,"TD");if(!e||"undefined"==typeof e.parentNode.idd)return this.callEvent("onEmptyClick",[t]),!0;if(2==t.button||_isMacOS&&t.ctrlKey){if(!this.callEvent("onRightClick",[e.parentNode.idd,e._cellIndex,t])){var i=function(t){return(t||event).cancelBubble=!0,!1};return(t.srcElement||t.target).oncontextmenu=i,i(t)}if(this._ctmndx){if(!this.callEvent("onBeforeContextMenu",[e.parentNode.idd,e._cellIndex,this]))return!0;if(_isIE&&(t.srcElement.oncontextmenu=function(){return event.cancelBubble=!0,!1}),this._ctmndx.showContextMenu){var s=window.document.documentElement,n=window.document.body,o=new Array(s.scrollLeft||n.scrollLeft,s.scrollTop||n.scrollTop);if(_isIE)var l=t.clientX+o[0],r=t.clientY+o[1];else var l=t.pageX,r=t.pageY;this._ctmndx.showContextMenu(l-1,r-1),this.contextID=this._ctmndx.contextMenuZoneId=e.parentNode.idd+"_"+e._cellIndex,this._ctmndx._skip_hide=!0}else e.contextMenuId=e.parentNode.idd+"_"+e._cellIndex,e.contextMenu=this._ctmndx,e.a=this._ctmndx._contextStart,e.a(e,t),e.a=null;return t.cancelBubble=!0,!1}}else this._ctmndx&&(this._ctmndx.hideContextMenu?this._ctmndx.hideContextMenu():this._ctmndx._contextEnd());return!0},this.doClick=function(t,e,i,s){this.selMultiRows||(i=0);var n=this.row?this.row.idd:0;if(this.setActive(!0),i||(i=0),null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")),"TD"==t.tagName){if(this.checkEvent("onSelectStateChanged"))var o=this.getSelectedId();var l=this.row;if(1==i){var r=this.rowsCol._dhx_find(t.parentNode),a=this.rowsCol._dhx_find(this.lastClicked);if(r>a)var h=a,d=r;else var h=r,d=a;for(var c=0;c<this.rowsCol.length;c++)if(c>=h&&d>=c){if(!this.rowsCol[c]||this.rowsCol[c]._sRow)return this.clearSelection(),this.doClick(t,e,0,s);-1==this.rowsCol[c].className.indexOf("rowselected")&&(this._realfake||this.callEvent("onBeforeSelect",[this.rowsCol[c].idd,n,t._cellIndex]))&&(this.rowsCol[c].className+=" rowselected",this.selectedRows[this.selectedRows.length]=this.rowsCol[c])}}else if(2==i&&-1!=t.parentNode.className.indexOf("rowselected")){t.parentNode.className=t.parentNode.className.replace(/rowselected/g,""),this.selectedRows._dhx_removeAt(this.selectedRows._dhx_find(t.parentNode));var u=!0;s=!1}if(this.editStop(),"undefined"==typeof t.parentNode.idd)return!0;if(u||t.parentNode._sRow||(this._realfake||this.callEvent("onBeforeSelect",[t.parentNode.idd,n,t._cellIndex])?this.getSelectedRowId()!=t.parentNode.idd?(0==i&&this.clearSelection(),this.cell=t,l==t.parentNode&&this._chRRS&&(e=!1),this.row=t.parentNode,this.row.className+=" rowselected",-1==this.selectedRows._dhx_find(this.row)&&(this.selectedRows[this.selectedRows.length]=this.row)):(this.cell=t,this.row=t.parentNode):e=!1),this.cell&&-1!=this.cell.parentNode.className.indexOf("rowselected")&&(this.cell.className=this.cell.className.replace(/cellselected/g,"")+" cellselected"),1!=i&&!this.row)return;this.lastClicked=t.parentNode;var _=this.row.idd,f=this.cell;if(e&&"undefined"!=typeof _&&f&&!u?self.onRowSelectTime=setTimeout(function(){self.callEvent&&self.callEvent("onRowSelect",[_,f._cellIndex])},100):this.callEvent("onRowSelectRSOnly",[_]),this.checkEvent("onSelectStateChanged")){var p=this.getSelectedId();o!=p&&this.callEvent("onSelectStateChanged",[p,o])}}this.isActive=!0,s!==!1&&this.cell&&this.cell.parentNode.idd&&this.moveToVisible(this.cell)},this.selectAll=function(){this.clearSelection();var t=this.rowsBuffer;this.pagingOn&&(t=this.rowsCol);for(var e=0;e<t.length;e++)this.render_row(e).className+=" rowselected";this.selectedRows=dhtmlxArray([].concat(t)),this.selectedRows.length&&(this.row=this.selectedRows[0],this.cell=this.row.cells[0]),this._fake&&!this._realfake&&this._fake.selectAll()},this.selectCell=function(t,e,i,s,n,o){if(i||(i=!1),"object"!=typeof t&&(t=this.render_row(t)),!t||-1==t)return null;if(t._childIndexes)var l=t.childNodes[t._childIndexes[e]];else var l=t.childNodes[e];l||(l=t.childNodes[0]),this.markedCells?this.doMark(l,s?2:0):s?this.doClick(l,i,3,o):this.doClick(l,i,0,o),n&&this.editCell()},this.moveToVisible=function(t,e){if(this.pagingOn){var i=Math.floor(this.getRowIndex(t.parentNode.idd)/this.rowsBufferOutSize)+1;i!=this.currentPage&&this.changePage(i)}try{if(t.offsetHeight){var s=t.offsetLeft+t.offsetWidth+20,n=0;s>this.objBox.offsetWidth+this.objBox.scrollLeft?t.offsetLeft>this.objBox.scrollLeft&&(n=t.offsetLeft-(this.objBox.offsetWidth-t.offsetWidth)+5):t.offsetLeft<this.objBox.scrollLeft&&(s-=2*t.offsetWidth/3,s<this.objBox.scrollLeft&&(n=t.offsetLeft-5)),n&&!e&&(this.objBox.scrollLeft=n)}if(t.offsetHeight)s=t.offsetTop;else{var o=this._realfake?this._fake.rowsAr[t.parentNode.idd]:t.parentNode;s=this.rowsBuffer._dhx_find(o)*this._srdh}var l=s+t.offsetHeight+38;if(l>this.objBox.offsetHeight+this.objBox.scrollTop)var r=s;else if(s<this.objBox.scrollTop)var r=s-5;r&&(this.objBox.scrollTop=r)}catch(a){}},this.editCell=function(){if(!this.editor||this.cell!=this.editor.cell){if(this.editStop(),1!=this.isEditable||!this.cell)return!1;var t=this.cell;if(t.parentNode._locked)return!1;if(this.editor=this.cells4(t),null!=this.editor){if(this.editor.isDisabled())return this.editor=null,!1;0!=this.callEvent("onEditCell",[0,this.row.idd,this.cell._cellIndex])&&this.editor.edit?(this._Opera_stop=(new Date).valueOf(),t.className+=" editable",this.editor.edit(),this.callEvent("onEditCell",[1,this.row.idd,this.cell._cellIndex])):this.editor=null}}},this.editStop=function(t){if(_isOpera&&this._Opera_stop){if(1*this._Opera_stop+50>(new Date).valueOf())return;this._Opera_stop=null}if(this.editor&&null!=this.editor){if(this.editor.cell.className=this.editor.cell.className.replace("editable",""),t){var e=this.editor.val;return this.editor.detach(),this.editor.setValue(e),this.editor=null,void this.callEvent("onEditCancel",[this.row.idd,this.cell._cellIndex,e])}this.editor.detach()&&(this.cell.wasChanged=!0);var i=this.editor;this.editor=null;var s=this.callEvent("onEditCell",[2,this.row.idd,this.cell._cellIndex,i.getValue(),i.val]);"string"==typeof s||"number"==typeof s?i[i.setImage?"setLabel":"setValue"](s):s||i[i.setImage?"setLabel":"setValue"](i.val),this._ahgr&&this.multiLine&&this.setSizes()}},this._nextRowCell=function(t,e,i){return t=this._nextRow((this._groups?this.rowsCol:this.rowsBuffer)._dhx_find(t),e),t?t.childNodes[t._childIndexes?t._childIndexes[i]:i]:null},this._getNextCell=function(t,e,i){t=t||this.cell;var s=t.parentNode;if(this._tabOrder)i=this._tabOrder[t._cellIndex],"undefined"!=typeof i&&(t=0>i?this._nextRowCell(s,e,Math.abs(i)-1):s.childNodes[i]);else{var i=t._cellIndex+e;i>=0&&i<this._cCount?(s._childIndexes&&(i=s._childIndexes[t._cellIndex]+e),t=s.childNodes[i]):t=this._nextRowCell(s,e,1==e?0:this._cCount-1)}return t?"none"==t.style.display||this.smartTabOrder&&this.cells(t.parentNode.idd,t._cellIndex).isDisabled()?this._getNextCell(t,e):t:(1==e&&this.tabEnd&&(this.tabEnd.focus(),this.tabEnd.focus(),this.setActive(!1)),-1==e&&this.tabStart&&(this.tabStart.focus(),this.tabStart.focus(),this.setActive(!1)),null)},this._nextRow=function(t,e){var i=this.render_row(t+e);return i&&-1!=i?i&&"none"==i.style.display?this._nextRow(t+e,e):i:null},this.scrollPage=function(t){if(this.rowsBuffer.length){var e=this._realfake?this._fake:this,i=Math.floor((e._r_select||this.getRowIndex(this.row.idd)||0)+t*this.objBox.offsetHeight/(this._srdh||20));0>i&&(i=0),i>=this.rowsBuffer.length&&(i=this.rowsBuffer.length-1),this._srnd&&!this.rowsBuffer[i]?(this.objBox.scrollTop+=Math.floor(t*this.objBox.offsetHeight/(this._srdh||20))*(this._srdh||20),this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop),e._r_select=i):(this.selectCell(i,this.cell._cellIndex,!0,!1,!1,this.multiLine||this._srnd),this.multiLine||this._srnd||this._realfake||(this.objBox.scrollTop=this.getRowById(this.getRowId(i)).offsetTop,this._fake&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)),e._r_select=null)}},this.doKey=function(t){if(!t)return!0;if((t.target||t.srcElement).value!==window.undefined){var e=t.target||t.srcElement;if(!e.parentNode||-1==e.parentNode.className.indexOf("editable"))return!0}if(globalActiveDHTMLGridObject&&this!=globalActiveDHTMLGridObject)return globalActiveDHTMLGridObject.doKey(t);if(0==this.isActive)return!0;if(this._htkebl)return!0;if(!this.callEvent("onKeyPress",[t.keyCode,t.ctrlKey,t.shiftKey,t]))return!1;var i="k"+t.keyCode+"_"+(t.ctrlKey?1:0)+"_"+(t.shiftKey?1:0);if(this.cell){if(this._key_events[i])return!1===this._key_events[i].call(this)?!0:(t.preventDefault&&t.preventDefault(),t.cancelBubble=!0,!1);this._key_events.k_other&&this._key_events.k_other.call(this,t)}return!0},this.selectRow=function(t,e,i,s){"object"!=typeof t&&(t=this.render_row(t)),this.selectCell(t,0,e,i,!1,s)},this.wasDblClicked=function(t){var e=this.getFirstParentOfType(_isIE?t.srcElement:t.target,"TD");if(e){var i=e.parentNode.idd;return this.callEvent("onRowDblClicked",[i,e._cellIndex,t])}},this._onHeaderClick=function(t,e){var i=this.grid;if(e=e||i.getFirstParentOfType(_isIE?event.srcElement:t.target,"TD"),null==this.grid.resized){if(!this.grid.callEvent("onHeaderClick",[e._cellIndexS,t||window.event]))return!1;i.sortField(e._cellIndexS,!1,e)}this.grid.resized=null},this.deleteSelectedRows=function(){var t=this.selectedRows.length;if(0!=t){var e=this.selectedRows;this.selectedRows=dhtmlxArray();for(var i=t-1;i>=0;i--){var s=e[i];if(this.deleteRow(s.idd,s)){if(s==this.row)var n=i}else this.selectedRows[this.selectedRows.length]=s}if(n)try{n+1>this.rowsCol.length&&n--,this.selectCell(n,0,!0)}catch(o){this.row=null,this.cell=null}}},this.getSelectedRowId=function(){for(var t=new Array(0),e={},i=0;i<this.selectedRows.length;i++){var s=this.selectedRows[i].idd;e[s]||(t[t.length]=s,e[s]=!0)}return 0==t.length?null:t.join(this.delim)},this.getSelectedCellIndex=function(){return null!=this.cell?this.cell._cellIndex:-1},this.getColWidth=function(t){return parseInt(this.cellWidthPX[t])},this.setColWidth=function(t,e){if("*"==e)this.initCellWidth[t]="*";else{if(this._hrrar[t])return;"px"==this.cellWidthType?this.cellWidthPX[t]=parseInt(e):this.cellWidthPC[t]=parseInt(e)}this.setSizes()},this.getRowIndex=function(t){for(var e=0;e<this.rowsBuffer.length;e++)if(this.rowsBuffer[e]&&this.rowsBuffer[e].idd==t)return e;return-1},this.getRowId=function(t){return this.rowsBuffer[t]?this.rowsBuffer[t].idd:this.undefined},this.setRowId=function(t,e){this.changeRowId(this.getRowId(t),e)},this.changeRowId=function(t,e){if(t!=e){var i=this.rowsAr[t];i.idd=e,this.UserData[t]&&(this.UserData[e]=this.UserData[t],this.UserData[t]=null),this._h2&&this._h2.get[t]&&(this._h2.get[e]=this._h2.get[t],this._h2.get[e].id=e,delete this._h2.get[t]),this.rowsAr[t]=null,this.rowsAr[e]=i;for(var s=0;s<i.childNodes.length;s++)i.childNodes[s]._code&&(i.childNodes[s]._code=this._compileSCL(i.childNodes[s]._val,i.childNodes[s]));if(this._mat_links&&this._mat_links[t]){var n=this._mat_links[t];delete this._mat_links[t];for(var o in n)for(var s=0;s<n[o].length;s++)this._compileSCL(n[o][s].original,n[o][s])}this.callEvent("onRowIdChange",[t,e])}},this.setColumnIds=function(t){this.columnIds=t.split(this.delim)},this.setColumnId=function(t,e){this.columnIds[t]=e},this.getColIndexById=function(t){for(var e=0;e<this.columnIds.length;e++)if(this.columnIds[e]==t)return e},this.getColumnId=function(t){return this.columnIds[t]},this.getColumnLabel=function(t,e,i){for(var s=(i||this.hdr).rows[(e||0)+1],n=0;n<s.cells.length;n++)if(s.cells[n]._cellIndexS==t)return _isIE?s.cells[n].innerText:s.cells[n].textContent;return""},this.getColLabel=this.getColumnLabel,this.getFooterLabel=function(t,e){return this.getColumnLabel(t,e,this.ftr)},this.setRowTextBold=function(t){var e=this.getRowById(t);e&&(e.style.fontWeight="bold")},this.setRowTextStyle=function(t,e){var i=this.getRowById(t);if(i)for(var s=0;s<i.childNodes.length;s++){var n=i.childNodes[s]._attrs.style||"";this._hrrar&&this._hrrar[s]&&(n="display:none;"),i.childNodes[s].style.cssText=_isIE?n+"width:"+i.childNodes[s].style.width+";"+e:n+"width:"+i.childNodes[s].style.width+";"+e}},this.setRowColor=function(t,e){for(var i=this.getRowById(t),s=0;s<i.childNodes.length;s++)i.childNodes[s].bgColor=e},this.setCellTextStyle=function(t,e,i){var s=this.getRowById(t);if(s){var n=s.childNodes[s._childIndexes?s._childIndexes[e]:e];if(n){var o="";this._hrrar&&this._hrrar[e]&&(o="display:none;"),n.style.cssText=_isIE?o+"width:"+n.style.width+";"+i:o+"width:"+n.style.width+";"+i}}},this.setRowTextNormal=function(t){var e=this.getRowById(t);e&&(e.style.fontWeight="normal")},this.doesRowExist=function(t){return null!=this.getRowById(t)?!0:!1},this.getColumnsNum=function(){return this._cCount},this.moveRowUp=function(t){var e=this.getRowById(t);if(this.isTreeGrid())return this.moveRowUDTG(t,-1);var i=this.rowsCol._dhx_find(e);if(e.previousSibling&&0!=i){e.parentNode.insertBefore(e,e.previousSibling),this.rowsCol._dhx_swapItems(i,i-1),this.setSizes();var s=this.rowsBuffer._dhx_find(e);this.rowsBuffer._dhx_swapItems(s,s-1),this._cssEven&&this._fixAlterCss(i-1)}},this.moveRowDown=function(t){var e=this.getRowById(t);if(this.isTreeGrid())return this.moveRowUDTG(t,1);var i=this.rowsCol._dhx_find(e);if(e.nextSibling){this.rowsCol._dhx_swapItems(i,i+1),e.nextSibling.nextSibling?e.parentNode.insertBefore(e,e.nextSibling.nextSibling):e.parentNode.appendChild(e),this.setSizes();var s=this.rowsBuffer._dhx_find(e);this.rowsBuffer._dhx_swapItems(s,s+1),this._cssEven&&this._fixAlterCss(i)}},this.getCombo=function(t){return this.combos[t]||(this.combos[t]=new dhtmlXGridComboObject),this.combos[t]},this.setUserData=function(t,e,i){t||(t="gridglobaluserdata"),this.UserData[t]||(this.UserData[t]=new Hashtable),this.UserData[t].put(e,i)},this.getUserData=function(t,e){t||(t="gridglobaluserdata"),this.getRowById(t);var i=this.UserData[t];return i?i.get(e):""},this.setEditable=function(t){this.isEditable=convertStringToBoolean(t)},this.selectRowById=function(t,e,i,s){s||(s=!1),this.selectCell(this.getRowById(t),0,s,e,!1,i)},this.clearSelection=function(){this.editStop();for(var t=0;t<this.selectedRows.length;t++){var e=this.rowsAr[this.selectedRows[t].idd];e&&(e.className=e.className.replace(/rowselected/g,""))}this.selectedRows=dhtmlxArray(),this.row=null,null!=this.cell&&(this.cell.className=this.cell.className.replace(/cellselected/g,""),this.cell=null),this.callEvent("onSelectionCleared",[])},this.copyRowContent=function(t,e){var i=this.getRowById(t);if(this.isTreeGrid())this._copyTreeGridRowContent(i,t,e);else for(var s=0;s<i.cells.length;s++)this.cells(e,s).setValue(this.cells(t,s).getValue());_isIE||(this.getRowById(t).cells[0].height=i.cells[0].offsetHeight)},this.setFooterLabel=function(t,e,i){return this.setColumnLabel(t,e,i,this.ftr)},this.setColumnLabel=function(t,e,i,s){var n=(s||this.hdr).rows[i||1],o=n._childIndexes?n._childIndexes[t]:t;if(n.cells[o]){if(this.useImagesInHeader){n.cells[o].style.textAlign="left",n.cells[o].innerHTML="<img src='"+e+"'>";var l=new Image;l.src=""+e.replace(/(\.[a-z]+)/,".des$1"),this.preloadImagesAr[this.preloadImagesAr.length]=l;var r=new Image;r.src=""+e.replace(/(\.[a-z]+)/,".asc$1"),this.preloadImagesAr[this.preloadImagesAr.length]=r}else{var a="<div class='hdrcell'>";if(-1!=e.indexOf("img:[")){var h=e.replace(/.*\[([^>]+)\].*/,"$1");e=e.substr(e.indexOf("]")+1,e.length),a+="<img width='18px' height='18px' align='absmiddle' src='"+h+"' hspace='2'>"}a+=e,a+="</div>",n.cells[o].innerHTML=a,this._hstyles[o]&&(n.cells[o].style.cssText=this._hstyles[o])}if(-1!=(e||"").indexOf("#")){var d=e.match(/(^|{)#([^}]+)(}|$)/);if(d){var c="_in_header_"+d[2];this[c]&&this[c](this.forceDivInHeader?n.cells[o].firstChild:n.cells[o],o,e.split(d[0]))}}}},this.setColLabel=function(t,e,i,s){return this.setColumnLabel(t,e,(i||0)+1,s)},this.clearAll=function(t){if(this.obj.rows[0]){this._h2&&(this._h2=new dhtmlxHierarchy,this._fake&&(this._realfake?this._h2=this._fake._h2:this._fake._h2=this._h2)),this.limit=this._limitC=0,this.editStop(!0),this._dLoadTimer&&window.clearTimeout(this._dLoadTimer),this._dload&&(this.objBox.scrollTop=0,this.limit=this._limitC||0,this._initDrF=!0);var e=this.rowsCol.length;e=this.obj.rows.length;for(var i=e-1;i>0;i--){var s=this.obj.rows[i];s.parentNode.removeChild(s)}if(t){this._master_row=null,this.obj.rows[0].parentNode.removeChild(this.obj.rows[0]);for(var i=this.hdr.rows.length-1;i>=0;i--){var s=this.hdr.rows[i];s.parentNode.removeChild(s)}this.ftr&&(this.ftr.parentNode.removeChild(this.ftr),this.ftr=null),this._aHead=this.ftr=this.cellWidth=this._aFoot=null,this.cellType=dhtmlxArray(),this._hrrar=[],this.columnIds=[],this.combos=[],this._strangeParams=[],this.defVal=[],this._ivizcol=null}this.row=null,this.cell=null,this.rowsCol=dhtmlxArray(),this.rowsAr={},this._RaSeCol=[],this.rowsBuffer=dhtmlxArray(),this.UserData=[],this.selectedRows=dhtmlxArray(),(this.pagingOn||this._srnd)&&(this.xmlFileUrl=""),this.pagingOn&&this.changePage(1),this._contextCallTimer&&window.clearTimeout(this._contextCallTimer),this._sst&&this.enableStableSorting(!0),this._fillers=this.undefined,this.setSortImgState(!1),this.setSizes(),this.callEvent("onClearAll",[])}},this.sortField=function(t,e,i){if(0==this.getRowsNum())return!1;var s=this.hdr.rows[0].cells[t];if(s&&"TH"==s.tagName&&this.fldSort.length-1>=s._cellIndex&&"na"!=this.fldSort[s._cellIndex]){var n=this.getSortingState(),o=n[0]==t&&"asc"==n[1]?"des":"asc";if(!this.callEvent("onBeforeSorting",[t,this.fldSort[t],o]))return;if(this.sortImg.className="dhxgrid_sort_"+("asc"==o?"asc":"desc"),this.useImagesInHeader){var l=this.hdr.rows[1].cells[s._cellIndex].firstChild;if(null!=this.fldSorted){var r=this.hdr.rows[1].cells[this.fldSorted._cellIndex].firstChild;r.src=r.src.replace(/(\.asc\.)|(\.des\.)/,".")}l.src=l.src.replace(/(\.[a-z]+)$/,"."+o+"$1")}this.sortRows(s._cellIndex,this.fldSort[s._cellIndex],o),this.fldSorted=s,this.r_fldSorted=i;{var a=this.hdr.rows[1],a=i.parentNode;a._childIndexes?a._childIndexes[s._cellIndex]:s._cellIndex}this.setSortImgPos(!1,!1,!1,i)}},this.setCustomSorting=function(func,col){this._customSorts||(this._customSorts=new Array),this._customSorts[col]="string"==typeof func?eval(func):func,this.fldSort[col]="cus"},this.enableHeaderImages=function(t){this.useImagesInHeader=t},this.setHeader=function(t,e,i){if("object"!=typeof t)var s=this._eSplit(t);else s=[].concat(t);for(var n=new Array(0),o=new dhtmlxArray(0),l=new Array(0),r=new Array(0),a=new Array(0),h=0;h<s.length;h++)n[n.length]=Math.round(100/s.length),o[o.length]="ed",l[l.length]="left",r[r.length]="middle",a[a.length]="na";this.splitSign=e||"#cspan",this.hdrLabels=s,this.cellWidth=n,this.initCellWidth.length||this.setInitWidthsP(n.join(this.delim),!0),this.cellType=o,this.cellAlign=l,this.cellVAlign=r,this.fldSort=a,this._hstyles=i||[]},this._eSplit=function(t){if(![].push)return t.split(this.delim);var e="r"+(new Date).valueOf(),i=this.delim.replace(/([\|\+\*\^])/g,"\\$1");return(t||"").replace(RegExp(i,"g"),e).replace(RegExp("\\\\"+e,"g"),this.delim).split(e)},this.getColType=function(t){return this.cellType[t]},this.getColTypeById=function(t){return this.cellType[this.getColIndexById(t)]},this.setColTypes=function(t){this.cellType=dhtmlxArray(t.split(this.delim)),this._strangeParams=new Array;for(var e=0;e<this.cellType.length;e++){if(-1!=this.cellType[e].indexOf("[")){var i=this.cellType[e].split(/[\[\]]+/g);this.cellType[e]=i[0],this.defVal[e]=i[1],0==i[1].indexOf("=")&&(this.cellType[e]="math",this._strangeParams[e]=i[0])}window["eXcell_"+this.cellType[e]]||dhtmlxError.throwError("Configuration","Incorrect cell type: "+this.cellType[e],[this,this.cellType[e]])}},this.setColSorting=function(t){this.fldSort=t.split(this.delim);for(var e={str:1,"int":1,date:1},i=0;i<this.fldSort.length;i++)e[this.fldSort[i]]||"function"!=typeof window[this.fldSort[i]]||(this._customSorts||(this._customSorts=new Array),this._customSorts[i]=window[this.fldSort[i]],this.fldSort[i]="cus")},this.setColAlign=function(t){this.cellAlign=t.split(this.delim);for(var e=0;e<this.cellAlign.length;e++)this.cellAlign[e]=this.cellAlign[e]._dhx_trim()
},this.setColVAlign=function(t){this.cellVAlign=t.split(this.delim)},this.setNoHeader=function(t){this.noHeader=convertStringToBoolean(t)},this.showRow=function(t){this.getRowById(t),this._h2&&this.openItem(this._h2.get[t].parent.id);for(var e=this.getRowById(t).childNodes[0];e&&"none"==e.style.display;)e=e.nextSibling;e&&this.moveToVisible(e,!0)},this.setStyle=function(t,e,i,s){this.ssModifier=[t,e,i,i,s];for(var n=["#"+this.entBox.id+" table.hdr td","#"+this.entBox.id+" table.obj td","#"+this.entBox.id+" table.obj tr.rowselected td.cellselected","#"+this.entBox.id+" table.obj td.cellselected","#"+this.entBox.id+" table.obj tr.rowselected td"],o=0;!_isIE;){try{{document.styleSheets[o].cssRules.length}}catch(l){o++;continue}break}for(var r=0;r<n.length;r++)this.ssModifier[r]&&(_isIE?document.styleSheets[0].addRule(n[r],this.ssModifier[r]):document.styleSheets[o].insertRule(n[r]+(" { "+this.ssModifier[r]+" }"),document.styleSheets[o].cssRules.length))},this.setColumnColor=function(t){this.columnColor=t.split(this.delim)},this.enableAlterCss=function(t,e,i,s){(t||e)&&this.attachEvent("onGridReconstructed",function(){this._fixAlterCss(),this._fake&&this._fake._fixAlterCss()}),this._cssSP=i,this._cssSU=s,this._cssEven=t,this._cssUnEven=e},this._fixAlterCss=function(t){if(this._h2&&(this._cssSP||this._cssSU))return this._fixAlterCssTGR(t);if(this._cssEven||this._cssUnEven){t=t||0;for(var e=t,i=t;i<this.rowsCol.length;i++)if(this.rowsCol[i]&&"none"!=this.rowsCol[i].style.display){if(this.rowsCol[i]._cntr){e=1;continue}this.rowsCol[i].className=-1!=this.rowsCol[i].className.indexOf("rowselected")?e%2==1?this._cssUnEven+" rowselected "+(this.rowsCol[i]._css||""):this._cssEven+" rowselected "+(this.rowsCol[i]._css||""):e%2==1?this._cssUnEven+" "+(this.rowsCol[i]._css||""):this._cssEven+" "+(this.rowsCol[i]._css||""),e++}}},this.clearChangedState=function(){for(var t=0;t<this.rowsCol.length;t++){var e=this.rowsCol[t];if(e&&e.childNodes)for(var i=e.childNodes.length,s=0;i>s;s++)e.childNodes[s].wasChanged=!1}},this.getChangedRows=function(t){var e=new Array;return this.forEachRow(function(i){var s=this.rowsAr[i];if("TR"==s.tagName){var n=s.childNodes.length;if(t&&s._added)e[e.length]=s.idd;else for(var o=0;n>o;o++)if(s.childNodes[o].wasChanged){e[e.length]=s.idd;break}}}),e.join(this.delim)},this._sUDa=!1,this._sAll=!1,this.setSerializationLevel=function(t,e,i,s,n,o){this._sUDa=t,this._sAll=e,this._sConfig=i,this._chAttr=s,this._onlChAttr=n,this._asCDATA=o},this.setSerializableColumns=function(t){if(!t)return void(this._srClmn=null);this._srClmn=(t||"").split(",");for(var e=0;e<this._srClmn.length;e++)this._srClmn[e]=convertStringToBoolean(this._srClmn[e])},this._serialise=function(){this.editStop();var t=[],e="</"+this.xml.s_row+">";if(this.isTreeGrid())this._h2.forEachChildF(0,function(e){var i=this._serializeRow(this.render_row_tree(-1,e.id));return t.push(i),i?!0:!1},this,function(){t.push(e)});else for(var i=0;i<this.rowsBuffer.length;i++)if(this.rowsBuffer[i]){if(this._chAttr&&this.rowsBuffer[i]._locator)continue;var s=this._serializeRow(this.render_row(i));t.push(s),s&&t.push(e)}return[t.join("")]},this._serializeRow=function(t,e){var i=[],s=this.xml.row_attrs,n=this.xml.cell_attrs;if(i.push("<"+this.xml.s_row),i.push(" id='"+t.idd+"'"),this._sAll&&-1!=this.selectedRows._dhx_find(t)&&i.push(" selected='1'"),this._h2&&"minus"==this._h2.get[t.idd].state&&i.push(" open='1'"),s.length)for(var e=0;e<s.length;e++)i.push(" "+s[e]+"='"+t._attrs[s[e]]+"'");if(i.push(">"),this._sUDa&&this.UserData[t.idd]){keysAr=this.UserData[t.idd].getKeys();for(var o=0;o<keysAr.length;o++)i.push("<userdata name='"+keysAr[o]+"'>"+(this._asCDATA?"<![CDATA[":"")+this.UserData[t.idd].get(keysAr[o])+(this._asCDATA?"]]>":"")+"</userdata>")}for(var l=!1,r=0;r<this._cCount;r++)if(!this._srClmn||this._srClmn[r]){var a=this.cells3(t,r);if(i.push("<cell"),n.length)for(var e=0;e<n.length;e++)i.push(" "+n[e]+"='"+a.cell._attrs[n[e]]+"'");if(zxVal=a[this._agetm](),this._asCDATA&&(zxVal="<![CDATA["+zxVal+"]]>"),this._ecspn&&a.cell.colSpan&&a.cell.colSpan>1&&i.push(' colspan="'+a.cell.colSpan+'" '),this._chAttr?a.wasChanged()&&(i.push(' changed="1"'),l=!0):this._onlChAttr&&a.wasChanged()&&(l=!0),i.push(this._sAll&&"tree"==this.cellType[r]?(this._h2?" image='"+this._h2.get[t.idd].image+"'":"")+">"+zxVal+"</cell>":">"+zxVal+"</cell>"),this._ecspn&&a.cell.colSpan)for(var h=0;h<a.cell.colSpan-1;h++)i.push("<cell/>"),r++}return!this._onlChAttr||l||t._added?i.join(""):""},this._serialiseConfig=function(){for(var t="<head>",e=0;e<this.hdr.rows[0].cells.length;e++)if(!this._srClmn||this._srClmn[e]){var i=this.fldSort[e];"cus"==i&&(i=this._customSorts[e].toString(),i=i.replace(/function[\ ]*/,"").replace(/\([^\f]*/,"")),t+="<column width='"+this.getColWidth(e)+"' align='"+this.cellAlign[e]+"' type='"+this.cellType[e]+"' sort='"+(i||"na")+"' color='"+this.columnColor[e]+"'"+(this.columnIds[e]?" id='"+this.columnIds[e]+"'":"")+">",t+=this._asCDATA?"<![CDATA["+this.getHeaderCol(e)+"]]>":this.getHeaderCol(e);var s=this.getCombo(e);if(s)for(var n=0;n<s.keys.length;n++)t+="<option value='"+s.keys[n]+"'>"+s.values[n]+"</option>";t+="</column>"}return t+="</head>"},this.serialize=function(){var t='<?xml version="1.0"?><rows>';if(this._agetm=this._mathSerialization?"getMathValue":"getValue",this._sUDa&&this.UserData.gridglobaluserdata)for(var e=this.UserData.gridglobaluserdata.getKeys(),i=0;i<e.length;i++)t+="<userdata name='"+e[i]+"'>"+this.UserData.gridglobaluserdata.get(e[i])+"</userdata>";return this._sConfig&&(t+=this._serialiseConfig()),t+=this._serialise(),t+="</rows>"},this.getPosition=function(t,e){if(!e){var i=getOffset(t);return[i.left,i.top]}e=e||document.body;for(var s=t,n=0,o=0;s&&s!=e;)n+=s.offsetLeft-s.scrollLeft,o+=s.offsetTop-s.scrollTop,s=s.offsetParent;return e==document.body&&(_isIE?(o+=document.body.offsetTop||document.documentElement.offsetTop,n+=document.body.offsetLeft||document.documentElement.offsetLeft):_isFF||(n+=document.body.offsetLeft,o+=document.body.offsetTop)),[n,o]},this.getFirstParentOfType=function(t,e){for(;t&&t.tagName!=e&&"BODY"!=t.tagName;)t=t.parentNode;return t},this.objBox.onscroll=function(){this.grid._doOnScroll()},this.objBox.ontouchend=function(){this.hdrBox.scrollLeft=this.objBox.scrollLeft},this.hdrBox.onscroll=function(){this._try_header_sync||(this._try_header_sync=!0,Math.abs(this.grid.objBox.scrollLeft-this.scrollLeft)>1&&(this.grid.objBox.scrollLeft=this.scrollLeft),this._try_header_sync=!1)},(!_isOpera||_OperaRv>8.5)&&(this.hdr.onmousemove=function(t){this.grid.changeCursorState(t||window.event)},this.hdr.onmousedown=function(t){return this.grid.startColResize(t||window.event)}),this.obj.onmousemove=this._drawTooltip,this.objBox.onclick=function(t){(t||event).cancelBubble=!0},this.obj.onclick=function(t){this.grid._doClick(t||window.event),this.grid._sclE?this.grid.editCell(t||window.event):this.grid.editStop(),(t||event).cancelBubble=!0},_isMacOS?this.entBox.oncontextmenu=function(t){t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1;var e=this.grid;return e._realfake&&(e=e._fake),e._doContClick(t||window.event)}:(this.entBox.onmousedown=function(t){return this.grid._doContClick(t||window.event)},this.entBox.oncontextmenu=function(t){return this.grid._ctmndx&&((t||event).cancelBubble=!0),!this.grid._ctmndx}),this.obj.ondblclick=function(t){if(!this.grid.wasDblClicked(t||window.event))return!1;if(this.grid._dclE){var e=this.grid.getFirstParentOfType(_isIE?event.srcElement:t.target,"TR");e==this.grid.row&&this.grid.editCell(t||window.event)}return(t||event).cancelBubble=!0,_isOpera?!1:void 0},this.hdr.onclick=this._onHeaderClick,this.sortImg.onclick=function(){self._onHeaderClick.apply({grid:self},[null,self.r_fldSorted])},this.hdr.ondblclick=this._onHeaderDblClick,document.body._dhtmlxgrid_onkeydown||(dhtmlxEvent(document,"keydown",function(t){return globalActiveDHTMLGridObject?globalActiveDHTMLGridObject.doKey(t||window.event):void 0}),document.body._dhtmlxgrid_onkeydown=!0),dhtmlxEvent(document.body,"click",function(){self.editStop&&self.editStop(),self.isActive&&self.setActive(!1)}),-1!=this.entBox.style.height.toString().indexOf("%")&&(this._delta_y=this.entBox.style.height),-1!=this.entBox.style.width.toString().indexOf("%")&&(this._delta_x=this.entBox.style.width),(this._delta_x||this._delta_y)&&this._setAutoResize(),this.setColHidden=this.setColumnsVisibility,this.enableCollSpan=this.enableColSpan,this.setMultiselect=this.enableMultiselect,this.setMultiLine=this.enableMultiline,this.deleteSelectedItem=this.deleteSelectedRows,this.getSelectedId=this.getSelectedRowId,this.getHeaderCol=this.getColumnLabel,this.isItemExists=this.doesRowExist,this.getColumnCount=this.getColumnsNum,this.setSelectedRow=this.selectRowById,this.setHeaderCol=this.setColumnLabel,this.preventIECashing=this.preventIECaching,this.enableAutoHeigth=this.enableAutoHeight,this.getUID=this.uid,dhtmlx.image_path&&this.setImagePath(dhtmlx.image_path),dhtmlx.skin&&this.setSkin(dhtmlx.skin),this}function dhtmlXGridCellObject(t){this.destructor=function(){return this.cell.obj=null,this.cell=null,this.grid=null,this.base=null,null},this.cell=t,this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell.innerHTML._dhx_trim()},this.getMathValue=function(){return this.cell.original?this.cell.original:this.getValue()},this.getFont=function(){return arOut=new Array(3),this.cell.style.fontFamily&&(arOut[0]=this.cell.style.fontFamily),("bold"==this.cell.style.fontWeight||"bold"==this.cell.parentNode.style.fontWeight)&&(arOut[1]="bold"),("italic"==this.cell.style.fontStyle||"italic"==this.cell.parentNode.style.fontWeight)&&(arOut[1]+="italic"),arOut[2]=this.cell.style.fontSize?this.cell.style.fontSize:"",arOut.join("-")},this.getTextColor=function(){return this.cell.style.color?this.cell.style.color:"#000000"},this.getBgColor=function(){return this.cell.bgColor?this.cell.bgColor:"#FFFFFF"},this.getHorAlign=function(){return this.cell.style.textAlign?this.cell.style.textAlign:this.cell.style.textAlign?this.cell.style.textAlign:"left"},this.getWidth=function(){return this.cell.scrollWidth},this.setFont=function(t){fntAr=t.split("-"),this.cell.style.fontFamily=fntAr[0],this.cell.style.fontSize=fntAr[fntAr.length-1],3==fntAr.length&&(/bold/.test(fntAr[1])&&(this.cell.style.fontWeight="bold"),/italic/.test(fntAr[1])&&(this.cell.style.fontStyle="italic"),/underline/.test(fntAr[1])&&(this.cell.style.textDecoration="underline"))},this.setTextColor=function(t){this.cell.style.color=t},this.setBgColor=function(t){""==t&&(t=null),this.cell.bgColor=t},this.setHorAlign=function(t){this.cell.style.textAlign=1==t.length?"c"==t?"center":"l"==t?"left":"right":t},this.wasChanged=function(){return this.cell.wasChanged?!0:!1},this.isCheckbox=function(){var t=this.cell.firstChild;return t&&"INPUT"==t.tagName?(type=t.type,"radio"==type||"checkbox"==type?!0:!1):!1},this.isChecked=function(){return this.isCheckbox()?this.cell.firstChild.checked:void 0},this.isDisabled=function(){return this.cell._disabled},this.setChecked=function(t){this.isCheckbox()&&("true"!=t&&1!=t&&(t=!1),this.cell.firstChild.checked=t)},this.setDisabled=function(t){"true"!=t&&1!=t&&(t=!1),this.isCheckbox()&&(this.cell.firstChild.disabled=t,this.disabledF&&this.disabledF(t)),this.cell._disabled=t}}function eXcell(){this.obj=null,this.val=null,this.changeState=function(){return!1},this.edit=function(){this.val=this.getValue()},this.detach=function(){return!1},this.getPosition=function(t){for(var e=t,i=0,s=0;"BODY"!=e.tagName;)i+=e.offsetLeft,s+=e.offsetTop,e=e.offsetParent;return new Array(i,s)}}function eXcell_ed(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.val=this.getValue(),this.obj=document.createElement(this.cell.atag),this.obj.setAttribute("autocomplete","off"),this.obj.style.height=this.cell.offsetHeight-(_isIE?4:4)+"px",this.obj.className="dhx_combo_edit",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(t){(t||event).cancelBubble=!0},this.obj.onmousedown=function(t){(t||event).cancelBubble=!0},this.obj.value=this.val,this.cell.innerHTML="",this.cell.appendChild(this.obj),this.obj.onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0},_isIE&&(this.obj.focus(),this.obj.blur()),this.obj.focus()},this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()},this.detach=function(){return this.setValue(this.obj.value),this.val!=this.getValue()}}function eXcell_edtxt(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&this.cell.atag&&this.cell.firstChild.tagName==this.cell.atag?this.cell.firstChild.value:this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(t){t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t=" ",this.cell._clearCell=!0),this.setCTxtValue(t)}}function eXcell_edn(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":this.cell._orig_value||this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)},this.detach=function(){var t=this.obj.value;return this.setValue(t),this.val!=this.getValue()}}function eXcell_ch(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.disabledF=function(t){this.cell.innerHTML=1==t||1==t?this.cell.innerHTML.replace("item_chk0.","item_chk0_dis.").replace("item_chk1.","item_chk1_dis."):this.cell.innerHTML.replace("item_chk0_dis.","item_chk0.").replace("item_chk1_dis.","item_chk1.")},this.changeState=function(t){t!==!0||this.grid.isActive||(null!=window.globalActiveDHTMLGridObject&&window.globalActiveDHTMLGridObject!=this.grid&&window.globalActiveDHTMLGridObject.isActive&&window.globalActiveDHTMLGridObject.setActive(!1),this.grid.setActive(!0)),!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),this.setValue("1"==this.val?"0":"1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)},this.getValue=function(){return this.cell.chstate?this.cell.chstate.toString():"0"},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()?!0:!1},this.setChecked=function(t){this.setValue(t.toString())},this.detach=function(){return this.val!=this.getValue()},this.edit=null}function eXcell_ra(t){this.base=eXcell_ch,this.base(t),this.grid=t.parentNode.grid,this.disabledF=function(t){this.cell.innerHTML=1==t||1==t?this.cell.innerHTML.replace("radio_chk0.","radio_chk0_dis.").replace("radio_chk1.","radio_chk1_dis."):this.cell.innerHTML.replace("radio_chk0_dis.","radio_chk0.").replace("radio_chk1_dis.","radio_chk1.")},this.changeState=function(t){(t!==!1||1!=this.getValue())&&(!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),this.setValue("1"==this.val?"0":"1"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null))},this.edit=null}function eXcell_txt(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_textarea",this.obj.onclick=function(t){(t||event).cancelBubble=!0};var t=this.grid.getPosition(this.cell);if(this.obj.value=this.val,this.obj.style.display="",this.obj.style.textAlign=this.cell.style.textAlign,_isFF){var e=document.createElement("DIV");e.appendChild(this.obj),e.style.overflow="auto",e.className="dhx_textarea",this.obj.style.margin="0px 0px 0px 0px",this.obj.style.border="0px",this.obj=e}if(document.body.appendChild(this.obj),_isOpera&&(this.obj.onkeypress=function(t){return 9==t.keyCode?!1:void 0}),this.obj.onkeydown=function(t){var e=t||event;return 9==e.keyCode?(globalActiveDHTMLGridObject.entBox.focus(),globalActiveDHTMLGridObject.doKey({keyCode:e.keyCode,shiftKey:e.shiftKey,srcElement:"0"}),!1):void 0},this.obj.style.left=t[0]+"px",this.obj.style.top=t[1]+this.cell.offsetHeight+"px",this.cell.offsetWidth<200)var i=200;else var i=this.cell.offsetWidth;this.obj.style.width=i+(_isFF?18:16)+"px",_isFF&&(this.obj.firstChild.style.width=parseInt(this.obj.style.width)+"px",this.obj.firstChild.style.height=this.obj.offsetHeight-3+"px"),_isIE&&(this.obj.select(),this.obj.value=this.obj.value),_isFF?this.obj.firstChild.focus():this.obj.focus()},this.detach=function(){var t="";return t=_isFF?this.obj.firstChild.value:this.obj.value,this.cell._clearCell=""==t?!0:!1,this.setValue(t),document.body.removeChild(this.obj),this.obj=null,this.val!=this.getValue()},this.getValue=function(){return this.obj?_isFF?this.obj.firstChild.value:this.obj.value:this.cell._clearCell?"":"undefined"!=typeof this.cell._brval?this.cell._brval:this.grid.multiLine?this.cell._brval||this.cell.innerHTML.replace(/<br[^>]*>/gi,"\n")._dhx_trim():this.cell._brval||this.cell.innerHTML}}function eXcell_txttxt(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.cell.firstChild&&"TEXTAREA"==this.cell.firstChild.tagName?this.cell.firstChild.value:this.cell._clearCell?"":!this.grid.multiLine&&this.cell._brval?this.cell._brval:_isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(t){this.cell._brval=t,t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t=" ",this.cell._clearCell=!0),this.setCTxtValue(t)}}function eXcell_co(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid,this.combo=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),this.editable=!0),this.shiftNext=function(){var t=this.list.options[this.list.selectedIndex+1];return t&&(t.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text,!0},this.shiftPrev=function(){if(0!=this.list.selectedIndex){var t=this.list.options[this.list.selectedIndex-1];t&&(t.selected=!0),this.obj.value=this.list.options[this.list.selectedIndex].text}return!0},this.edit=function(){this.val=this.getValue(),this.text=this.getText()._dhx_trim();var t=this.grid.getPosition(this.cell);this.obj=document.createElement("TEXTAREA"),this.obj.className="dhx_combo_edit",this.obj.style.height=this.cell.offsetHeight-4+"px",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.style.textAlign,this.obj.onclick=function(t){(t||event).cancelBubble=!0},this.obj.onmousedown=function(t){(t||event).cancelBubble=!0},this.obj.value=this.text,this.obj.onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0};var e=this;this.obj.onkeyup=function(t){var i=(t||event).keyCode;if(38!=i&&40!=i&&9!=i)for(var s=this.readonly?String.fromCharCode(i):this.value,n=e.list.options,o=0;o<n.length;o++)if(0==n[o].text.indexOf(s))return n[o].selected=!0},this.list=document.createElement("SELECT"),this.list.className="dhx_combo_select",this.list.style.width=this.cell.offsetWidth+"px",this.list.style.left=t[0]+"px",this.list.style.top=t[1]+this.cell.offsetHeight+"px",this.list.onclick=function(t){var i=t||window.event,s=i.target||i.srcElement;"OPTION"==s.tagName&&(s=s.parentNode),e.editable=!1,e.grid.editStop(),i.cancelBubble=!0};for(var i=this.combo.getKeys(),s=!1,n=0,o=0;o<i.length;o++){var l=this.combo.get(i[o]);this.list.options[this.list.options.length]=new Option(l,i[o]),i[o]==this.val&&(n=this.list.options.length-1,s=!0)}0==s&&(this.list.options[this.list.options.length]=new Option(this.text,null===this.val?"":this.val),n=this.list.options.length-1),document.body.appendChild(this.list),this.list.size="6",this.cstate=1,this.editable?this.cell.innerHTML="":(this.obj.style.width="1px",this.obj.style.height="1px"),this.cell.appendChild(this.obj),this.list.options[n].selected=!0,(!_isFF||this.editable)&&(this.obj.focus(),this.obj.focus()),this.editable||(this.obj.style.visibility="hidden",this.list.focus(),this.list.onkeydown=function(t){return t=t||window.event,e.grid.setActive(!0),t.keyCode<30?e.grid.doKey({target:e.cell,keyCode:t.keyCode,shiftKey:t.shiftKey,ctrlKey:t.ctrlKey}):void 0})},this.getValue=function(){return this.cell.combo_value==window.undefined?"":this.cell.combo_value},this.detach=function(){if(this.val!=this.getValue()&&(this.cell.wasChanged=!0),null!=this.list.parentNode)if(this.editable){var t=this.list.options[this.list.selectedIndex];if(t&&t.text==this.obj.value)this.setValue(this.list.value);else{var e=this.cell._combo||this.grid.getCombo(this.cell._cellIndex),i=e.values._dhx_find(this.obj.value);this.setValue(-1!=i?e.keys[i]:this.cell.combo_value=this.obj.value)}}else this.setValue(this.list.value);return this.list.parentNode&&this.list.parentNode.removeChild(this.list),this.obj.parentNode&&this.obj.parentNode.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_coro(t){this.base=eXcell_co,this.base(t),this.editable=!1}function eXcell_cotxt(t){this.base=eXcell_co,this.base(t)}function eXcell_corotxt(t){this.base=eXcell_co,this.base(t),this.editable=!1}function eXcell_cp(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(e){}this.edit=function(){this.val=this.getValue(),this.obj=document.createElement("SPAN"),this.obj.style.border="1px solid black",this.obj.style.position="absolute";var t=this.grid.getPosition(this.cell);this.colorPanel(4,this.obj),document.body.appendChild(this.obj),this.obj.style.left=t[0]+"px",this.obj.style.zIndex=1e3,this.obj.style.top=t[1]+this.cell.offsetHeight+"px"},this.toolDNum=function(t){return 1==t.length&&(t="0"+t),t},this.colorPanel=function(t,e){var i=document.createElement("TABLE");e.appendChild(i),i.cellSpacing=0,i.editor_obj=this,i.style.cursor="default",i.onclick=function(t){var e=t||window.event,i=e.target||e.srcElement,s=i.parentNode.parentNode.parentNode.editor_obj;s.setValue(i._bg),s.grid.editStop()};for(var s=256/t,n=0;256/s>=n;n++)for(var o=i.insertRow(n),l=0;256/s>=l;l++)for(var r=0;256/s>=r;r++){R=new Number(s*n)-(0==n?0:1),G=new Number(s*l)-(0==l?0:1),B=new Number(s*r)-(0==r?0:1);var a=this.toolDNum(R.toString(16))+""+this.toolDNum(G.toString(16))+this.toolDNum(B.toString(16)),h=o.insertCell(l);h.width="10px",h.innerHTML="&nbsp;",h.title=a.toUpperCase(),h.style.backgroundColor="#"+a,h._bg="#"+a,null!=this.val&&"#"+a.toUpperCase()==this.val.toUpperCase()&&(h.style.border="2px solid white")}},this.getValue=function(){return this.cell.firstChild._bg||""},this.getRed=function(){return Number(parseInt(this.getValue().substr(1,2),16))},this.getGreen=function(){return Number(parseInt(this.getValue().substr(3,2),16))},this.getBlue=function(){return Number(parseInt(this.getValue().substr(5,2),16))},this.detach=function(){return null!=this.obj.offsetParent&&document.body.removeChild(this.obj),this.val!=this.getValue()}}function eXcell_img(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(e){}this.getValue=function(){if("IMG"==this.cell.firstChild.tagName)return this.cell.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");if("A"==this.cell.firstChild.tagName){var t=this.cell.firstChild.firstChild.src+(null!=this.cell.titFl?"^"+this.cell._brval:"");return t+="^"+this.cell.lnk,this.cell.trg&&(t+="^"+this.cell.trg),t}},this.isDisabled=function(){return!0}}function eXcell_price(t){this.base=eXcell_ed,this.base(t),this.getValue=function(){return this.cell.childNodes.length>1?this.cell.childNodes[1].innerHTML.toString()._dhx_trim():"0"}}function eXcell_dyn(t){this.base=eXcell_ed,this.base(t),this.getValue=function(){return this.cell.firstChild.childNodes[1].innerHTML.toString()._dhx_trim()}}function eXcell_ro(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim()}}function eXcell_ron(t){this.cell=t,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell._clearCell?"":this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex).toString()}}function eXcell_rotxt(t){this.cell=t,this.grid=this.cell.parentNode.grid,this.edit=function(){},this.isDisabled=function(){return!0},this.setValue=function(t){t?this.cell._clearCell=!1:(t=" ",this.cell._clearCell=!0),this.setCTxtValue(t)},this.getValue=function(){return this.cell._clearCell?"":_isIE?this.cell.innerText:this.cell.textContent}}function dhtmlXGridComboObject(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this.put=function(t,e){for(var i=0;i<this.keys.length;i++)if(this.keys[i]==t)return this.values[i]=e,!0;this.values[this.values.length]=e,this.keys[this.keys.length]=t},this.get=function(t){for(var e=0;e<this.keys.length;e++)if(this.keys[e]==t)return this.values[e];return null},this.clear=function(){this.keys=new dhtmlxArray,this.values=new dhtmlxArray},this.remove=function(t){for(var e=0;e<this.keys.length;e++)if(this.keys[e]==t)return this.keys._dhx_removeAt(e),this.values._dhx_removeAt(e),!0},this.size=function(){for(var t=0,e=0;e<this.keys.length;e++)null!=this.keys[e]&&t++;return t},this.getKeys=function(){for(var t=new Array(0),e=0;e<this.keys.length;e++)null!=this.keys[e]&&(t[t.length]=this.keys[e]);return t},this.save=function(){this._save=new Array;for(var t=0;t<this.keys.length;t++)this._save[t]=[this.keys[t],this.values[t]]},this.restore=function(){if(this._save){this.keys[t]=new Array,this.values[t]=new Array;for(var t=0;t<this._save.length;t++)this.keys[t]=this._save[t][0],this.values[t]=this._save[t][1]}},this}function Hashtable(){return this.keys=new dhtmlxArray,this.values=new dhtmlxArray,this}function dragContext(t,e,i,s,n,o,l,r,a,h){return this.source=t||"grid",this.target=e||"grid",this.mode=i||"move",this.dropmode=s||"child",this.sid=n||0,this.tid=o,this.sobj=l||null,this.tobj=r||null,this.sExtra=a||null,this.tExtra=h||null,this}function eXcell_stree(t){if(t){if(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._sub_trees)return;if(this._sub=this.grid._sub_trees[t._cellIndex],!this._sub)return;this._sub=this._sub[0]}this.getValue=function(){return this.cell._val},this.setValue=function(t){this.cell._val=t,t=this._sub.getItemText(this.cell._val),this.setCValue(t||"&nbsp;",t)},this.edit=function(){this._sub.parentObject.style.display="block";var t=this.grid.getPosition(this.cell);this._sub.parentObject.style.top=t[1]+"px",this._sub.parentObject.style.left=t[0]+"px",this._sub.parentObject.style.position="absolute";var e=this.grid.editStop;this.grid.editStop=function(){},this.grid.editStop=e},this.detach=function(){if(this._sub.parentObject.style.display="none",null!=this.grid._sub_id){var t=this.cell._val;return this.setValue(this._sub.getSelectedItemId()),this.grid._sub_id=null,this.cell._val!=t}}}function eXcell_link(t){this.cell=t,this.grid=this.cell.parentNode.grid,this.isDisabled=function(){return!0},this.edit=function(){},this.getValue=function(){if(this.cell.firstChild.getAttribute){var t=this.cell.firstChild.getAttribute("target");return this.cell.firstChild.innerHTML+"^"+this.cell.firstChild.getAttribute("href")+(t?"^"+t:"")}return""},this.setValue=function(t){if("number"!=typeof t&&(!t||""==t.toString()._dhx_trim()))return this.setCValue("&nbsp;",e),this.cell._clearCell=!0;var e=t.split("^");1==e.length?e[1]="":e.length>1&&(e[1]="href='"+e[1]+"'",e[1]+=3==e.length?" target='"+e[2]+"'":" target='_blank'"),this.setCValue("<a "+e[1]+" onclick='(_isIE?event:arguments[0]).cancelBubble = true;'>"+e[0]+"</a>",e)}}function eXcell_grid(t){if(t){if(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._sub_grids)return;if(this._sub=this.grid._sub_grids[t._cellIndex],!this._sub)return;this._sindex=this._sub[1],this._sub=this._sub[0]}this.getValue=function(){return this.cell.val},this.setValue=function(t){this.cell.val=t,this._sub.getRowById(t)&&(t=this._sub.cells(t,this._sindex),t=t?t.getValue():""),this.setCValue(t||"&nbsp;",t)},this.edit=function(){this.val=this.cell.val,this._sub.entBox.style.display="block";var t=this.grid.getPosition(this.cell);this._sub.entBox.style.top=t[1]+"px",this._sub.entBox.style.left=t[0]+"px",this._sub.entBox.style.position="absolute",this._sub.setSizes();var e=this.grid.editStop;this.grid.editStop=function(){},this._sub.getRowById(this.cell.val)&&this._sub.setSelectedRow(this.cell.val),this._sub.setActive(!0),this.grid.editStop=e},this.detach=function(){var t=this.cell.val;return this._sub.entBox.style.display="none",null===this._sub.getSelectedId()?!1:(this.setValue(this._sub.getSelectedId()),this.grid.setActive(!0),this.cell.val!=t)}}function eXcell_dhxCalendar(t){if(t&&(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){var e=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[e]);var i=this.grid;e.attachEvent("onClick",function(){return this._last_operation_calendar=!0,window.setTimeout(function(){i.editStop()},1),!0});var s=function(t){(t||event).cancelBubble=!0};dhtmlxEvent(e.base,"click",s),e=null}}function eXcell_dhxCalendarA(t){if(t&&(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._grid_calendarA)){var e=this.grid._grid_calendarA=new dhtmlxCalendarObject;this.grid.callEvent("onDhxCalendarCreated",[e]);var i=this.grid;e.attachEvent("onClick",function(){return this._last_operation_calendar=!0,window.setTimeout(function(){i.editStop()},1),!0});var s=function(t){(t||event).cancelBubble=!0};dhtmlxEvent(e.base,"click",s)}}function eXcell_cntr(t){if(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._ex_cntr_ready&&!this._realfake){this.grid._ex_cntr_ready=!0,this.grid._h2&&this.grid.attachEvent("onOpenEn",function(){this.resetCounter(t._cellIndex)});var e=function(){var e=this;return window.setTimeout(function(){e.resetCounter&&(e._fake&&!e._realfake&&t._cellIndex<e._fake._cCount?e._fake.resetCounter(t._cellIndex):e.resetCounter(t._cellIndex))},1),!0};this.grid.attachEvent("onBeforeSorting",e),this.grid.attachEvent("onFilterEnd",e)}this.edit=function(){},this.getValue=function(){return this.cell.innerHTML},this.setValue=function(){this.cell.style.paddingRight="2px";var t=this.cell;window.setTimeout(function(){if(t.parentNode){var e=t.parentNode.rowIndex;(t.parentNode.grid.currentPage||0>e||t.parentNode.grid._srnd)&&(e=t.parentNode.grid.rowsBuffer._dhx_find(t.parentNode)+1),0>=e||(t.innerHTML=e,t.parentNode.grid._fake&&t._cellIndex<t.parentNode.grid._fake._cCount&&t.parentNode.grid._fake.rowsAr[t.parentNode.idd]&&t.parentNode.grid._fake.cells(t.parentNode.idd,t._cellIndex).setCValue(e),t=null)}},100)}}function eXcell_acheck(t){try{this.cell=t,this.grid=this.cell.parentNode.grid,this.cell.obj=this}catch(e){}this.changeState=function(){!this.grid.isEditable||this.cell.parentNode._locked||this.isDisabled()||(0!=this.grid.callEvent("onEditCell",[0,this.cell.parentNode.idd,this.cell._cellIndex])?(this.val=this.getValue(),this.setValue("1"==this.val?"<checkbox state='false'>":"<checkbox state='true'>"),this.cell.wasChanged=!0,this.grid.callEvent("onEditCell",[1,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid.callEvent("onCheck",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val]),this.grid.callEvent("onCheckbox",[this.cell.parentNode.idd,this.cell._cellIndex,"1"!=this.val])):this.editor=null)
},this.getValue=function(){try{return this.cell.chstate.toString()}catch(t){return null}},this.isCheckbox=function(){return!0},this.isChecked=function(){return"1"==this.getValue()?!0:!1},this.setChecked=function(t){this.setValue(t.toString())},this.detach=function(){return this.val!=this.getValue()},this.drawCurrentState=function(){return 1==this.cell.chstate?"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;'  style='cursor:pointer; font-weight:bold; text-align:center; '><span style='height:8px; width:8px; background:green; display:inline-block;'></span>&nbsp;Yes</div>":"<div  onclick='(new eXcell_acheck(this.parentNode)).changeState(); (arguments[0]||event).cancelBubble=true;' style='cursor:pointer;  text-align:center; '><span style='height:8px; width:8px; background:red; display:inline-block;'></span>&nbsp;No</div>"}}function eXcell_context(t){if(t){if(this.cell=t,this.grid=this.cell.parentNode.grid,!this.grid._sub_context)return;if(this._sub=this.grid._sub_context[t._cellIndex],!this._sub)return;this._sindex=this._sub[1],this._sub=this._sub[0]}this.getValue=function(){return _isIE?this.cell.innerText:this.cell.textContent},this.setValue=function(t){this.cell._val=t;var e=this._sub.itemPull[this._sub.idPrefix+this.cell._val];t=e?e.title:t,this.setCValue(t||"&nbsp;",t)},this.edit=function(){var t=this.grid.getPosition(this.cell);this._sub.showContextMenu(t[0]+this.cell.offsetWidth,t[1]);var e=this.grid.editStop;this.grid.editStop=function(){},this.grid.editStop=e},this.detach=function(){if(null!=this.grid._sub_id){var t=this.cell._val;return this.setValue(this.grid._sub_id),this.grid._sub_id=null,this.cell._val!=t}this._sub.hideContextMenu()}}function dhtmlXGridFromTable(obj,init){"object"!=typeof obj&&(obj=document.getElementById(obj));var w=document.createElement("DIV");w.setAttribute("width",obj.getAttribute("gridWidth")||(obj.offsetWidth?obj.offsetWidth+"px":0)||(window.getComputedStyle?window.getComputedStyle(obj,null).width:obj.currentStyle?obj.currentStyle.width:0)),w.setAttribute("height",obj.getAttribute("gridHeight")||(obj.offsetHeight?obj.offsetHeight+"px":0)||(window.getComputedStyle?window.getComputedStyle(obj,null).height:obj.currentStyle?obj.currentStyle.height:0)),w.className=obj.className,obj.className="",obj.id&&(w.id=obj.id);var mr=obj,drag=obj.getAttribute("dragAndDrop");mr.parentNode.insertBefore(w,mr);var f=mr.getAttribute("name")||"name_"+(new Date).valueOf(),windowf=new dhtmlXGridObject(w);window[f]=windowf;var acs=mr.getAttribute("onbeforeinit"),acs2=mr.getAttribute("oninit");acs&&eval(acs),windowf.setImagePath(windowf.imgURL||mr.getAttribute("imgpath")||mr.getAttribute("image_path")||"");var skin=mr.getAttribute("skin");skin&&windowf.setSkin(skin),init&&init(windowf);for(var hrow=mr.rows[0],za="",zb="",zc="",zd="",ze="",i=0;i<hrow.cells.length;i++){za+=(za?",":"")+hrow.cells[i].innerHTML;var width=hrow.cells[i].getAttribute("width")||hrow.cells[i].offsetWidth||(window.getComputedStyle?window.getComputedStyle(hrow.cells[i],null).width:hrow.cells[i].currentStyle?hrow.cells[i].currentStyle.width:0);zb+=(zb?",":"")+("*"==width?width:parseInt(width)),zc+=(zc?",":"")+(hrow.cells[i].getAttribute("align")||"left"),zd+=(zd?",":"")+(hrow.cells[i].getAttribute("type")||"ed"),ze+=(ze?",":"")+(hrow.cells[i].getAttribute("sort")||"str");var f_a=hrow.cells[i].getAttribute("format");f_a&&(-1!=hrow.cells[i].getAttribute("type").toLowerCase().indexOf("calendar")?windowf._dtmask=f_a:windowf.setNumberFormat(f_a,i))}windowf.setHeader(za),windowf.setInitWidths(zb),windowf.setColAlign(zc),windowf.setColTypes(zd),windowf.setColSorting(ze),"auto"==obj.getAttribute("gridHeight")&&windowf.enableAutoHeigth(!0),obj.getAttribute("multiline")&&windowf.enableMultiline(!0);var lmn=mr.getAttribute("lightnavigation");lmn&&windowf.enableLightMouseNavigation(lmn);var evr=mr.getAttribute("evenrow"),uevr=mr.getAttribute("unevenrow");return(evr||uevr)&&windowf.enableAlterCss(evr,uevr),drag&&windowf.enableDragAndDrop(!0),windowf.init(),obj.getAttribute("split")&&windowf.splitAt(obj.getAttribute("split")),windowf._process_inner_html(mr,1),acs2&&eval(acs2),obj.parentNode&&obj.parentNode.removeChild&&obj.parentNode.removeChild(obj),windowf}function eXcell_math(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){this.grid.editor=new eXcell_ed(this.cell),this.grid.editor.fix_self=!0,this.grid.editor.getValue=this.cell.original?function(){return this.cell.original}:this.getValue,this.grid.editor.setValue=this.setValue,this.grid.editor.edit()},this.isDisabled=function(){return!this.grid._mathEdit},this.setValue=function(t){t=this.grid._compileSCL(t,this.cell,this.fix_self),this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).setValue(t):(this.setCValue(t),this.cell._clearCell=!1)},this.getValue=function(){return this.grid._strangeParams[this.cell._cellIndex]?this.grid.cells5(this.cell,this.grid._strangeParams[this.cell._cellIndex]).getValue():this.cell.innerHTML}}function eXcell_time(t){this.base=eXcell_ed,this.base(t),this.getValue=function(){return this.cell.innerHTML.toString()},this.setValue=function(t){var e=new RegExp(" ","i");if(t=t.replace(e,":"),""==t)t="00:00";else{var e=new RegExp("[a-zA-Z]","i"),i=t.match(e);if(i)t="00:00";else{var e=new RegExp("[0-9]+[\\.\\/;\\-,_\\]\\[\\?\\: ][0-9]+","i"),i=t.search(e);if(-1!=i){var e=new RegExp("[\\./\\;\\-\\,\\_\\]\\[ \\?]","i");t=t.replace(e,":")}else{var e=new RegExp("[^0-9]","i");if(res1=t.search(e),i=t.match(e))t="00:00";else if(1==t.length)t="00:0"+t;else if(parseInt(t)<60)t="00:"+t;else if(t.length<5){var s=parseInt(t),n=Math.floor(s/60);s-=60*n;for(var n=n.toString(),s=s.toString();n.length<2;)n="0"+n;for(;s.length<2;)s="0"+s;t=n+":"+s}}}}this.cell.innerHTML=t}}function eXcell_sub_row(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.getValue=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")},this._setState=function(t,e){(e||this.cell).innerHTML="<img src='"+this.grid.imgURL+t+"' width='18' height='18' />",(e||this.cell).firstChild.onclick=this.grid._expandMonolite},this.open=function(){this.cell.firstChild.onclick(null,!0)},this.close=function(){this.cell.firstChild.onclick(null,!1,!0)},this.isOpen=function(){return!!this.cell.parentNode._expanded},this.setValue=function(t){t&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",t),this._setState(t?"plus.gif":"blank.gif")},this.setContent=function(t){this.cell.parentNode._expanded?(this.cell.parentNode._expanded.innerHTML=t,this.resize()):(this.cell._previous_content=null,this.setValue(t),this.cell._sub_row_type=null)},this.resize=function(){this.grid._detectHeight(this.cell.parentNode._expanded,this.cell,this.cell.parentNode._expanded.scrollHeight)},this.isDisabled=function(){return!0},this.getTitle=function(){return this.grid.getUserData(this.cell.parentNode.idd,"__sub_row")?"click to expand|collapse":""}}function eXcell_sub_row_ajax(t){this.base=eXcell_sub_row,this.base(t),this.setValue=function(t){t&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",t),this.cell._sub_row_type="ajax",this.cell._previous_content=null,this._setState(t?"plus.gif":"blank.gif")}}function eXcell_sub_row_grid(t){this.base=eXcell_sub_row,this.base(t),this.setValue=function(t){t&&this.grid.setUserData(this.cell.parentNode.idd,"__sub_row",t),this.cell._sub_row_type="grid",this._setState(t?"plus.gif":"blank.gif")},this.getSubGrid=function(){return t._sub_grid?t._sub_grid:null}}function eXcell_ra_str(t){t&&(this.base=eXcell_ra,this.base(t),this.grid=t.parentNode.grid)}function eXcell_combo(t){t&&(this.cell=t,this.grid=t.parentNode.grid,this._combo_pre="",this.edit=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.grid.imgURL),this.val=this.getValue();var t=this.getText();this.cell._clearCell&&(t=""),this.cell.innerHTML="",this.combo=this.cell._brval?this.cell._brval:(this.grid._realfake?this.grid._fake:this.grid)._col_combos[this.cell._cellIndex],this.cell.appendChild(this.combo.DOMParent),this.combo.DOMParent.style.margin="0",this.combo.DOMelem_input.focus(),this.combo.setSize(this.cell.offsetWidth-2),this.combo._xml?this.combo.setComboText(t):-1!=this.combo.getIndexByValue(this.cell.combo_value)?this.combo.selectOption(this.combo.getIndexByValue(this.cell.combo_value)):this.combo.getOptionByLabel(t)?this.combo.selectOption(this.combo.getIndexByValue(this.combo.getOptionByLabel(t).value)):this.combo.setComboText(t),this.combo.openSelect()},this.selectComboOption=function(t,e){e.selectOption(e.getIndexByValue(e.getOptionByLabel(t).value))},this.getValue=function(){return this.cell.combo_value||""},this.getText=function(){var t=this.cell;return""==this._combo_pre&&t.childNodes[1]?t=t.childNodes[1]:t.childNodes[0].childNodes[1],_isIE?t.innerText:t.textContent},this.setValue=function(t){if("object"==typeof t){this.cell._brval=this.initCombo();var e=this.cell._cellIndex,i=this.cell.parentNode.idd;t.firstChild?this.cell.combo_value=t.firstChild.data:(this.cell.combo_value="&nbsp;",this.cell._clearCell=!0),this.setComboOptions(this.cell._brval,t,this.grid,e,i)}else{this.cell.combo_value=t;var s=null;(s=this.cell._brval)&&"object"==typeof this.cell._brval?t=(s.getOption(t)||{}).text||t:(s=this.grid._col_combos[this.cell._cellIndex]||this.grid._fake&&(s=this.grid._fake._col_combos[this.cell._cellIndex]))&&(t=(s.getOption(t)||{}).text||t),""==(t||"").toString()._dhx_trim()&&(t=null),null!==t?this.setComboCValue(t):(this.setComboCValue("&nbsp;",""),this.cell._clearCell=!0)}},this.detach=function(){this.cell.removeChild(this.combo.DOMParent);var t=this.cell.combo_value;return this.combo.getComboText()&&""!=this.combo.getComboText().toString()._dhx_trim()?(this.setComboCValue(this.combo.getComboText().replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),this.combo.getActualValue()),this.cell._clearCell=!1):(this.setComboCValue("&nbsp;"),this.cell._clearCell=!0),this.combo._confirmSelect(),this.cell.combo_value=this.combo.getActualValue(),this.combo.closeAll(),this.grid._still_active=!0,this.grid.setActive(1),t!=this.cell.combo_value})}function eXcell_clist(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(e){}this.edit=function(){this.val=this.getValue();var t=this.cell._combo||this.grid.clists[this.cell._cellIndex];if(t){this.obj=document.createElement("DIV");for(var e=this.val.split(","),i="",s=0;s<t.length;s++){for(var n=!1,o=0;o<e.length;o++)t[s]==e[o]&&(n=!0);i+=n?"<div><input type='checkbox' id='dhx_clist_"+s+"' checked='true' /><label for='dhx_clist_"+s+"'>"+t[s]+"</label></div>":"<div><input type='checkbox' id='dhx_clist_"+s+"'/><label for='dhx_clist_"+s+"'>"+t[s]+"</label></div>"}i+="<div><input type='button' value='"+(this.grid.applyButtonText||"Apply")+"' style='width:100px; font-size:8pt;' onclick='this.parentNode.parentNode.editor.grid.editStop();'/></div>",this.obj.editor=this,this.obj.innerHTML=i,document.body.appendChild(this.obj),this.obj.style.position="absolute",this.obj.className="dhx_clist",this.obj.onclick=function(t){return(t||event).cancelBubble=!0,!0};var l=this.grid.getPosition(this.cell);this.obj.style.left=l[0]+"px",this.obj.style.top=l[1]+this.cell.offsetHeight+"px",this.obj.getValue=function(){for(var t="",e=0;e<this.childNodes.length-1;e++)this.childNodes[e].childNodes[0].checked&&(t&&(t+=","),t+=this.childNodes[e].childNodes[1].innerHTML);return t.replace(/&amp;/g,"&")}}},this.getValue=function(){return this.cell._clearCell?"":this.cell.innerHTML.toString()._dhx_trim().replace(/&amp;/g,"&")},this.detach=function(){return this.obj&&(this.setValue(this.obj.getValue()),this.obj.editor=null,this.obj.parentNode.removeChild(this.obj),this.obj=null),this.val!=this.getValue()}}function eXcell_calck(t){try{this.cell=t,this.grid=this.cell.parentNode.grid}catch(e){}this.edit=function(){this.val=this.getValue();var t=this.grid.getPosition(this.cell);this.obj=new calcX(t[0],t[1]+this.cell.offsetHeight,this,this.val)},this.getValue=function(){return this.grid._aplNFb(this.cell.innerHTML.toString()._dhx_trim(),this.cell._cellIndex)},this.detach=function(){return this.obj&&(this.setValue(this.obj.inputZone.value),this.obj.removeSelf()),this.obj=null,this.val!=this.getValue()}}function calcX(left,top,onReturnSub,val){if(this.top=top||0,this.left=left||0,this.onReturnSub=onReturnSub||null,this.operandA=0,this.operandB=0,this.operatorA="",this.state=0,this.dotState=0,this.calckGo=function(){return eval(this.operandA+"*1"+this.operatorA+this.operandB+"*1")},this.isNumeric=function(t){return-1==t.search(/[^1234567890]/gi)?!0:!1},this.isOperation=function(t){return-1==t.search(/[^\+\*\-\/]/gi)?!0:!1},this.onCalcKey=function(t){that=this.calk;var e=this.innerHTML,i=that.inputZone;0!=that.state&&2!=that.state||!that.isNumeric(e)||("0"!=i.value?i.value+=e:i.value=e),0!=that.state&&2!=that.state||"."!=e||0!=that.dotState||(that.dotState=1,i.value+=e),"C"==e&&(i.value=0,that.dotState=0,that.state=0),0==that.state&&that.isOperation(e)&&(that.operatorA=e,that.operandA=i.value,that.state=1),2==that.state&&that.isOperation(e)&&(that.operandB=i.value,i.value=that.calckGo(),that.operatorA=e,that.operandA=i.value,that.state=1),2==that.state&&"="==e&&(that.operandB=i.value,i.value=that.calckGo(),that.operatorA=e,that.operandA=i.value,that.state=3),1==that.state&&that.isNumeric(e)&&(i.value=e,that.state=2,that.dotState=0),3==that.state&&that.isNumeric(e)&&(i.value=e,that.state=0),3==that.state&&that.isOperation(e)&&(that.operatorA=e,that.operandA=i.value,that.state=1),"e"==e&&(i.value=Math.E,1==that.state&&(that.state=2),that.dotState=0),"p"==e&&(i.value=Math.PI,1==that.state&&(that.state=2),that.dotState=0),"Off"==e&&that.topNod.parentNode.removeChild(that.topNod),(t||event)&&((t||event).cancelBubble=!0)},this.sendResult=function(){if(that=this.calk,2==that.state){var t=that.inputZone;that.operandB=t.value,t.value=that.calckGo(),that.operatorA=e,that.operandA=t.value,that.state=3}var e=that.inputZone.value;that.topNod.parentNode.removeChild(that.topNod),that.onReturnSub.grid.editStop(!1)},this.removeSelf=function(){this.topNod.parentNode&&this.topNod.parentNode.removeChild(this.topNod)},this.keyDown=function(){this.className="calcPressed"},this.keyUp=function(){this.className="calcButton"},this.init_table=function(){var t=this.topNod.childNodes[0];if(t&&"TABLE"==t.tagName){for(i=1;i<t.childNodes[0].childNodes.length;i++)for(j=0;j<t.childNodes[0].childNodes[i].childNodes.length;j++)t.childNodes[0].childNodes[i].childNodes[j].onclick=this.onCalcKey,t.childNodes[0].childNodes[i].childNodes[j].onmousedown=this.keyDown,t.childNodes[0].childNodes[i].childNodes[j].onmouseout=this.keyUp,t.childNodes[0].childNodes[i].childNodes[j].onmouseup=this.keyUp,t.childNodes[0].childNodes[i].childNodes[j].calk=this;this.inputZone=this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0],this.onReturnSub?(this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].onclick=this.sendResult,this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].calk=this):this.topNod.childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[0].childNodes[1].innerHTML=""}},this.drawSelf=function(){var t=document.createElement("div");t.className="calcTable",t.style.position="absolute",t.style.top=this.top+"px",t.style.left=this.left+"px",t.innerHTML="<table cellspacing='0' id='calc_01' class='calcTable'><tr><td colspan='4'><table cellpadding='1' cellspacing='0' width='100%'><tr><td width='100%' style='overflow:hidden;'><input style='width:100%' class='calcInput' value='0' align='right' readonly='true' style='text-align:right'></td><td class='calkSubmit'>=</td></tr></table></td></tr><tr><td class='calcButton' width='25%'>Off</td><td class='calcButton' width='25%'>p</td><td class='calcButton' width='25%'>e</td><td class='calcButton' width='25%'>/</td></tr><tr><td class='calcButton'>7</td><td class='calcButton'>8</td><td class='calcButton'>9</td><td class='calcButton'>*</td></tr><tr><td class='calcButton'>4</td><td class='calcButton'>5</td><td class='calcButton'>6</td><td class='calcButton'>+</td></tr><tr><td class='calcButton'>1</td><td class='calcButton'>2</td><td class='calcButton'>3</td><td class='calcButton'>-</td></tr><tr><td class='calcButton'>0</td><td class='calcButton'>.</td><td class='calcButton'>C</td><td class='calcButton'>=</td></tr></table>",t.onclick=function(t){(t||event).cancelBubble=!0},document.body.appendChild(t),this.topNod=t},this.drawSelf(),this.init_table(),val){var rZone=this.inputZone;rZone.value=1*val,this.operandA=1*val,this.state=3}return this}function dhtmlxHierarchy(){var t={id:0,childs:[],level:-1,parent:null,index:0,state:dhtmlXGridObject._emptyLineImg};return this.order=[t],this.get={0:t},this.swap=function(t,e){var i=t.parent,s=t.index;i.childs[s]=e,i.childs[e.index]=t,t.index=e.index,e.index=s},this.forEachChildF=function(t,e,i,s){for(var n=this.get[t],o=0;o<n.childs.length;o++)e.apply(i||this,[n.childs[o]])&&(n.childs[o].childs.length&&this.forEachChildF(n.childs[o].id,e,i,s),s&&s.call(i||this,n.childs[o]))},this.forEachChild=function(t,e,i){for(var s=this.get[t],n=0;n<s.childs.length;n++)e.apply(i||this,[s.childs[n]]),s.childs[n].childs.length&&this.forEachChild(s.childs[n].id,e,i)},this.change=function(t,e,i){var s=this.get[t];s[e]!=i&&(s[e]=i,s.update=!0)},this.add=function(t,e){return this.addAfter(t,e)},this.addAfter=function(t,e,i,s){var n=this.get[e||0];if(i)var o=this.get[i].index+(s?0:1);else var o=n.childs.length;var l={id:t,childs:[],level:n.level+1,parent:n,index:o,state:dhtmlXGridObject._emptyLineImg};if(n.state==dhtmlXGridObject._emptyLineImg&&this.change(e,"state",0==e?"minus":"plus"),i){for(var r=o;r<n.childs.length;r++)n.childs[r].index++;n.childs=n.childs.slice(0,o).concat([l]).concat(n.childs.slice(o,n.childs.length))}else n.childs.push(l);return this.get[t]=l,l},this.addBefore=function(t,e,i){return this.addAfter(t,e,i,!0)},this.remove=function(t){for(var e=this.get[t||0],i=0;i<e.childs.length;i++)this.deleteAll(e.childs[i].id);e.childs=[],e.parent.childs=e.parent.childs.slice(0,e.index).concat(e.parent.childs.slice(e.index+1));for(var i=e.index;i<e.parent.childs.length;i++)e.parent.childs[i].index--;delete this.get[t]},this.deleteAll=function(t){for(var e=this.get[t||0],i=0;i<e.childs.length;i++)this.deleteAll(e.childs[i].id);e.childs=[],delete this.get[t]},this}function eXcell_tree(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.isDisabled=function(){return this.cell._disabled||this.grid._edtc},this.edit=function(){this.er||this.grid._edtc||(this.er=this.cell.parentNode.valTag,this.val=this.getLabel(),this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.er.innerHTML="<"+this.cell.atag+" class='dhx_combo_edit' type='text' style='height:"+(this.cell.offsetHeight-4)+"px;line-height:"+(this.cell.offsetHeight-6)+"px; width:100%; border:0px; margin:0px; padding:0px; overflow:hidden;'></"+this.cell.atag+">",this.er.childNodes[0].onmousedown=function(t){(t||event).cancelBubble=!0},this.er.childNodes[0].onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0},this.er.className+=" editable",this.er.firstChild.onclick=function(t){(t||event).cancelBubble=!0},this.er.firstChild.value=this.val,this.obj=this.er.firstChild,this.er.firstChild.style.width=Math.max(0,this.cell.offsetWidth-this.er.offsetLeft-2)+"px",this.er.firstChild.focus(),_isIE&&this.er.firstChild.focus())},this.detach=function(){if(this.er){this.setLabel(this.er.firstChild.value),this.er.className=this.er.className.replace("editable","");var t=this.val!=this.er.innerHTML;return this.obj=this.er=null,t}},this.getValue=function(){return this.getLabel()},this.setImage=function(t){this.cell.parentNode.imgTag.nextSibling.src=this.grid.iconURL+t,this.grid._h2.get[this.cell.parentNode.idd].image=t},this.getImage=function(){return this.grid._h2.get[this.cell.parentNode.idd].image},this.setLabel=function(t){this.setValueA(t)},this.getLabel=function(){return this.cell.parentNode.valTag.innerHTML}}function dhtmlXForm(t,e,i){this.idef={position:"label-left",labelWidth:"auto",labelHeight:"auto",inputWidth:"auto",inputHeight:"auto",labelAlign:"left",noteWidth:"auto",offsetTop:0,offsetLeft:0,blockOffset:20},this.idef_const={offsetNested:20},this.apos_css={"label-left":"dhxform_item_label_left","label-right":"dhxform_item_label_right","label-top":"dhxform_item_label_top","label-bottom":"dhxform_item_label_bottom",absolute:"dhxform_item_absolute"},this.align_css={left:"dhxform_label_align_left",center:"dhxform_label_align_center",right:"dhxform_label_align_right"};var s=this;this.setSkin=function(t){this.skin=t,this.cont.className="dhxform_obj_"+this.skin,this.cont.style.fontSize="dhx_terrace"==t?"13px":"12px",this._updateBlocks(),this.forEachItem(function(e){var i=s.getItemType(e);"undefined"!=typeof s.items[i]&&"function"==typeof s.items[i].setSkin&&s.doWithItem(e,"setSkin",t)})},this.skin=i||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhx_form")||"dhx_skyblue",this.separator=",",this.live_validate=!1,this._type="checkbox",this._rGroup="default",this._idIndex={},this._indexId=[],this.cont="object"==typeof t?t:document.getElementById(t),t._isNestedForm||(this._parentForm=!0,this.cont.style.fontSize="dhx_terrace"==this.skin?"13px":"12px",this.cont.className="dhxform_obj_"+this.skin,this.setFontSize=function(t){this.cont.style.fontSize=t,this._updateBlocks()},this.getForm=function(){return this},this.cont.onkeypress=function(t){if(t=t||event,13==t.keyCode){var e=t.target||t.srcElement;if("undefined"!=typeof e.tagName&&"textarea"==String(e.tagName).toLowerCase()&&!t.ctrlKey)return;s.callEvent("onEnter",[])}}),this.b_index=null,this.base=[],this._prepare=function(t,e){null==this.b_index?this.b_index=0:this.b_index++;var i=null,s=null;if(null!=e){0>e&&(e=0);for(var n=0,o=0;o<this.cont.childNodes.length;o++)for(var l=0;l<this.cont.childNodes[o].childNodes.length;l++)null==s&&1!=this.cont.childNodes[o].childNodes[l]._isNestedForm&&(n==e&&(i=this.cont.childNodes[o].nextSibling,s=this.cont.childNodes[o].childNodes[l]),n++)}if(this.base[this.b_index]=document.createElement("DIV"),this.base[this.b_index].className="dhxform_base","undefined"!=typeof t&&(this.base[this.b_index].style.cssText+=" margin-left:"+t+"px!important;"),null!=i?(this.cont.insertBefore(this.base[this.b_index],i),i=null):this.cont.appendChild(this.base[this.b_index]),null!=s)for(;null!=s;){var r=s;s=s.nextSibling,this.base[this.b_index].appendChild(r),r=null}},this.setSizes=function(){},this._mergeSettings=function(t){var e=-1,i={type:"settings"};for(var s in this.idef)i[s]=this.idef[s];for(var n=0;n<t.length;n++)if("undefined"!=typeof t[n]&&"settings"==t[n].type){for(var s in t[n])i[s]=t[n][s];e=n}return t[e>=0?e:t.length]=i,t},this._genStr=function(t){for(var e="",i="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",s=0;t>s;s++)e+=i.charAt(Math.floor(Math.random()*i.length));return e},this.idPrefix="dhxForm_"+this._genStr(12)+"_",this._rId=this._parentForm?this._genStr(12)+"_":t._rId,this.objPull={},this.itemPull={},this._ic=0,this._addItem=function(t,e,i,n,o,l,r){if(this.items[t]._index&&(this.getForm()._indexId.push(e),this.getForm()._idIndex[e]={ind:this.getForm()._indexId.length-1}),t||(t=this._type),"list"==t&&null!=o&&null!=this.itemPull[this.idPrefix+o]&&"function"==typeof this.itemPull[this.idPrefix+o]._addSubListNode)var a=this.itemPull[this.idPrefix+o]._addSubListNode();else if("newcolumn"==t)var a={};else{var h=this.base[this.b_index],d=null;if("undefined"==typeof l||isNaN(l)||"list"==t){if("list"==t)for(var c in this.itemPull)c==this.idPrefix+e&&(d=this.itemPull[c].nextSibling,null!=this.itemPull[c]._listBase&&this.itemPull[c]._listBase.length>0&&(d=this.itemPull[c]._listBase[this.itemPull[c]._listBase.length-1]))}else{l=Math.max(parseInt(l),0)+1;for(var u=0;u<this.cont.childNodes.length;u++)for(var _=0;_<this.cont.childNodes[u].childNodes.length;_++)null==d&&1!=this.cont.childNodes[u].childNodes[_]._isNestedForm&&(l--,0==l&&(d=this.cont.childNodes[u].childNodes[_],h=this.cont.childNodes[u]))}var a=document.createElement("DIV");1==r&&null!=d&&(d=d.nextSibling),null!=d?h.insertBefore(a,d):h.appendChild(a)}if(a._idd=e,a._rId=this._rId,"undefined"!=typeof a.style){"undefined"==typeof i.offsetLeft&&this.idef.offsetLeft>0&&(i.offsetLeft=this.idef.offsetLeft),"undefined"==typeof i.offsetTop&&this.idef.offsetTop>0&&(i.offsetTop=this.idef.offsetTop);var f="";"undefined"!=typeof i.offsetLeft&&(f+=" padding-left:"+i.offsetLeft+"px!important;"),"undefined"!=typeof i.offsetTop&&(f+=" padding-top:"+i.offsetTop+"px!important;"),a.style.cssText+=f}if("block"==t&&isNaN(i.blockOffset)&&(i.blockOffset=this.idef.blockOffset),"list"==t){"undefined"==typeof a._ofsNested&&(a._ofsNested=this.idef_const.offsetNested),null!=n&&(a._sId=n);var p=this.items[t].render(a,this.skin);return this.itemPull[this.idPrefix+e]._listObj||(this.itemPull[this.idPrefix+e]._listObj=[]),this.itemPull[this.idPrefix+e]._list||(this.itemPull[this.idPrefix+e]._list=[]),this.itemPull[this.idPrefix+e]._listBase||(this.itemPull[this.idPrefix+e]._listBase=[]),this.itemPull[this.idPrefix+e]._listObj.push(p[0]),this.itemPull[this.idPrefix+e]._list.push(p[1]),this.itemPull[this.idPrefix+e]._listBase.push(a),p[1].checkEvent=function(t){return s.checkEvent(t)},p[1].callEvent=function(t,e){return s.callEvent(t,e)},p[1].getForm=function(){return s.getForm()},p[1]._initObj(this._mergeSettings(i)),a._inBlcok&&(a.className+=" in_block"),p[1]}if("newcolumn"==t)return void this._prepare(i.offset,l);if("label"==t&&0==this._ic++&&(i._isTopmost=!0),i.position=this.apos_css[i.position&&this.apos_css[i.position]?i.position:this.idef.position],a.className=i.position+("string"==typeof i.className?" "+i.className:""),i.labelWidth||(i.labelWidth=this.idef.labelWidth),i.labelHeight||(i.labelHeight=this.idef.labelHeight),"undefined"!=typeof i.wrap&&(i.wrap=window.dhx4.s2b(i.wrap)),i.labelAlign=this.align_css[i.labelAlign]?this.align_css[i.labelAlign]:this.align_css[this.idef.labelAlign],i.inputWidth=i.width?i.width:i.inputWidth?i.inputWidth:this.idef.inputWidth,i.inputHeight||(i.inputHeight=this.idef.inputHeight),"undefined"!=typeof i.note&&(null!=i.note.length&&null!=i.note[0]&&(i.note=i.note[0]),"undefined"==typeof i.note.width&&(i.note.width=this.idef.noteWidth),"auto"==i.note.width&&(i.note.width=i.inputWidth)),a.checkEvent=function(t){return s.checkEvent(t)},a.callEvent=function(t,e){return s.callEvent(t,e)},a.getForm=function(){return s.getForm()},a._autoCheck=function(t){s._autoCheck(t)},"string"==typeof i.readonly&&(i.readonly=window.dhx4.s2b(i.readonly)),"string"==typeof i.autoStart&&(i.autoStart=window.dhx4.s2b(i.autoStart)),"string"==typeof i.autoRemove&&(i.autoRemove=window.dhx4.s2b(i.autoRemove)),"string"==typeof i.titleScreen&&(i.titleScreen=window.dhx4.s2b(i.titleScreen)),"string"==typeof i.info&&(i.info=window.dhx4.s2b(i.info)),"string"==typeof i.hidden&&(i.hidden=window.dhx4.s2b(i.hidden)),"string"==typeof i.checked&&(i.checked=window.dhx4.s2b(i.checked)),"undefined"!=typeof i.userdata)for(var c in i.userdata)this.getForm().setUserData(e,c,i.userdata[c]);if(i.validate&&(a._validate="function"==typeof i.validate||"function"==typeof window[i.validate]?[i.validate]:String(i.validate).split(";")),"undefined"!=typeof i.required&&("string"==typeof i.required&&(i.required=window.dhx4.s2b(i.required)),a._required=1==i.required),a._required){a._validate||(a._validate=[]);var m=!1;for(_=0;_<a._validate.length;_++)m=m||"NotEmpty"==a._validate[_];m||a._validate.push("NotEmpty")}a._ll=i.position==this.apos_css["label-left"]||i.position==this.apos_css["label-top"],this.objPull[this.idPrefix+e]=this.items[t].render(a,i),this.itemPull[this.idPrefix+e]=a},this._initObj=function(t,e){if("undefined"!=typeof t.data){var i=null;return"undefined"!=typeof e&&(i=e.match(/(\?|\&)id\=([a-z0-9_\-]*)/i),null!=i&&null!=i[0]&&(i=i[0].split("=")[1])),void(this.callEvent("onBeforeDataLoad",[i,window.dhx4._copyObj(t.data)])===!0&&(this.formId=i,this._last_load_data=t,this.setFormData(t.data),this.resetDataProcessor("updated")))}this._prepare();for(var s=0;s<t.length;s++)if("undefined"!=typeof t[s]&&"settings"==t[s].type)for(var n in t[s])this.idef[n]=t[s][n];for(var s=0;s<t.length;s++)this._prepareItem(t[s]);this._autoCheck()},this._prepareItem=function(t,e,i){var s=null!=t&&null!=t.type?t.type:"";if(this.items[s]){t.name||(t.name=this._genStr(12));var n=t.name;(null!=this.objPull[this.idPrefix+n]||"radio"==s)&&(n=this._genStr(12));var o=t;o.label=o.label||"",o.value=o.value,o.checked=window.dhx4.s2b(o.checked),o.disabled=window.dhx4.s2b(o.disabled),o.name=o.name||this._genStr(12),o.options=o.options||[],o.rows=o.rows||"none",o.uid=this._genStr(12),this._addItem(s,n,o,null,null,e,i),e=null,this._parentEnabled===!1&&this._disableItem(n);for(var l=0;l<o.options.length;l++)if(null!=o.options[l].list){o.options[l].value||(o.options[l].value=this._genStr());var r=this._addItem("list",n,o.options[l].list,o.options[l].value,null);r._subSelect=!0,r._subSelectId=o.options[l].value}if(null!=t.list){t.listParent||(t.listParent=o.name);var r=this._addItem("list",n,t.list,null,t.listParent)}}},this._xmlSubItems={item:"list",option:"options",note:"note",userdata:"_userdata"},this._xmlToObject=function(t,e){if("undefined"==typeof e&&(e=!0),e){var i=t.getElementsByTagName("items");i=null!=i&&null!=i[0]?i[0]:null;var s=t.getElementsByTagName("data");s=null!=s&&null!=s[0]?s[0]:null}else i=t;var n=e?[]:{};if(null!=i)for(var o=0;o<i.childNodes.length;o++)if("undefined"!=typeof i.childNodes[o].tagName){var l=i.childNodes[o].tagName;if(null!=this._xmlSubItems[l]){var r=this._xmlSubItems[l];"undefined"==typeof n[r]&&(n[r]=[]);for(var a={},h=0;h<i.childNodes[o].attributes.length;h++){var d=i.childNodes[o].attributes[h].name,c=i.childNodes[o].attributes[h].value;a[d]=c}"note"==r&&(a.text=i.childNodes[o].firstChild.nodeValue),"_userdata"==r&&(a.value=i.childNodes[o].firstChild.nodeValue);var u=this._xmlToObject(i.childNodes[o],!1);for(var _ in u)if("_userdata"==_){a.userdata||(a.userdata={});for(var h=0;h<u[_].length;h++)a.userdata[u[_][h].name]=u[_][h].value}else a[_]=u[_];e?n.push(a):n[r].push(a)}}if(null!=s){n={data:{}};for(var o=0;o<s.childNodes.length;o++)if("undefined"!=typeof s.childNodes[o].tagName){var f=s.childNodes[o].tagName,p=null!=s.childNodes[o].firstChild?s.childNodes[o].firstChild.nodeValue:"";n.data[f]=p}}return n},this._autoCheck=function(t){this._locked===!0?t=!1:"undefined"==typeof t&&(t=!0);for(var e in this.itemPull){var i=t&&this.itemPull[e]._udis!==!0;this[i?"_enableItem":"_disableItem"](this.itemPull[e]._idd),null!=this.getForm()._idIndex[this.itemPull[e]._idd]&&(this.getForm()._idIndex[this.itemPull[e]._idd].enabled=i);var s=i&&("boolean"==typeof this.itemPull[e]._checked?this.itemPull[e]._checked:!0);if(this.itemPull[e]._list)for(var n=0;n<this.itemPull[e]._list.length;n++){var o=!0;if(1==this.itemPull[e]._list[n]._subSelect){o=!1;var l=this.getItemValue(this.itemPull[e]._idd);("object"!=typeof l||"number"!=typeof l.length)&&(l=[l]);for(var r=0;r<l.length;r++)o=l[r]==this.itemPull[e]._list[n]._subSelectId||o;this.itemPull[e]._listObj[n][o?"show":"hide"](this.itemPull[e]._listBase[n])}this.itemPull[e]._list[n]._autoCheck(s&&o)}}},this.doWithItem=function(t,e,i,s,n,o){if("object"!=typeof t){if(this.itemPull[this.idPrefix+t])return this.objPull[this.idPrefix+t][e](this.itemPull[this.idPrefix+t],i,s,n,o);var l=null;for(var r in this.itemPull)if(this.itemPull[r]._list&&!l)for(var a=0;a<this.itemPull[r]._list.length;a++)null==l&&(l=this.itemPull[r]._list[a].doWithItem(t,e,i,s,n,o));return l}var h=t[0],d=t[1],l=null;
for(var r in this.itemPull){if((this.itemPull[r]._value==d||null===d)&&this.itemPull[r]._group==h)return this.objPull[r][e](this.itemPull[r],i,s,n,o);if(null!=this.itemPull[r]._list&&!l)for(var a=0;a<this.itemPull[r]._list.length;a++)l=this.itemPull[r]._list[a].doWithItem(t,e,i,s,n)}return null!=l?l:"getType"==e?this.doWithItem(t[0],"getType"):void 0},this._removeItem=function(t,e){null!=e?t=this.doWithItem([t,e],"destruct"):this.doWithItem(t,"destruct"),this._clearItemData(t)},this._clearItemData=function(t){if(this.itemPull[this.idPrefix+t]){t=this.idPrefix+t;try{this.objPull[t]=null,this.itemPull[t]=null,delete this.objPull[t],delete this.itemPull[t]}catch(e){}}else for(var i in this.itemPull)if(this.itemPull[i]._list)for(var s=0;s<this.itemPull[i]._list.length;s++)this.itemPull[i]._list[s]._clearItemData(t)},this.isItem=function(t,e){return null!=e&&(t=[t,e]),this.doWithItem(t,"isExist")},this.getItemType=function(t,e){return t=[t,e||null],this.doWithItem(t,"getType")},this.forEachItem=function(t){for(var e in this.objPull)if("radio"==this.objPull[e].t?t(this.itemPull[e]._group,this.itemPull[e]._value):t(String(e).replace(this.idPrefix,"")),this.itemPull[e]._list)for(var i=0;i<this.itemPull[e]._list.length;i++)this.itemPull[e]._list[i].forEachItem(t)},this.setItemLabel=function(t,e,i){null!=i?t=[t,e]:i=e,this.doWithItem(t,"setText",i)},this.getItemLabel=function(t,e){return null!=e&&(t=[t,e]),this.doWithItem(t,"getText")},this._enableItem=function(t){this.doWithItem(t,"enable")},this._disableItem=function(t){this.doWithItem(t,"disable")},this._isItemEnabled=function(t){return this.doWithItem(t,"isEnabled")},this.checkItem=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"check"),this._autoCheck()},this.uncheckItem=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"unCheck"),this._autoCheck()},this.isItemChecked=function(t,e){return null!=e&&(t=[t,e]),this.doWithItem(t,"isChecked")},this.getCheckedValue=function(t){return this.doWithItem([t,null],"getChecked")},this._getRGroup=function(t,e){for(var i in this.itemPull){if(this.itemPull[i]._group==t&&(null==e||this.itemPull[i]._value==e))return this.itemPull[i]._idd;if(null!=this.itemPull[i]._list)for(var s=0;s<this.itemPull[i]._list.length;s++){var n=this.itemPull[i]._list[s]._getRGroup(t,e);if(null!=n)return n}}return null},this.setItemValue=function(t,e){return"radio"==this.getItemType(t)?(null!=this._getRGroup(t,e)?this.checkItem(t,e):this.uncheckItem(t,this.getCheckedValue(t)),null):this.doWithItem(t,"setValue",e)},this.getItemValue=function(t,e){return"radio"==this.getItemType(t)?this.getCheckedValue(t):this.doWithItem(t,"getValue",e)},this.updateValues=function(){this._updateValues()},this.showItem=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"show")},this.hideItem=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"hide")},this.isItemHidden=function(t,e){return null!=e&&(t=[t,e]),this.doWithItem(t,"isHidden")},this.getOptions=function(t){return this.doWithItem(t,"getOptions")},this.setItemWidth=function(t,e){this.doWithItem(t,"setWidth",e)},this.getItemWidth=function(t){return this.doWithItem(t,"getWidth")},this.setItemHeight=function(t,e){this.doWithItem(t,"setHeight",e)},this.setItemFocus=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"setFocus")},this._updateValues=function(){for(var t in this.itemPull)if(this.objPull[t]&&"function"==typeof this.objPull[t].updateValue&&this.objPull[t].updateValue(this.itemPull[t]),this.itemPull[t]._list)for(var e=0;e<this.itemPull[t]._list.length;e++)this.itemPull[t]._list[e]._updateValues()},this._getItemByName=function(t){for(var e in this.itemPull){if(this.itemPull[e]._idd==t)return this.itemPull[e];if(null!=this.itemPull[e]._list)for(var i=0;i<this.itemPull[e]._list.length;i++){var s=this.itemPull[e]._list[i]._getItemByName(t);if(null!=s)return s}}return null},this._resetValidateCss=function(t){t.className=t.className.replace(t._vcss,""),t._vcss=null},this.setValidateCss=function(t,e,i){var s=this["radio"==this.getItemType(t)?"_getRGroup":"_getItemByName"](t);s&&(null!=s._vcss&&this._resetValidateCss(s),s._vcss="string"==typeof i?i:"validate_"+(e===!0?"ok":"error"),s.className+=" "+s._vcss)},this.resetValidateCss=function(){for(var t in this.itemPull)if(null!=this.itemPull[t]._vcss&&this._resetValidateCss(this.itemPull[t]),null!=this.itemPull[t]._list)for(var e=0;e<this.itemPull[t]._list.length;e++)this.itemPull[t]._list[e].resetValidateCss()},this.validate=function(){if(0!=this.callEvent("onBeforeValidate",[])){var t=!0;return this.forEachItem(function(e,i){"undefined"!=typeof i&&(e=[e,i]);var n=s.doWithItem(e,"_validate");"boolean"!=typeof n&&(n=!0),t=n&&t}),this.callEvent("onAfterValidate",[t]),t}},this.validateItem=function(t,e){return"undefined"!=typeof e&&(t=[t,e]),this.doWithItem(t,"_validate")},this.enableLiveValidation=function(t){this.live_validate=1==t},this.setReadonly=function(t,e){this.doWithItem(t,"setReadonly",e)},this.isReadonly=function(t){return this.doWithItem(t,"isReadonly")},this.getFirstActive=function(t){for(var e=0;e<this._indexId.length;e++){var i=!0;if(1==t){var s=this.getItemType(this._indexId[e]);dhtmlXForm.prototype.items[s].setFocus||(i=!1)}if(i&&this._idIndex[this._indexId[e]].enabled)return this._indexId[e]}return null},this.setFocusOnFirstActive=function(){var t=this.getFirstActive(!0);null!=t&&this.setItemFocus(t)},this.enableItem=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"userEnable"),this._autoCheck()},this.disableItem=function(t,e){null!=e&&(t=[t,e]),this.doWithItem(t,"userDisable"),this._autoCheck()},this.isItemEnabled=function(t,e){return null!=e&&(t=[t,e]),this.doWithItem(t,"isUserEnabled")},this.clear=function(){var t={};this.formId=(new Date).valueOf(),this.resetDataProcessor("inserted");for(var e in this.itemPull){var i=this.itemPull[e]._idd;if("ch"==this.itemPull[e]._type&&this.uncheckItem(i),this.itemPull[e]._type in{ta:1,editor:1,calendar:1,pw:1,hd:1}&&this.setItemValue(i,""),"combo"==this.itemPull[e]._type){this.itemPull[e]._apiChange=!0;var s=this.getCombo(i);s.selectOption(0),s=null,this.itemPull[e]._apiChange=!1}if("se"==this.itemPull[e]._type){var n=this.getOptions(i);n.length>0&&(n[0].selected=!0)}if("ra"==this.itemPull[e]._type){var o=this.itemPull[e]._group;t[o]||(this.checkItem(o,this.doWithItem(i,"_getFirstValue")),t[o]=!0)}if(this.itemPull[e]._list)for(var l=0;l<this.itemPull[e]._list.length;l++)this.itemPull[e]._list[l].clear();this["setFormData_"+this.itemPull[e]._type]&&this["setFormData_"+this.itemPull[e]._type](i,"")}t=null,this._parentForm&&this._autoCheck(),this.resetValidateCss()},this.unload=function(){window.dhx4._enableDataLoading(this,null,null,null,"clear"),window.dhx4._eventable(this,"clear");for(var t in this.objPull)this._removeItem(String(t).replace(this.idPrefix,""));this._ccTm&&window.clearTimeout(this._ccTm),this._formLS=null;for(var e=0;e<this.base.length;e++){for(;this.base[e].childNodes.length>0;)this.base[e].removeChild(this.base[e].childNodes[0]);this.base[e].parentNode&&this.base[e].parentNode.removeChild(this.base[e]),this.base[e]=null}this.base=null,this.cont.onkeypress=null,this.cont.className="",this.cont=null;for(var t in this)this[t]=null;s=null};for(var n in this.items)this.items[n].t=n,"undefined"==typeof this.items[n]._index&&(this.items[n]._index=!0),this.items[n].show||(this.items[n].show=function(t){if(t.style.display="",t._listObj)for(var e=0;e<t._listObj.length;e++)t._listObj[e].show(t._listBase[e])}),this.items[n].hide||(this.items[n].hide=function(t){if(t.style.display="none",t._listObj)for(var e=0;e<t._listObj.length;e++)t._listObj[e].hide(t._listBase[e])}),this.items[n].isHidden||(this.items[n].isHidden=function(t){return"none"==t.style.display}),this.items[n].userEnable||(this.items[n].userEnable=function(t){t._udis=!1}),this.items[n].userDisable||(this.items[n].userDisable=function(t){t._udis=!0}),this.items[n].isUserEnabled||(this.items[n].isUserEnabled=function(t){return t._udis!==!0}),this.items[n].getType||(this.items[n].getType=function(){return this.t}),this.items[n].isExist||(this.items[n].isExist=function(){return!0}),this.items[n]._validate||(this.items[n]._validate=function(t){if(!t._validate||!t._enabled)return!0;if("ch"==t._type)var e=this.isChecked(t)?this.getValue(t):0;else var e=this.getValue(t);for(var i=!0,s=0;s<t._validate.length;s++){var n="is"+t._validate[s];if(null!=e&&0!=e.length||"isNotEmpty"==n||"container"==t._type){var o=dhtmlxValidation[n];"container"==t._type&&"function"==typeof o&&(o=function(){return!0}),"function"!=typeof o&&"function"==typeof t._validate[s]&&(o=t._validate[s]),"function"!=typeof o&&"function"==typeof window[t._validate[s]]&&(o=window[t._validate[s]]),i=("function"==typeof o?o(e,t._idd):new RegExp(t._validate[s]).test(e))&&i,o=null}else;}return t.callEvent("onValidate"+(i?"Success":"Error"),[t._idd,e,i])!==!1&&t.getForm().setValidateCss(t._idd,i),i});return this._locked=!1,this._doLock=function(t){var e=t===!0?!0:!1;this._locked!=e&&(this._locked=e,this._autoCheck(!this._locked))},this.lock=function(){this._doLock(!0)},this.unlock=function(){this._doLock(!1)},this.isLocked=function(){return this._locked},this.setNumberFormat=function(t,e,i,s){return this.doWithItem(t,"setNumberFormat",e,i,s)},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObject","items",{struct:!0,data:!0}),window.dhx4._eventable(this),this.attachEvent("_onButtonClick",function(t,e){this.callEvent("onButtonClick",[t,e])}),this._updateBlocks=function(){this.forEachItem(function(t){("block"==s.getItemType(t)||"combo"==s.getItemType(t))&&s.doWithItem(t,"_setCss",s.skin,s.cont.style.fontSize)})},this._isObj=function(t){return null!=t&&"object"==typeof t&&"undefined"==typeof t.length},this._copyObj=function(t){if(this._isObj(t)){var e={};for(var i in t)e[i]="object"==typeof t[i]&&null!=t[i]?this._copyObj(t[i]):t[i]}else for(var e=[],i=0;i<t.length;i++)e[i]="object"==typeof t[i]&&null!=t[i]?this._copyObj(t[i]):t[i];return e},null!=e&&"object"==typeof e&&this._initObj(this._copyObj(e)),this._parentForm&&this._updateBlocks(),this._ccActive=!1,this._ccTm=null,this}function dhtmlXFileUploader(p,swfPath,swfUrl,mode,swfLogs,slXap,slUrl,slLogs,multiple){var that=this;if("string"==typeof mode&&"function"==typeof this[mode])this.engine=mode;else{this.engine="html4";var k=null;if("undefined"!=typeof window.FormData&&"undefined"!=typeof window.XMLHttpRequest&&(k=new XMLHttpRequest,"undefined"==typeof k.upload&&(k=null)),null!=k)this.engine="html5";else if("undefined"!=typeof window.swfobject||k===!1){var k=swfobject.getFlashPlayerVersion();k.major>=10&&(this.engine="flash")}else this._sl_v=this.getSLVersion(),this._sl_v&&(this.engine="sl");k=null}"string"==typeof p&&(p=document.getElementById(p)),this._upload_mp="undefined"!=typeof multiple?1==multiple:!0,this._upload_dnd=!0,this._swf_file_url=swfPath||"",this._swf_upolad_url=swfUrl||"",this._swf_logs=swfLogs,this._sl_xap=slXap,this._sl_upload_url=slUrl,this._sl_logs=slLogs,this.p=document.createElement("DIV"),this.p.className+=" dhx_file_uploader",p.appendChild(this.p),this.p_files=document.createElement("DIV"),this.p_files.className="dhx_upload_files",this.p.appendChild(this.p_files),this.p_controls=document.createElement("DIV"),this.p_controls.className="dhx_upload_controls",this.p.appendChild(this.p_controls),this._files={},this._items={},this._data={},this._autoStart=!1,this._autoRemove=!1,this._titleScreen=!0,this._enabled=!0,this._uploaded_count=0,this._initToolbar=function(){this.b_opts={info:{onclick:null},browse:{onclick:null,tooltip:"Browse"},upload:{onclick:function(){that._enabled&&(that._uploading||that._uploadStart())},tooltip:"Upload"},cancel:{onclick:function(){that._enabled&&(that._uploadStop(),that._switchButton(!1))},tooltip:"Stop"},clear:{onclick:function(){that._enabled&&that.clear()},tooltip:"Clear list"}},this.buttons={};for(var t in this.b_opts){var e=document.createElement("DIV");e.innerHTML="&nbsp;",e.className="dhx_file_uploader_button button_"+t,e.onclick=this.b_opts[t].onclick,this.b_opts[t].tooltip&&(e.title=this.b_opts[t].tooltip),this.p_controls.appendChild(e),this.buttons[t]=e,e=null}this.buttons.cancel.style.display="none"},this._readableSize=function(t){for(var e=!1,i=["b","Kb","Mb","Gb","Tb","Pb","Eb"],s=0;s<i.length;s++)t>1024?t/=1024:e===!1&&(e=s);return e===!1&&(e=i.length-1),Math.round(100*t)/100+" "+i[e]},this._beforeAddFileToList=function(t,e){return this.callEvent("onBeforeFileAdd",[t,e])===!0},this._addFileToList=function(t,e,i,s,n){this._checkTitleScreen();var o=document.createElement("DIV");o._idd=t,o.className="dhx_file dhx_file_"+s,o.innerHTML="<div class='dhx_file_param dhx_file_name'>&nbsp;</div><div class='dhx_file_param dhx_file_progress'>"+n+"%</div><div class='dhx_file_param dhx_file_delete' title='Remove from list'>&nbsp;</div>",this.p_files.appendChild(o),o.childNodes[0].style.width=o.offsetWidth-127+"px",this._items[t]=o,this._updateFileNameSize(t),o.childNodes[2].onclick=function(){if(that._enabled){var t=this.parentNode._idd;that._removeFileFromQueue(t)}},this.callEvent("onFileAdd",[e])},this._removeFileFromList=function(t){this._items[t]&&(this._items[t].childNodes[2].onclick=null,this._items[t].parentNode.removeChild(this._items[t]),this._items[t]=null,delete this._items[t],this._data[t]&&(this._data[t]=null,delete this._data[t]),this._checkTitleScreen())},this._updateFileNameSize=function(t){this._items[t].childNodes[0].innerHTML=this._files[t].name+(isNaN(this._files[t].size)?"&nbsp;":" ("+this._readableSize(this._files[t].size)+")"),this._items[t].childNodes[0].title=this._files[t].name+(isNaN(this._files[t].size)?"":" ("+this._readableSize(this._files[t].size)+")")},this._updateFileInList=function(t,e,i){this._items[t]&&(this._items[t].className="dhx_file dhx_file_"+e,this._updateProgress(t,e,i),this._updateFileNameSize(t))},this._updateProgress=function(t,e,i){"uploading"==e&&100>i&&"loader"==this._progress_type?(this._items[t].childNodes[1].className="dhx_file_param dhx_file_uploading",this._items[t].childNodes[1].innerHTML="&nbsp;"):(this._items[t].childNodes[1].className="dhx_file_param dhx_file_progress",this._items[t].childNodes[1].innerHTML=i+"%"),this._updateFileNameSize(t)},this._removeFilesByState=function(t){for(var e in this._files)(t===!0||this._files[e].state==t)&&this._removeFileFromQueue(e)},this._switchButton=function(t){if(1==t)this.buttons.upload.style.display="none",this.buttons.cancel.style.display="";else{var e=this._uploaded_count;this.buttons.upload.style.display="",this.buttons.cancel.style.display="none",this._uploaded_count=0,e>0&&this.callEvent("onUploadComplete",[e])}},this._uploadStart=function(){if(this._switchButton(!0),!this._uploading)for(var t in this._files)"fail"==this._files[t].state&&(this._files[t].state="added",this._updateFileInList(t,"added",0));this._uploading=!0;var e=!1;for(var t in this._files)e||"added"!=[this._files[t].state]||(e=!0,this._files[t].state="uploading",this._updateFileInList(t,"uploading",0),this._doUploadFile(t));e||(this._uploading=!1,this._switchButton(!1))},this._onUploadSuccess=function(id,serverName,r,extra){if("undefined"!=typeof r&&"flash"==this.engine){dhx4.temp=null;try{eval("dhx4.temp="+r.data)}catch(e){dhx4.temp=null}var t=dhx4.temp;if(dhx4.temp=null,null==t||1!=t.state||null==t.name)return void this._onUploadFail(id,null!=t&&null!=t.extra?t.extra:null);serverName=t.name,null!=t.extra&&(extra=t.extra)}this._uploaded_count++,this._data[id]={realName:this._files[id].name,serverName:serverName},this._files[id].state="uploaded",this._updateFileInList(id,"uploaded",100),this.callEvent("onUploadFile",[this._files[id].name,serverName,extra]),this._autoRemove&&this._removeFileFromQueue(id),this._uploading&&this._uploadStart()},this._onUploadFail=function(t,e){this._files[t].state="fail",this._updateFileInList(t,"fail",0),this.callEvent("onUploadFail",[this._files[t].name,e]),this._uploading&&this._uploadStart()},this._onUploadAbort=function(t){this._uploading=!1,this._files[t].state="added",this._updateFileInList(t,"added",0),this.callEvent("onUploadCancel",[this._files[t].name])},this._checkTitleScreen=function(){var t=0;for(var e in this._files)t++;0==t&&this.p.className.search("dhx_file_uploader_title")<0&&this._titleScreen&&(this.p.className+=" dhx_file_uploader_title",this.buttons.info.innerHTML=this._titleText,this.buttons.info.style.width=Math.max(this.p_controls.offsetWidth-134,0)+"px"),(t>0||!this._titleScreen)&&this.p.className.search("dhx_file_uploader_title")>=0&&(this.p.className=this.p.className.replace(/dhx_file_uploader_title/g,""),this.buttons.info.innerHTML="")},this.callEvent=function(){},this.upload=function(){this._uploading||this._uploadStart()},this.setAutoStart=function(t){this._autoStart=1==t},this.setAutoRemove=function(t){this._autoRemove=1==t},this.enableTitleScreen=function(t){this._titleScreen=1==t,this._checkTitleScreen()},this.setTitleText=function(t){this._titleText=t,this.p.className.search("dhx_file_uploader_title")>=0&&(this.buttons.info.innerHTML=this._titleText)},this.setURL=function(t){this._url=t},this.setSWFURL=function(t){this._swf_upolad_url=t},this.enable=function(){this._enabled=!0,this.p_files.className="dhx_upload_files",this.p_controls.className="dhx_upload_controls"},this.disable=function(){this._enabled=!1,this.p_files.className="dhx_upload_files dhx_uploader_dis",this.p_controls.className="dhx_upload_controls dhx_uploader_dis"},this.getStatus=function(){var t=0;for(var e in this._files){if("uploaded"!=this._files[e].state)return-1;t=1}return t},this.getData=function(){return this._data},this.clear=function(){this.callEvent("onBeforeClear",[])===!0&&(this._uploading&&that._uploadStop(),that._switchButton(!1),that._removeFilesByState(!0),this.callEvent("onClear",[]))},this.unload=function(){this._removeFilesByState(!0),this._data=null,this._files=null,this._items=null,this._unloadEngine();for(var t in this.buttons)this.buttons[t].onclick=null,this.buttons[t].parentNode.removeChild(this.buttons[t]),this.buttons[t]=null,delete this.buttons[t];this.buttons=null;for(var t in this.b_opts)this.b_opts[t].onclick=null,this.b_opts[t]=null,delete this.b_opts[t];this.b_opts=null,this.p_controls.parentNode.removeChild(this.p_controls),this.p_files.parentNode.removeChild(this.p_files),this.p.className=this.p.className.replace(/dhx_file_uploader_title/gi,"").replace(/dhx_file_uploader/gi,"");for(var t in this)this[t]=null;that=t=null};var e=new this[this.engine];for(var a in e)this[a]=e[a],e[a]=null;return a=e=p=null,this._initToolbar(),this._initEngine(),this._checkTitleScreen(),this}function dhtmlXAccordion(t,e){var i=this,s=window.dhx4.transDetect();this.conf={skin:e||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxacc")||"dhx_skyblue",icons_path:"",multi_mode:!1,last_opened:null,on_active_id:null,on_active_click:!1,size_changed:!0,def_height:90,total_count:0,hiden_count:0,base_w:null,fs_mode:!1,fs_tm:null,fs_base_ofs:{w:2,h:2}},this.conf.tr={prop:s.transProp,ev:s.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4",dnd_top:"top 0.16s"},this.ofs={m:{},s:{},def:{m:{left:0,right:0,first:0,between:8},s:{left:0,right:0,first:0,between:-1,last:0}},base:{s:{},m:{}},skin:{dhx_web:{s:{between:3},m:{between:3}},dhx_terrace:{m:{between:12,left:0,right:0}}}},this.conf.tr.height_open=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0?this.conf.tr.height_close:this.conf.tr.height_close;var n=null;if("object"==typeof t&&!t.tagName){n={};for(var o in t)n[o]=t[o],t[o]=null;t=n.parent,n.parent=null}if(t==document.body)document.documentElement.className+=" dhxacc_fullscreen",document.body.className+=" dhxacc_fullscreen",this.conf.fs_mode=!0,this.base=document.createElement("DIV"),this.base.className="dhxacc_base_"+this.conf.skin,this.base.style.position="absolute",this.base.style.left=this.conf.fs_base_ofs.w+"px",this.base.style.top=this.conf.fs_base_ofs.h+"px",document.body.appendChild(this.base);else for(this.base="string"==typeof t?document.getElementById(t):t,t=null,this.base.className+=" dhxacc_base_"+this.conf.skin;this.base.childNodes.length>0;)this.base.removeChild(this.base.lastChild);if(null!=this.base._ofs)for(var l in this.ofs.base)if(null!=this.base._ofs[l])for(var o in this.base._ofs[l])this.ofs.base[l][o]=this.base._ofs[l][o];return this._applyOffsets=function(){for(var t in this.ofs.def){var e=this.ofs.def[t],i=null!=this.ofs.skin[this.conf.skin]&&null!=this.ofs.skin[this.conf.skin][t]?this.ofs.skin[this.conf.skin][t]:null,s=null!=this.base._ofs?this.base._ofs[t]:null;for(var n in e)this.ofs[t][n]=null!=i&&null!=i[n]?i[n]:null!=s&&null!=s[n]?s[n]:e[n]}},this._applyOffsets(),this.t={},this.addItem=function(t,e,s,n,o){for(null==t&&(t="a"+window.dhx4.newId());null!=this.t[t];)t="a"+window.dhx4.newId();var l=new dhtmlXAccordionCell(t,this);if(l.conf.skin=this.conf.skin,l.setText(e),null!=o&&l.setIcon(o),l.cell._accId=t,l.cell.childNodes[l.conf.idx.hdr].onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},l.cell.childNodes[l.conf.idx.hdr].onclick=function(t){if(t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,null==i._dnd||1!=i._dnd.ofs){for(var e=t.target||t.srcElement,s=null;e._accId!=this&&null==s;)null!=e._accId?s=e._accId:e=e.parentNode;null!=s&&i._hdrClick(s)}},this.t[t]={cell:l},this.conf.total_count++,this.conf.multi_mode)"undefined"==typeof s&&(s=!0),this.base.appendChild(l.cell),l.conf.opened=1==s,"undefined"==typeof n||null==n||"*"==n?("*"==n&&(l.conf.h_auto=!0),n=this.conf.def_height):n=Math.max(parseInt(n),30),l._setSize(this.ofs.m.left,0,this.conf.base_w||this._getAvailItemWidth(),l.conf.opened?n:l._getHdrHeight()),l.cell.style.marginTop=(l.cell==this.base.firstChild?this.ofs.m.first:this.ofs.m.between)+"px",1!=s&&(l.conf.size.h=n,l._adjustCell(),l.cell.className+=" dhx_cell_closed"),this._adjustOpened(),null!=this._dnd&&this._dndAttachEvent(t);else{s=null==this.conf.last_opened?!0:window.dhx4.s2b(s);var r=this._updateCellsHeight();if(null!=this.conf.last_opened)if(s)this._closeItem(this.conf.last_opened,!1);else{var a=this.t[this.conf.last_opened].cell;a._setSize(a.conf.size.x,a.conf.size.y,a.conf.size.w,r),a=null}this.base.appendChild(l.cell),l.conf.opened=s,l.cell.style.marginTop=String(l.cell==this.base.firstChild?this.ofs.s.first:this.ofs.s.between)+"px",l._setSize(this.ofs.s.left,0,this.conf.base_w||this._getAvailItemWidth(),s?r:l._getHdrHeight()),s?this.conf.last_opened=t:(l.conf.size.h=r,l._adjustCell(),l.cell.className+=" dhx_cell_closed")}return l=null,this.t[t].cell},this.removeItem=function(t){this.t[t]&&(this.conf.last_opened==t&&(this.conf.last_opened=null),this.conf.on_active_id==t&&(this.conf.on_active_id=null),null!=this._dnd&&this._dndClearCell(t),this.conf.total_count--,this.conf.multi_mode||this.t[t].cell.conf.visible||this.conf.hiden_count--,this.t[t].cell._unload(),this.t[t].cell=null,this.t[t]=null,delete this.t[t],this.conf.unloading||(this.conf.multi_mode||this._updateCellsMargin(),this.setSizes()))},this.cells=function(t){return this.t[t].cell},this.enableMultiMode=function(t,e){this.conf.multi_mode=!0,isNaN(e)||(this.conf.def_height=e),"auto"==t||"scroll"==t?(this.base.style.overflowX="hidden",this.base.style.overflowY=t):this.base.style.overflow="visible"},this.forEachItem=function(t){for(var e in this.t)"function"==typeof t?t.apply(this,[this.t[e].cell]):"string"==typeof t&&"function"==typeof window[t]&&window[t].apply(this,[this.t[e].cell])},this._openItem=function(t,e){"undefined"==typeof e&&(e=!0),0==this.t[t].cell.conf.opened&&(this.conf.multi_mode?this.t[t].cell._open(e):0==this.conf.tr.prop?(null!=this.conf.last_opened&&this.t[this.conf.last_opened].cell._close(!1),this.t[t].cell._open(!1),this.conf.last_opened=t):(this.conf.on_active_id=t,this.t[t].cell._open(e),null!=this.conf.last_opened&&this.t[this.conf.last_opened].cell._close(e),this.conf.last_opened=t))},this._closeItem=function(t,e){"undefined"==typeof e&&(e=!0),1==this.t[t].cell.conf.opened&&(this.t[t].cell._close(e),this.conf.last_opened=null)},this._adjustOpened=function(){if(1==this.conf.multi_mode){if(null==this._openCache){var t=this._getDynData();for(var e in t)this.t[e].cell.conf.size.h=t[e],this.t[e].cell.cell.style.height=t[e]+"px"}else{var i=!1;for(var e in this._openCache)i=i||this._openCache[e];if(1==i)return;this._openCache=this._openId=null}var s=this._getAvailItemWidth();for(var e in this.t){var n=!0;s!=this.t[e].cell.conf.size.w||"close"!=this._openMode&&0!=this.t[e].cell.conf.opened||(n=!1),n&&this.t[e].cell._setWidth(s)}this._openMode=null}else if(null!=this.conf.last_opened){var o=this.conf.last_opened;this.t[o].cell._setSize(this.t[o].cell.conf.size.x,this.t[o].cell.conf.size.y,this.t[o].cell.conf.size.w,this.t[o].cell.conf.size.h)}},this._getDynData=function(t,e){("undefined"==typeof t||null==t)&&(t={}),("undefined"==typeof e||null==e)&&(e={});for(var i={},s=0,n=0,o=0,l=0;l<this.base.childNodes.length;l++){var r=this.base.childNodes[l]._accId,a=this.t[r].cell;if(1==a.conf.visible){var h=this.ofs.m[0==o?"first":"between"];if(1==t[r]||1==e[r]||1==a.conf.opened&&1==a.conf.h_auto)if(1==e[r]){var d=a._getHdrHeight();i[r]=d,n+=d+h}else 1==a.conf.h_auto?(i[r]=!0,n+=h,s++):1==t[r]&&(i[r]=a.conf.size.h,n+=a.conf.size.h+h);else n+=a.cell.offsetHeight+h;o++}a=null}if(s>0){var c=this.base.offsetHeight-n,n=Math.floor(c/s);for(var u in i)1==i[u]&&(s>1?c-=n:n=c,i[u]=n,s--)}return i},this._adjustBase=function(){this.conf.fs_mode&&(this.base.style.width=document.body.offsetWidth-2*this.conf.fs_base_ofs.w+"px",this.base.style.height=document.body.offsetHeight-2*this.conf.fs_base_ofs.h+"px")},this.setSizes=function(){if(this._adjustBase(),1==this.conf.multi_mode)this._adjustOpened();else{this.conf.base_w=null;var t=this._updateCellsHeight();for(var e in this.t)this.t[e].cell._setSize(this.ofs.s.left,0,this.conf.base_w||this._getAvailItemWidth(),this.t[e].cell.conf.opened?t:this.t[e].cell._getHdrHeight()),this.t[e].cell.conf.opened||(this.t[e].cell.conf.size.h=t,this.t[e].cell._adjustCell());this.conf.size_changed=!0}},this.setSkin=function(t){this.base.className=String(this.base.className).replace(new RegExp("\\s{1,}dhxacc_base_"+this.conf.skin+"\\s{0,}$")," dhxacc_base_"+t),this.conf.skin=t;for(var e in this.t)this.t[e].cell.conf.cells_cont=null,this.t[e].cell.conf.skin=this.conf.skin;this._applyOffsets(),this._updateCellsMargin(),this.setSizes()},this.setIconsPath=function(t){this.conf.icons_path=t},this._getAvailItemWidth=function(){var t=this.ofs[this.conf.multi_mode?"m":"s"],e=Math.max(this.base.clientWidth-t.left-t.right,10);return this.conf.base_w=e,t=null,e},this._updateCellsHeight=function(){if(1!=this.conf.multi_mode){var t=this.conf.total_count-this.conf.hiden_count,e=this.base.offsetHeight-this.ofs.s.last;if(0==t)return e;for(var i=!1,s=0;s<this.base.childNodes.length;s++)if(0==i){var n=this.base.childNodes[s]._accId;this.t[n].cell.conf.visible&&(e-=this.t[n].cell._getHdrHeight()*(t-1),i=!0)}e-=(t-1)*this.ofs.s.between+this.ofs.s.first;for(var o in this.t)null!=this.t[o].cell.conf.size&&(this.t[o].cell.conf.size.h=e,this.t[o].cell._adjustCell());return e}},this._updateCellsMargin=function(){for(var t=0,e=0;e<this.base.childNodes.length;e++){var i=this.base.childNodes[e]._accId;this.t[i].cell.conf.visible&&(this.t[i].cell.cell.style.marginTop=String(this.ofs[this.conf.multi_mode?"m":"s"][0==t++?"first":"between"])+"px")}},this._hdrClick=function(t){if(this.conf.multi_mode||!this.t[t].cell.conf.opened){var e=this.t[t].cell.conf.opened;this.callEvent("onBeforeActive",[t,e?!1:!0])===!0&&(this.conf.on_active_click=!0,this[e?"_closeItem":"_openItem"](t),this.conf.multi_mode&&0==this.conf.tr.prop&&this._adjustOpened())}},this.unload=function(){this.conf.unloading=!0;for(var t in this.t)this.removeItem(t);this.t=null,"function"==typeof this._unloadDND&&this._unloadDND(),this.conf.fs_mode&&(this.conf.fs_tm&&window.clearTimeout(this.conf.fs_tm),window.addEventListener?window.removeEventListener("resize",this._doOnResizeStart,!1):window.detachEvent("onresize",this._doOnResizeStart),this._doOnResizeStart=null,this._doOnResizeEnd=null,this.conf.fs_tm=null),this.dhxWins&&(this.dhxWins.unload(),this.dhxWins=null),window.dhx4._eventable(this,"clear"),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this.base.className=String(this.base.className).replace(new RegExp("\\s{1,}dhxacc_base_"+this.conf.skin+"\\s{0,}$"),""),this.base=null,this.ofs=this.conf=null;for(var t in this)this[t]=null;i=null},this.setOffset=function(t){this.ofs.s.between=t,this.ofs.m.between=t,this._updateCellsMargin(),this.setSizes()},this._initObj=function(t){if(null!=t.skin&&this.setSkin(t.skin),window.dhx4.s2b(t.multi_mode)&&this.enableMultiMode(),null!=t.icons_path&&this.setIconsPath(t.icons_path),null!=t.icon_path&&this.setIconsPath(t.icon_path),null!=t.items)for(var e=0;e<t.items.length;e++)this.addItem(t.items[e].id,t.items[e].text,t.items[e].open,t.items[e].height,t.items[e].icon||t.items[e].img);1==window.dhx4.s2b(t.dnd)&&"function"==typeof this.enableDND&&this.enableDND()},this._xmlToObj=function(t){var e={items:[]},i=t.getElementsByTagName("accordion")[0];null!=i.getAttribute("skin")&&(e.skin=i.getAttribute("skin")),"multi"==i.getAttribute("mode")&&(e.multi_mode=!0),null!=i.getAttribute("multiMode")&&(e.multi_mode=window.dhx4.s2b(i.getAttribute("multiMode"))),null!=i.getAttribute("iconsPath")&&(e.icons_path=i.getAttribute("iconsPath"));for(var s=0;s<i.childNodes.length;s++){var n=i.childNodes[s];if("undefined"!=typeof n.tagName&&"cell"==String(n.tagName).toLowerCase()){var o={};null!=n.getAttribute("id")&&(o.id=n.getAttribute("id")),null!=n.getAttribute("icon")&&(o.icon=n.getAttribute("icon")),null!=n.getAttribute("height")&&(o.height=n.getAttribute("height")),null!=n.getAttribute("open")&&(o.open=window.dhx4.s2b(n.getAttribute("open"))),o.text=n.firstChild.nodeValue,e.items.push(o)}n=null}return e},window.dhx4._enableDataLoading(this,"_initObj","_xmlToObj","accordion",{struct:!0}),window.dhx4._eventable(this),this._callMainEvent=function(t,e){return this.callEvent(t,e)},this.attachEvent("onActive",function(t){null!=this.t[t].cell.dataObj&&"editor"==this.t[t].cell.dataType&&this.t[t].cell.dataObj._prepareContent(!0),1==this.t[t].cell.conf.opened&&this.t[t].cell._adjustProgress()}),this.conf.fs_mode&&(this._adjustBase(),this.conf.fs_tm=null,this._doOnResizeStart=function(){i.conf.fs_tm&&window.clearTimeout(i.conf.fs_tm),i.conf.fs_tm=window.setTimeout(i._doOnResizeEnd,200)},this._doOnResizeEnd=function(){i.setSizes()},window.addEventListener?window.addEventListener("resize",this._doOnResizeStart,!1):window.attachEvent("onresize",this._doOnResizeStart)),"function"==typeof window.dhtmlXWindows&&(this.dhxWins=new dhtmlXWindows,this.dhxWins.setSkin(this.conf.skin)),null!=n&&(this._initObj(n),n=null),this}function dhtmlXAccordionCell(t,e){dhtmlXCellObject.apply(this,[t,"_acc"]),this.acc=e,this.conf.visible=!0,this.conf.docked=!0,this.attachEvent("_onCellUnload",function(){this._trDetachEv(),this._unloadDocking(),this.acc=null,this.cell._accObj=null,this.cell.childNodes[this.conf.idx.hdr].onselectstart=null,this.cell.childNodes[this.conf.idx.hdr].onclick=null,this._initHeader=null,this._getHdrHeight=null,this._setWidth=null,this._adjustCell=null,this._open=null,this._close=null,this._isOpened=null,this._trInitEv=null,this._trAttachEv=null,this._trDetachEv=null,this._trOnEnd=null,this._onActiveCall=null,this.setText=null,this.getText=null,this.setIcon=null,this.clearIcon=null,this.show=null,this.hide=null,this.isVisible=null,this.setHeight=null,this.moveOnTop=null}),this.attachEvent("_onContentLoaded",function(){this.acc._callMainEvent("onContentLoaded",arguments)}),this._initHeader(),this.conf.tr={};for(var i in this.acc.conf.tr)this.conf.tr[i]=this.acc.conf.tr[i];
return 0!=this.conf.tr.prop&&this.attachEvent("_onIdxUpdated",function(){this._cellSetOpacity(this.conf.opened?"open":"close",!1)}),this.open=function(){this.acc._openItem(this._idd)},this.close=function(){this.acc._closeItem(this._idd)},this._setWidth=function(t){t!=this.conf.size.w&&(this.conf.size.w=t,this.cell.style.width=t+"px"),this._adjustCell()},this._adjustCell=function(){this._adjustCont(),null!=this.dataObj&&"function"==typeof this.dataObj.setSizes&&this.dataObj.setSizes()},this._initDocking(),this}function dhtmlXLayoutObject(t,e,i){var s=null;if(null!=t&&"object"==typeof t&&"undefined"==typeof t.tagName&&1!=t._isCell&&(s={},null!=t.autosize&&(s.autosize=t.autosize),null!=t.cells&&(s.cells=t.cells),null!=t.pattern&&(e=t.pattern),null!=t.skin&&(i=t.skin),null!=t.offsets&&(s.offsets=t.offsets),t=t.parent),t==document.body)this.base=t;else if("string"==typeof t)this.base=document.getElementById(t);else{if(1==t._isCell){var n="undefined"!=typeof s&&null!=s?s:{};null==n.pattern&&null!=e&&(n.pattern=e),null==n.skin&&null!=i&&(n.skin=i);var o=t.attachLayout(n);return o}this.base=t}if(this.base!=document.body)for(;this.base.childNodes.length>0;)this.base.removeChild(this.base.lastChild);if(this.cdata={},this.conf={skin:i||window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxlayout")||"dhx_skyblue",hh:20,progress:!1,autosize:"b",nextCell:{a:"b",b:"a"},ofs:{t:0,b:0,l:0,r:0},ofs_nodes:{t:{},b:{}},inited:!1,b_size:{w:-1,h:-1}},this.conf.sw=this._detectSW(),this.base.className+=" dhxlayout_base_"+this.conf.skin,this.base==document.body){var l={dhx_skyblue:{t:2,b:2,l:2,r:2},dhx_web:{t:8,b:8,l:8,r:8},dhx_terrace:{t:9,b:9,l:8,r:8}};this.conf.ofs=null!=l[this.conf.skin]?l[this.conf.skin]:l.dhx_skyblue}null!=s&&null!=s.offsets?this.setOffsets(s.offsets):null!=this.base._ofs&&(this.setOffsets(this.base._ofs),this.base._ofs=null,delete this.base._ofs),this.dataNodes={};var r=this;this._getLayout=function(){return this},this.mainInst=null!=t._layoutMainInst?t._layoutMainInst:null,this._getMainInst=function(){return null!=this.mainInst?this.mainInst._getMainInst():this},this._init=function(t){var e="string"==typeof t?this.tplData[t]:t;this.conf.mode=e.mode,"c"==this.conf.mode?this.cdata.a=new dhtmlXLayoutCell("a",this):(this.cdata.a=new dhtmlXLayoutCell("a",this),this.cdata.b=new dhtmlXLayoutCell("b",this));for(var i in this.cdata)this.base.appendChild(this.cdata[i].cell),this.cdata[i].conf.init={w:.5,h:.5};if("c"!=this.conf.mode){var s=this._getMainInst();null==s.conf.sep_idx?s.conf.sep_idx=1:s.conf.sep_idx++,this.sep=new dhtmlXLayoutSepObject(this.conf.mode,s.conf.sep_idx),this.base.appendChild(this.sep.sep),this.sep._getLayout=function(){return r._getLayout()},s=null}if(null!=e.cells)for(var i in e.cells)null!=e.cells[i].width&&(this.cdata[i].conf.init.w=e.cells[i].width),null!=e.cells[i].height&&(this.cdata[i].conf.init.h=e.cells[i].height),null!=e.cells[i].name&&(this.cdata[i].conf.name=e.cells[i].name,this.cdata[i].setText(e.cells[i].name)),null!=e.cells[i].fsize&&(this.cdata[i].conf.fsize=e.cells[i].fsize);this.setSizes();for(var i in this.cdata)this.cdata[i].conf.init={};if(null!=e.cells)for(var i in e.cells)null!=e.cells[i].layout&&(this.cdata[i].dataNested=!0,this.cdata[i]._layoutMainInst=this,this.cdata[i].attachLayout({pattern:e.cells[i].layout}),this.cdata[i]._layoutMainInst=null)},this.setSizes=function(t,e,i,s){var n=1==this.conf.inited&&this._getMainInst()==this&&1==this.checkEvent("onResizeFinish")?{}:!1,o=this.conf.ofs.t;for(var l in this.conf.ofs_nodes.t)o+=1==this.conf.ofs_nodes.t[l]?this.dataNodes[l].offsetHeight:0;var r=this.conf.ofs.b;for(var l in this.conf.ofs_nodes.b)r+=1==this.conf.ofs_nodes.b[l]?this.dataNodes[l].offsetHeight:0;var a=this.conf.ofs.l,h=this.conf.ofs.r,d=this.base.offsetWidth,c=this.base.offsetHeight;if("c"==this.conf.mode){var u=h,_=o,f=d-a-h,p=c-o-r;return this.cdata.a._setSize(u,_,f,p,t,i,s),this.callEvent("_onSetSizes",[]),!n||this.conf.b_size.w==d&&this.conf.b_size.h==c||this._callMainEvent("onResizeFinish",[]),void(this.conf.b_size={w:d,h:c})}if("undefined"==typeof e){{"v"==this.conf.mode?"w":"h"}e=this.conf.autosize,this.cdata.a.conf.collapsed?e="b":this.cdata.b.conf.collapsed?e="a":("a"==t||"b"==t)&&(e=this.conf.nextCell[t])}if("v"==this.conf.mode){if("a"==e){if(null!=this.cdata.b.conf.init.w)var m=Math.round(d*this.cdata.b.conf.init.w-this.conf.sw/2)-h;else var m=this.cdata.b.conf.size.w;var g=d-m-h,b=o,v=c-o-r,u=a,_=b,f=g-u-this.conf.sw,p=v}else{var u=a,_=o;if(null!=this.cdata.a.conf.init.w)var f=Math.round(d*this.cdata.a.conf.init.w-this.conf.sw/2)-u;else var f=this.cdata.a.conf.size.w;var p=c-_-r,g=u+f+this.conf.sw,b=_,m=d-g-h,v=p}this.cdata.a._setSize(u,_,f,p,t,i,s),this.cdata.b._setSize(g,b,m,v,t,i,s),this.sep._setSize(u+f,_,this.conf.sw,p)}else{if("a"==e){if(null!=this.cdata.b.conf.init.h)var v=Math.round((c-o)*this.cdata.b.conf.init.h-this.conf.sw/2);else var v=this.cdata.b.conf.size.h;var g=a,b=c-r-v,m=d-g-h,u=g,_=o,f=m,p=b-_-this.conf.sw}else{var u=a,_=o,f=d-u-h;if(null!=this.cdata.a.conf.init.h)var p=Math.round((c-o)*this.cdata.a.conf.init.h-this.conf.sw/2);else var p=this.cdata.a.conf.size.h;var g=u,b=_+p+this.conf.sw,m=f,v=c-b-r}this.cdata.a._setSize(u,_,f,p,t,i,s),this.cdata.b._setSize(g,b,m,v,t,i,s),this.sep._setSize(u,_+p,f,this.conf.sw)}this.callEvent("_onSetSizes",[]),!n||this.conf.b_size.w==d&&this.conf.b_size.h==c||this._callMainEvent("onResizeFinish",[]),this.conf.b_size={w:d,h:c}},this._getAvailWidth=function(){for(var t=[],e=0;e<this.conf.as_cells.h.length;e++){var i=this.cells(this.conf.as_cells.h[e]),s=i.layout,n=s.conf.autosize;i.conf.collapsed&&(i=s.cdata[s.conf.nextCell[i._idd]],n=s.conf.nextCell[n]),t.push(Math.max(0,i.getWidth()-i._getMinWidth(n))),s=i=null}var o=t.length>0?Math.min.apply(window,t):0;return this.base.offsetWidth-o},this._getAvailHeight=function(){for(var t=[],e=0;e<this.conf.as_cells.v.length;e++){var i=this.cells(this.conf.as_cells.v[e]),s=i.layout,n=s.conf.autosize;i.conf.collapsed&&(i=s.cdata[s.conf.nextCell[i._idd]],n=s.conf.nextCell[n]),t.push(Math.max(0,i.getHeight()-i._getHdrHeight()-i._getMinHeight(n))),s=i=null}var o=Math.min.apply(window,t);return this.base.offsetHeight-o},this.setSkin=function(t){this.base.className=this.base.className.replace(new RegExp("dhxlayout_dhx_"+this.conf.skin,"gi"),"dhxlayout_dhx_"+t),this.conf.skin=t},this.unload=function(){this.conf.unloading=!0,this.mainInst=null,this.parentLayout=null,this._mtbUnload(),this.detachHeader(),this.detachFooter(),window.dhx4._eventable(this,"clear");var t=new RegExp("s{0,}dhxlayout_base_"+this.conf.skin,"gi");if(this.base.className=this.base.className.replace(t,""),null!=this.items){for(var e=0;e<this.items.length;e++)this.items[e]=null;this.items=null}1==this.conf.fs_mode&&(window.addEventListener?window.removeEventListener("resize",this._doOnResizeStart,!1):window.detachEvent("onresize",this._doOnResizeStart)),null!=this.dhxWins&&(this.dhxWins.unload(),this.dhxWins=null),null!=this.sep&&(this.sep._unload(),this.sep=null);for(var i in this.cdata)this.cdata[i]._unload();this.base=null;for(var i in this)this[i]=null;r=null},this._getWindowMinDimension=function(t){var e=r._getAvailWidth()+7+7,i=r._getAvailHeight()+7+31,s={w:Math.max(e,200),h:Math.max(i,140)};return t=null,s},this.base==document.body&&(this.conf.fs_mode=!0,this._tmTime=null,this._doOnResizeStart=function(){window.clearTimeout(r._tmTime),r._tmTime=window.setTimeout(r._doOnResizeEnd,200)},this._doOnResizeEnd=function(){r.setSizes()},window.addEventListener?window.addEventListener("resize",this._doOnResizeStart,!1):window.attachEvent("onresize",this._doOnResizeStart)),window.dhx4._eventable(this),this._callMainEvent=function(t,e){return this.callEvent(t,e)},this._init(e||"3E");var a=this._availAutoSize[e];if(null!=a&&(this.conf.pattern=e,this.setAutoSize(a.h[a.h.length-1],a.v[a.v.length-1])),"function"==typeof window.dhtmlXWindows&&(this.dhxWins=new dhtmlXWindows,this.dhxWins.setSkin(this.conf.skin)),this.conf.inited=!0,this==this._getMainInst()){var h=0;this.items=[],this.forEachItem(function(t){r.items.push(t),t.conf.index=h++})}if(this==this._getMainInst()&&null!=s&&(null!=s.autosize&&this.setAutoSize.apply(this,s.autosize),null!=s.cells))for(var d=0;d<s.cells.length;d++){var c=s.cells[d],u=this.cells(c.id);c.width&&u.setWidth(c.width),c.height&&u.setHeight(c.height),c.text&&u.setText(c.text),c.collapsed_text&&u.setCollapsedText(c.collapsed_text),c.collapse&&u.collapse(),c.fix_size&&u.fixSize(c.fix_size[0],c.fix_size[1]),"undefined"!=typeof c.header&&0==window.dhx4.s2b(c.header)&&u.hideHeader()}return s=null,this}function dhtmlXLayoutSepObject(t,e){var i=this;return this.conf={mode:t,idx:e,blocked:!1,locked:!1},this._isLayoutSep=!0,this.sep=document.createElement("DIV"),this.sep.className="dhxlayout_sep",this._btnLeft=window.dhx4.isIE&&!window.addEventListener?1:0,window.dhx4.isIE&&(this.sep.onselectstart=function(){return!1}),this.sep.className="dhxlayout_sep dhxlayout_sep_resize_"+this.conf.mode,this._setSize=function(t,e,i,s){this.sep.style.left=t+"px",this.sep.style.top=e+"px",this.sep.style.width=i+"px",this.sep.style.height=s+"px"},this._lockSep=function(t){this.conf.locked=1==t,this._blockSep()},this._blockSep=function(){var t=this._getLayout(),e=t.cdata.a.conf.collapsed||t.cdata.b.conf.collapsed||this.conf.locked;t=null,this.conf.blocked!=e&&(this.sep.className="dhxlayout_sep"+(e?"":" dhxlayout_sep_resize_"+this.conf.mode),this.conf.blocked=e)},this._beforeResize=function(t){if(!this.conf.blocked&&(null==this.conf.resize||1!=this.conf.resize.active)&&t.button===this._btnLeft){var e=this._getLayout();this.conf.resize={sx:t.clientX,sy:t.clientY,tx:t.layerX,ty:t.layerY,sep_x:parseInt(this.sep.style.left),sep_y:parseInt(this.sep.style.top),min_wa:e.cdata.a._getAvailWidth("a"),min_wb:e.cdata.b._getAvailWidth("b"),min_ha:e.cdata.a._getAvailHeight("a"),min_hb:e.cdata.b._getAvailHeight("b")},this.conf.resize.nx=this.conf.resize.sep_x,this.conf.resize.ny=this.conf.resize.sep_y,window.addEventListener?(document.body.addEventListener("mousemove",this._doOnMouseMove,!1),document.body.addEventListener("mouseup",this._doOnMouseUp,!1)):(document.body.attachEvent("onmousemove",this._doOnMouseMove),document.body.attachEvent("onmouseup",this._doOnMouseUp)),e=null}},this._onResize=function(t){if(this.conf.resize.active||(this._initResizeArea(),this.conf.resize.active=!0),"v"==this.conf.mode){var e=this.conf.resize.sx-t.clientX;this.conf.resize.nx=this.conf.resize.sep_x-e,this.conf.resize.nx>this.conf.resize.sep_x+this.conf.resize.min_wb?this.conf.resize.nx=this.conf.resize.sep_x+this.conf.resize.min_wb:this.conf.resize.nx<this.conf.resize.sep_x-this.conf.resize.min_wa&&(this.conf.resize.nx=this.conf.resize.sep_x-this.conf.resize.min_wa),this.r_sep.style.left=this.conf.resize.nx+"px"}else{var e=this.conf.resize.sy-t.clientY;this.conf.resize.ny=this.conf.resize.sep_y-e,this.conf.resize.ny>this.conf.resize.sep_y+this.conf.resize.min_hb?this.conf.resize.ny=this.conf.resize.sep_y+this.conf.resize.min_hb:this.conf.resize.ny<this.conf.resize.sep_y-this.conf.resize.min_ha&&(this.conf.resize.ny=this.conf.resize.sep_y-this.conf.resize.min_ha),this.r_sep.style.top=this.conf.resize.ny+"px"}},this._afterResize=function(t){if(window.addEventListener?(document.body.removeEventListener("mousemove",this._doOnMouseMove,!1),document.body.removeEventListener("mouseup",this._doOnMouseUp,!1)):(document.body.detachEvent("onmousemove",this._doOnMouseMove),document.body.detachEvent("onmouseup",this._doOnMouseUp)),!this.conf.resize.active)return void(this.conf.resize=null);if(t.button===this._btnLeft){var e=this._getLayout(),i=e._getMainInst(),s=1==i.checkEvent("onPanelResizeFinish")?{}:!1;s!==!1&&i.forEachItem(function(t){s[t.conf.name]={w:t.conf.size.w,h:t.conf.size.h},t=null});var n=this.conf.resize.nx-this.conf.resize.sep_x,o=this.conf.resize.ny-this.conf.resize.sep_y;if(e.cdata.a._setSize(e.cdata.a.conf.size.x,e.cdata.a.conf.size.y,e.cdata.a.conf.size.w+n,e.cdata.a.conf.size.h+o,"a"),e.cdata.b._setSize(e.cdata.b.conf.size.x+n,e.cdata.b.conf.size.y+o,e.cdata.b.conf.size.w-n,e.cdata.b.conf.size.h-o,"b"),this._setSize(parseInt(this.r_sep.style.left),parseInt(this.r_sep.style.top),parseInt(this.r_sep.style.width),parseInt(this.r_sep.style.height)),window.dhx4.isIE){var l=this;window.setTimeout(function(){l._removeResizeArea(),l=null},1)}else this._removeResizeArea();if(s!==!1){var r=[];i.forEachItem(function(t){var e=s[t.conf.name];(e.w!=t.conf.size.w||e.h!=t.conf.size.h)&&r.push(t.conf.name),t=null}),i._callMainEvent("onPanelResizeFinish",[r])}i=e=null,this.conf.resize.active=!1,this.conf.resize=null}},this._initResizeArea=function(){if(this.r_sep||(this.r_sep=document.createElement("DIV"),this.r_sep.className="dhxlayout_resize_sep",this.r_sep.style.left=this.sep.style.left,this.r_sep.style.top=this.sep.style.top,this.r_sep.style.width=this.sep.style.width,this.r_sep.style.height=this.sep.style.height,this.sep.parentNode.appendChild(this.r_sep),window.dhx4.isIE&&(this.r_sep.onselectstart=function(){return!1})),!this.r_area){if(this.r_area=document.createElement("DIV"),this.r_area.className="dhxlayout_resize_area",this.sep.parentNode.appendChild(this.r_area),window.dhx4.isIE&&(this.r_area.onselectstart=function(){return!1}),"v"==this.conf.mode)var t=parseInt(this.r_sep.style.left)-this.conf.resize.min_wa,e=parseInt(this.r_sep.style.top),i=this.conf.resize.min_wa+this.conf.resize.min_wb+parseInt(this.r_sep.style.width),s=parseInt(this.r_sep.style.height);else var t=parseInt(this.r_sep.style.left),e=parseInt(this.r_sep.style.top)-this.conf.resize.min_ha,i=parseInt(this.r_sep.style.width),s=this.conf.resize.min_ha+this.conf.resize.min_hb+parseInt(this.r_sep.style.height);this.r_area.style.left=t+"px",this.r_area.style.top=e+"px",dhtmlXLayoutObject.prototype._confGlob.reszieCover||(dhtmlXLayoutObject.prototype._confGlob.reszieCover={},this.r_area.style.width=i+"px",this.r_area.style.height=s+"px",dhtmlXLayoutObject.prototype._confGlob.reszieCover.w=parseInt(this.r_area.style.width)-this.r_area.offsetWidth,dhtmlXLayoutObject.prototype._confGlob.reszieCover.h=parseInt(this.r_area.style.height)-this.r_area.offsetHeight),this.r_area.style.width=i+dhtmlXLayoutObject.prototype._confGlob.reszieCover.w+"px",this.r_area.style.height=s+dhtmlXLayoutObject.prototype._confGlob.reszieCover.h+"px"}document.body.className+=" dhxlayout_resize_"+this.conf.mode},this._removeResizeArea=function(){this.r_sep.onselectstart=null,this.r_sep.parentNode.removeChild(this.r_sep),this.r_sep=null,this.r_area.onselectstart=null,this.r_area.parentNode.removeChild(this.r_area),this.r_area=null,document.body.className=String(document.body.className).replace(/\s{0,}dhxlayout_resize_[vh]/gi,"")},this._doOnMouseDown=function(t){t=t||event,t.preventDefault?t.preventDefault():t.cancelBubble=!0,i._beforeResize(t)},this._doOnMouseMove=function(t){t=t||event,t.preventDefault?t.preventDefault():t.cancelBubble=!0,i._onResize(t)},this._doOnMouseUp=function(t){t=t||event,i._afterResize(t)},"function"==typeof window.addEventListener?this.sep.addEventListener("mousedown",this._doOnMouseDown,!1):this.sep.attachEvent("onmousedown",this._doOnMouseDown),this._unload=function(){"function"==typeof window.addEventListener?this.sep.removeEventListener("mousedown",this._doOnMouseDown,!1):this.sep.detachEvent("onmousedown",this._doOnMouseDown),this.sep.parentNode.removeChild(this.sep),this.sep=null;for(var t in this)this[t]=null;i=null},this}function dhtmlXTabBar(t,e){var i=this;this.conf={skin:window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxtabbar")||"dhx_skyblue",fullScreen:!1,fullScreenResize:!1,lastActive:null,closeButton:!1,align:"left",tabsMode:"bottom"==e?"bottom":"top",contZone:!0,transSpeed:"0.15s",baseOfs:{w:2,h:2},tabsOfs:1,tabsTop:0,autoload:{}};var s;null!=t&&"object"==typeof t&&"undefined"==typeof t.tagName?(s=t.parent,"undefined"!=typeof t.skin&&(this.conf.skin=t.skin),"undefined"!=typeof t.mode&&(this.conf.tabsMode="bottom"==t.mode?"bottom":"top"),"undefined"!=typeof t.align&&(this.conf.align="right"==t.align?"right":"left"),"undefined"!=typeof t.close_button&&(this.conf.closeButton=window.dhx4.s2b(t.close_button)),"undefined"!=typeof t.content_zone&&(this.conf.contZone=window.dhx4.s2b(t.content_zone)),"undefined"!=typeof t.xml&&(this.conf.autoload.xml=t.xml),"undefined"!=typeof t.json&&(this.conf.autoload.xml=t.json),"undefined"!=typeof t.tabs&&(this.conf.autoload.tabs=t.tabs),"undefined"!=typeof t.onload&&(this.conf.autoload.tabs=t.tabs)):s=t,s==document.body?(document.documentElement.className+=" dhxtabbar_fullscreen",document.body.className+=" dhxtabbar_fullscreen",this.conf.fullScreen=!0,this.base=document.createElement("DIV"),this.base.className="dhxtabbar_base_"+this.conf.skin,this.base.style.position="absolute",this.base.style.left=this.conf.baseOfs.w+"px",this.base.style.top=this.conf.baseOfs.h+"px",document.body.appendChild(this.base)):(this.base="string"==typeof s?document.getElementById(s):s,s=null,this.base.className+=" dhxtabbar_base_"+this.conf.skin),null!=this.base._ofs&&null!=this.base._ofs.t&&(this.conf.tabsTop=this.base._ofs.t),this.tabsMode=document.createElement("DIV"),this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode,this.base.appendChild(this.tabsMode),this.tabsArea=document.createElement("DIV"),this.tabsArea.className="dhxtabbar_tabs dhxtabbar_tabs_"+this.conf.tabsMode,this.tabsArea.innerHTML="<div class='dhxtabbar_tabs_ar_left'><div class='dhxtabbar_arrow_img'></div></div><div class='dhxtabbar_tabs_base'><div class='dhxtabbar_tabs_cont_"+this.conf.align+"'><div class='dhxtabbar_tabs_line'></div></div></div><div class='dhxtabbar_tabs_ar_right'><div class='dhxtabbar_arrow_img'></div></div>","top"==this.conf.tabsMode&&(this.tabsArea.style.top=this.conf.tabsTop+"px"),this.tabsMode.appendChild(this.tabsArea),this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px",this.tabsArea.childNodes[0].onclick=function(){i._moveTabs("left"==i.conf.align?1:-1)},this.tabsArea.childNodes[2].onclick=function(){i._moveTabs("left"==i.conf.align?-1:1)},this._onTabsAreaClick=function(t){return this._callMainEvent("onTabClose",[t])},this.tabsArea.onclick=function(t){t=t||event;for(var e=t.target||t.srcElement;null!=e;){if("undefined"!=typeof e._tabCloseId){if(i._onTabsAreaClick(e._tabCloseId)!==!0)return;i.t[e._tabCloseId].conf.remove=!0,i._hideTab(e._tabCloseId),e=null}else"undefined"!=typeof e._tabId&&(i._doOnClick(e._tabId),e=null);null!=e&&(e=e.parentNode,e==this&&(e=null))}},this.tabsArea.onselectstart=function(t){t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1},this._doOnClick=function(t){this.callEvent("onTabClick",[t,this.conf.lastActive]),this.t[t].conf.enabled&&this._setTabActive(t)},this.t={},this.addTab=function(t,e,i,s,n,o){"boolean"!=typeof o&&(o=1==this.conf.closeButton),n=window.dhx4.s2b(n);var l=document.createElement("DIV");l.className="dhxtabbar_tab",l.innerHTML="<div class='dhxtabbar_tab_text"+(o?" dhxtabbar_tab_text_close":"")+"'>"+e+"</div>"+(o?"<div class='dhxtabbar_tab_close'></div>":""),l._tabId=t,o&&(l.childNodes[1]._tabCloseId=t);var r=this.tabsArea.childNodes[1].firstChild;null!=s&&s+1>0&&s+1<r.childNodes.length?r.insertBefore(l,r.childNodes[s+1]):r.appendChild(l);var a=!1;"undefined"==typeof i||null==i||"*"==i?(i=this._getLabelWidth(e,o),a=!0):i=parseInt(i),l.style.width=i+"px";var h=new dhtmlXTabBarCell(t,this);this.tabsMode.appendChild(h.cell),this.t[t]={tab:l,cell:h,conf:{text:e,visible:!0,active:!1,enabled:!0,close:o,width:i,autowidth:a}},r=h=null,n?this._setTabActive(t):this._adjustCell(t)},this.setSizes=function(){this.conf.fullScreen&&(this.base.style.width=document.body.offsetWidth-2*this.conf.baseOfs.w+"px",this.base.style.height=document.body.offsetHeight-2*this.conf.baseOfs.h+"px"),null==this.conf.tabsAreaOfs&&(this.tabsArea.style.width=this.base.offsetWidth+"px",this.conf.tabsAreaOfs=parseInt(this.tabsArea.style.width)-this.tabsArea.offsetWidth),this.tabsArea.style.width=this.base.offsetWidth+this.conf.tabsAreaOfs+"px",this.tabsArea.childNodes[1].style.left=this.tabsArea.childNodes[0].offsetWidth-1+"px",this.tabsArea.childNodes[1].style.width=Math.max(0,this.tabsArea.offsetWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth)+1+"px",this._adjustCell(this.conf.lastActive),this._adjustTabs()},this._adjustCell=function(t){if(this.conf.contZone&&null!=t){var e=("top"==this.conf.tabsMode?this.tabsArea.offsetHeight:0)+this.conf.tabsTop,i=this.base.offsetHeight-this.tabsArea.offsetHeight-this.conf.tabsTop,s=this.t[t].cell.dataType;"dhx_skyblue"!=this.conf.skin||"layout"!=s&&"tabbar"!=s&&"acc"!=s||("top"==this.conf.tabsMode&&(e-=1),i+=1),t!=this.conf.lastActive&&(e=-5e3,this.t[t].cell.cell.style.visibility="hidden",this.t[t].cell.cell.style.zIndex=0),this.t[t].cell._setSize(0,e,this.base.offsetWidth,i)}},this.setTabsMode=function(t){this.conf.tabsMode="bottom"==t?"bottom":"top",this.tabsMode.className="dhxtabbar_tabs_"+this.conf.tabsMode,this.setSizes()},this._tabCss=function(t){var e=this.t[t].conf.active,i=!this.t[t].conf.enabled,s=!this.t[t].conf.visible;return"dhxtabbar_tab"+(s?" dhxtabbar_tab_hidden":e||i?" dhxtabbar_tab"+(e?"_actv":"")+(i?"_dis":""):"")},this._getLabelWidth=function(t,e){this.tabsTextTest||(this.tabsTextTest=document.createElement("SPAN"),this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin),document.body.appendChild(this.tabsTextTest),this.tabsTextTest.innerHTML=t;var i=this.tabsTextTest.offsetWidth;return i+="dhx_terrace"==this.conf.skin?44:35,i+=e?"dhx_terrace"==this.conf.skin?14:9:0,document.body.removeChild(this.tabsTextTest),i},this._adjustTabs=function(){var t=this.tabsArea.childNodes[1];if(t.offsetWidth<5)return void(t=null);for(var e=parseInt(t.childNodes[0].style[this.conf.align]),i=null,s=0;s<t.childNodes[0].childNodes.length;s++){var n=t.childNodes[0].childNodes[s]._tabId;if(null!=n&&this.t[n].conf.visible){var o=this.t[n].tab.offsetWidth-this.conf.tabsOfs;this.t[n].conf.active&&(0>e||t.offsetWidth<o?i={d:1,id:n}:e+o>t.offsetWidth&&(i={d:-1,id:n})),e+=o}}null!=i?this._moveTabs(i.d,i.id):t.offsetWidth>e+1&&(t.childNodes[0].style[this.conf.align]=Math.min(0,parseInt(t.childNodes[0].style[this.conf.align])+(t.offsetWidth-e))+"px"),t=i=null},this._moveTabs=function(t,e){for(var i=this.tabsArea.childNodes[1].childNodes[0],s=0,n=[],o=null,l=0;l<i.childNodes.length;l++){var r=i.childNodes[l]._tabId;null!=r&&this.t[r].conf.visible&&(n.push({id:r,w:this.t[r].tab.offsetWidth-this.conf.tabsOfs,ind:s}),r==e&&(o=s),s++)}for(var a=parseInt(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]),h=this.tabsArea.offsetWidth-this.tabsArea.childNodes[0].offsetWidth-this.tabsArea.childNodes[2].offsetWidth,d=null,c=null,l=0;l<n.length;l++)n[l].x=a,null==d&&a>=0&&a+n[l].w>0&&(d=n[l]),h>a&&a+n[l].w<=h&&(c=n[l]),a+=n[l].w;if(null!=o)var u=n[o];else{var u=null;t>0?null==d?n.length>0&&(u=n[n.length-1]):d.ind>0&&n.length>=d.ind&&(u=n[d.ind-1]):null==c?n.length>0&&(u=n[0]):n.length>c.ind&&(u=n[c.ind+1])}null!=u&&(i.style[this.conf.align]=t>0?h>a?Math.min(0,parseInt(i.style[this.conf.align])+(h-a))+"px":parseInt(i.style[this.conf.align])-u.x+"px":parseInt(i.style[this.conf.align])-u.x+h-u.w+"px"),i=u=n=null},this._getNextVisible=function(t,e){return this._getNearVisible(t,e,"next")},this._getPrevVisible=function(t,e){return this._getNearVisible(t,e,"previous")},this._getFirstVisible=function(){return this._getNearVisible(null,!1,"first")},this._getNearVisible=function(t,e,i){if("first"==i){var s=this.tabsArea.childNodes[1].childNodes[0].childNodes[1];i="next"}else{if(null==t||null==this.t[t])return e?this._getFirstVisible():null;var s=this.t[t].tab[i+"Sibling"]}for(var n=null;null!=s&&null==n;){var o=s._tabId;null!=o&&null==n&&this.t[o].conf.visible?n=o:s=s[i+"Sibling"]}return s=null,n},this._showTab=function(t,e){!this.t[t]||this.t[t].conf.visible||this.t[t].conf.transActv||(this.conf.transProp!==!1?(this.t[t].conf.transActv=!0,this.t[t].conf.transMode="show",this.t[t].conf.transProp=this.conf.transProp,this.t[t].conf.transActvId=e?t:null,this.t[t].conf.transEv||(this.t[t].tab.addEventListener(this.conf.transEv,this._doOnTrEnd),this.t[t].conf.transEv=!0),this.t[t].conf.visible=!0,this.t[t].tab.className=this._tabCss(t),this.t[t].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[t].tab.style.width=this.t[t].conf.width+"px"):(this.t[t].conf.visible=!0,this.t[t].tab.style.display="",e?this._setTabActive(t):this._adjustTabs()))},this._hideTab=function(t,e){if(this.t[t]&&this.t[t].conf.visible&&!this.t[t].conf.transActv){var s=!1;this.conf.lastActive==t&&(this.conf.lastActive=null,this.t[t].conf.active=!1,this.t[t].tab.className=this._tabCss(t),s=!0);var n=this._getPrevVisible(t),o=this._getNextVisible(t),l=s&&e!==!1?(1==e?null:e)||o||n:null;this.conf.transProp!==!1?(this.t[t].conf.transActv=!0,this.t[t].conf.transMode="hide",this.t[t].conf.transProp=this.conf.transProp,this.t[t].conf.transActvId=l,this.t[t].conf.visible=!1,this.t[t].conf.transEv||(this.t[t].tab.addEventListener(this.conf.transEv,this._doOnTrEnd),this.t[t].conf.transEv=!0),this.t[t].tab.style.visibility="hidden",this.t[t].tab.className=i._tabCss(t),this.t[t].tab.style[this.conf.transProp]=this.conf.transValueWidth,this.t[t].tab.style.width="0px"):(this.t[t].tab.style.display="none",this.t[t].conf.visible=!1,this.conf.contZone&&(this.t[t].cell.cell.style.visibility="hidden",this.t[t].cell.cell.style.top="-5000px"),null!=l&&this._setTabActive(l),this._adjustTabs(),this.t[t].conf.remove&&this._removeTab(t))}},this._isTabVisible=function(t){return 1==this.t[t].conf.visible},this._doOnTrEnd=function(){var t=this._tabId;if(null!=i.t[t]){var e=i.t[t],s=e.conf.transActvId;"hide"==e.conf.transMode?e.conf.remove?i._removeTab(t):(e.tab.style[e.conf.transProp]="",i.conf.contZone&&(e.cell.cell.style.visibility="hidden",e.cell.cell.style.top="-5000px"),e.conf.transActv=!1):"show"==e.conf.transMode&&(e.tab.style[e.conf.transProp]="",e.tab.style.visibility="visible",e.conf.transMode=null,e.conf.transActv=!1),null!=s?i._setTabActive(s):i._adjustTabs(),e=null}},this.enableTabCloseButton=function(t){this.conf.closeButton=window.dhx4.s2b(t)},this.unload=function(){this.clearAll(),this.t=null,this.conf.fullScreen&&(window.addEventListener?window.removeEventListener("resize",this._doOnResizeStart,!1):window.detachEvent("onresize",this._doOnResizeStart),this._doOnResizeStart=null,this._doOnResizeEnd=null),null!=this.tabsTextTest&&(this.tabsTextTest.parentNode&&this.tabsTextTest.parentNode.removeChild(this.tabsTextTest),this.tabsTextTest=null),window.dhx4._eventable(this,"clear"),window.dhx4._enableDataLoading(this,null,null,null,"clear"),this.tabsArea.childNodes[0].onclick=null,this.tabsArea.childNodes[2].onclick=null,this.tabsArea.onclick=null,this.tabsArea.onselectstart=null,this.tabsArea.parentNode.removeChild(this.tabsArea),this.tabsArea=null,this.tabsMode.parentNode.removeChild(this.tabsMode),this.tabsMode=null,this.conf.fullScreen?(this.base.parentNode.removeChild(this.base),document.documentElement.className=document.documentElement.className.replace("dhxtabbar_fullscreen",""),document.body.className=document.body.className.replace("dhxtabbar_fullscreen","")):this.base.className=this.base.className.replace("dhxtabbar_base_"+this.conf.skin,""),this.base=null;for(var t in this)this[t]=null;i=null},this.enableContentZone=function(t){this.conf.contZone=1==t},this.setSkin=function(t){this.base.className=this.base.className.replace(new RegExp("dhxtabbar_base_"+this.conf.skin),"dhxtabbar_base_"+t),this.conf.skin=t,null!=this.tabsTextTest&&(this.tabsTextTest.className="dhxtabbar_tabs_text_test_"+this.conf.skin);for(var e in this.t)this.t[e].cell._resetSizeState(),1==this.t[e].conf.autowidth&&(this.t[e].conf.width=this._getLabelWidth(this.t[e].conf.text,this.t[e].conf.close),this.t[e].conf.visible&&(this.t[e].tab.style.width=this.t[e].conf.width+"px"));this.conf.tabsAreaOfs=null,this._fixTabsOfs(),this.setSizes()},this.setAlign=function(t){return t="left"==t?"left":"right",t==this.conf.align?void(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"):(this.conf.transProp!==!1&&(this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=""),this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="",this.conf.align=t,this.tabsArea.childNodes[1].childNodes[0].className="dhxtabbar_tabs_cont_"+this.conf.align,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px",void(this.conf.transProp!==!1&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos)))},this._initObj=function(t){this.clearAll();var e=!1;if(null!=t.settings&&(null!=t.settings.skin&&this.setSkin(t.settings.skin),null!=t.settings.closeButton&&this.enableTabCloseButton(window.dhx4.s2b(t.settings.closeButton)),null!=t.settings.align&&this.setAlign(t.settings.align),("ajax"==t.settings.hrefmode||"ajax-html"==t.settings.hrefmode)&&(e=!0)),null!=t.tabs)for(var i=0;i<t.tabs.length;i++){var s=t.tabs[i];"undefined"==typeof s.id&&(s.id=window.dhx4.newId()),s.width=isNaN(parseInt(s.width))?null:parseInt(s.width),this.addTab(s.id,s.text||s.label||"",s.width,s.index,window.dhx4.s2b(s.selected)||window.dhx4.s2b(s.active),s.close),null!=s.content&&this.cells(s.id).attachHTMLString(s.content),null!=s.href&&this.cells(s.id).attachURL(s.href,e),"undefined"!=typeof s.enabled&&0==window.dhx4.s2b(s.enabled)?this.tabs(s.id).disable():"undefined"!=typeof s.disabled&&1==window.dhx4.s2b(s.disabled)&&this.tabs(s.id).disable()}},this._xmlToObj=function(t){var e={settings:{},tabs:[]},i=t.getElementsByTagName("tabbar")[0];if(null!=i){for(var s in{skin:1,align:1,closeButton:1,hrefmode:1})null!=i.getAttribute(s)&&(e.settings[s]=i.getAttribute(s));for(var n=i.getElementsByTagName("tab"),o=0;o<n.length;o++){var l={text:n[o].firstChild.nodeValue||""};for(var s in{id:1,width:1,close:1,selected:1,active:1,enabled:1,disabled:1,href:1})null!=n[o].getAttribute(s)&&(l[s]=n[o].getAttribute(s));var r=n[o].getElementsByTagName("content")[0];if(null!=r){l.content="";for(var a=0;a<r.childNodes.length;a++)l.content+=r.childNodes[a].nodeValue||""}e.tabs.push(l)}}return e},dhx4._enableDataLoading(this,"_initObj","_xmlToObj","tabbar",{struct:!0});var n=window.dhx4.transDetect();return this.conf.transProp=n.transProp,this.conf.transEv=n.transEv,this.conf.transValueWidth="width "+this.conf.transSpeed,n=null,this.conf.transProp!==!1&&(this.conf.transValuePos=this.conf.align+" "+this.conf.transSpeed,this.tabsArea.childNodes[1].childNodes[0].style[this.conf.transProp]=this.conf.transValuePos),this._initFullScreenResize=function(){this.conf.fullScreenResize||(this.conf.tmResize=null,this._doOnResizeStart=function(){window.clearTimeout(i.conf.tmResize),i.conf.tmResize=window.setTimeout(i._doOnResizeEnd,200)},this._doOnResizeEnd=function(){i.setSizes()},window.addEventListener?window.addEventListener("resize",this._doOnResizeStart,!1):window.attachEvent("onresize",this._doOnResizeStart),this.conf.fullScreenResize=!0)},this.conf.fullScreen&&this._initFullScreenResize(),this._callMainEvent=function(t,e){return this.callEvent(t,e)},window.dhx4._eventable(this),null!=this.conf.autoload.json?this.loadStruct(this.conf.autoload.json,this.conf.autoload.onload):null!=this.conf.autoload.xml?this.loadStruct(this.conf.autoload.xml,this.conf.autoload.onload):null!=this.conf.autoload.tabs&&this.loadStruct({tabs:this.conf.autoload.tabs}),this._fixTabsOfs(),this.setSizes(),this}function dhtmlXTabBarInitFromHTML(){for(var z=document.getElementsByTagName("div"),i=0;i<z.length;i++)if(-1!=z[i].className.indexOf("dhtmlxTabBar")){var conf={settings:{},tabs:[]},n=z[i],id=n.id;n.className="";for(var k=new Array,j=0;j<n.childNodes.length;j++)n.childNodes[j].tagName&&"!"!=n.childNodes[j].tagName&&(k[k.length]=n.childNodes[j]);var skin=n.getAttribute("skin");
null!=skin&&(conf.settings.skin=skin);var w=new dhtmlXTabBar({parent:id,mode:n.getAttribute("mode")});window[id]=w,acs=n.getAttribute("onbeforeinit"),acs&&eval(acs),align=n.getAttribute("align"),align&&(conf.settings.align=align);for(var cont={},j=0;j<k.length;j++){var m=k[j],tab={id:m.id,text:m.getAttribute("name"),width:m.getAttribute("width"),selected:m.getAttribute("selected"),active:m.getAttribute("active"),close:m.getAttribute("close")},href=m.getAttribute("href");cont[m.id]=href?{href:href}:{cont:m},conf.tabs.push(tab)}w.loadStruct(conf);for(var a in cont)cont[a].href?(w.cells(a).attachURL(cont[a].href),cont[a].href=null):(w.cells(a).attachObject(cont[a].cont),"none"==cont[a].cont.style.display&&(cont[a].cont.style.display=""),cont[a].cont=null),cont[a]=null;var selId=n.getAttribute("select");if(null!=selId)w.tabs(selId).setActive();else if(null==w.getActiveTab()){var v=w._getFirstVisible();null!=v&&w.cells(v).setActive()}acs=n.getAttribute("oninit"),acs&&eval(acs)}"function"==typeof window.addEventListener?window.removeEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.detachEvent("onload",dhtmlXTabBarInitFromHTML)}function dhtmlXWindows(t){var e=this,i={};if("undefined"!=typeof t)for(var s in t)i[s]=t[s];t=null,this.conf={skin:window.dhx4.skin||("undefined"!=typeof dhtmlx?dhtmlx.skin:null)||window.dhx4.skinDetect("dhxwins")||"dhx_skyblue",vp_pos_ofs:20,vp_custom:!1,ofs_w:null,ofs_h:null,button_last:null,dblclick_tm:300,dblclick_last:null,dblclick_id:null,dblclick_mode:"minmax",dblclick_active:!1,dblclick_ev:navigator.userAgent.indexOf("MSIE 6.0")>=0||navigator.userAgent.indexOf("MSIE 7.0")>=0||navigator.userAgent.indexOf("MSIE 8.0")>=0,fr_cover:navigator.userAgent.indexOf("MSIE 6.0")>=0};var n=window.dhx4.transDetect();if(this.conf.tr={prop:n.transProp,ev:n.transEv,height_open:"height 0.2s cubic-bezier(0.25,0.1,0.25,1)",height_close:"height 0.18s cubic-bezier(0.25,0.1,0.25,1)",op_open:"opacity 0.16s ease-in",op_close:"opacity 0.2s ease-out",op_v_open:"1",op_v_close:"0.4"},i.viewport?null!=i.viewport.object?this.attachViewportTo(i.viewport.object):null!=i.viewport.left&&null!=i.viewport.top&&null!=i.viewport.width&&null!=i.viewport.height?this.setViewport(i.viewport.left,i.viewport.top,i.viewport.width,i.viewport.height,i.viewport.parent):this.attachViewportTo(document.body):this.attachViewportTo(document.body),this.w={},this.createWindow=function(t,e,i,s,n){var o={};if(1==arguments.length&&"object"==typeof t)o=t;else for(o.id=t,o.left=e,o.top=i,o.width=s,o.height=n,("undefined"==typeof o.id||null==o.id)&&(o.id=window.dhx4.newId());null!=this.w[o.id];)o.id=window.dhx4.newId();null==o.left&&(o.left=0),null==o.top&&(o.top=0),o.move=null!=o.move&&0==window.dhx4.s2b(o.move)?!1:null!=o.deny_move&&1==window.dhx4.s2b(o.deny_move)?!1:!0,o.park=null!=o.park&&0==window.dhx4.s2b(o.park)?!1:null!=o.deny_park&&1==window.dhx4.s2b(o.deny_park)?!1:!0,o.resize=null!=o.resize&&0==window.dhx4.s2b(o.resize)?!1:null!=o.deny_resize&&1==window.dhx4.s2b(o.deny_resize)?!1:!0,o.keep_in_viewport=null!=o.keep_in_viewport&&window.dhx4.s2b(o.keep_in_viewport),o.modal=null!=o.modal&&window.dhx4.s2b(o.modal),o.center=null!=o.center&&window.dhx4.s2b(o.center),o.text=null!=o.text?o.text:null!=o.caption?o.caption:"dhtmlxWindow",o.header=!(null!=o.header&&0==window.dhx4.s2b(o.header));var l=document.createElement("DIV");l.className="dhxwin_active",l.style.viosibility="hidden",this.vp.appendChild(l),l._isWindow=!0,l._idd=o.id;var r=document.createElement("DIV");r.className="dhxwin_hdr",r.style.zIndex=0,r.innerHTML="<div class='dhxwin_icon'></div><div class='dhxwin_text'><div class='dhxwin_text_inside'>"+o.text+"</div></div><div class='dhxwin_btns'></div>",l.appendChild(r),r.onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},r.oncontextmenu=function(t){return t=t||event,t.cancelBubble=!0,!1},r._isWinHdr=!0,r.firstChild._isWinIcon=!0;var a=document.createElement("DIV");a.className="dhxwin_brd",l.appendChild(a);var h=document.createElement("DIV");h.className="dhxwin_fr_cover",h.innerHTML="<iframe class='dhxwin_fr_cover_inner' frameborder='0' border='0'></iframe><div class='dhxwin_fr_cover_inner'></div>",l.appendChild(h),this.w[o.id]={win:l,hdr:r,brd:a,fr_cover:h,b:{},conf:{z_id:window.dhx4.newId(),actv:!1,modal:!1,maxed:!1,parked:!1,sticked:!1,visible:!0,header:!0,text:o.text,keep_in_vp:o.keep_in_viewport,allow_move:o.move,allow_park:o.park,allow_resize:o.resize,max_w:null,max_h:null,min_w:80,min_h:80}};var d={help:{title:"Help",visible:!1},stick:{title:"Stick",visible:!1},park:{title:"Park",visible:!0},minmax:{title:"Min/Max",visible:!0},close:{title:"Close",visible:!0}};for(var c in d){var u=new dhtmlXWindowsButton(this,o.id,c,d[c].title,!1);0==d[c].visible&&u.hide(),r.lastChild.appendChild(u.button),this.w[o.id].b[c]=u,u=null}this._winAdjustTitle(o.id),this.w[o.id].win.style.zIndex=window.dhx4.zim.reserve(this.w[o.id].conf.z_id);var _=new dhtmlXWindowsCell(o.id,this);return this.w[o.id].win.insertBefore(_.cell,h),this.w[o.id].cell=_,"function"==typeof window.addEventListener?(this.w[o.id].win.addEventListener("mousedown",this._winOnMouseDown,!1),this.w[o.id].win.addEventListener("mouseup",this._winOnMouseDown,!1),this.conf.dblclick_ev&&this.w[o.id].win.addEventListener("dblclick",this._winOnMouseDown,!1)):(this.w[o.id].win.attachEvent("onmousedown",this._winOnMouseDown),this.w[o.id].win.attachEvent("onmouseup",this._winOnMouseDown),this.conf.dblclick_ev&&this.w[o.id].win.attachEvent("ondblclick",this._winOnMouseDown)),this._winInitFRM(o.id),this._winSetPosition(o.id,o.left,o.top),this._winSetSize(o.id,o.width,o.height),this._winMakeActive(o.id),1==o.center&&this.w[o.id].cell.center(),1==o.modal&&this.w[o.id].cell.setModal(!0),0==o.header&&this.w[o.id].cell.hideHeader(),f=l=r=a=h=_=null,this.w[o.id].cell},this._winOnMouseDown=function(t){t=t||event;for(var i=t.target||t.srcElement,s={press_type:t.type};null!=i&&1!=i._isWindow;)"undefined"!=typeof i.className&&null==s.mode&&("undefined"!=typeof i._buttonName?(s.mode="button",s.button_name=i._buttonName):1==i._isWinHdr?s.mode="hdr":1==i._isWinIcon&&(s.mode="icon")),i=i.parentNode;null==s.mode&&(s.mode="win"),s.id=null!=i&&1==i._isWindow?i._idd:null,i=null,null!=s.id&&e.callEvent("_winMouseDown",[t,s])},this._winOnParkTrans=function(t){t.stopPropagation&&t.stopPropagation();var i=e.w[this._idd];"opacity"==t.propertyName&&e._winCellClearOpacity(this._idd),"height"==t.propertyName&&"park"==i.conf.tr_mode&&"park"==i.conf.tr_mode&&(i.win.style[e.conf.tr.prop]="",i.conf.parked?(i.hdr.style.zIndex=3,e._callMainEvent("onParkUp",this._idd)):(e._winAdjustCell(this._idd),e._callMainEvent("onParkDown",this._idd),i.conf.keep_in_vp&&e._winAdjustPosition(this._idd,i.conf.x,i.conf.y))),i=null},this.unload=function(){this.conf.unloading=!0,this._dndInitModule&&this._dndUnloadModule();for(var t in this.w)this._winClose(t);this.w=null,null!=this.cm&&"function"==typeof this._unloadContextMenu&&this._unloadContextMenu(),window.dhx4._eventable(this,"clear"),this.attachViewportTo(null);for(var t in this.conf)this.conf[t]=null,delete this.conf[t];for(var t in this)this[t]=null;e=t=null},window.dhx4._eventable(this),this.attachEvent("_winMouseDown",this._winMouseDownHandler),this._dndInitModule&&this._dndInitModule(),null!=i.wins)for(var o=0;o<i.wins.length;o++){var l=i.wins[o];this.createWindow(l)}return i=null,this}function dhtmlXWindowsCell(t,e){dhtmlXCellObject.apply(this,[t,"_wins"]),this.wins=e,this.cell._winId=t,this.conf.skin=this.wins.conf.skin,this.attachEvent("_onCellUnload",function(){this._unloadResize&&this._unloadResize(),window.dhx4._eventable(this.cell,"clear"),this.cell._winId=null,this.wins=null,this.setText=null,this.getText=null,this.allowMove=null,this.denyMove=null,this.isMovable=null,this.allowResize=null,this.denyResize=null,this.isResizable=null,this.maximize=null,this.minimize=null,this.isMaximized=null,this.setPosition=null,this.getPosition=null,this.adjustPosition=null,this.park=null,this.isParked=null,this.allowPark=null,this.denyPark=null,this.isParkable=null,this.show=null,this.hide=null,this.isHidden=null,this.stick=null,this.unstick=null,this.isSticked=null,this.setDimension=null,this.getDimension=null,this.setMinDimension=null,this.getMinDimension=null,this.setMaxDimension=null,this.getMaxDimension=null,this.keepInViewport=null,this.center=null,this.centerOnScreen=null,this.bringToTop=null,this.bringToBottom=null,this.isOnTop=null,this.isOnBottom=null,this.showHeader=null,this.hideHeader=null,this.setModal=null,this.isModal=null,this.close=null,this._adjustByCont=null,this.button=null,this.addUserButton=null,this.removeUserButton=null,s=null}),this.attachEvent("_onContentLoaded",function(){this.wins._callMainEvent("onContentLoaded",this._idd)}),this.attachEvent("_onContentMouseDown",function(t,e){this.wins.callEvent("_winMouseDown",[e,{id:t,mode:"win"}])}),this._callMainEvent=function(t,e){return this.callEvent(t,e)},this.conf.tr={};for(var i in this.wins.conf.tr)this.conf.tr[i]=this.wins.conf.tr[i];0!=this.conf.tr.prop,this._initResize&&this._initResize(),window.dhx4._eventable(this.cell);var s=this;return this.cell.attachEvent("_setCellSize",function(t,e){var i=s.wins.w[this._winId].conf.w-s.conf.size.w,n=s.wins.w[this._winId].conf.h-s.conf.size.h;s.setDimension(t+i,e+n)}),this}"undefined"==typeof window.dhx4&&(window.dhx4={version:"4.0.3",skin:null,skinDetect:function(t){var e=document.createElement("DIV");e.className=t+"_skin_detect",document.body.firstChild?document.body.insertBefore(e,document.body.firstChild):document.body.appendChild(e);var i=e.offsetWidth;return e.parentNode.removeChild(e),e=null,{10:"dhx_skyblue",20:"dhx_web",30:"dhx_terrace"}[i]||null},lastId:1,newId:function(){return this.lastId++},zim:{data:{},step:5,first:function(){return 100},last:function(){var t=this.first();for(var e in this.data)t=Math.max(t,this.data[e]);return t},reserve:function(t){return this.data[t]=this.last()+this.step,this.data[t]},clear:function(t){null!=this.data[t]&&(this.data[t]=null,delete this.data[t])}},s2b:function(t){return 1==t||1==t||"true"==t||"1"==t||"yes"==t||"y"==t},trim:function(t){return String(t).replace(/^\s{1,}/,"").replace(/\s{1,}$/,"")},template:function(t,e,i){return t.replace(/#([a-zA-Z0-9_-]{1,})#/g,function(t,s){return s.length>0&&"undefined"!=typeof e[s]?1==i?window.dhx4.trim(e[s]):String(e[s]):""})},absLeft:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this._aOfs(t).left},absTop:function(t){return"string"==typeof t&&(t=document.getElementById(t)),this._aOfs(t).top},_aOfsSum:function(t){for(var e=0,i=0;t;)e+=parseInt(t.offsetTop),i+=parseInt(t.offsetLeft),t=t.offsetParent;return{top:e,left:i}},_aOfsRect:function(t){var e=t.getBoundingClientRect(),i=document.body,s=document.documentElement,n=window.pageYOffset||s.scrollTop||i.scrollTop,o=window.pageXOffset||s.scrollLeft||i.scrollLeft,l=s.clientTop||i.clientTop||0,r=s.clientLeft||i.clientLeft||0,a=e.top+n-l,h=e.left+o-r;return{top:Math.round(a),left:Math.round(h)}},_aOfs:function(t){return t.getBoundingClientRect?this._aOfsRect(t):this._aOfsSum(t)},_isObj:function(t){return null!=t&&"object"==typeof t&&"undefined"==typeof t.length},_copyObj:function(t){if(this._isObj(t)){var e={};for(var i in t)e[i]="object"==typeof t[i]&&null!=t[i]?this._copyObj(t[i]):t[i]}else for(var e=[],i=0;i<t.length;i++)e[i]="object"==typeof t[i]&&null!=t[i]?this._copyObj(t[i]):t[i];return e},screenDim:function(){var t=navigator.userAgent.indexOf("MSIE")>=0,e={};return e.left=document.body.scrollLeft,e.right=e.left+(window.innerWidth||document.body.clientWidth),e.top=Math.max((t?document.documentElement:document.getElementsByTagName("html")[0]).scrollTop,document.body.scrollTop),e.bottom=e.top+(t?Math.max(document.documentElement.clientHeight||0,document.documentElement.offsetHeight||0):window.innerHeight),e},selectTextRange:function(t,e,i){t="string"==typeof t?document.getElementById(t):t;var s=t.value.length;if(e=Math.max(Math.min(e,s),0),i=Math.min(i,s),t.setSelectionRange)try{t.setSelectionRange(e,i)}catch(n){}else if(t.createTextRange){var o=t.createTextRange();o.moveStart("character",e),o.moveEnd("character",i-s);try{o.select()}catch(n){}}},transData:null,transDetect:function(){if(null==this.transData){this.transData={transProp:!1,transEv:null};var t={MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd",OTransition:"oTransitionEnd",msTransition:"transitionend",transition:"transitionend"};for(var e in t)0==this.transData.transProp&&null!=document.documentElement.style[e]&&(this.transData.transProp=e,this.transData.transEv=t[e]);t=null}return this.transData}},window.dhx4.isIE=navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,window.dhx4.isIE6=null==window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,window.dhx4.isIE7=navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,window.dhx4.isOpera=navigator.userAgent.indexOf("Opera")>=0,window.dhx4.isChrome=navigator.userAgent.indexOf("Chrome")>=0,window.dhx4.isKHTML=navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0,window.dhx4.isFF=navigator.userAgent.indexOf("Firefox")>=0,window.dhx4.isIPad=navigator.userAgent.search(/iPad/gi)>=0),"undefined"==typeof window.dhx4.ajax&&(window.dhx4.ajax={cache:!1,method:"post",get:function(t,e){this._call("GET",t,null,!0,e)},getSync:function(t){return this._call("GET",t,null,!1)},post:function(t,e,i){1==arguments.length?e="":2!=arguments.length||"function"!=typeof e&&"function"!=typeof window[e]?e=String(e):(i=e,e=""),this._call("POST",t,e,!0,i)},postSync:function(t,e){return e=null==e?"":String(e),this._call("POST",t,e,!1)},getLong:function(t,e){this._call("GET",t,null,!0,e,{url:t})},postLong:function(t,e,i){2==arguments.length&&(i=e,e=""),this._call("POST",t,e,!0,i,{url:t,postData:e})},_call:function(t,e,i,s,n,o){var l=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r=null!=navigator.userAgent.match(/AppleWebKit/)&&null!=navigator.userAgent.match(/Qt/)&&null!=navigator.userAgent.match(/Safari/);return 1==s&&(l.onreadystatechange=function(){(4==l.readyState&&200==l.status||1==r&&3==l.readyState)&&window.setTimeout(function(){"function"==typeof n&&n.apply(window,[{xmlDoc:l}]),null!=o&&("undefined"!=typeof o.postData?dhx4.ajax.postLong(o.url,o.postData,n):dhx4.ajax.getLong(o.url,n)),n=null,l=null},1)}),"GET"==t&&1!=this.cache&&(e+=(e.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()),l.open(t,e,s),"POST"==t?(l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),1!=this.cache&&(i+=(i.length>0?"&":"")+"dhxr"+(new Date).getTime())):i=null,l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(i),s?void 0:{xmlDoc:l}}}),"undefined"==typeof window.dhx4._enableDataLoading&&(window.dhx4._enableDataLoading=function(obj,initObj,xmlToJson,xmlRootTag,mode){if("clear"==mode){for(var a in obj._dhxdataload)obj._dhxdataload[a]=null,delete obj._dhxdataload[a];return obj._loadData=null,obj._dhxdataload=null,obj.load=null,obj.loadStruct=null,void(obj=null)}if(obj._dhxdataload={initObj:initObj,xmlToJson:xmlToJson,xmlRootTag:xmlRootTag,onBeforeXLS:null},obj._loadData=function(data,loadParams,onLoad){2==arguments.length&&(onLoad=loadParams,loadParams=null);var obj=null;if(3==arguments.length&&(onLoad=arguments[2]),"string"==typeof data){var k=data.replace(/^\s{1,}/,"").replace(/\s{1,}$/,""),tag=new RegExp("^<"+this._dhxdataload.xmlRootTag);if(tag.test(k.replace(/^<\?xml[^\?]*\?>\s*/,""))&&(window.DOMParser?obj=(new window.DOMParser).parseFromString(data,"text/xml"):"undefined"!=typeof window.ActiveXObject&&(obj=new window.ActiveXObject("Microsoft.XMLDOM"),obj.async="false",obj.loadXML(data)),null!=obj&&(obj=this[this._dhxdataload.xmlToJson].apply(this,[obj]))),null==obj&&(null!=k.match(/^\{.*\}$/)||null!=k.match(/^\[.*\]$/))){try{eval("dhx4.temp="+k)}catch(e){dhx4.temp=null}obj=dhx4.temp,dhx4.temp=null}if(null==obj){this.callEvent("onXLS",[]);var params=[];if("function"==typeof this._dhxdataload.onBeforeXLS){var k=this._dhxdataload.onBeforeXLS.apply(this,[data]);if(null!=k&&"object"==typeof k&&(null!=k.url&&(data=k.url),null!=k.params))for(var a in k.params)params.push(a+"="+encodeURIComponent(k.params[a]))}var t=this,callBack=function(r){var obj=null;if((r.xmlDoc.getResponseHeader("Content-Type")||"").search(/xml/gi)>=0||null!=r.xmlDoc.responseText.replace(/^\s{1,}/,"").match(/^</))obj=t[t._dhxdataload.xmlToJson].apply(t,[r.xmlDoc.responseXML]);else{try{eval("dhx4.temp="+r.xmlDoc.responseText)}catch(e){dhx4.temp=null}obj=dhx4.temp,dhx4.temp=null}null!=obj&&t[t._dhxdataload.initObj].apply(t,[obj,data]),t.callEvent("onXLE",[]),null!=onLoad&&("function"==typeof onLoad?onLoad.apply(t,[]):"function"==typeof window[onLoad]&&window[onLoad].apply(t,[])),callBack=onLoad=null,obj=r=t=null};return params=params.join("&")+("string"==typeof loadParams?"&"+loadParams:""),void("post"==dhx4.ajax.method?dhx4.ajax.post(data,params,callBack):"get"==dhx4.ajax.method&&dhx4.ajax.get(data+(data.indexOf("?")>0?"":"")+params,callBack))}}else obj="object"==typeof data.documentElement||"undefined"!=typeof data.tagName&&"undefined"!=typeof data.getElementsByTagName&&data.getElementsByTagName(this._dhxdataload.xmlRootTag).length>0?this[this._dhxdataload.xmlToJson].apply(this,[data]):window.dhx4._copyObj(data);null!=obj&&this[this._dhxdataload.initObj].apply(this,[obj]),null!=onLoad&&("function"==typeof onLoad?onLoad.apply(this,[]):"function"==typeof window[onLoad]&&window[onLoad].apply(this,[]),onLoad=null)},null!=mode){var k={struct:"loadStruct",data:"load"};for(var a in mode)1==mode[a]&&(obj[k[a]]=function(){return this._loadData.apply(this,arguments)})}obj=null}),"undefined"==typeof window.dhx4._eventable&&(window.dhx4._eventable=function(t,e){return"clear"==e?(t.detachAllEvents(),t.dhxevs=null,t.attachEvent=null,t.detachEvent=null,t.checkEvent=null,t.callEvent=null,t.detachAllEvents=null,void(t=null)):(t.dhxevs={data:{}},t.attachEvent=function(t,e){t=String(t).toLowerCase(),this.dhxevs.data[t]||(this.dhxevs.data[t]={});var i=window.dhx4.newId();return this.dhxevs.data[t][i]=e,i},t.detachEvent=function(t){for(var e in this.dhxevs.data){var i=0;for(var s in this.dhxevs.data[e])s==t?(this.dhxevs.data[e][s]=null,delete this.dhxevs.data[e][s]):i++;0==i&&(this.dhxevs.data[e]=null,delete this.dhxevs.data[e])}},t.checkEvent=function(t){return t=String(t).toLowerCase(),null!=this.dhxevs.data[t]},t.callEvent=function(t,e){if(t=String(t).toLowerCase(),null==this.dhxevs.data[t])return!0;var i=!0;for(var s in this.dhxevs.data[t])i=this.dhxevs.data[t][s].apply(this,e)&&i;return i},t.detachAllEvents=function(){for(var t in this.dhxevs.data){for(var e in this.dhxevs.data[t])this.dhxevs.data[t][e]=null,delete this.dhxevs.data[t][e];this.dhxevs.data[t]=null,delete this.dhxevs.data[t]}},void(t=null))}),dhtmlx=function(t){for(var e in t)dhtmlx[e]=t[e];return dhtmlx},dhtmlx.extend_api=function(t,e,i){var s=window[t];s&&(window[t]=function(t){if(t&&"object"==typeof t&&!t.tagName){var i=s.apply(this,e._init?e._init(t):arguments);for(var n in dhtmlx)e[n]&&this[e[n]](dhtmlx[n]);for(var n in t)e[n]?this[e[n]](t[n]):0==n.indexOf("on")&&this.attachEvent(n,t[n])}else var i=s.apply(this,arguments);return e._patch&&e._patch(this),i||this},window[t].prototype=s.prototype,i&&dhtmlXHeir(window[t].prototype,i))},dhtmlxAjax={get:function(t,e){var i=new dtmlXMLLoaderObject(!0);return i.async=arguments.length<3,i.waitCall=e,i.loadXML(t),i},post:function(t,e,i){var s=new dtmlXMLLoaderObject(!0);return s.async=arguments.length<4,s.waitCall=i,s.loadXML(t,!0,e),s},getSync:function(t){return this.get(t,null,!0)},postSync:function(t,e){return this.post(t,e,null,!0)}},dtmlXMLLoaderObject.count=0,dtmlXMLLoaderObject.prototype.waitLoadFunction=function(t){var e=!0;return this.check=function(){if(t&&null!=t.onloadAction&&(!t.xmlDoc.readyState||4==t.xmlDoc.readyState)){if(!e)return;e=!1,dtmlXMLLoaderObject.count++,"function"==typeof t.onloadAction&&t.onloadAction(t.mainObject,null,null,null,t),t.waitCall&&(t.waitCall.call(this,t),t.waitCall=null)}},this.check},dtmlXMLLoaderObject.prototype.getXMLTopNode=function(t,e){if("undefined"==typeof this.xmlDoc.status||this.xmlDoc.status<400){if(this.xmlDoc.responseXML){var i=this.xmlDoc.responseXML.getElementsByTagName(t);if(0==i.length&&-1!=t.indexOf(":"))var i=this.xmlDoc.responseXML.getElementsByTagName(t.split(":")[1]);var s=i[0]}else var s=this.xmlDoc.documentElement;if(s)return this._retry=!1,s;if(!this._retry&&_isIE){this._retry=!0;var e=this.xmlDoc;return this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),!0),this.getXMLTopNode(t,e)}}return dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),document.createElement("DIV")},dtmlXMLLoaderObject.prototype.loadXMLString=function(t,e){if(_isIE)this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(t);else{var i=new DOMParser;this.xmlDoc=i.parseFromString(t,"text/xml")}e||(this.onloadAction&&this.onloadAction(this.mainObject,null,null,null,this),this.waitCall&&(this.waitCall(),this.waitCall=null))},dtmlXMLLoaderObject.prototype.loadXML=function(t,e,i,s){this.rSeed&&(t+=(-1!=t.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf()),this.filePath=t,this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)),this.xmlDoc.open(e?"POST":"GET",t,this.async),s?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):e&&this.xmlDoc.setRequestHeader("Content-type",this.contenttype||"application/x-www-form-urlencoded"),this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlDoc.send(null||i),this.async||new this.waitLoadFunction(this)()},dtmlXMLLoaderObject.prototype.destructor=function(){return this._filterXPath=null,this._getAllNamedChilds=null,this._retry=null,this.async=null,this.rSeed=null,this.filePath=null,this.onloadAction=null,this.mainObject=null,this.xmlDoc=null,this.doXPath=null,this.doXPathOpera=null,this.doXSLTransToObject=null,this.doXSLTransToString=null,this.loadXML=null,this.loadXMLString=null,this.doSerialization=null,this.xmlNodeToJSON=null,this.getXMLTopNode=null,this.setXSLParamValue=null,null},dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(t){for(var e={},i=0;i<t.attributes.length;i++)e[t.attributes[i].name]=t.attributes[i].value;e._tagvalue=t.firstChild?t.firstChild.nodeValue:"";for(var i=0;i<t.childNodes.length;i++){var s=t.childNodes[i].tagName;s&&(e[s]||(e[s]=[]),e[s].push(this.xmlNodeToJSON(t.childNodes[i])))}return e},dhtmlDragAndDropObject.prototype.removeDraggableItem=function(t){t.onmousedown=null,t.dragStarter=null,t.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(t,e){t.onmousedown=this.preCreateDragCopy,t.dragStarter=e,this.addDragLanding(t,e)},dhtmlDragAndDropObject.prototype.addDragLanding=function(t,e){t.dragLanding=e},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(t){return!t&&!window.event||2!=(t||event).button?window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(t),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),t&&t.preventDefault?(t.preventDefault(),!1):!1):void 0},dhtmlDragAndDropObject.prototype.callDrag=function(t){if(t||(t=window.event),dragger=window.dhtmlDragAndDrop,!((new Date).valueOf()-dragger.downtime<100)){if(!dragger.dragNode){if(!dragger.waitDrag)return dragger.stopDrag(t,!0);if(dragger.dragNode=dragger.dragStartObject._createDragNode(dragger.dragStartNode,t),!dragger.dragNode)return dragger.stopDrag();dragger.dragNode.onselectstart=function(){return!1},dragger.gldragNode=dragger.dragNode,document.body.appendChild(dragger.dragNode),document.body.onmouseup=dragger.stopDrag,dragger.waitDrag=0,dragger.dragNode.pWindow=window,dragger.initFrameRoute()}if(dragger.dragNode.parentNode!=window.document.body&&dragger.gldragNode){var e=dragger.gldragNode;dragger.gldragNode.old&&(e=dragger.gldragNode.old),e.parentNode.removeChild(e);var i=dragger.dragNode.pWindow;if(e.pWindow&&e.pWindow.dhtmlDragAndDrop.lastLanding&&e.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(e.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var s=document.createElement("Div");s.innerHTML=dragger.dragNode.outerHTML,dragger.dragNode=s.childNodes[0]}else dragger.dragNode=dragger.dragNode.cloneNode(!0);dragger.dragNode.pWindow=window,dragger.gldragNode.old=dragger.dragNode,document.body.appendChild(dragger.dragNode),i.dhtmlDragAndDrop.dragNode=dragger.dragNode}if(dragger.dragNode.style.left=t.clientX+15+(dragger.fx?-1*dragger.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",dragger.dragNode.style.top=t.clientY+3+(dragger.fy?-1*dragger.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",t.srcElement)n=t.srcElement;else var n=t.target;dragger.checkLanding(n,t)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(t){if(window.name){for(var e=parent.frames[window.name].frameElement.offsetParent,i=0,s=0;e;)i+=e.offsetLeft,s+=e.offsetTop,e=e.offsetParent;if(parent.dhtmlDragAndDrop){var n=parent.dhtmlDragAndDrop.calculateFramePosition(1);i+=1*n.split("_")[0],s+=1*n.split("_")[1]}if(t)return i+"_"+s;this.fx=i,this.fy=s}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(t,e){t&&t.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=t,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,e.clientX,e.clientY,e),this.lastLanding_scr=_isIE?e.srcElement:e.target):t&&"BODY"!=t.tagName?this.checkLanding(t.parentNode,e):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,e.clientX,e.clientY,e),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(t,e){if(dragger=window.dhtmlDragAndDrop,!e){dragger.stopFrameRoute();var i=dragger.lastLanding;dragger.lastLanding=null,i&&i.dragLanding._drag(dragger.dragStartNode,dragger.dragStartObject,i,_isIE?event.srcElement:t.target)}dragger.lastLanding=null,dragger.dragNode&&dragger.dragNode.parentNode==document.body&&dragger.dragNode.parentNode.removeChild(dragger.dragNode),dragger.dragNode=0,dragger.gldragNode=0,dragger.fx=0,dragger.fy=0,dragger.dragStartNode=0,dragger.dragStartObject=0,document.body.onmouseup=dragger.tempDOMU,document.body.onmousemove=dragger.tempDOMM,dragger.tempDOMU=null,dragger.tempDOMM=null,dragger.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(t){t&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var e=0;e<window.frames.length;e++)try{window.frames[e]!=t&&window.frames[e].dhtmlDragAndDrop&&window.frames[e].dhtmlDragAndDrop.stopFrameRoute(window)}catch(i){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(i){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(t,e){t&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=t.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=t.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=t.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=t.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&e&&(!_isFF||1.8>_FFrv)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=t&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(i){}for(var s=0;s<window.frames.length;s++)try{window.frames[s]!=t&&window.frames[s].dhtmlDragAndDrop&&window.frames[s].dhtmlDragAndDrop.initFrameRoute(window,!t||e?1:0)}catch(i){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,(-1!=navigator.appVersion.indexOf("MSIE 8.0")||-1!=navigator.appVersion.indexOf("MSIE 9.0")||-1!=navigator.appVersion.indexOf("MSIE 10.0")||document.documentMode>7)&&"BackCompat"!=document.compatMode&&(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),dtmlXMLLoaderObject.prototype.doXPath=function(t,e,i,s){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(t,e);if(_isIE)return e||(e=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),e||dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),null!=i&&e.setProperty("SelectionNamespaces","xmlns:xsl='"+i+"'"),"single"==s?e.selectSingleNode(t):e.selectNodes(t)||new Array(0);var n=e;e||(e=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),e||dhtmlxError.throwError("LoadXML","Incorrect XML",[e||this.xmlDoc,this.mainObject]),-1!=e.nodeName.indexOf("document")?n=e:(n=e,e=e.ownerDocument);var o=XPathResult.ANY_TYPE;"single"==s&&(o=XPathResult.FIRST_ORDERED_NODE_TYPE);var l=new Array,r=e.evaluate(t,n,function(){return i},o,null);if(o==XPathResult.FIRST_ORDERED_NODE_TYPE)return r.singleNodeValue;for(var a=r.iterateNext();a;)l[l.length]=a,a=r.iterateNext();return l},_dhtmlxError.prototype.catchError=function(t,e){this.catches[t]=e},_dhtmlxError.prototype.throwError=function(t,e,i){return this.catches[t]?this.catches[t](t,e,i):this.catches.ALL?this.catches.ALL(t,e,i):(alert("Error type: "+arguments[0]+"\nDescription: "+arguments[1]),null)},window.dhtmlxError=new _dhtmlxError,dtmlXMLLoaderObject.prototype.doXPathOpera=function(t,e){var i=t.replace(/[\/]+/gi,"/").split("/"),s=null,n=1;if(!i.length)return[];if("."==i[0])s=[e];else{if(""!=i[0])return[];s=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(i[n].replace(/\[[^\]]*\]/g,"")),n++}for(n;n<i.length;n++)s=this._getAllNamedChilds(s,i[n]);return-1!=i[n-1].indexOf("[")&&(s=this._filterXPath(s,i[n-1])),s},dtmlXMLLoaderObject.prototype._filterXPath=function(t,e){for(var i=new Array,e=e.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),s=0;s<t.length;s++)t[s].getAttribute(e)&&(i[i.length]=t[s]);return i},dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(t,e){var i=new Array;_isKHTML&&(e=e.toUpperCase());for(var s=0;s<t.length;s++)for(var n=0;n<t[s].childNodes.length;n++)_isKHTML?t[s].childNodes[n].tagName&&t[s].childNodes[n].tagName.toUpperCase()==e&&(i[i.length]=t[s].childNodes[n]):t[s].childNodes[n].tagName==e&&(i[i.length]=t[s].childNodes[n]);return i},dtmlXMLLoaderObject.prototype.xslDoc=null,dtmlXMLLoaderObject.prototype.setXSLParamValue=function(t,e,i){i||(i=this.xslDoc),i.responseXML&&(i=i.responseXML);var s=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+t+"']",i,"http://www.w3.org/1999/XSL/Transform","single");
null!=s&&(s.firstChild.nodeValue=e)},dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(t,e){if(t||(t=this.xslDoc),t.responseXML&&(t=t.responseXML),e||(e=this.xmlDoc),e.responseXML&&(e=e.responseXML),_isIE){var i=new ActiveXObject("Msxml2.DOMDocument.3.0");try{e.transformNodeToObject(t,i)}catch(s){i=e.transformNode(t)}}else{this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(t));var i=this.XSLProcessor.transformToDocument(e)}return i},dtmlXMLLoaderObject.prototype.doXSLTransToString=function(t,e){var i=this.doXSLTransToObject(t,e);return"string"==typeof i?i:this.doSerialization(i)},dtmlXMLLoaderObject.prototype.doSerialization=function(t){if(t||(t=this.xmlDoc),t.responseXML&&(t=t.responseXML),_isIE)return t.xml;var e=new XMLSerializer;return e.serializeToString(t)},dhtmlxEventable=function(obj){obj.attachEvent=function(t,e,i){return t="ev_"+t.toLowerCase(),this[t]||(this[t]=new this.eventCatcher(i||this)),t+":"+this[t].addEvent(e)},obj.callEvent=function(t,e){return t="ev_"+t.toLowerCase(),this[t]?this[t].apply(this,e):!0},obj.checkEvent=function(t){return!!this["ev_"+t.toLowerCase()]},obj.eventCatcher=function(obj){var dhx_catch=[],z=function(){for(var t=!0,e=0;e<dhx_catch.length;e++)if(null!=dhx_catch[e]){var i=dhx_catch[e].apply(obj,arguments);t=t&&i}return t};return z.addEvent=function(ev){return"function"!=typeof ev&&(ev=eval(ev)),ev?dhx_catch.push(ev)-1:!1},z.removeEvent=function(t){dhx_catch[t]=null},z},obj.detachEvent=function(t){if(0!=t){var e=t.split(":");this[e[0]].removeEvent(e[1])}},obj.detachAllEvents=function(){for(var t in this)0==t.indexOf("ev_")&&(this.detachEvent(t),this[t]=null)},obj=null},window.dhtmlx||(dhtmlx={}),dhtmlx.assert=function(t,e){t||dhtmlx.error(e)},dhtmlx.assert_enabled=function(){return!1},dhtmlx.assert_event=function(t,e){t._event_check||(t._event_check={},t._event_check_size={});for(var i in e){t._event_check[i.toLowerCase()]=e[i];var s=-1;for(var n in e[i])s++;t._event_check_size[i.toLowerCase()]=s}},dhtmlx.assert_method_info=function(t,e,i,s){for(var n=[],o=0;o<s.length;o++)n.push(s[o][0]+" : "+s[o][1]+"\n   "+s[o][2].describe()+(s[o][3]?"; optional":""));return t.name+"."+e+"\n"+i+"\n Arguments:\n - "+n.join("\n - ")},dhtmlx.assert_method=function(t,e){for(var i in e)dhtmlx.assert_method_process(t,i,e[i].descr,e[i].args,e[i].min||99,e[i].skip)},dhtmlx.assert_method_process=function(t,e,i,s,n,o){var l=t[e];o||(t[e]=function(){if(arguments.length!=s.length&&arguments.length<n)dhtmlx.log("warn","Incorrect count of parameters\n"+t[e].describe()+"\n\nExpecting "+s.length+" but have only "+arguments.length);else for(var i=0;i<s.length;i++)s[i][3]||s[i][2](arguments[i])||dhtmlx.log("warn","Incorrect method call\n"+t[e].describe()+"\n\nActual value of "+(i+1)+" parameter: {"+typeof arguments[i]+"} "+arguments[i]);return l.apply(this,arguments)}),t[e].describe=function(){return dhtmlx.assert_method_info(t,e,i,s)}},dhtmlx.assert_event_call=function(t,e,i){t._event_check&&(t._event_check[e]?dhtmlx.isNotDefined(i)?dhtmlx.log("warn","Event without parameters :"+e):t._event_check_size[e]!=i.length&&dhtmlx.log("warn","Incorrect event call, expected "+t._event_check_size[e]+" parameter(s), but have "+i.length+" parameter(s), for "+e+" event"):dhtmlx.log("warn","Not expected event call :"+e))},dhtmlx.assert_event_attach=function(t,e){t._event_check&&!t._event_check[e]&&dhtmlx.log("warn","Unknown event name: "+e)},dhtmlx.assert_property=function(t,e){t._settings_check||(t._settings_check={}),dhtmlx.extend(t._settings_check,e)},dhtmlx.assert_check=function(t,e){if("object"==typeof t)for(var i in t)dhtmlx.assert_settings(i,t[i],e)},dhtmlx.assert_settings=function(t,e,i){if(i=i||this._settings_check){if(!i[t])return dhtmlx.log("warn","Unknown propery: "+t);for(var s=!1,n=0;n<i[t].length;n++){var o=i[t][n];if("string"!=typeof o&&("function"==typeof o?s=s||o(e):"object"==typeof o&&"function"==typeof o[1]&&(s=s||o[1](e),s&&o[2]&&dhtmlx.assert_check(e,o[2])),s))break}s||dhtmlx.log("warn","Invalid configuration\n"+dhtmlx.assert_info(t,i)+"\nActual value: {"+typeof e+"} "+e)}},dhtmlx.assert_info=function(t,e){for(var i=e[t],s="",n=[],o=0;o<i.length;o++)"string"==typeof rule?s=i[o]:i[o].describe?n.push(i[o].describe()):i[o][1]&&i[o][1].describe&&n.push(i[o][1].describe());return"Property: "+t+", "+s+" \nExpected value: \n - "+n.join("\n - ")},dhtmlx.assert_enabled()&&(dhtmlx.assert_rule_color=function(t){return"string"!=typeof t?!1:0!==t.indexOf("#")?!1:""!==t.substr(1).replace(/[0-9A-F]/gi,"")?!1:!0},dhtmlx.assert_rule_color.describe=function(){return"{String} Value must start from # and contain hexadecimal code of color"},dhtmlx.assert_rule_template=function(t){return"function"==typeof t?!0:"string"==typeof t?!0:!1},dhtmlx.assert_rule_template.describe=function(){return"{Function},{String} Value must be a function which accepts data object and return text string, or a sting with optional template markers"},dhtmlx.assert_rule_boolean=function(t){return"boolean"==typeof t?!0:!1},dhtmlx.assert_rule_boolean.describe=function(){return"{Boolean} true or false"},dhtmlx.assert_rule_object=function(t){return"object"==typeof t?!0:!1},dhtmlx.assert_rule_object.describe=function(){return"{Object} Configuration object"},dhtmlx.assert_rule_string=function(t){return"string"==typeof t?!0:!1},dhtmlx.assert_rule_string.describe=function(){return"{String} Plain string"},dhtmlx.assert_rule_htmlpt=function(t){return!!dhtmlx.toNode(t)},dhtmlx.assert_rule_htmlpt.describe=function(){return"{Object},{String} HTML node or ID of HTML Node"},dhtmlx.assert_rule_notdocumented=function(){return!1},dhtmlx.assert_rule_notdocumented.describe=function(){return"This options wasn't documented"},dhtmlx.assert_rule_key=function(t){var e=function(e){return t[e]};return e.describe=function(){var e=[];for(var i in t)e.push(i);return"{String} can take one of next values: "+e.join(", ")},e},dhtmlx.assert_rule_dimension=function(t){return 1*t==t&&!isNaN(t)&&t>=0?!0:!1},dhtmlx.assert_rule_dimension.describe=function(){return"{Integer} value must be a positive number"},dhtmlx.assert_rule_number=function(t){return"number"==typeof t?!0:!1},dhtmlx.assert_rule_number.describe=function(){return"{Integer} value must be a number"},dhtmlx.assert_rule_function=function(t){return"function"==typeof t?!0:!1},dhtmlx.assert_rule_function.describe=function(){return"{Function} value must be a custom function"},dhtmlx.assert_rule_any=function(){return!0},dhtmlx.assert_rule_any.describe=function(){return"Any value"},dhtmlx.assert_rule_mix=function(t,e){var i=function(i){return t(i)||e(i)?!0:!1};return i.describe=function(){return t.describe()},i}),dhtmlx.version="3.0",dhtmlx.codebase="./",dhtmlx.copy=function(t){var e=dhtmlx.copy._function;return e.prototype=t,new e},dhtmlx.copy._function=function(){},dhtmlx.extend=function(t,e){for(var i in e)t[i]=e[i];return dhtmlx.assert_enabled()&&e._assert&&(t._assert(),t._assert=null),dhtmlx.assert(t,"Invalid nesting target"),dhtmlx.assert(e,"Invalid nesting source"),e._init&&t._init(),t},dhtmlx.proto_extend=function(){for(var t=arguments,e=t[0],i=[],s=t.length-1;s>0;s--){"function"==typeof t[s]&&(t[s]=t[s].prototype);for(var n in t[s])"_init"==n?i.push(t[s][n]):e[n]||(e[n]=t[s][n])}t[0]._init&&i.push(t[0]._init),e._init=function(){for(var t=0;t<i.length;t++)i[t].apply(this,arguments)},e.base=t[1];var o=function(t){this._init(t),this._parseSettings&&this._parseSettings(t,this.defaults)};return o.prototype=e,e=t=null,o},dhtmlx.bind=function(t,e){return function(){return t.apply(e,arguments)}},dhtmlx.require=function(t){dhtmlx._modules[t]||(dhtmlx.assert(dhtmlx.ajax,"load module is required"),dhtmlx.exec(dhtmlx.ajax().sync().get(dhtmlx.codebase+t).responseText),dhtmlx._modules[t]=!0)},dhtmlx._modules={},dhtmlx.exec=function(t){window.execScript?window.execScript(t):window.eval(t)},dhtmlx.methodPush=function(t,e){return function(){var i=!1;return i=t[e].apply(t,arguments)}},dhtmlx.isNotDefined=function(t){return"undefined"==typeof t},dhtmlx.delay=function(t,e,i,s){setTimeout(function(){var s=t.apply(e,i);return t=e=i=null,s},s||1)},dhtmlx.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed},dhtmlx.toNode=function(t){return"string"==typeof t?document.getElementById(t):t},dhtmlx.toArray=function(t){return dhtmlx.extend(t||[],dhtmlx.PowerArray)},dhtmlx.toFunctor=function(str){return"string"==typeof str?eval(str):str},dhtmlx._events={},dhtmlx.event=function(t,e,i,s){t=dhtmlx.toNode(t);var n=dhtmlx.uid();return dhtmlx._events[n]=[t,e,i],s&&(i=dhtmlx.bind(i,s)),t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i),n},dhtmlx.eventRemove=function(t){if(t){dhtmlx.assert(this._events[t],"Removing non-existing event");var e=dhtmlx._events[t];e[0].removeEventListener?e[0].removeEventListener(e[1],e[2],!1):e[0].detachEvent&&e[0].detachEvent("on"+e[1],e[2]),delete this._events[t]}},dhtmlx.log=function(t,e,i){window.console&&console.log&&(t=t.toLowerCase(),window.console[t]?window.console[t](e||"unknown error"):window.console.log(t+": "+e),i&&window.console.log(i))},dhtmlx.log_full_time=function(t){dhtmlx._start_time_log=new Date,dhtmlx.log("Info","Timing start ["+t+"]"),window.setTimeout(function(){var e=new Date;dhtmlx.log("Info","Timing end ["+t+"]:"+(e.valueOf()-dhtmlx._start_time_log.valueOf())/1e3+"s")},1)},dhtmlx.log_time=function(t){var e="_start_time_log"+t;if(dhtmlx[e]){var i=new Date;dhtmlx.log("Info","Timing end ["+t+"]:"+(i.valueOf()-dhtmlx[e].valueOf())/1e3+"s"),dhtmlx[e]=null}else dhtmlx[e]=new Date,dhtmlx.log("Info","Timing start ["+t+"]")},dhtmlx.error=function(t,e){dhtmlx.log("error",t,e)},dhtmlx.EventSystem={_init:function(){this._events={},this._handlers={},this._map={}},block:function(){this._events._block=!0},unblock:function(){this._events._block=!1},mapEvent:function(t){dhtmlx.extend(this._map,t)},callEvent:function(t,e){if(this._events._block)return!0;t=t.toLowerCase(),dhtmlx.assert_event_call(this,t,e);var i=this._events[t.toLowerCase()],s=!0;if(dhtmlx.debug&&dhtmlx.log("info","["+this.name+"] event:"+t,e),i)for(var n=0;n<i.length;n++)i[n].apply(this,e||[])===!1&&(s=!1);return this._map[t]&&!this._map[t].callEvent(t,e)&&(s=!1),s},attachEvent:function(t,e,i){t=t.toLowerCase(),dhtmlx.assert_event_attach(this,t),i=i||dhtmlx.uid(),e=dhtmlx.toFunctor(e);var s=this._events[t]||dhtmlx.toArray();return s.push(e),this._events[t]=s,this._handlers[i]={f:e,t:t},i},detachEvent:function(t){if(this._handlers[t]){var e=this._handlers[t].t,i=this._handlers[t].f,s=this._events[e];s.remove(i),delete this._handlers[t]}}},dhtmlx.PowerArray={removeAt:function(t,e){t>=0&&this.splice(t,e||1)},remove:function(t){this.removeAt(this.find(t))},insertAt:function(t,e){if(e||0===e){var i=this.splice(e,this.length-e);this[e]=t,this.push.apply(this,i)}else this.push(t)},find:function(t){for(i=0;i<this.length;i++)if(t==this[i])return i;return-1},each:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])},map:function(t,e){for(var i=0;i<this.length;i++)this[i]=t.call(e||this,this[i]);return this}},dhtmlx.env={},-1!=navigator.userAgent.indexOf("Opera")?dhtmlx._isOpera=!0:(dhtmlx._isIE=!!document.all,dhtmlx._isFF=!document.all,dhtmlx._isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),-1!=navigator.appVersion.indexOf("MSIE 8.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=8),-1!=navigator.appVersion.indexOf("MSIE 9.0")&&"BackCompat"!=document.compatMode&&(dhtmlx._isIE=9)),dhtmlx.env={},function(){dhtmlx.env.transform=!1,dhtmlx.env.transition=!1;var t={};t.names=["transform","transition"],t.transform=["transform","WebkitTransform","MozTransform","oTransform","msTransform"],t.transition=["transition","WebkitTransition","MozTransition","oTransition"];for(var e=document.createElement("DIV"),i=0;i<t.names.length;i++)for(;p=t[t.names[i]].pop();)"undefined"!=typeof e.style[p]&&(dhtmlx.env[t.names[i]]=!0)}(),dhtmlx.env.transform_prefix=function(){var t;return dhtmlx._isOpera?t="-o-":(t="",dhtmlx._isFF&&(t="-moz-"),dhtmlx._isWebKit&&(t="-webkit-")),t}(),dhtmlx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),dhtmlx.zIndex={drag:1e4},dhtmlx.html={create:function(t,e,i){e=e||{};var s=document.createElement(t);for(var n in e)s.setAttribute(n,e[n]);return e.style&&(s.style.cssText=e.style),e["class"]&&(s.className=e["class"]),i&&(s.innerHTML=i),s},getValue:function(t){return t=dhtmlx.toNode(t),t?dhtmlx.isNotDefined(t.value)?t.innerHTML:t.value:""},remove:function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.remove(t[e]);else t&&t.parentNode&&t.parentNode.removeChild(t)},insertBefore:function(t,e,i){t&&(e?e.parentNode.insertBefore(t,e):i.appendChild(t))},locate:function(t,e){t=t||event;for(var i=t.target||t.srcElement;i;){if(i.getAttribute){var s=i.getAttribute(e);if(s)return s}i=i.parentNode}return null},offset:function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),i=document.body,s=document.documentElement,n=window.pageYOffset||s.scrollTop||i.scrollTop,o=window.pageXOffset||s.scrollLeft||i.scrollLeft,l=s.clientTop||i.clientTop||0,r=s.clientLeft||i.clientLeft||0,a=e.top+n-l,h=e.left+o-r;return{y:Math.round(a),x:Math.round(h)}}for(var a=0,h=0;t;)a+=parseInt(t.offsetTop,10),h+=parseInt(t.offsetLeft,10),t=t.offsetParent;return{y:a,x:h}},pos:function(t){if(t=t||event,t.pageX||t.pageY)return{x:t.pageX,y:t.pageY};var e=dhtmlx._isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:t.clientX+e.scrollLeft-e.clientLeft,y:t.clientY+e.scrollTop-e.clientTop}},preventEvent:function(t){t&&t.preventDefault&&t.preventDefault(),dhtmlx.html.stopEvent(t)},stopEvent:function(t){return(t||event).cancelBubble=!0,!1},addCss:function(t,e){t.className+=" "+e},removeCss:function(t,e){t.className=t.className.replace(RegExp(e,"g"),"")}},function(){var t=document.getElementsByTagName("SCRIPT");dhtmlx.assert(t.length,"Can't locate codebase"),t.length&&(t=(t[t.length-1].getAttribute("src")||"").split("/"),t.splice(t.length-1,1),dhtmlx.codebase=t.slice(0,t.length).join("/")+"/")}(),dhtmlx.ui||(dhtmlx.ui={}),dhtmlx.Destruction={_init:function(){dhtmlx.destructors.push(this)},destructor:function(){this.destructor=function(){},this._htmlmap=null,this._htmlrows=null,this._html&&document.body.appendChild(this._html),this._html=null,this._obj&&(this._obj.innerHTML="",this._obj._htmlmap=null),this._obj=this._dataobj=null,this.data=null,this._events=this._handlers={},this.render&&(this.render=function(){})}},dhtmlx.destructors=[],dhtmlx.event(window,"unload",function(){if(dhtmlx.destructors){for(var t=0;t<dhtmlx.destructors.length;t++)dhtmlx.destructors[t].destructor();dhtmlx.destructors=[]}for(var e in dhtmlx._events){var i=dhtmlx._events[e];i[0].removeEventListener?i[0].removeEventListener(i[1],i[2],!1):i[0].detachEvent&&i[0].detachEvent("on"+i[1],i[2]),delete dhtmlx._events[e]}}),dhtmlx.ajax=function(t,e,i){if(0!==arguments.length){var s=new dhtmlx.ajax;i&&(s.master=i),s.get(t,null,e)}return this.getXHR?this:new dhtmlx.ajax},dhtmlx.ajax.prototype={getXHR:function(){return dhtmlx._isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(t,e,i){var s=this.getXHR();if("function"==typeof i&&(i=[i]),"object"==typeof e){var n=[];for(var o in e){var l=e[o];(null===l||l===dhtmlx.undefined)&&(l=""),n.push(o+"="+encodeURIComponent(l))}e=n.join("&")}e&&!this.post&&(t=t+(-1!=t.indexOf("?")?"&":"?")+e,e=null),s.open(this.post?"POST":"GET",t,!this._sync),this.post&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded");var r=this;return s.onreadystatechange=function(){if(!s.readyState||4==s.readyState){if(i&&r)for(var t=0;t<i.length;t++)i[t]&&i[t].call(r.master||r,s.responseText,s.responseXML,s);r.master=null,i=r=null}},s.send(e||null),s},get:function(t,e,i){return this.post=!1,this.send(t,e,i)},post:function(t,e,i){return this.post=!0,this.send(t,e,i)},sync:function(){return this._sync=!0,this}},dhtmlx.AtomDataLoader={_init:function(t){this.data={},t&&(this._settings.datatype=t.datatype||"json",this._after_init.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0,this._settings.url&&this.url_setter(this._settings.url),this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(t){return this._ready_for_data?(this.load(t,this._settings.datatype),t):t},data_setter:function(t){return this._ready_for_data?(this.parse(t,this._settings.datatype),!0):t},load:function(t,e){this.callEvent("onXLS",[]),"string"==typeof e?(this.data.driver=dhtmlx.DataDriver[e],e=arguments[2]):this.data.driver=dhtmlx.DataDriver.xml,dhtmlx.ajax(t,[this._onLoad,e],this)},parse:function(t,e){this.callEvent("onXLS",[]),this.data.driver=dhtmlx.DataDriver[e||"xml"],this._onLoad(t,null)},_onLoad:function(t,e){var i=this.data.driver,s=i.getRecords(i.toObject(t,e))[0];this.data=i?i.getDetails(s):t,this.callEvent("onXLE",[])},_check_data_feed:function(t){if(!this._settings.dataFeed||this._ignore_feed||!t)return!0;var e=this._settings.dataFeed;return"function"==typeof e?e.call(this,t.id||t,t):(e=e+(-1==e.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(t.id||t),this.callEvent("onXLS",[]),dhtmlx.ajax(e,function(t){this._ignore_feed=!0,this.setValues(dhtmlx.DataDriver.json.toObject(t)[0]),this._ignore_feed=!1,this.callEvent("onXLE",[])},this),!1)}},dhtmlx.DataDriver={},dhtmlx.DataDriver.json={toObject:function(data){return data||(data="[]"),"string"==typeof data?(eval("dhtmlx.temp="+data),dhtmlx.temp):data},getRecords:function(t){return!t||t instanceof Array?t:[t]},getDetails:function(t){return t},getInfo:function(t){return{_size:t.total_count||0,_from:t.pos||0,_key:t.dhx_security}}},dhtmlx.DataDriver.json_ext={toObject:function(data){if(data||(data="[]"),"string"==typeof data){var temp;eval("temp="+data),dhtmlx.temp=[];for(var header=temp.header,i=0;i<temp.data.length;i++){for(var item={},j=0;j<header.length;j++)"undefined"!=typeof temp.data[i][j]&&(item[header[j]]=temp.data[i][j]);dhtmlx.temp.push(item)}return dhtmlx.temp}return data},getRecords:function(t){return!t||t instanceof Array?t:[t]},getDetails:function(t){return t},getInfo:function(t){return{_size:t.total_count||0,_from:t.pos||0}}},dhtmlx.DataDriver.html={toObject:function(t){if("string"==typeof t){var e=null;return-1==t.indexOf("<")&&(e=dhtmlx.toNode(t)),e||(e=document.createElement("DIV"),e.innerHTML=t),e.getElementsByTagName(this.tag)}return t},getRecords:function(t){return t.tagName?t.childNodes:t},getDetails:function(t){return dhtmlx.DataDriver.xml.tagToObject(t)},getInfo:function(){return{_size:0,_from:0}},tag:"LI"},dhtmlx.DataDriver.jsarray={toObject:function(data){return"string"==typeof data?(eval("dhtmlx.temp="+data),dhtmlx.temp):data},getRecords:function(t){return t},getDetails:function(t){for(var e={},i=0;i<t.length;i++)e["data"+i]=t[i];return e},getInfo:function(){return{_size:0,_from:0}}},dhtmlx.DataDriver.csv={toObject:function(t){return t},getRecords:function(t){return t.split(this.row)},getDetails:function(t){t=this.stringToArray(t);for(var e={},i=0;i<t.length;i++)e["data"+i]=t[i];return e},getInfo:function(){return{_size:0,_from:0}},stringToArray:function(t){t=t.split(this.cell);for(var e=0;e<t.length;e++)t[e]=t[e].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return t},row:"\n",cell:","},dhtmlx.DataDriver.xml={toObject:function(t,e){return e&&(e=this.checkResponse(t,e))?e:"string"==typeof t?this.fromString(t):t},getRecords:function(t){return this.xpath(t,this.records)},records:"/*/item",getDetails:function(t){return this.tagToObject(t,{})},getInfo:function(t){return{_size:t.documentElement.getAttribute("total_count")||0,_from:t.documentElement.getAttribute("pos")||0,_key:t.documentElement.getAttribute("dhx_security")}},xpath:function(t,e){if(window.XPathResult){var i=t;-1==t.nodeName.indexOf("document")&&(t=t.ownerDocument);for(var s=[],n=t.evaluate(e,i,null,XPathResult.ANY_TYPE,null),o=n.iterateNext();o;)s.push(o),o=n.iterateNext();return s}var l=!0;try{"undefined"==typeof t.selectNodes&&(l=!1)}catch(r){}if(l)return t.selectNodes(e);var a=e.split("/").pop();return t.getElementsByTagName(a)},tagToObject:function(t,e){e=e||{};var i=!1,s=t.attributes;if(s&&s.length){for(var n=0;n<s.length;n++)e[s[n].name]=s[n].value;i=!0}for(var o=t.childNodes,n=0;n<o.length;n++)if(1==o[n].nodeType){var l=o[n].tagName;"undefined"!=typeof e[l]?(e[l]instanceof Array||(e[l]=[e[l]]),e[l].push(this.tagToObject(o[n],{}))):e[o[n].tagName]=this.tagToObject(o[n],{}),i=!0}return i?(e.value=this.nodeValue(t),e):this.nodeValue(t)},nodeValue:function(t){return t.firstChild?t.firstChild.wholeText||t.firstChild.data:""},fromString:function(t){if(window.DOMParser&&!dhtmlx._isIE)return(new DOMParser).parseFromString(t,"text/xml");if(window.ActiveXObject){var e=new ActiveXObject("Microsoft.xmlDOM");return e.loadXML(t),e}dhtmlx.error("Load from xml string is not supported")},checkResponse:function(t,e){if(e&&e.firstChild&&"parsererror"!=e.firstChild.tagName)return e;var i=this.fromString(t.replace(/^[\s]+/,""));return i?i:void dhtmlx.error("xml can't be parsed",t)}},dhtmlx.DataLoader={_init:function(t){t=t||"",this.name="DataStore",this.data=t.datastore||new dhtmlx.DataStore,this._readyHandler=this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._call_onready,this))},load:function(t){dhtmlx.AtomDataLoader.load.apply(this,arguments),this.data.feed||(this.data.feed=function(e,i){return this._load_count?this._load_count=[e,i]:(this._load_count=!0,void this.load(t+(-1==t.indexOf("?")?"?":"&")+"posStart="+e+"&count="+i,function(){var t=this._load_count;this._load_count=!1,"object"==typeof t&&this.data.feed.apply(this,t)}))})},_onLoad:function(t,e){this.data._parse(this.data.driver.toObject(t,e)),this.callEvent("onXLE",[]),this._readyHandler&&(this.data.detachEvent(this._readyHandler),this._readyHandler=null)},dataFeed_setter:function(t){return this.data.attachEvent("onBeforeFilter",dhtmlx.bind(function(t,e){if(this._settings.dataFeed){var i={};if(!t&&!i)return;if("function"==typeof t){if(!e)return;t(e,i)}else i={text:e};this.clearAll();var s=this._settings.dataFeed;if("function"==typeof s)return s.call(this,e,i);var n=[];for(var o in i)n.push("dhx_filter["+o+"]="+encodeURIComponent(i[o]));return this.load(s+(s.indexOf("?")<0?"?":"&")+n.join("&"),this._settings.datatype),!1}},this)),t},_call_onready:function(){if(this._settings.ready){var t=dhtmlx.toFunctor(this._settings.ready);t&&t.call&&t.apply(this,arguments)}}},dhtmlx.DataStore=function(){this.name="DataStore",dhtmlx.extend(this,dhtmlx.EventSystem),this.setDriver("xml"),this.pull={},this.order=dhtmlx.toArray()},dhtmlx.DataStore.prototype={setDriver:function(t){dhtmlx.assert(dhtmlx.DataDriver[t],"incorrect DataDriver"),this.driver=dhtmlx.DataDriver[t]},_parse:function(t){this.callEvent("onParse",[this.driver,t]),this._filter_order&&this.filter();var e=this.driver.getInfo(t);e._key&&(dhtmlx.security_key=e._key);var i=this.driver.getRecords(t),s=1*(e._from||0);0===s&&this.order[0]&&(s=this.order.length);for(var n=0,o=0;o<i.length;o++){var l=this.driver.getDetails(i[o]),r=this.id(l);this.pull[r]||(this.order[n+s]=r,n++),this.pull[r]=l,this.extraParser&&this.extraParser(l),this._scheme&&(this._scheme.$init?this._scheme.$update(l):this._scheme.$update&&this._scheme.$update(l))}for(var o=0;o<e._size;o++)if(!this.order[o]){var r=dhtmlx.uid(),l={id:r,$template:"loading"};this.pull[r]=l,this.order[o]=r}this.callEvent("onStoreLoad",[this.driver,t]),this.refresh()},id:function(t){return t.id||(t.id=dhtmlx.uid())},changeId:function(t,e){dhtmlx.assert(this.pull[t],"Can't change id, for non existing item: "+t),this.pull[e]=this.pull[t],this.pull[e].id=e,this.order[this.order.find(t)]=e,this._filter_order&&(this._filter_order[this._filter_order.find(t)]=e),this.callEvent("onIdChange",[t,e]),this._render_change_id&&this._render_change_id(t,e)},get:function(t){return this.item(t)},set:function(t,e){return this.update(t,e)},item:function(t){return this.pull[t]},update:function(t,e){return this._scheme&&this._scheme.$update&&this._scheme.$update(e),this.callEvent("onBeforeUpdate",[t,e])===!1?!1:(this.pull[t]=e,void this.refresh(t))},refresh:function(t){this._skip_refresh||(t?this.callEvent("onStoreUpdated",[t,this.pull[t],"update"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(t){this._skip_refresh=!0,t.call(this),this._skip_refresh=!1},getRange:function(t,e){if(t=t?this.indexById(t):this.startOffset||0,e?e=this.indexById(e):(e=Math.min(this.endOffset||1/0,this.dataCount()-1),0>e&&(e=0)),t>e){var i=e;e=t,t=i}return this.getIndexRange(t,e)},getIndexRange:function(t,e){e=Math.min(e||1/0,this.dataCount()-1);for(var i=dhtmlx.toArray(),s=t||0;e>=s;s++)i.push(this.item(this.order[s]));return i},dataCount:function(){return this.order.length},exists:function(t){return!!this.pull[t]},move:function(t,e){if(0>t||0>e)return void dhtmlx.error("DataStore::move","Incorrect indexes");var i=this.idByIndex(t),s=this.item(i);this.order.removeAt(t),this.order.insertAt(i,Math.min(this.order.length,e)),this.callEvent("onStoreUpdated",[i,s,"move"])},scheme:function(t){this._scheme=t},sync:function(t,e,i){"function"!=typeof e&&(i=e,e=null),dhtmlx.debug_bind&&(this.debug_sync_master=t,dhtmlx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id));var s=t;"DataStore"!=t.name&&(t=t.data);var n=dhtmlx.bind(function(s,n,o){("update"!=o||e)&&(s=null),s||(this.order=dhtmlx.toArray([].concat(t.order)),this._filter_order=null,this.pull=t.pull,e&&this.silent(e),this._on_sync&&this._on_sync()),dhtmlx.debug_bind&&dhtmlx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id),i?i=!1:this.refresh(s)},this);t.attachEvent("onStoreUpdated",n),this.feed=function(t,e){s.loadNext(e,t)},n()},add:function(t,e){if(this._scheme){t=t||{};for(var i in this._scheme)t[i]=t[i]||this._scheme[i];this._scheme&&(this._scheme.$init?this._scheme.$update(t):this._scheme.$update&&this._scheme.$update(t))}var s=this.id(t),n=this.dataCount();if((dhtmlx.isNotDefined(e)||0>e)&&(e=n),e>n&&(dhtmlx.log("Warning","DataStore:add","Index of out of bounds"),e=Math.min(this.order.length,e)),this.callEvent("onBeforeAdd",[s,t,e])===!1)return!1;if(this.exists(s))return dhtmlx.error("Not unique ID");if(this.pull[s]=t,this.order.insertAt(s,e),this._filter_order){var o=this._filter_order.length;!e&&this.order.length&&(o=0),this._filter_order.insertAt(s,o)}return this.callEvent("onafterAdd",[s,e]),this.callEvent("onStoreUpdated",[s,t,"add"]),s},remove:function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.remove(t[e]);else{if(this.callEvent("onBeforeDelete",[t])===!1)return!1;if(!this.exists(t))return dhtmlx.error("Not existing ID",t);var i=this.item(t);this.order.remove(t),this._filter_order&&this._filter_order.remove(t),delete this.pull[t],this.callEvent("onafterdelete",[t]),this.callEvent("onStoreUpdated",[t,i,"delete"])}},clearAll:function(){this.pull={},this.order=dhtmlx.toArray(),this.feed=null,this._filter_order=null,this.callEvent("onClearAll",[]),this.refresh()},idByIndex:function(t){return(t>=this.order.length||0>t)&&dhtmlx.log("Warning","DataStore::idByIndex Incorrect index"),this.order[t]},indexById:function(t){var e=this.order.find(t);return e},next:function(t,e){return this.order[this.indexById(t)+(e||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(t,e){return this.order[this.indexById(t)-(e||1)]},sort:function(t,e,i){var s=t;"function"==typeof t?s={as:t,dir:e}:"string"==typeof t&&(s={by:t,dir:e,as:i});var n=[s.by,s.dir,s.as];if(this.callEvent("onbeforesort",n)){if(this.order.length){var o=dhtmlx.sort.create(s),l=this.getRange(this.first(),this.last());l.sort(o),this.order=l.map(function(t){return this.id(t)},this)}this.refresh(),this.callEvent("onaftersort",n)}},filter:function(t,e){if(this.callEvent("onBeforeFilter",[t,e])&&(this._filter_order&&(this.order=this._filter_order,delete this._filter_order),this.order.length)){if(t){var i=t;e=e||"","string"==typeof t&&(t=dhtmlx.Template.fromHTML(t),e=e.toString().toLowerCase(),i=function(e,i){return-1!=t(e).toLowerCase().indexOf(i)});for(var s=dhtmlx.toArray(),n=0;n<this.order.length;n++){var o=this.order[n];i(this.item(o),e)&&s.push(o)}this._filter_order=this.order,this.order=s}this.refresh(),this.callEvent("onAfterFilter",[])}},each:function(t,e){for(var i=0;i<this.order.length;i++)t.call(e||this,this.item(this.order[i]))},provideApi:function(t,e){this.debug_bind_master=t,e&&this.mapEvent({onbeforesort:t,onaftersort:t,onbeforeadd:t,onafteradd:t,onbeforedelete:t,onafterdelete:t,onbeforeupdate:t});for(var i=["get","set","sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize"],s=0;s<i.length;s++)t[i[s]]=dhtmlx.methodPush(this,i[s]);dhtmlx.assert_enabled()&&this.assert_event(t)},serialize:function(){for(var t=this.order,e=[],i=0;i<t.length;i++)e.push(this.pull[t[i]]);return e}},dhtmlx.sort={create:function(t){return dhtmlx.sort.dir(t.dir,dhtmlx.sort.by(t.by,t.as))},as:{"int":function(t,e){return t=1*t,e=1*e,t>e?1:e>t?-1:0},string_strict:function(t,e){return t=t.toString(),e=e.toString(),t>e?1:e>t?-1:0},string:function(t,e){return t=t.toString().toLowerCase(),e=e.toString().toLowerCase(),t>e?1:e>t?-1:0}},by:function(t,e){return t?("function"!=typeof e&&(e=dhtmlx.sort.as[e||"string"]),t=dhtmlx.Template.fromHTML(t),function(i,s){return e(t(i),t(s))}):e},dir:function(t,e){return"asc"==t?e:function(t,i){return-1*e(t,i)}}},dhtmlx.KeyEvents={_init:function(){dhtmlx.event(this._obj,"keypress",this._onKeyPress,this)},_onKeyPress:function(t){t=t||event;var e=t.which||t.keyCode;this.callEvent(this._edit_id?"onEditKeyPress":"onKeyPress",[e,t.ctrlKey,t.shiftKey,t])}},dhtmlx.MouseEvents={_init:function(){this.on_click&&(dhtmlx.event(this._obj,"click",this._onClick,this),dhtmlx.event(this._obj,"contextmenu",this._onContext,this)),this.on_dblclick&&dhtmlx.event(this._obj,"dblclick",this._onDblClick,this),this.on_mouse_move&&(dhtmlx.event(this._obj,"mousemove",this._onMouse,this),dhtmlx.event(this._obj,dhtmlx._isIE?"mouseleave":"mouseout",this._onMouse,this))},_onClick:function(t){return this._mouseEvent(t,this.on_click,"ItemClick")},_onDblClick:function(t){return this._mouseEvent(t,this.on_dblclick,"ItemDblClick")},_onContext:function(t){var e=dhtmlx.html.locate(t,this._id);return e&&!this.callEvent("onBeforeContextMenu",[e,t])?dhtmlx.html.preventEvent(t):void 0},_onMouse:function(t){dhtmlx._isIE&&(t=document.createEventObject(event)),this._mouse_move_timer&&window.clearTimeout(this._mouse_move_timer),this.callEvent("onMouseMoving",[t]),this._mouse_move_timer=window.setTimeout(dhtmlx.bind(function(){"mousemove"==t.type?this._onMouseMove(t):this._onMouseOut(t)},this),500)},_onMouseMove:function(t){this._mouseEvent(t,this.on_mouse_move,"MouseMove")||this.callEvent("onMouseOut",[t||event])},_onMouseOut:function(t){this.callEvent("onMouseOut",[t||event])},_mouseEvent:function(t,e,i){t=t||event;for(var s=t.target||t.srcElement,n="",o=null,l=!1;s&&s.parentNode;){if(!l&&s.getAttribute&&(o=s.getAttribute(this._id))){if(s.getAttribute("userdata")&&this.callEvent("onLocateData",[o,s]),!this.callEvent("on"+i,[o,t,s]))return;l=!0}if(n=s.className,n&&(n=n.split(" "),n=n[0]||n[1],e[n]))return e[n].call(this,t,o||dhtmlx.html.locate(t,this._id),s);s=s.parentNode}return l}},dhtmlx.Settings={_init:function(){this._settings=this.config={}},define:function(t,e){return"object"==typeof t?this._parseSeetingColl(t):this._define(t,e)},_define:function(t,e){dhtmlx.assert_settings.call(this,t,e);var i=this[t+"_setter"];return this._settings[t]=i?i.call(this,e):e},_parseSeetingColl:function(t){if(t)for(var e in t)this._define(e,t[e])
},_parseSettings:function(t,e){var i=dhtmlx.extend({},e);"object"!=typeof t||t.tagName||dhtmlx.extend(i,t),this._parseSeetingColl(i)},_mergeSettings:function(t,e){for(var i in e)switch(typeof t[i]){case"object":t[i]=this._mergeSettings(t[i]||{},e[i]);break;case"undefined":t[i]=e[i]}return t},_parseContainer:function(t,e,i){"object"!=typeof t||t.tagName||(t=t.container),this._obj=this.$view=dhtmlx.toNode(t),!this._obj&&i&&(this._obj=i(t)),dhtmlx.assert(this._obj,"Incorrect html container"),this._obj.className+=" "+e,this._obj.onselectstart=function(){return!1},this._dataobj=this._obj},_set_type:function(t){return"object"==typeof t?this.type_setter(t):(dhtmlx.assert(this.types,"RenderStack :: Types are not defined"),dhtmlx.assert(this.types[t],"RenderStack :: Inccorect type name",t),this.type=dhtmlx.extend({},this.types[t]),void this.customize())},customize:function(t){t&&dhtmlx.extend(this.type,t),this.type._item_start=dhtmlx.Template.fromHTML(this.template_item_start(this.type)),this.type._item_end=this.template_item_end(this.type),this.render()},type_setter:function(t){return this._set_type("object"==typeof t?dhtmlx.Type.add(this,t):t),t},template_setter:function(t){return this.type_setter({template:t})},css_setter:function(t){return this._obj.className+=" "+t,t}},dhtmlx.Template={_cache:{},empty:function(){return""},setter:function(t){return dhtmlx.Template.fromHTML(t)},obj_setter:function(t){var e=dhtmlx.Template.setter(t),i=this;return function(){return e.apply(i,arguments)}},fromHTML:function(t){return"function"==typeof t?t:this._cache[t]?this._cache[t]:(t=(t||"").toString(),t=t.replace(/[\r\n]+/g,"\\n"),t=t.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"'),t=t.replace(/\{common\.([^}\(]*)\}/g,'"+common.$1+"'),t=t.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1(obj):"")+"'),t=t.replace(/\{obj\.([^}]*)\}/g,'"+obj.$1+"'),t=t.replace(/#([a-z0-9_]+)#/gi,'"+obj.$1+"'),t=t.replace(/\{obj\}/g,'"+obj+"'),t=t.replace(/\{-obj/g,"{obj"),t=t.replace(/\{-common/g,"{common"),t='return "'+t+'";',this._cache[t]=Function("obj","common",t))}},dhtmlx.Type={add:function(t,e){!t.types&&t.prototype.types&&(t=t.prototype),dhtmlx.assert_enabled()&&this.assert_event(e);var i=e.name||"default";return this._template(e),this._template(e,"edit"),this._template(e,"loading"),t.types[i]=dhtmlx.extend(dhtmlx.extend({},t.types[i]||this._default),e),i},_default:{css:"default",template:function(){return""},template_edit:function(){return""},template_loading:function(){return"..."},width:150,height:80,margin:5,padding:0},_template:function(t,e){e="template"+(e?"_"+e:"");var i=t[e];if(i&&"string"==typeof i){if(-1!=i.indexOf("->"))switch(i=i.split("->"),i[0]){case"html":i=dhtmlx.html.getValue(i[1]).replace(/\"/g,'\\"');break;case"http":i=(new dhtmlx.ajax).sync().get(i[1],{uid:(new Date).valueOf()}).responseText}t[e]=dhtmlx.Template.fromHTML(i)}}},dhtmlx.SingleRender={_init:function(){},_toHTML:function(t){return this.type._item_start(t,this.type)+this.type.template(t,this.type)+this.type._item_end},render:function(){(!this.callEvent||this.callEvent("onBeforeRender",[this.data]))&&(this.data&&(this._dataobj.innerHTML=this._toHTML(this.data)),this.callEvent&&this.callEvent("onAfterRender",[]))}},dhtmlx.ui.Tooltip=function(t){this.name="Tooltip",this.version="3.0",dhtmlx.assert_enabled()&&this._assert(),"string"==typeof t&&(t={template:t}),dhtmlx.extend(this,dhtmlx.Settings),dhtmlx.extend(this,dhtmlx.SingleRender),this._parseSettings(t,{type:"default",dy:0,dx:20}),this._dataobj=this._obj=document.createElement("DIV"),this._obj.className="dhx_tooltip",dhtmlx.html.insertBefore(this._obj,document.body.firstChild)},dhtmlx.ui.Tooltip.prototype={show:function(t,e){this._disabled||(this.data!=t&&(this.data=t,this.render(t)),this._obj.style.top=e.y+this._settings.dy+"px",this._obj.style.left=e.x+this._settings.dx+"px",this._obj.style.display="block")},hide:function(){this.data=null,this._obj.style.display="none"},disable:function(){this._disabled=!0},enable:function(){this._disabled=!1},types:{"default":dhtmlx.Template.fromHTML("{obj.id}")},template_item_start:dhtmlx.Template.empty,template_item_end:dhtmlx.Template.empty},dhtmlx.AutoTooltip={tooltip_setter:function(t){var e=new dhtmlx.ui.Tooltip(t);return this.attachEvent("onMouseMove",function(t,i){e.show(this.get(t),dhtmlx.html.pos(i))}),this.attachEvent("onMouseOut",function(){e.hide()}),this.attachEvent("onMouseMoving",function(){e.hide()}),e}},dhtmlx.compat=function(t,e){dhtmlx.compat[t]&&dhtmlx.compat[t](e)},function(){if(!window.dhtmlxError){var t=function(){};window.dhtmlxError={catchError:t,throwError:t},window.convertStringToBoolean=function(t){return!!t},window.dhtmlxEventable=function(t){dhtmlx.extend(t,dhtmlx.EventSystem)};var e={getXMLTopNode:function(){},doXPath:function(t){return dhtmlx.DataDriver.xml.xpath(this.xml,t)},xmlDoc:{responseXML:!0}};dhtmlx.compat.dataProcessor=function(t){var i="_sendData",s="_in_progress",n="_tMode",o="_waitMode";t[i]=function(t,i){if(t){if(i&&(this[s][i]=(new Date).valueOf()),!this.callEvent("onBeforeDataSending",i?[i,this.getState(i)]:[]))return!1;var l=this,r=this.serverProcessor;"POST"!=this[n]?dhtmlx.ajax().get(r+(-1!=r.indexOf("?")?"&":"?")+this.serialize(t,i),"",function(t,i){e.xml=dhtmlx.DataDriver.xml.checkResponse(t,i),l.afterUpdate(l,null,null,null,e)}):dhtmlx.ajax().post(r,this.serialize(t,i),function(t,i){e.xml=dhtmlx.DataDriver.xml.checkResponse(t,i),l.afterUpdate(l,null,null,null,e)}),this[o]++}}}}}(),dhtmlx.attaches||(dhtmlx.attaches={}),dhtmlx.attaches.attachAbstract=function(t,e){var i=document.createElement("DIV");i.id="CustomObject_"+dhtmlx.uid(),i.style.width="100%",i.style.height="100%",i.cmp="grid",document.body.appendChild(i),this.attachObject(i.id),e.container=i.id;var s=this.vs[this.av];s.grid=new window[t](e),s.gridId=i.id,s.gridObj=i,s.grid.setSizes=function(){this.resize?this.resize():this.render()};var n="_viewRestore";return this.vs[this[n]()].grid},dhtmlx.attaches.attachDataView=function(t){return this.attachAbstract("dhtmlXDataView",t)},dhtmlx.attaches.attachChart=function(t){return this.attachAbstract("dhtmlXChart",t)},dhtmlx.compat.layout=function(){},dataProcessor.prototype={setTransactionMode:function(t,e){this._tMode=t,this._tSend=e},escape:function(t){return this._utf?encodeURIComponent(t):escape(t)},enableUTFencoding:function(t){this._utf=convertStringToBoolean(t)},setDataColumns:function(t){this._columns="string"==typeof t?t.split(","):t},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(t){this._endnm=convertStringToBoolean(t)},enablePartialDataSend:function(t){this._changed=convertStringToBoolean(t)},setUpdateMode:function(t,e){this.autoUpdate="cell"==t,this.updateMode=t,this.dnd=e},ignore:function(t,e){this._silent_mode=!0,t.call(e||window),this._silent_mode=!1},setUpdated:function(t,e,i){if(!this._silent_mode){var s=this.findRow(t);i=i||"updated";var n=this.obj.getUserData(t,this.action_param);n&&"updated"==i&&(i=n),e?(this.set_invalid(t,!1),this.updatedRows[s]=t,this.obj.setUserData(t,this.action_param,i),this._in_progress[t]&&(this._in_progress[t]="wait")):this.is_invalid(t)||(this.updatedRows.splice(s,1),this.obj.setUserData(t,this.action_param,"")),e||this._clearUpdateFlag(t),this.markRow(t,e,i),e&&this.autoUpdate&&this.sendData(t)}},_clearUpdateFlag:function(){},markRow:function(t,e,i){var s="",n=this.is_invalid(t);if(n&&(s=this.styles[n],e=!0),this.callEvent("onRowMark",[t,e,i,n])&&(s=this.styles[e?i:"clear"]+s,this.obj[this._methods[0]](t,s),n&&n.details)){s+=this.styles[n+"_cell"];for(var o=0;o<n.details.length;o++)n.details[o]&&this.obj[this._methods[1]](t,o,s)}},getState:function(t){return this.obj.getUserData(t,this.action_param)},is_invalid:function(t){return this._invalid[t]},set_invalid:function(t,e,i){i&&(e={value:e,details:i,toString:function(){return this.value.toString()}}),this._invalid[t]=e},checkBeforeUpdate:function(){return!0},sendData:function(t){return!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2?(this.obj.editStop&&this.obj.editStop(),"undefined"==typeof t||this._tSend?this.sendAllData():this._in_progress[t]?!1:(this.messages=[],!this.checkBeforeUpdate(t)&&this.callEvent("onValidationError",[t,this.messages])?!1:void this._beforeSendData(this._getRowData(t),t))):void 0},_beforeSendData:function(t,e){return this.callEvent("onBeforeUpdate",[e,this.getState(e),t])?void this._sendData(t,e):!1},serialize:function(t,e){if("string"==typeof t)return t;if("undefined"!=typeof e)return this.serialize_one(t,"");var i=[],s=[];for(var n in t)t.hasOwnProperty(n)&&(i.push(this.serialize_one(t[n],n+this.post_delim)),s.push(n));return i.push("ids="+this.escape(s.join(","))),dhtmlx.security_key&&i.push("dhx_security="+dhtmlx.security_key),i.join("&")},serialize_one:function(t,e){if("string"==typeof t)return t;var i=[];for(var s in t)t.hasOwnProperty(s)&&i.push(this.escape((e||"")+s)+"="+this.escape(t[s]));return i.join("&")},_sendData:function(t,e){if(t){if(!this.callEvent("onBeforeDataSending",e?[e,this.getState(e),t]:[null,null,t]))return!1;e&&(this._in_progress[e]=(new Date).valueOf());var i=new dtmlXMLLoaderObject(this.afterUpdate,this,!0),s=this.serverProcessor+(this._user?getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):"");"POST"!=this._tMode?i.loadXML(s+(-1!=s.indexOf("?")?"&":"?")+this.serialize(t,e)):i.loadXML(s,!0,this.serialize(t,e)),this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var t=!0,e=0;e<this.updatedRows.length;e++)t&=this.checkBeforeUpdate(this.updatedRows[e]);if(!t&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(var e=0;e<this.updatedRows.length;e++)if(!this._in_progress[this.updatedRows[e]]){if(this.is_invalid(this.updatedRows[e]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[e]),this.updatedRows[e]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(){for(var t={},e=!1,i=0;i<this.updatedRows.length;i++){var s=this.updatedRows[i];this._in_progress[s]||this.is_invalid(s)||this.callEvent("onBeforeUpdate",[s,this.getState(s)])&&(t[s]=this._getRowData(s,s+this.post_delim),e=!0,this._in_progress[s]=(new Date).valueOf())}return e?t:null},setVerificator:function(t,e){this.mandatoryFields[t]=e||function(t){return""!=t}},clearVerificator:function(t){this.mandatoryFields[t]=!1},findRow:function(t){var e=0;for(e=0;e<this.updatedRows.length&&t!=this.updatedRows[e];e++);return e},defineAction:function(t,e){this._uActions||(this._uActions=[]),this._uActions[t]=e},afterUpdateCallback:function(t,e,i,s){var n=t,o="error"!=i&&"invalid"!=i;if(o||this.set_invalid(t,i),this._uActions&&this._uActions[i]&&!this._uActions[i](s))return delete this._in_progress[n];"wait"!=this._in_progress[n]&&this.setUpdated(t,!1);var l=t;switch(i){case"inserted":case"insert":e!=t&&(this.obj[this._methods[2]](t,e),t=e);break;case"delete":case"deleted":return this.obj.setUserData(t,this.action_param,"true_deleted"),this.obj[this._methods[3]](t),delete this._in_progress[n],this.callEvent("onAfterUpdate",[t,i,e,s])}"wait"!=this._in_progress[n]?(o&&this.obj.setUserData(t,this.action_param,""),delete this._in_progress[n]):(delete this._in_progress[n],this.setUpdated(e,!0,this.obj.getUserData(t,this.action_param))),this.callEvent("onAfterUpdate",[l,i,e,s])},afterUpdate:function(t,e,i,s,n){if(n.getXMLTopNode("data"),n.xmlDoc.responseXML){for(var o=n.doXPath("//data/action"),l=0;l<o.length;l++){var r=o[l],a=r.getAttribute("type"),h=r.getAttribute("sid"),d=r.getAttribute("tid");t.afterUpdateCallback(h,d,a,r)}t.finalizeUpdate()}},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(t){this.obj=t,this.obj._dp_init&&this.obj._dp_init(this)},setOnAfterUpdate:function(t){this.attachEvent("onAfterUpdate",t)},enableDebug:function(){},setOnBeforeUpdateHandler:function(t){this.attachEvent("onBeforeDataSending",t)},setAutoUpdate:function(t,e){t=t||2e3,this._user=e||(new Date).valueOf(),this._need_update=!1,this._loader=null,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(t,e,i,s){this.afterAutoUpdate(t,e,i,s)}),this.attachEvent("onFullSync",function(){this.fullSync()});var i=this;window.setInterval(function(){i.loadUpdate()},t)},afterAutoUpdate:function(t,e){return"collision"==e?(this._need_update=!0,!1):!0},fullSync:function(){return 1==this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(t,e){return this._update_busy?!1:(this._update_busy=!0,this._loader=this._loader||new dtmlXMLLoaderObject(!0),this._loader.async=!0,this._loader.waitCall=e,void this._loader.loadXML(t))},_v:function(t){return t.firstChild?t.firstChild.nodeValue:""},_a:function(t){for(var e=[],i=0;i<t.length;i++)e[i]=this._v(t[i]);return e},loadUpdate:function(){var t=this,e=this.obj.getUserData(0,"version"),i=this.serverProcessor+getUrlSymbol(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+e].join("&");i=i.replace("editing=true&",""),this.getUpdates(i,function(){var e=t._loader.doXPath("//userdata");t.obj.setUserData(0,"version",t._v(e[0]));var i=t._loader.doXPath("//update");if(i.length){t._silent_mode=!0;for(var s=0;s<i.length;s++){var n=i[s].getAttribute("status"),o=i[s].getAttribute("id"),l=i[s].getAttribute("parent");switch(n){case"inserted":t.callEvent("insertCallback",[i[s],o,l]);break;case"updated":t.callEvent("updateCallback",[i[s],o,l]);break;case"deleted":t.callEvent("deleteCallback",[i[s],o,l])}}t._silent_mode=!1}t._update_busy=!1,t=null})}},window.dhtmlXGridObject&&!dhtmlXGridObject.prototype._init_point_connector&&(dhtmlXGridObject.prototype._init_point_connector=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){this._con_f_used=[].concat(this._con_f_used),dhtmlXGridObject.prototype._con_f_used=[];var t=function(t){return t=t.replace(/(\?|\&)connector[^\f]*/g,""),t+(-1!=t.indexOf("?")?"&":"?")+"connector=true"+(this.hdr.rows.length>0?"&dhx_no_header=1":"")},e=function(e){return t.call(this,e)+(this._connector_sorting||"")+(this._connector_filter||"")},i=function(t,i,s){return this._connector_sorting="&dhx_sort["+i+"]="+s,e.call(this,t)},s=function(t,i,s){for(var n=[],o=0;o<i.length;o++)n[o]="dhx_filter["+i[o]+"]="+encodeURIComponent(s[o]);return this._connector_filter="&"+n.join("&"),e.call(this,t)};this.attachEvent("onCollectValues",function(t){return this._con_f_used[t]?"object"==typeof this._con_f_used[t]?this._con_f_used[t]:!1:!0}),this.attachEvent("onDynXLS",function(){return this.xmlFileUrl=e.call(this,this.xmlFileUrl),!0}),this.attachEvent("onBeforeSorting",function(t,e,s){if("connector"==e){var n=this;return this.clearAndLoad(i.call(this,this.xmlFileUrl,t,s),function(){n.setSortImgState(!0,t,s)}),!1}return!0}),this.attachEvent("onFilterStart",function(t,e){var i=this.getSortingState();if(this._con_f_used.length){var n=this;return this.clearAndLoad(s.call(this,this.xmlFileUrl,t,e)),i.length&&n.setSortImgState(!0,i[0],i[1]),!1}return!0}),this.attachEvent("onXLE",function(t,e,i,s){}),this._init_point_connector&&this._init_point_connector()},dhtmlXGridObject.prototype._con_f_used=[],dhtmlXGridObject.prototype._in_header_connector_text_filter=function(t,e){return this._con_f_used[e]||(this._con_f_used[e]=1),this._in_header_text_filter(t,e)},dhtmlXGridObject.prototype._in_header_connector_select_filter=function(t,e){return this._con_f_used[e]||(this._con_f_used[e]=2),this._in_header_select_filter(t,e)},dhtmlXGridObject.prototype.load_connector=dhtmlXGridObject.prototype.load,dhtmlXGridObject.prototype.load=function(){if(!this._colls_loaded&&this.cellType){for(var t=[],e=0;e<this.cellType.length;e++)(0==this.cellType[e].indexOf("co")||0==this.cellType[e].indexOf("clist")||2==this._con_f_used[e])&&t.push(e);t.length&&(arguments[0]+=(-1!=arguments[0].indexOf("?")?"&":"?")+"connector=true&dhx_colls="+t.join(","))}return this.load_connector.apply(this,arguments)},dhtmlXGridObject.prototype._parseHead_connector=dhtmlXGridObject.prototype._parseHead,dhtmlXGridObject.prototype._parseHead=function(){if(this._parseHead_connector.apply(this,arguments),!this._colls_loaded){for(var t=this.xmlLoader.doXPath("./coll_options",arguments[0]),e=0;e<t.length;e++){var i=t[e].getAttribute("for"),s=[],n=null;"combo"==this.cellType[i]?n=this.getColumnCombo(i):0==this.cellType[i].indexOf("co")&&(n=this.getCombo(i));for(var o=this.xmlLoader.doXPath("./item",t[e]),l=[],r=0;r<o.length;r++){var a=o[r].getAttribute("value");if(n){var h=o[r].getAttribute("label")||a;n.addOption?l.push([a,h]):n.put(a,h),s[s.length]=h}else s[s.length]=a}l.length?n&&n.addOption(l):s.length&&!n&&this.registerCList&&this.registerCList(1*i,s),this._con_f_used[1*i]&&(this._con_f_used[1*i]=s)}this._colls_loaded=!0}}),window.dataProcessor&&!dataProcessor.prototype.init_original&&(dataProcessor.prototype.init_original=dataProcessor.prototype.init,dataProcessor.prototype.init=function(t){this.init_original(t),t._dataprocessor=this,this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!=this.serverProcessor.indexOf("?")?"&":"?")+"editing=true"}),dhtmlxError.catchError("LoadXML",function(t,e,i){alert(i[0].responseText)}),dhtmlXCellObject.prototype.showView=function(t){if(this.conf.view==t)return!1;this._viewSave(this.conf.view),this._viewRestore(t),this._updateIdx(),this._adjustCont(),this.conf.view=t;var e="undefined"==typeof this.conf.views_loaded[this.conf.view];return this.conf.views_loaded[this.conf.view]=!0,e},dhtmlXCellObject.prototype.getViewName=function(){return this.conf.view},dhtmlXCellObject.prototype.unloadView=function(t){if(t==this.conf.view){var e=this.conf.unloading;return this.conf.unloading=!0,this.detachMenu(),this.detachToolbar(),this.detachStatusBar(),this.detachRibbon(),this._detachObject(null,!0),this.conf.unloading=e,void(this.conf.unloading||this._adjustCont(this._idd))}if(null!=this.views[t]){var i=this.views[t];for(var s in i.dataNodes)"function"==typeof i.dataNodes[s].unload&&i.dataNodes[s].unload(),i.dataNodes[s]=null,i.dataNodesCont[s]=null;"url"==i.dataType?null!=i.cellCont&&"null"!=i.cellCont[0]&&this._detachURLEvents(i.cellCont[0]):null!=i.dataObj&&("function"==typeof i.dataObj.unload?i.dataObj.unload():"function"==typeof i.dataObj.destructor&&i.dataObj.destructor(),i.dataObj=null),i=null,this._viewDelete(t),"undefined"!=typeof this.conf.views_loaded[t]&&delete this.conf.views_loaded[t]}},dhtmlXCellObject.prototype.getId=function(){return this._idd},dhtmlXCellObject.prototype.progressOn=function(){if(!this.conf.progress){this.conf.progress=!0;var t=document.createElement("DIV");t.className="dhx_cell_progress_bar",this.cell.appendChild(t);var e=document.createElement("DIV");e.className="dhx_cell_progress_img",this.cell.appendChild(e),t=e=null,this._updateIdx(),this._adjustProgress()}},dhtmlXCellObject.prototype.progressOff=function(){this.conf.progress&&(this.cell.childNodes[this.conf.idx.pr2].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr2]),this.cell.childNodes[this.conf.idx.pr1].parentNode.removeChild(this.cell.childNodes[this.conf.idx.pr1]),this.conf.progress=!1,this._updateIdx())},dhtmlXCellObject.prototype._adjustProgress=function(){if(null!=this.conf.idx.pr1){this.conf.pr||(this.conf.pr={});var t=this.cell.childNodes[this.conf.idx.pr1],e=this.cell.childNodes[this.conf.idx.pr2];this.conf.pr.ofs||(e.style.width=t.offsetWidth+"px",e.style.height=t.offsetHeight+"px",this.conf.pr.ofs={w:e.offsetWidth-e.clientWidth,h:e.offsetHeight-e.clientHeight}),e.style.width=t.offsetWidth-this.conf.pr.ofs.w+"px",e.style.height=t.offsetHeight-this.conf.pr.ofs.h+"px",t=e=null}},dhtmlXCellObject.prototype._showBorders=function(t){this.conf.borders||(this.conf.borders=!0,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css,this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!0]),t!==!0&&this._adjustCont(this._idd))},dhtmlXCellObject.prototype._hideBorders=function(t){this.conf.borders&&(this.conf.borders=!1,this.cell.childNodes[this.conf.idx.cont].className="dhx_cell_cont"+this.conf.css+" dhx_cell_cont_no_borders",this.conf.cells_cont=null,this._mtbUpdBorder(),this.callEvent("_onBorderChange",[!1]),t!==!0&&this._adjustCont(this._idd))},dhtmlXCellObject.prototype._getWidth=function(){return this.cell.offsetWidth},dhtmlXCellObject.prototype._getHeight=function(){return this.cell.offsetHeight},dhtmlXCellObject.prototype.showInnerScroll=function(){this.cell.childNodes[this.conf.idx.cont].style.overflow="auto"},dhtmlXCellObject.prototype._unload=function(){this.conf.unloading=!0,this.callEvent("_onCellUnload",[]),this.progressOff(),this.unloadView(this.conf.view),this.dataNodes=null,this.cell.parentNode.removeChild(this.cell),this.cell=null,window.dhx4._eventable(this,"clear");for(var t in this.views)this.unloadView(t);this.conf=null;for(var t in this)this[t]=null},dhtmlXCellObject.prototype.attachObject=function(t,e){if(!window.dhx4.s2b(e)||"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell||(e=!1),"string"==typeof t&&(t=document.getElementById(t)),t.parentNode==this.cell.childNodes[this.conf.idx.cont])return void(t=null);if(e){t.style.display="";var i=t.offsetWidth,s=t.offsetHeight}this._attachObject(t),this.dataType="obj",t.style.display="",t=null,e&&this._adjustByCont(i,s)},dhtmlXCellObject.prototype.appendObject=function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.parentNode==this.cell.childNodes[this.conf.idx.cont]?void(t=null):(this.conf.append_mode||(this.cell.childNodes[this.conf.idx.cont].style.overflow="auto",this.conf.append_mode=!0),this._attachObject(t,null,null,!0),this.dataType="obj",t.style.display="",void(t=null))},dhtmlXCellObject.prototype.detachObject=function(t,e){this._detachObject(null,t,e)},dhtmlXCellObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu},dhtmlXCellObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar},dhtmlXCellObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon},dhtmlXCellObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sb},dhtmlXCellObject.prototype.getAttachedObject=function(){return this.dataObj},dhtmlXCellObject.prototype.attachURL=function(t,e,i){1==i&&(i={});var s="undefined"!=typeof i&&0!=i&&null!=i;if(this.conf.url_data||(this.conf.url_data={}),this.conf.url_data.url=t,this.conf.url_data.ajax=1==e,this.conf.url_data.post_data=1==i?{}:i||null,1==e){var n=this;if(s){var o="";for(var l in i)o+="&"+encodeURIComponent(l)+"="+encodeURIComponent(i[l]);dhx4.ajax.post(t,o,function(t){n.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+t.xmlDoc.responseText+"</div>"),"function"==typeof n._doOnFrameContentLoaded&&n._doOnFrameContentLoaded(),n.dataType="url-ajax",n=t=null})}else dhx4.ajax.get(t,function(t){n.attachHTMLString("<div style='position:relative;width:100%;height:100%;overflow:auto;'>"+t.xmlDoc.responseText+"</div>"),"function"==typeof n._doOnFrameContentLoaded&&n._doOnFrameContentLoaded(),n.dataType="url-ajax",n=t=null})}else{if("url"==this.dataType)var r=this.getFrame();else{var r=document.createElement("IFRAME");r.frameBorder=0,r.border=0,r.style.width="100%",r.style.height="100%",r.style.position="relative",this._attachObject(r),this.dataType="url",this._attachURLEvents()}if(s){var a="undefined"==typeof this.conf.url_data.post_ifr;this.conf.url_data.post_ifr=!0,a&&this._attachURLEvents(),r.src="about:blank"}else r.src=t+(t.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime();r=null}r=null},dhtmlXCellObject.prototype.reloadURL=function(){("url"==this.dataType||"url-ajax"==this.dataType)&&null!=this.conf.url_data&&this.attachURL(this.conf.url_data.url,this.conf.url_data.ajax,this.conf.url_data.post_data)},dhtmlXCellObject.prototype.attachHTMLString=function(t){this._attachObject(null,null,t);for(var e=t.match(/<script[^>]*>[^\f]*?<\/script>/g)||[],i=0;i<e.length;i++){var s=e[i].replace(/<([\/]{0,1})script[^>]*>/gi,"");s&&(window.execScript?window.execScript(s):window.eval(s))}},dhtmlXCellObject.prototype.attachLayout=function(t){"dhx_skyblue"==this.conf.skin&&"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof dhtmlXWindowsCell,this instanceof dhtmlXLayoutCell&&this._hideBorders();var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),"undefined"!=typeof this._layoutMainInst&&(e._layoutMainInst=this._layoutMainInst),this instanceof window.dhtmlXLayoutCell,"undefined"!=typeof window.dhtmlXLayoutCell&&this instanceof dhtmlXLayoutCell&&(e._isParentCell=!0),"undefined"!=typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(e._ofs={t:-1}),"string"==typeof t&&(t={pattern:t}),"undefined"==typeof t.skin&&(t.skin=this.conf.skin),t.parent=e,this.dataType="layout",this.dataObj=new dhtmlXLayoutObject(t),this instanceof dhtmlXLayoutCell&&(this.dataObj.parentLayout=this.layout),e._layoutMainInst=null,t.parent=null,e=t=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachTree=function(t){var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),this.dataType="tree",this.dataObj=new dhtmlXTreeObject(e,"100%","100%",t||0),this.dataObj.setSkin(this.conf.skin),this.dataObj.allTree.childNodes[0].style.marginTop="2px",this.dataObj.allTree.childNodes[0].style.marginBottom="2px",e=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachGrid=function(){var t=document.createElement("DIV");return t.style.width="100%",t.style.height="100%",t.style.position="relative",t.style.overflow="hidden",this._attachObject(t),this.dataType="grid",this.dataObj=new dhtmlXGridObject(t),this.dataObj.setSkin(this.conf.skin),"dhx_skyblue"==this.conf.skin&&"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2),t=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachTabbar=function(t){"undefined"!=typeof window.dhtmlXLayoutCell&&this instanceof dhtmlXLayoutCell&&this._hideBorders(),"string"==typeof t?t={mode:t}:("object"!=typeof t||null==t)&&(t={});var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden","undefined"!=typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(e._ofs={t:-1}),this._attachObject(e),t.skin=this.conf.skin,t.parent=e,this.dataType="tabbar",this.dataObj=new dhtmlXTabBar(t),t.parent=e=null,t=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachAccordion=function(t){"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof dhtmlXWindowsCell||this._isCell&&this._hideBorders();var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",this._attachObject(e),"undefined"==typeof t&&(t={}),"undefined"==typeof t.skin&&(t.skin=this.conf.skin),t.parent=e,"undefined"!=typeof window.dhtmlXAccordionCell&&this instanceof window.dhtmlXAccordionCell&&(e._ofs={s:{first:-1},m:{first:4}}),this.dataType="acc",this.dataObj=new dhtmlXAccordion(t),t.obj=null,e=t=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachEditor=function(t){var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),("object"!=typeof t||null==t)&&(t={}),t.parent=e,this.dataType="editor",this.dataObj=new dhtmlXEditor(t),e=null,t.parent=null,t=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachDataView=function(t){var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),"undefined"==typeof t&&(t={}),e.id="DataViewObject_"+(new Date).getTime(),t.container=e.id,t.skin=this.conf.skin,this.dataType="dataview",this.dataObj=new dhtmlXDataView(t),this.dataObj.setSizes=function(){this.render()},e=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachScheduler=function(t,e,i,s){s=s||window.scheduler;var n=!1;if(i){var o=document.getElementById(i);o&&(n=!0)}if(!n){var l=i||'<div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div>',o=document.createElement("DIV");o.id="dhxSchedObj_"+(new Date).getTime(),o.style.width="100%",o.style.height="100%",o.style.position="relative",o.style.overflow="hidden",o.className="dhx_cal_container",o.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+l+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>'}return this._attachObject(o),this.dataType="scheduler",this.dataObj=s,this.dataObj.setSizes=function(){this.update_view()},s.init(o.id,t,e),o=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachForm=function(t){var e=document.createElement("DIV");return e.style.width="100%",e.style.height="100%",e.style.position="relative",window.dhtmlx&&dhtmlx.$customScroll?dhtmlx.CustomScroll.enable(e):e.style.overflow="auto",this._attachObject(e),this.dataType="form",this.dataObj=new dhtmlXForm(e,t),this.dataObj.setSkin(this.conf.skin),e=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachMap=function(t){var e=document.createElement("DIV");return e.id="GMapsObj_"+this._genStr(12),e.style.width="100%",e.style.height="100%",e.style.position="relative",e.style.overflow="hidden",this._attachObject(e),t||(t={center:new google.maps.LatLng(40.719837,-73.992348),zoom:11,mapTypeId:google.maps.MapTypeId.ROADMAP}),this.dataType="maps",this.dataObj=new google.maps.Map(e,t),this.dataObj.setSizes=function(){google.maps.event.trigger(this,"resize")},e=null,this.callEvent("_onContentAttach",[]),this.dataObj},dhtmlXCellObject.prototype.attachChart=function(t){var e=document.createElement("DIV");return e.id="dhxChartObj_"+window.dhx4.newId(),e.style.width="100%",e.style.height="100%",document.body.appendChild(e),this._attachObject(e),t.container=e.id,this.dataType="chart",this.dataObj=new dhtmlXChart(t),this.dataObj.setSizes||(this.dataObj.setSizes=function(){this.resize?this.resize():this.render()}),this.dataObj},dhtmlXCellObject.prototype.attachMenu=function(t){return this.dataNodes.menu?void 0:("undefined"==typeof t&&(t={}),"undefined"==typeof t.skin&&(t.skin=this.conf.skin),t.parent=this._attachObject("menu").firstChild,this.dataNodes.menu=new dhtmlXMenuObject(t),this._adjustCont(this._idd),t.parent=null,t=null,this.dataNodes.menu)},dhtmlXCellObject.prototype.detachMenu=function(){this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,delete this.dataNodes.menu,this._detachObject("menu"))},dhtmlXCellObject.prototype.showMenu=function(){this._mtbShowHide("menu","")},dhtmlXCellObject.prototype.hideMenu=function(){this._mtbShowHide("menu","none")},dhtmlXCellObject.prototype.attachToolbar=function(t){return null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar?("undefined"==typeof t?t={}:"string"==typeof t&&(t={skin:t}),"undefined"==typeof t.skin&&(t.skin=this.conf.skin),t.parent=this._attachObject("toolbar").firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(t),this._adjustCont(this._idd),this.dataNodes.toolbar._masterCell=this,this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell._adjustCont()
}),t.parent=null,t=null,this.dataNodes.toolbar):void 0},dhtmlXCellObject.prototype.detachToolbar=function(){this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,delete this.dataNodes.toolbar,this._detachObject("toolbar"))},dhtmlXCellObject.prototype.showToolbar=function(){this._mtbShowHide("toolbar","")},dhtmlXCellObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbar","none")},dhtmlXCellObject.prototype.attachRibbon=function(t){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){"undefined"==typeof t&&(t={}),"undefined"==typeof t.skin&&(t.skin=this.conf.skin),t.parent=this._attachObject("ribbon").firstChild,this.dataNodes.ribbon=new dhtmlXRibbon(t);var e=this;return this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){e._adjustCont(e._idd)}),this._adjustCont(),t.parent=null,t=null,this.dataNodes.ribbon}},dhtmlXCellObject.prototype.detachRibbon=function(){this.dataNodes.ribbon&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,delete this.dataNodes.ribbon,this._detachObject("ribbon"))},dhtmlXCellObject.prototype.showRibbon=function(){this._mtbShowHide("ribbon","")},dhtmlXCellObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbon","none")},dhtmlXCellObject.prototype.attachStatusBar=function(t){return this.dataNodes.sb?void 0:("dhx_skyblue"==this.conf.skin&&"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className+=" dhx_cell_statusbar_attached"),this.dataNodes.sb=this._attachObject("sb",t),this.dataNodes.sb.setText=function(t){this.childNodes[0].innerHTML=t},this.dataNodes.sb.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sb.onselectstart=function(){return!1},this.dataNodes.sb)},dhtmlXCellObject.prototype.detachStatusBar=function(){this.dataNodes.sb&&("dhx_skyblue"==this.conf.skin&&"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof dhtmlXWindowsCell&&(this.cell.childNodes[this.conf.idx.cont].className=this.cell.childNodes[this.conf.idx.cont].className.replace(/\s{0,}dhx_cell_statusbar_attached/,"")),this.dataNodes.sb.setText=this.dataNodes.sb.getText=this.dataNodes.sb.onselectstart=null,this.dataNodes.sb=null,delete this.dataNodes.sb,this._detachObject("sb"))},dhtmlXCellObject.prototype.showStatusBar=function(){this._mtbShowHide("sb","")},dhtmlXCellObject.prototype.hideStatusBar=function(){this._mtbShowHide("sb","none")},dhtmlXCellObject.prototype._mtbShowHide=function(t,e){this.dataNodes[t]&&(this.cell.childNodes[this.conf.idx[t]].style.display=e,this._adjustCont())},dhtmlXCellObject.prototype.getFrame=dhtmlXCellObject.prototype._getFrame=function(){return"url"!=this.dataType?null:this.cell.childNodes[this.conf.idx.cont].firstChild},dhtmlXCellObject.prototype._genStr=function(){return this._genStrId||(this._genStrId=(new Date).getTime()),this._genStrId++},dhtmlXCellObject.prototype._attachURLEvents=function(){if("url"==this.dataType){var t=this,e=this._idd,i=this.cell.childNodes[this.conf.idx.cont].firstChild;"function"!=typeof this._doOnFrameMouseDown&&(this._doOnFrameMouseDown=function(i){t.callEvent("_onContentMouseDown",[e,i||event])}),"function"==typeof window.addEventListener?i.onload=function(){try{"function"==typeof t._doOnFrameMouseDown&&this.contentWindow.document.body.addEventListener("mousedown",t._doOnFrameMouseDown,!1)}catch(e){}try{"function"==typeof t._doOnFrameContentLoaded&&t._doOnFrameContentLoaded()}catch(e){}}:i.onreadystatechange=function(){if("complete"==this.readyState){try{"function"==typeof t._doOnFrameMouseDown&&this.contentWindow.document.body.attachEvent("onmousedown",t._doOnFrameMouseDown)}catch(e){}try{"function"==typeof t._doOnFrameContentLoaded&&t._doOnFrameContentLoaded()}catch(e){}}}}},dhtmlXCellObject.prototype._doOnFrameContentLoaded=function(){if(1==this.conf.url_data.post_ifr){var t=this.getFrame().contentWindow.document,e=t.createElement("FORM");e.method="POST",e.action=this.conf.url_data.url,t.body.appendChild(e);var i={};i["dhxr"+(new Date).getTime()]="1";for(var s in this.conf.url_data.post_data)i[s]=this.conf.url_data.post_data[s];for(var s in i){var n=t.createElement("INPUT");n.type="hidden",n.name=s,n.value=i[s],e.appendChild(n),n=null}this.conf.url_data.post_ifr=!1,e.submit()}else this.callEvent("_onContentLoaded",[this._idd])},dhtmlXCellObject.prototype._detachURLEvents=function(t){if(null==t){if("url"!=this.dataType)return;t=this.cell.childNodes[this.conf.idx.cont].firstChild}if("function"==typeof window.addEventListener){t.onload=null;try{t.contentWindow.document.body.removeEventListener("mousedown",this._doOnFrameMouseDown,!1)}catch(e){}}else{t.onreadystatechange=null;try{t.contentWindow.document.body.detachEvent("onmousedown",this._doOnFrameMouseDown)}catch(e){}}t=null},dhtmlXCellObject.prototype._attachObject=function(t,e,i,s,n){if("menu"==t)return"undefined"!=typeof n?t=n:(t=document.createElement("DIV"),t.className="dhx_cell_menu_"+(this.conf.borders?"def":"no_borders"),t.appendChild(document.createElement("DIV"))),this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.toolbar||this.conf.idx.cont]),this.conf.ofs_nodes.t.menu=!0,this._updateIdx(),t;if("toolbar"==t)return"undefined"!=typeof n?t=n:(t=document.createElement("DIV"),t.className="dhx_cell_toolbar_"+(this.conf.borders?"def":"no_borders"),t.appendChild(document.createElement("DIV")),t.firstChild.className="dhx_toolbar_base_18_dhx_skyblue"),this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.cont]),this.conf.ofs_nodes.t.toolbar=!0,this._updateIdx(),t;if("ribbon"==t)return"undefined"!=typeof n?t=n:(t=document.createElement("DIV"),t.className="dhx_cell_ribbon_"+(this.conf.borders?"def":"no_borders"),t.appendChild(document.createElement("DIV"))),this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.cont]),this.conf.ofs_nodes.t.ribbon=!0,this._updateIdx(),this._adjustCont(this._idd),t;if("sb"==t){if("undefined"!=typeof n)t=n;else{var o=e||{},l="string"==typeof o.text&&o.text.length>0?o.text:"&nbsp;",r="number"==typeof o.height?o.height:!1,t=document.createElement("DIV");t.className="dhx_cell_statusbar_def",t.innerHTML="<div class='dhx_cell_statusbar_text'>"+l+"</div>",0!=r&&(t.firstChild.style.height=t.firstChild.style.lineHeight=r+"px")}return null!=this.conf.idx.pr1?this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.pr1]):this.cell.appendChild(t),this.conf.ofs_nodes.b.sb=!0,this._updateIdx(),this._adjustCont(this._idd),t}1!=s&&this._detachObject(null,!0,null),"string"==typeof i?this.cell.childNodes[this.conf.idx.cont].innerHTML=i:this.cell.childNodes[this.conf.idx.cont].appendChild(t),t=null},dhtmlXCellObject.prototype._detachObject=function(t,e,i){if(this.callEvent("_onBeforeContentDetach",[]),"menu"==t||"toolbar"==t||"ribbon"==t||"sb"==t){var s=this.cell.childNodes[this.conf.idx[t]];return s.parentNode.removeChild(s),s=null,this.conf.ofs_nodes["sb"==t?"b":"t"][t]=!1,this._updateIdx(),void(this.conf.unloading||this._adjustCont(this._idd))}1==e?i=!1:"undefined"==typeof i?i=document.body:"string"==typeof i&&(i=document.getElementById(i)),i===!1&&("url"==this.dataType?this._detachURLEvents():null!=this.dataObj&&("function"==typeof this.dataObj.unload?this.dataObj.unload():"function"==typeof this.dataObj.destructor&&this.dataObj.destructor()));for(var s=this.cell.childNodes[this.conf.idx.cont];s.childNodes.length>0;)i===!1?s.removeChild(s.lastChild):(s.firstChild.style.display="none",i.appendChild(s.firstChild));this.conf.append_mode&&(s.style.overflow="",this.conf.append_mode=!1);var n="tabbar"==this.dataType;this.dataObj=null,this.dataType=null,i=s=null,1!=this.conf.unloading&&n&&(this.showHeader(!0),this._showBorders())},dhtmlXCellObject.prototype._attachFromCell=function(t){this.detachObject(!0);var e="layout";"undefined"!=typeof window.dhtmlXWindowsCell&&this instanceof window.dhtmlXWindowsCell&&(e="window"),"undefined"!=typeof window.dhtmlXWindowsCell&&t instanceof window.dhtmlXWindowsCell&&t.wins.w[t._idd].conf.parked&&t.wins._winCellSetOpacity(t._idd,"open",!1),"undefined"!=typeof window.dhtmlXAccordionCell&&t instanceof window.dhtmlXAccordionCell&&0==t.conf.opened&&t._cellSetOpacity("open",!1);for(var i in t.dataNodes)this._attachObject(i,null,null,null,t.cell.childNodes[t.conf.idx[i]]),this.dataNodes[i]=t.dataNodes[i],t.dataNodes[i]=null,t.conf.ofs_nodes["sb"==i?"b":"t"][i]=!1,t._updateIdx();if(this._mtbUpdBorder(),null!=t.dataType&&null!=t.dataObj){for(this.dataType=t.dataType,this.dataObj=t.dataObj;t.cell.childNodes[t.conf.idx.cont].childNodes.length>0;)this.cell.childNodes[this.conf.idx.cont].appendChild(t.cell.childNodes[t.conf.idx.cont].firstChild);t.dataType=null,t.dataObj=null,"grid"==this.dataType&&("window"==e&&"dhx_skyblue"==this.conf.skin?(this.dataObj.entBox.style.border="1px solid #a4bed4",this.dataObj._sizeFix=0):(this.dataObj.entBox.style.border="0px solid white",this.dataObj._sizeFix=2))}else for(;t.cell.childNodes[t.conf.idx.cont].childNodes.length>0;)this.cell.childNodes[this.conf.idx.cont].appendChild(t.cell.childNodes[t.conf.idx.cont].firstChild);this.conf.view=t.conf.view,t.conf.view="def";for(var i in t.views)this.views[i]=t.views[i],t.views[i]=null,delete t.views[i];t._updateIdx(),t._adjustCont(),this._updateIdx(),this._adjustCont(),"window"==e&&this.wins.w[this._idd].conf.parked&&this.wins._winCellSetOpacity(this._idd,"close",!1)},dhtmlXCalendarObject.prototype.lang="en",dhtmlXCalendarObject.prototype.langData={en:{dateformat:"%Y-%m-%d",hdrformat:"%F %Y",monthesFNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthesSNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],daysFNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysSNames:["Su","Mo","Tu","We","Th","Fr","Sa"],weekstart:1,weekname:"w"}},dhtmlXCalendarObject.prototype._buildMonthHdr=function(t){var e=this,i=function(t){return 1==String(t).length?"0"+String(t):t},s=function(t,e){return"<span class='dhtmlxcalendar_month_label_"+t+"'>"+e+"</span>"},n=String(this.langData[this.lang].hdrformat||"%F %Y").replace(/%[a-z]/gi,function(n){switch(n){case"%m":return s("month",i(t.getMonth()+1));case"%n":return s("month",t.getMonth()+1);case"%M":return s("month",e.langData[e.lang].monthesSNames[t.getMonth()]);case"%F":return s("month",e.langData[e.lang].monthesFNames[t.getMonth()]);case"%y":return s("year",i(t.getYear()%100));case"%Y":return s("year",t.getFullYear());case"%%":return"%";default:return n}});return e=i=s=null,n},dhtmlXCalendarObject.prototype.enableIframe=function(t){1==t?this._ifr||(this._ifr=document.createElement("IFRAME"),this._ifr.frameBorder=0,this._ifr.border=0,this._ifr.setAttribute("src","javascript:false;"),this._ifr.className="dhtmlxcalendar_ifr",this._ifr.onload=function(){this.onload=null,this.contentWindow.document.open("text/html","replace"),this.contentWindow.document.write("<html><head><style>html,body{width:100%;height:100%;overflow:hidden;margin:0px;}</style></head><body</body></html>")},this.base.parentNode.insertBefore(this._ifr,this.base),this._ifrSize()):this._ifr&&(this._ifr.parentNode.removeChild(this._ifr),this._ifr=null)},dhtmlXCalendarObject.prototype._ifrSize=function(){this._ifr&&(this._ifr.style.left=this.base.style.left,this._ifr.style.top=this.base.style.top,this._ifr.style.width=this.base.offsetWidth+"px",this._ifr.style.height=this.base.offsetHeight+"px")},dhtmlxCalendarObject=dhtmlXCalendarObject,dhtmlXCalendarObject.prototype._strToDate=function(t,e){e=e||this._dateFormat,e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\\:|]/g,"\\$&");var i=[],s=[];e=e.replace(/%[a-z]/gi,function(t){switch(t){case"%d":case"%m":case"%y":case"%h":case"%H":case"%i":case"%s":return s.push(t),"(\\d{2})";case"%D":case"%l":case"%M":case"%F":return s.push(t),"([a-z-]{1,})";case"%j":case"%n":case"%g":case"%G":return s.push(t),"(\\d{1,2})";case"%Y":return s.push(t),"(\\d{4})";case"%a":return s.push(t),"(\\[am|pm])";case"%A":return s.push(t),"(\\[AM|PM])"}return t});var n=new RegExp(e),o=t.match(n);if(null==o||o.length-1!=s.length)return"Invalid Date";for(var l=1;l<o.length;l++)i.push(o[l]);for(var r={"%y":1,"%Y":1,"%n":2,"%m":2,"%M":2,"%F":2,"%d":3,"%j":3,"%a":4,"%A":4,"%H":5,"%G":5,"%h":5,"%g":5,"%i":6,"%s":7},a={},h={},l=0;l<s.length;l++)if("undefined"!=typeof r[s[l]]){var d=r[s[l]];a[d]||(a[d]=[],h[d]=[]),a[d].push(i[l]),h[d].push(s[l])}i=[],s=[];for(var l=1;7>=l;l++)if(null!=a[l])for(var c=0;c<a[l].length;c++)i.push(a[l][c]),s.push(h[l][c]);var u=this,_=new Date;_.setDate(1),_.setMinutes(0),_.setSeconds(0);for(var l=0;l<i.length;l++)switch(s[l]){case"%d":case"%j":case"%n":case"%m":case"%Y":case"%H":case"%G":case"%i":case"%s":isNaN(i[l])||_[{"%d":"setDate","%j":"setDate","%n":"setMonth","%m":"setMonth","%Y":"setFullYear","%H":"setHours","%G":"setHours","%i":"setMinutes","%s":"setSeconds"}[s[l]]](Number(i[l])+("%m"==s[l]||"%n"==s[l]?-1:0));break;case"%M":case"%F":var f=this._getInd(i[l].toLowerCase(),u.langData[u.lang][{"%M":"monthesSNames","%F":"monthesFNames"}[s[l]]]);f>=0&&_.setMonth(f);break;case"%y":if(!isNaN(i[l])){var p=Number(i[l]);_.setFullYear(p+(p>50?1900:2e3))}break;case"%g":case"%h":if(!isNaN(i[l])){var p=Number(i[l]);12>=p&&p>=0&&_.setHours(p+(this._getInd("pm",i)>=0?12==p?0:12:12==p?-12:0))}}return u=null,_},dhtmlXCalendarObject.prototype._dateToStr=function(t,e){var i=this;if(t instanceof Date)var s=function(t){return 1==String(t).length?"0"+String(t):t},n=function(e){switch(e){case"%d":return s(t.getDate());case"%j":return t.getDate();case"%D":return i.langData[i.lang].daysSNames[t.getDay()];case"%l":return i.langData[i.lang].daysFNames[t.getDay()];case"%m":return s(t.getMonth()+1);case"%n":return t.getMonth()+1;case"%M":return i.langData[i.lang].monthesSNames[t.getMonth()];case"%F":return i.langData[i.lang].monthesFNames[t.getMonth()];case"%y":return s(t.getYear()%100);case"%Y":return t.getFullYear();case"%g":return(t.getHours()+11)%12+1;case"%h":return s((t.getHours()+11)%12+1);case"%G":return t.getHours();case"%H":return s(t.getHours());case"%i":return s(t.getMinutes());case"%s":return s(t.getSeconds());case"%a":return t.getHours()>11?"pm":"am";case"%A":return t.getHours()>11?"PM":"AM";case"%%":default:return e}},o=String(e||this._dateFormat).replace(/%[a-zA-Z]/g,n);return i=null,o||String(t)},window.dhtmlxDblCalendarObject=window.dhtmlXDoubleCalendarObject=window.dhtmlXDoubleCalendar=function(t){var e=this;return this.leftCalendar=new dhtmlXCalendarObject(t),this.leftCalendar.hideTime(),this.rightCalendar=new dhtmlXCalendarObject(t),this.rightCalendar.hideTime(),this.leftCalendar.attachEvent("onClick",function(t){e._updateRange("rightCalendar",t,null),e._evOnClick(["left",t])}),this.rightCalendar.attachEvent("onClick",function(t){e._updateRange("leftCalendar",null,t),e._evOnClick(["right",t])}),this.leftCalendar.attachEvent("onBeforeChange",function(t){return e._evOnBeforeChange(["left",t])}),this.rightCalendar.attachEvent("onBeforeChange",function(t){return e._evOnBeforeChange(["right",t])}),this.show=function(){this.leftCalendar.show(),this.rightCalendar.base.style.marginLeft=this.leftCalendar.base.offsetWidth-1+"px",this.rightCalendar.show()},this.hide=function(){this.leftCalendar.hide(),this.rightCalendar.hide()},this.setDateFormat=function(t){this.leftCalendar.setDateFormat(t),this.rightCalendar.setDateFormat(t)},this.setDates=function(t,e){null!=t&&this.leftCalendar.setDate(t),null!=e&&this.rightCalendar.setDate(e),this._updateRange()},this._updateRange=function(t,e,i){3==arguments.length?("leftCalendar"==t?this.leftCalendar:this.rightCalendar).setSensitiveRange(e,i):(this.leftCalendar.setSensitiveRange(null,this.rightCalendar.getDate()),this.rightCalendar.setSensitiveRange(this.leftCalendar.getDate(),null))},this.getFormatedDate=function(){return this.leftCalendar.getFormatedDate.apply(this.leftCalendar,arguments)},this.unload=function(){window.dhx4._eventable(this,"clear"),this.leftCalendar.unload(),this.rightCalendar.unload(),this.leftCalendar=this.rightCalendar=null,this._updateRange=null,this._evOnClick=null,this._evOnBeforeChange=null,this.show=null,this.hide=null,this.setDateFormat=null,this.setDates=null,this.getFormatedDate=null,this.unload=null,e=null},this._evOnClick=function(t){return this.callEvent("onClick",t)},this._evOnBeforeChange=function(t){return this.callEvent("onBeforeChange",t)},window.dhx4._eventable(this),this},dhtmlXCombo.prototype.setName=function(t){this.conf.form_name=t,this.base.childNodes[1].name=t,this.base.childNodes[2].name=t+"_new_value"},dhtmlXCombo.prototype.readonly=function(t){window.dhx4.s2b(t)?this.base.firstChild.setAttribute("readOnly","true"):this.base.firstChild.removeAttribute("readOnly")},dhtmlXCombo.prototype.setPlaceholder=function(t){("undefined"==typeof t||null==t)&&(t=""),this.base.firstChild.setAttribute("placeholder",String(t))},dhtmlXCombo.prototype.setTemplate=function(t){for(var e in t)"undefined"!=typeof this.conf.template[e]&&(this.conf.template[e]=String(t[e]));for(var e in this.t)this.t[e].obj.setText(this.t[e].item,this.t[e].item._conf.text);this._confirmSelect()},dhtmlXCombo.prototype.setSkin=function(t){t!=this.conf.skin&&(this.conf.skin=t,this.base.className="dhxcombo_"+this.conf.skin+(this.conf.enabled?"":" dhxcombo_disabled"),this.list.className="dhxcombolist_"+this.conf.skin)},dhtmlXCombo.prototype.getInput=function(){return this.base.firstChild},dhtmlXCombo.prototype.getButton=function(){return this.base.childNodes[this.base.childNodes.length-(this.conf.combo_image?2:1)]},dhtmlXCombo.prototype.getList=function(){return this.list},dhtmlXCombo.prototype.getBase=function(){return this.base},dhtmlXCombo.prototype.getParent=function(){return this.DOMParent},dhtmlXCombo.prototype.forEachOption=function(t){for(var e=0;e<this.list.childNodes.length;e++)t.apply(window,[this._getOption(this.list.childNodes[e]._optId,e)])},dhtmlXCombo.prototype.setFocus=function(){this.conf.enabled&&this.base.firstChild.focus()},dhtmlXCombo.prototype.setFontSize=function(t,e){null!=t&&(this.base.firstChild.style.fontSize=t),null!=e&&(this.list.style.fontSize=e)},dhtmlXCombo.prototype.getOption=function(t){for(var e=null,i=null,s=0;s<this.list.childNodes.length;s++)if(null==e){var n=this.list.childNodes[s]._optId;this.t[n].obj.getValue(this.t[n].item)==t&&(e=n,i=s)}return null==e?null:this._getOption(e,i)},dhtmlXCombo.prototype.getOptionByIndex=function(t){return 0>t?null:null==this.list.childNodes[t]?null:this._getOption(this.list.childNodes[t]._optId,t)},dhtmlXCombo.prototype.getOptionByLabel=function(t){for(var e=null,i=null,s=0;s<this.list.childNodes.length;s++)if(null==e){var n=this.list.childNodes[s]._optId;this.t[n].obj.getText(this.t[n].item,!0)==t&&(e=n,i=s)}return null==e?null:this._getOption(e,i)},dhtmlXCombo.prototype.getSelectedIndex=function(){return this._getOptionProp(this.conf.last_selected,"index",-1)},dhtmlXCombo.prototype.getSelectedText=function(){return this._getOptionProp(this.conf.last_selected,"text","")},dhtmlXCombo.prototype.getSelectedValue=function(){return this._getOptionProp(this.conf.last_selected,"value",null)},dhtmlXCombo.prototype.getActualValue=function(){return this.base.childNodes[1].value},dhtmlXCombo.prototype.getComboText=function(){return this.base.childNodes[0].value},dhtmlXCombo.prototype.getIndexByValue=function(t){var e=this.getOption(t);return null!=e?e.index:-1},dhtmlXCombo.prototype.setComboText=function(t){this.conf.last_text=this.base.firstChild.value=t,this.conf.f_server_last=this.base.firstChild.value.toLowerCase()},dhtmlXCombo.prototype.setComboValue=function(t){var e=this.getOption(t);null!=e?this.selectOption(e.index):(this.conf.last_value=t,this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="true")},dhtmlXCombo.prototype.selectOption=function(t){if(!(0>t||t>=this.list.childNodes.length)){var e=this.list.childNodes[t]._optId;this._setSelected(e,this._isListVisible(),!0),this._confirmSelect("script")}},dhtmlXCombo.prototype.unSelectOption=function(){},dhtmlXCombo.prototype.confirmValue=function(){this._confirmSelect("script")},dhtmlXCombo.prototype.enable=function(t){t="undefined"==typeof t?!0:window.dhx4.s2b(t),this.conf.enabled!=t&&(this.conf.enabled=t,t?(this.base.className="dhxcombo_"+this.conf.skin,this.base.firstChild.removeAttribute("disabled")):(this._hideList(),this.base.className="dhxcombo_"+this.conf.skin+" dhxcombo_disabled",this.base.firstChild.setAttribute("disabled","true")),this._updateTopImage(this.conf.last_selected))},dhtmlXCombo.prototype.disable=function(t){t="undefined"==typeof t?!0:window.dhx4.s2b(t),this.enable(!t)},dhtmlXCombo.prototype.isEnabled=function(){return 1==this.conf.enabled},dhtmlXCombo.prototype.show=function(t){t="undefined"==typeof t?!0:window.dhx4.s2b(t),this.base.style.display=1==t?"":"none"},dhtmlXCombo.prototype.hide=function(t){"undefined"==typeof t&&(t=!0),this.show(!t)},dhtmlXCombo.prototype.isVisible=function(){return""==this.base.style.display},dhtmlXCombo.prototype.enableFilteringMode=function(t,e,i,s){1==t||"between"==t?(this.conf.f_mode=1==t?"start":"between",null!=e?(this.conf.f_url=e,this.conf.f_cache=window.dhx4.s2b(i),this.conf.f_dyn=window.dhx4.s2b(s)):(this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)):(this.conf.f_mode=!1,this.conf.f_url=null,this.conf.f_cache=!1,this.conf.f_dyn=!1)},dhtmlXCombo.prototype.filter=function(t){for(var e=0;e<this.list.childNodes.length;e++){var i=t.apply(window,[this._getOption(this.list.childNodes[e]._optId,e)]);this.list.childNodes[e].style.display=i===!0?"":"none"}},dhtmlXCombo.prototype.sort=function(t){for(var e=[],i=0;i<this.list.childNodes.length;i++){var s=this.list.childNodes[i]._optId;e.push([s,this._getOption(s,i)])}for("asc"==t||"desc"==t?(k=!0,e.sort(function(e,i){e=e[1].text_option.toLowerCase(),i=i[1].text_option.toLowerCase();var s="asc"==t?1:-1;return e>i?s:-1*s})):("function"==typeof t||"function"==typeof window[t])&&("function"==typeof window[t]&&(t=window[t]),e.sort(function(e,i){return t.apply(window,[e[1],i[1]])}));this.list.childNodes.length>0;)this.list.removeChild(this.list.lastChild);for(var i=0;i<e.length;i++)this.list.appendChild(this.t[e[i][0]].item)},dhtmlXCombo.prototype.enableAutocomplete=function(t){t="undefined"==typeof t?!0:window.dhx4.s2b(t),this.conf.f_ac=t},dhtmlXCombo.prototype.disableAutocomplete=function(t){t="undefined"==typeof t?!0:window.dhx4.s2b(t),this.enableAutocomplete(!t)},dhtmlXCombo.prototype.allowFreeText=function(t){this.conf.allow_free_text="undefined"==typeof t?!0:window.dhx4.s2b(t)},dhtmlXCombo.prototype._checkForMatch=function(t){for(var e=window.dhx4.trim(this.base.firstChild.value).toLowerCase(),i=null,s=this.list.firstChild;null!=s;){if(""==s.style.display&&null!=s._optId){var n=window.dhx4.trim(this.t[s._optId].obj.getText(s,!0)).toLowerCase();e==n&&(i=s._optId,s=null)}null!=s&&(s=s.nextSibling)}null==this.conf.last_match?null!=i?(this._setSelected(i,!0,!0),this.conf.last_match=i):("between"!=this.conf.f_mode||1==t)&&(this._setSelected(null,!0,!0),this.conf.last_match=null):null!=i?i!=this.conf.last_match&&(this._setSelected(i,!0,!0),this.conf.last_match=i):(this._setSelected(null,!0,!0),this.conf.last_match=null)},dhtmlXCombo.prototype._selectRange=function(t,e){1==this.conf.combo_focus&&window.dhx4.selectTextRange(this.base.firstChild,t,e)},dhtmlXCombo.prototype.openSelect=function(){this._isListVisible()||this._showList()},dhtmlXCombo.prototype.closeAll=function(){this._hideList()},dhtmlXCombo.prototype._showList=function(t){return 0==this._getListVisibleCount()?void(t&&this._isListVisible()&&this._hideList()):this._isListVisible()?void this._checkListHeight():(this.list.style.zIndex=window.dhx4.zim.reserve(this.conf.list_zi_id),this.list.style.visibility="hidden",this.list.style.display="",this.list.style.width=Math.max(this.conf.opts_width||0,this.conf.combo_width)+"px",this.list.style.top=window.dhx4.absTop(this.base)+this.base.offsetHeight-1+"px",this.list.style.left=window.dhx4.absLeft(this.base)+"px",this._checkListHeight(),this.list.style.visibility="visible",void this.callEvent("onOpen",[]))},dhtmlXCombo.prototype._hideList=function(){this._isListVisible()&&(window.dhx4.zim.clear(this.conf.list_zi_id),this.list.style.display="none",this.conf.clear_click=!1,this.callEvent("onClose",[]))},dhtmlXCombo.prototype._isListVisible=function(){return""==this.list.style.display},dhtmlXCombo.prototype._getListVisibleCount=function(){for(var t=0,e=0;e<this.list.childNodes.length;e++)t+=""==this.list.childNodes[e].style.display?1:0;return t},dhtmlXCombo.prototype._checkListHeight=function(){if(this._isListVisible()){if(null==this.conf.item_h){for(var t=this.list.firstChild;null!=t;)""==t.style.display?(this.conf.item_h=t.offsetHeight,t=null):t=t.nextSibling;t=null}var e=window.dhx4.screenDim(),i=window.dhx4.absTop(this.base),s=this.base.offsetHeight,n=Math.max(0,Math.floor((i-e.top)/this.conf.item_h)),o=Math.max(0,Math.floor((e.bottom-(i+s))/this.conf.item_h)),l=this._getListVisibleCount();o<Math.min(this.conf.opts_count_min,l)&&n>o&&(o=null);var r=Math.min(null==o?n:o,this.conf.opts_count,l),a=l>r?r*this.conf.item_h+"px":"",h=this.conf.sp[this.conf.skin].list_ofs;this.list.style.height=a,this.list.style.top=(null==o?i-this.list.offsetHeight+h:i+s-h)+"px"}},dhtmlXCombo.prototype._scrollToItem=function(t){var e=this.t[t].item.offsetTop,i=e+this.t[t].item.offsetHeight,s=this.list.scrollTop,n=s+this.list.clientHeight;s>e?this.list.scrollTop=e:i>n&&(this.list.scrollTop=i-this.list.clientHeight)},dhtmlXCombo.prototype._setSelected=function(t,e,i){if(i&&this._updateTopImage(t),null!=t&&this.conf.last_hover==t)return void(e&&this._scrollToItem(t));if(null!=this.conf.last_hover&&(this.t[this.conf.last_hover].obj.setSelected(this.t[this.conf.last_hover].item,!1),this.conf.last_hover=null,null==t&&this.callEvent("onSelectionChange",[])),null!=t){if(this.t[t].obj.setSelected(this.t[t].item,!0),this.conf.last_hover=t,this.callEvent("onSelectionChange",[]),this.t[t].item==this.t[t].item.parentNode.lastChild&&null!=this.conf.f_url&&1==this.conf.f_dyn&&!this.conf.f_dyn_end){var s="mask="+encodeURIComponent(this.conf.f_mask)+"&pos="+this.list.childNodes.length,n=this,o=function(t){n.conf.f_cache&&n.conf.f_cache_data[n.conf.f_mask].data.push(t.xmlDoc.responseXML);var e=n.list.childNodes.length;n.load(t.xmlDoc.responseXML),e==n.list.childNodes.length&&(n.conf.f_dyn_end=!0,n.conf.f_cache&&(n.conf.f_cache_data[n.conf.f_mask].dyn_end=!0)),o=n=null};"post"==window.dhx4.ajax.method?window.dhx4.ajax.post(this.conf.f_url,s,o):"get"==window.dhx4.ajax.method&&window.dhx4.ajax.get(this.conf.f_url+(String(this.conf.f_url).indexOf("?")>=0?"&":"?")+s,o)}e&&this._scrollToItem(t)}},dhtmlXCombo.prototype.addOption=function(t,e,i,s,n){var o=null;if(t instanceof Array)for(var l=0;l<t.length;l++)if(t[l]instanceof Array)r=this._renderOption({value:t[l][0],text:t[l][1],css:t[l][2],img:t[l][3]}),null==o&&1==window.dhx4.s2b(t[l][4])&&(o=r);else{var r=this._renderOption(t[l]);null==o&&1==window.dhx4.s2b(t[l].selected)&&(o=r)}else{var r=this._renderOption({value:t,text:e,css:i,img:s});null==o&&1==window.dhx4.s2b(n)&&(o=r)}null!=o&&(this._setSelected(o,this._isListVisible(),!0),this._confirmSelect("onInit"))},dhtmlXCombo.prototype.updateOption=function(t,e,i,s){var n=this._getOptionId(t);null!=n&&(this.t[n].obj.update(this.t[n].item,{value:e,text:i,css:s}),this.conf.last_selected==n&&(this.conf.last_text=this.base.firstChild.value=this.t[n].obj.getText(this.t[n].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase()))},dhtmlXCombo.prototype.deleteOption=function(t){for(var e in this.t){var i=this.t[e].obj.getValue(this.t[e].item);i==t&&this._removeOption(e)}this._isListVisible()&&this._showList(!0)},dhtmlXCombo.prototype.clearAll=function(){for(var t in this.t)this._removeOption(t);this.conf.tm_hover&&window.clearTimeout(this.conf.tm_hover),this.conf.last_hover=null,this.conf.last_selected=null,this.list.scrollTop=0,this._hideList()},dhtmlXCombo.prototype._renderOption=function(t){var e=window.dhx4.newId(),i=document.createElement("DIV");return i._optId=e,i._tpl=this.conf.template,"undefined"==typeof t.img&&"undefined"!=typeof t.img_src&&(t.img=t.img_src,delete t.img_src),"undefined"==typeof t.img_dis&&"undefined"!=typeof t.img_src_dis&&(t.img_dis=t.img_src_dis,delete t.img_src_dis),t.img_path=this.conf.img_path,t.img_def=this.conf.img_def,t.img_def_dis=this.conf.img_def_dis,this.list.appendChild(i),this.t[i._optId]={obj:this.modes[this.conf.opts_type].render(i,t),item:i,conf:{type:this.conf.opts_type}},i=null,e},dhtmlXCombo.prototype._removeOption=function(t){this.t[t].obj.destruct(this.t[t].item),this.t[t].obj=null,this.t[t].item.parentNode.removeChild(this.t[t].item),this.t[t].item=null,this.t[t].conf=null,this.t[t]=null,delete this.t[t],this.conf.last_hover==t&&(this.conf.last_hover=null),this.conf.last_selected==t&&(this.conf.last_selected=null,this._confirmSelect("onDelete"))},dhtmlXCombo.prototype._confirmSelect=function(t){var e=!1;if(this.conf.f_server_tm&&window.clearTimeout(this.conf.f_server_tm),null!=this.conf.last_hover)e=e||this.conf.last_value!=this._getOptionValue(this.conf.last_hover),this.conf.last_match=this.conf.last_selected=this.conf.last_hover,this.conf.last_value=this._getOptionValue(this.conf.last_selected),this.conf.last_text=this.base.firstChild.value=this.t[this.conf.last_selected].obj.getText(this.t[this.conf.last_selected].item,!0),this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_value,this.base.childNodes[2].value="false";else{if(!(this.conf.allow_free_text||""==this.base.firstChild.value&&this.conf.allow_empty_value))return this._cancelSelect(),void this._updateTopImage(this.conf.last_selected);e=e||this.conf.last_text!=this.base.firstChild.value,this.conf.last_match=this.conf.last_value=this.conf.last_selected=null,this.conf.last_text=this.base.firstChild.value,this.conf.f_server_last=this.base.firstChild.value.toLowerCase(),this.base.childNodes[1].value=this.conf.last_text,this.base.childNodes[2].value="true"}this.conf.f_ac&&"start"==this.conf.f_mode&&(this.conf.f_ac_text="","blur"!=t&&this._selectRange(this.base.firstChild.value.length,this.base.firstChild.value.length)),this._hideList(),1==e&&"onInit"!=t&&"onDelete"!=t&&this.callEvent("onChange",[this.conf.last_value,this.conf.last_text])},dhtmlXCombo.prototype._cancelSelect=function(){this._hideList(),this.base.firstChild.value=this.conf.last_text,0!=this.conf.f_mode&&this._filterOpts(!0)},dhtmlXCombo.prototype._getOption=function(t,e){if(!this.t[t])return null;if("undefined"==typeof e&&(e=-1),0>e)for(var i=0;i<this.list.childNodes.length;i++)0>e&&this.list.childNodes[i]._optId==t&&(e=i);var s={value:this.t[t].obj.getValue(this.t[t].item),text:this.t[t].obj.getText(this.t[t].item),text_input:this.t[t].obj.getText(this.t[t].item,!0),text_option:this.t[t].obj.getText(this.t[t].item,null,!0),css:this.t[t].obj.getCss(this.t[t].item),selected:t==this.conf.last_selected,index:e};if("function"==typeof this.t[t].obj.getExtraData){var n=this.t[t].obj.getExtraData(this.t[t].item);for(var o in n)"undefined"==typeof s[o]&&(s[o]=n[o])}return s},dhtmlXCombo.prototype._getOptionProp=function(t,e,i){if(null!=t){var s=this._getOption(t);if(null!=s)return s[e]}return i},dhtmlXCombo.prototype._getOptionId=function(t){for(var e=null,i=0;i<this.list.childNodes.length;i++)if(null==e){var s=this.list.childNodes[i]._optId;t==this.t[s].obj.getValue(this.t[s].item)&&(e=s)}return e},dhtmlXCombo.prototype._getOptionValue=function(t){return this._getOptionProp(t,"value",null)},dhtmlXCombo.prototype.setSize=function(t){this.conf.combo_width=parseInt(t),this.base.style.width=this.conf.combo_width+"px",this.base.firstChild.style.width=this.conf.combo_width-24-(this.conf.combo_image?23:0)+"px",this.base.firstChild.style.marginLeft=this.conf.combo_image?"23px":"0px"},dhtmlXCombo.prototype.setOptionWidth=function(t){this.conf.opts_width=parseInt(t)||null
},dhtmlXCombo.prototype.modes={},dhtmlXCombo.prototype.doWithItem=function(t,e){var i=t>=0&&t<this.list.childNodes.length?this.list.childNodes[t]._optId:null;if(null==i)return null;if("function"!=typeof this.t[i].obj[e])return null;for(var s=[this.t[i].item],n=2;n<arguments.length;n++)s.push(arguments[n]);return this.t[i].obj[e].apply(this.t[i].obj,s)},dhtmlXCombo.prototype.modes.option={image:!1,option_css:"dhxcombo_option_text",render:function(t,e){return t._conf={value:e.value,css:""},t.className="dhxcombo_option",t.innerHTML="<div class='"+this.option_css+"'>&nbsp;</div>",null!=e.css&&(t.lastChild.style.cssText=e.css,t._conf.css=e.css),this.setText(t,e.text),this},destruct:function(t){t._conf=null},update:function(t,e){t._conf.value=e.value,t._conf.css=e.css,t.lastChild.style.cssText=e.css,this.setText(t,e.text)},setText:function(t,e){t._conf.text=e;var i="object"==typeof e?window.dhx4.template(t._tpl.option,t._conf.text,!0):window.dhx4.trim(t._conf.text||"");t.lastChild.innerHTML=0==i.length?"&nbsp;":i},getText:function(t,e,i){return window.dhx4.s2b(e)&&"object"==typeof t._conf.text?window.dhx4.template(t._tpl.input,t._conf.text,!0):window.dhx4.s2b(i)&&"object"==typeof t._conf.text?window.dhx4.template(t._tpl.option,t._conf.text,!0):t._conf.text},getValue:function(t){return t._conf.value},getCss:function(t){return t._conf.css},setSelected:function(t,e){t.className="dhxcombo_option"+(e?" dhxcombo_option_selected":"")},isSelected:function(t){return String(t.className).indexOf("dhxcombo_option_selected")>=0},getExtraData:function(){return{type:"option"}}},dhtmlXCombo.prototype.modes.checkbox={image:!0,image_css:"dhxcombo_checkbox dhxcombo_chbx_#state#",option_css:"dhxcombo_option_text dhxcombo_option_text_chbx",render:function(t,e){return t._conf={value:e.value,css:"",checked:window.dhx4.s2b(e.checked)},t.className="dhxcombo_option",t.innerHTML="<div class='"+String(this.image_css).replace("#state#",t._conf.checked?"1":"0")+"'></div><div class='"+this.option_css+"'>&nbsp;</div>",t.firstChild._optChbxId=t._optId,null!=e.css&&(t.lastChild.style.cssText+=e.css,t._conf.css=e.css),this.setText(t,e.text),this},setChecked:function(t,e){t._conf.checked=window.dhx4.s2b(e),t.firstChild.className=String(this.image_css).replace("#state#",t._conf.checked?"1":"0")},isChecked:function(t){return 1==t._conf.checked},getExtraData:function(t){return{type:"checkbox",checked:t._conf.checked}},optionClick:function(t,e,i){for(var s=!0,n=e.target||e.srcElement;1==s&&null!=n&&n!=t;)null!=n._optChbxId?(i.callEvent("onCheck",[t._conf.value,!t._conf.checked])===!0&&this.setChecked(t,!this.isChecked(t)),s=!1):n=n.parentNode;return n=i=t=null,s},getTopImage:function(){return""},topImageClick:function(){return!0}},dhtmlXComboExtend("checkbox","option"),dhtmlXCombo.prototype.setChecked=function(t,e){this.doWithItem(t,"setChecked",e)},dhtmlXCombo.prototype.getChecked=function(){for(var t=[],e=0;e<this.list.childNodes.length;e++)this.isChecked(e)&&t.push(this._getOptionProp(this.list.childNodes[e]._optId,"value",""));return t},dhtmlXCombo.prototype.isChecked=function(t){return this.doWithItem(t,"isChecked")},dhtmlXCombo.prototype.modes.image={image:!0,image_css:"dhxcombo_image",option_css:"dhxcombo_option_text dhxcombo_option_text_image",render:function(t,e){return t._conf={value:e.value,css:""},t.className="dhxcombo_option",t.innerHTML="<div class='"+this.image_css+"'></div><div class='"+this.option_css+"'>&nbsp;</div>",null!=e.css&&(t.lastChild.style.cssText+=e.css,t._conf.css=e.css),this.setText(t,e.text),this.setImage(t,e.img,e.img_dis,e.img_path,e.img_def,e.img_def_dis),this},update:function(t,e){t._conf.value=e.value,t._conf.css=e.css,t.lastChild.style.cssText=e.css,this.setText(t,e.text),this.setImage(t,e.img,e.img_dis,e.img_path,e.img_def,e.img_def_dis)},setImage:function(t,e,i,s,n,o){e=null!=e&&e.length>0?s+e:null!=n&&n.length>0?s+n:null,i=null!=i&&i.length>0?s+i:null!=o&&o.length>0?s+o:1==o?e:null,t._conf.img=e,t._conf.img_dis=i,t.firstChild.style.backgroundImage=null!=e?"url("+e+")":"none"},getExtraData:function(){return{type:"image"}},getTopImage:function(t,e){var i=e?"img":"img_dis";return null!=t&&null!=t._conf[i]?"<div class='"+this.image_css+"' style='background-image:url("+t._conf[i]+");'></div>":""}},dhtmlXComboExtend("image","option"),dhtmlXCombo.prototype.setDefaultImage=function(t,e){null!=t&&(this.conf.img_def=t),null!=e&&(this.conf.img_def_dis=e)},dhtmlXCombo.prototype.setImagePath=function(t){this.conf.img_path=t},dhtmlXColorPicker.prototype.linkTo=function(t,e,i){1==arguments.length&&(e=i=t);var s;return t=t||null,i=i||null,"string"==typeof e&&(e=document.getElementById(e)),s=this._addNode(e,t,i),s&&this._attachEventsToNode(s),s},dhtmlXColorPicker.prototype._isBaseNode=function(t){return t==this.base?!0:t.parentElement==document.body?!1:t.parentElement?this._isBaseNode(t.parentElement):!1},dhtmlXColorPicker.prototype._hasInput=function(t){var e,i,s=!1;for(i=this._nodes.length,e=0;i>e;e++)if(this._nodes[e].valueCont==t){s=!0;break}return s},dhtmlXColorPicker.prototype._findNodesByArray=function(t){var e,i,s;for(i=t.length,e=0;i>e;e++)s="string"==typeof t[e]?document.getElementById(t[e]):t[e],s&&this._addNode(s)},dhtmlXColorPicker.prototype._addNode=function(t,e,i){var s,n,o,l;return s="string"==typeof t?document.getElementById(t):t,"string"==typeof e&&(e=document.getElementById(e)),"string"==typeof i&&(i=document.getElementById(i)),s?(dhx4.s2b(s.getAttribute("colorbox"))&&(n=document.createElement("div"),n.style.width=s.offsetWidth+"px",n.style.height=s.offsetHeight+"px",s.style.width=s.offsetWidth-(s.offsetHeight+8)+"px",s.parentNode.insertBefore(n,s),n.style.position="relative",o=document.createElement("div"),n.appendChild(s),n.appendChild(o),o.className="dhxcp_colorBox",s.className+=" dhxcp_colorInput",o.style.width=o.style.height=s.offsetHeight+"px"),l={node:s,valueColor:void 0!=e?e:o||s,valueCont:void 0!=i?i:s,conf:{customColors:null!=s.getAttribute("customcolors")?dhx4.s2b(s.getAttribute("customcolors")):null,selectedColor:s.getAttribute("selectedcolor")}},this._nodes.push(l),this.activeNode||(this.activeNode=l),l):null},dhtmlXColorPicker.prototype.getNode=function(t){var e=null,i=null;return e="string"==typeof t?document.getElementById(t):t,void 0!=e.tagName&&(i=this._getNodeByElement(e)),i},dhtmlXColorPicker.prototype._getNodeByElement=function(t){var e,i,s=null;for(i=this._nodes.length,e=0;i>e;e++)this._nodes[e].node==t&&(s=this._nodes[e]);return s},dhtmlXColorPicker.prototype._getNodeByValueCont=function(t){var e,i,s=null;for(i=this._nodes.length,e=0;i>e;e++)this._nodes[e].valueCont&&this._nodes[e].valueCont==t&&(s=this._nodes[e]);return s},dhtmlXColorPicker.prototype.initMemoryColors=function(){var t=this;this._controllerNodes.memory_block.innerHTML="<div class='dhxcp_memory_button_cont'><button class='dhxcp_save_to_memory'><div class='dhxcp_label_bm'>"+this.i18n[this.conf.lang].btnAddColor+"</div></button></div><div class='dhxcp_memory_els_cont'><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a><a class='dhxcp_memory_el'></a></div>",this.memory=new this.Memory(this._controllerNodes.memory_block.childNodes[1]),this.memory.onSelect=this._onSelectMemoryEl,this.memory.onSave=function(e){var i=t.colorAIP.rgb2hex({r:e.red,g:e.green,b:e.blue});t.callEvent("onSaveColor",[i])};var e=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=this._controllerNodes.memory_block.childNodes[0].firstChild.firstChild,"function"==typeof window.addEventListener?e.addEventListener("click",this.saveColor,!1):e.attachEvent("onclick",this.saveColor)},dhtmlXColorPicker.prototype._refreshCoordinatesByHSL=function(t,e,i){var s,n,o;s=Math.round((this.configColorArea.maxX-this.configColorArea.minX)*t/359)+this.configColorArea.minX,n=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-i)/100)+this.configColorArea.minY,o=Math.round((this.configColorArea.maxY-this.configColorArea.minY)*(100-e)/100)+this.configColorArea.minY,this._setColorAreaXY(s,n),this._setContrastY(o)},dhtmlXColorPicker.prototype.setColor=function(t){var e,i,s,n,o=!0,l=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});return t instanceof Array?e={r:parseInt(t[0]),g:parseInt(t[1]),b:parseInt(t[2])}:"string"==typeof t&&(t=t.replace(/\s/g,""),/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i.test(t)?(i=t.match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i),e={r:parseInt(i[1]),g:parseInt(i[2]),b:parseInt(i[3])}):e=this.colorAIP.hex2rgb(t)),o=o&&e instanceof Object,o=o&&0<=e.r&&e.r<=255,o=o&&0<=e.g&&e.g<=255,(o=o&&0<=e.b&&e.b<=255)?(n=this.colorAIP.rgb2hex({r:e.r,g:e.g,b:e.b}),n==l?l:(this.value.red=e.r,this.value.green=e.g,this.value.blue=e.b,s=this.colorAIP.rgb2hsl(e.r/255,e.g/255,e.b/255),this.value.hue=Math.round(s.h),this.value.sat=Math.round(100*s.s),this.value.lum=Math.round(100*s.l),this._refreshCoordinatesByHSL(this.value.hue,this.value.sat,this.value.lum),this._refreshContrast(),this._refreshInputValues(),this._refreshColorValue(),n)):l},dhtmlXColorPicker.prototype.getSelectedColor=function(){return[this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue}),[this.value.red,this.value.green,this.value.blue],[this.value.hue,this.value.sat,this.value.lum]]},dhtmlXColorPicker.prototype._attachEventsToNode=function(t){"function"==typeof window.addEventListener?t.node.addEventListener("click",this._doOnClickByNode,!1):t.node.attachEvent("onclick",this._doOnClickByNode),t.valueCont&&"input"==t.valueCont.tagName.toLowerCase()&&("function"==typeof window.addEventListener?(t.valueCont.addEventListener("focus",this._doOnFocusByInput,!1),t.valueCont.addEventListener("blur",this._doOnBlurByInput,!1)):(t.valueCont.attachEvent("onfocus",this._doOnFocusByInput),t.valueCont.attachEvent("onblur",this._doOnBlurByInput)))},dhtmlXColorPicker.prototype._detachEventsFromNode=function(t){"function"==typeof window.addEventListener?t.node.removeEventListener("click",this._doOnClickByNode,!1):t.node.detachEvent("onclick",this._doOnClickByNode),t.valueCont&&"input"==t.valueCont.tagName.toLowerCase()&&("function"==typeof window.addEventListener?(t.valueCont.removeEventListener("focus",this._doOnFocusByInput,!1),t.valueCont.removeEventListener("blur",this._doOnBlurByInput,!1)):(t.valueCont.detachEvent("onfocus",this._doOnFocusByInput),t.valueCont.detachEvent("onblur",this._doOnBlurByInput)))},dhtmlXColorPicker.prototype.show=function(t){var e=!1;void 0!=t&&(this.activeNode=this.getNode(t)||this.activeNode),this.activeNode&&this.activeNode.valueCont&&this.activeNode.valueCont.value&&this.setColor(this.activeNode.valueCont.value),this.activeNode?(e=null!=this.activeNode.conf.customColors?this.activeNode.conf.customColors:this.conf.customColors,this.setColor(this.activeNode.conf.selectedColor)):e=this.conf.customColors,e?this.showMemory():this.hideMemory(),this.base._dhx_remove?(this.base.firstChild.style.zIndex=dhx4.zim.reserve(this.conf.cp_id),document.body.firstChild?document.body.insertBefore(this.base,document.body.firstChild):document.body.appendChild(this.base),this._refreshPosition(),"function"==typeof window.addEventListener?document.body.addEventListener("mousedown",this._doOnClickByBody,!1):document.body.attachEvent("onmousedown",this._doOnClickByBody)):this.base.appendChild(this._globalNode),this._controllerNodes.fr_cover&&this.base.insertBefore(this._controllerNodes.fr_cover,this._globalNode),this.callEvent("onShow",[this.activeNode?this.activeNode.node:null])},dhtmlXColorPicker.prototype.setPosition=function(t,e){var i=null,s=parseInt(t),n=parseInt(e);isNaN(s)&&(i="left"==t.toLowerCase()?"left":"bottom"==t.toLowerCase()?"bottom":null),this.base._dhx_remove?null==i||(this.conf.position=i,this._refreshPosition(i)):isNaN(s)||isNaN(n)||(this._globalNode.style.left=s+"px",this._globalNode.style.top=n+"px",this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top))},dhtmlXColorPicker.prototype._initListenerInput=function(){var t=this;this._inputListenerId=this._inputListenerId||setInterval(function(){t._refreshValueByInput()},70)},dhtmlXColorPicker.prototype._removeListenerInput=function(){this._inputListenerId&&(clearInterval(this._inputListenerId),this._inputListenerId=null)},dhtmlXColorPicker.prototype._refreshValueByInput=function(){var t=this.activeNode.valueCont.value,e=this.getSelectedColor()[0];this._inputListenerId&&/^#[\da-f]{6}$/i.test(t)&&t!=e&&(this.setColor(t),this.callEvent("onSelect",[t,this.activeNode.node]))},dhtmlXColorPicker.prototype._refreshPosition=function(t){if(null!=this.activeNode){var e=dhx4.absTop(this.activeNode.node),i=dhx4.absLeft(this.activeNode.node),s=dhx4.screenDim(),n=this._globalNode.offsetHeight,o=0;switch(t=t||this.conf.position){case"bottom":this._globalNode.style.top=e+this.activeNode.node.offsetHeight+this.conf.indent+"px",this._globalNode.style.left=i+"px";break;default:this._globalNode.style.left=i+this.activeNode.node.offsetWidth+this.conf.indent+"px",o=e,s.bottom-(o+n)<=0&&(o=s.bottom-(n+this.conf.indent)),o-s.top<0&&(o=s.top+this.conf.indent),this._globalNode.style.top=o+"px"}this._controllerNodes.fr_cover&&(this._controllerNodes.fr_cover.style.left=this._globalNode.style.left,this._controllerNodes.fr_cover.style.top=this._globalNode.style.top)}},dhtmlXColorPicker.prototype.isVisible=function(){var t=!1;return t=this.base._dhx_remove?this.base.parentNode==document.body:this._globalNode.parentNode==this.base},dhtmlXColorPicker.prototype.hide=function(){if(this.base._dhx_remove)this.base.parentNode&&(this.base.parentNode.removeChild(this.base),dhx4.zim.clear(this.conf.cp_id),"function"==typeof window.addEventListener?document.body.removeEventListener("mousedown",this._doOnClickByBody,!1):document.body.detachEvent("onmousedown",this._doOnClickByBody));else{if(0==this.isVisible())return;this.base.removeChild(this._globalNode)}this._controllerNodes.fr_cover&&this._controllerNodes.fr_cover.parentNode&&this._controllerNodes.fr_cover.parentNode.removeChild(this._controllerNodes.fr_cover),void 0!=this.callEvent&&this.callEvent("onHide",[this.activeNode?this.activeNode.node:null])},dhtmlXColorPicker.prototype.configColorArea={minX:1,maxX:209,minY:1,maxY:119},dhtmlXColorPicker.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0},dhtmlXColorPicker.prototype.i18n={en:{labelHue:"Hue",labelSat:"Sat",labelLum:"Lum",labelRed:"Red",labelGreen:"Green",labelBlue:"Blue",btnAddColor:"Save the color",btnSelect:"Select",btnCancel:"Cancel"}},dhtmlXColorPicker.prototype.loadUserLanguage=function(t){"function"==typeof this._mergeLangModules&&this._mergeLangModules(),this.conf.lang=t,this._refreshLanguage()},dhtmlXColorPicker.prototype._refreshLanguage=function(){var t,e=this.i18n[this.conf.lang];for(t in e)this._labelNodes[t]&&(this._labelNodes[t].innerHTML=e[t])},dhtmlXColorPicker.prototype._setColorAreaXY=function(t,e){var i=this.configColorArea;t=parseInt(t),i.minX>t?this.conf.x=i.minX:t>i.maxX?this.conf.x=i.maxX:isNaN(t)||(this.conf.x=t),e=parseInt(e),i.minY>e?this.conf.y=i.minY:e>i.maxY?this.conf.y=i.maxY:isNaN(e)||(this.conf.y=e),this._refreshLines()},dhtmlXColorPicker.prototype._setColorByXYC=function(t){t=t||!1,this.value.hue=Math.round(359*(this.conf.x-this.configColorArea.minX)/(this.configColorArea.maxX-this.configColorArea.minX)),this.value.lum=Math.round(100-100*(this.conf.y-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY)),this.value.sat=Math.round(100-100*(this.conf.c-this.configColorArea.minY)/(this.configColorArea.maxY-this.configColorArea.minY));var e=this.colorAIP.hsl2rgb(this.value.hue,this.value.sat/100,this.value.lum/100);this.value.red=Math.round(255*e.r),this.value.green=Math.round(255*e.g),this.value.blue=Math.round(255*e.b),t||this._refreshContrast(),this._refreshInputValues(),this._refreshColorValue()},dhtmlXColorPicker.prototype._setContrastY=function(t){var e=this.configColorArea;t=parseInt(t),isNaN(t)||(this.conf.c=Math.min(Math.max(e.minY,t),e.maxY)),this._refreshContrastLine()},dhtmlXColorPicker.prototype._refreshInputValues=function(){this._controllerNodes.hue.value=this.value.hue,this._controllerNodes.sat.value=this.value.sat,this._controllerNodes.lum.value=this.value.lum,this._controllerNodes.red.value=this.value.red,this._controllerNodes.green.value=this.value.green,this._controllerNodes.blue.value=this.value.blue},dhtmlXColorPicker.prototype._refreshColorValue=function(){this._controllerNodes.color.style.backgroundColor="rgb("+[this.value.red,this.value.green,this.value.blue].join(", ")+")";var t=this.colorAIP.rgb2hex({r:this.value.red,g:this.value.green,b:this.value.blue});this._controllerNodes.hsv.value=t,this.callEvent("onChange",[t])},dhtmlXColorPicker.prototype._refreshContrast=function(){var t=this.colorAIP.hsl2rgb(this.value.hue,0,this.value.lum/100),e=this.colorAIP.hsl2rgb(this.value.hue,1,this.value.lum/100),i=this._checkIeVersion();if(i&&8>=i){var s=this._controllerNodes.contrastArea.firstChild;s==this._controllerNodes.contrast_line&&(s=document.createElement("div"),s.className+="dhxcp_ie_gradient",this._controllerNodes.contrastArea.appendChild(s),this._controllerNodes.contrastArea.appendChild(this._controllerNodes.contrast_line));var n=this.colorAIP.rgb2hex({r:Math.round(255*t.r),g:Math.round(255*t.g),b:Math.round(255*t.b)}),o=this.colorAIP.rgb2hex({r:Math.round(255*e.r),g:Math.round(255*e.g),b:Math.round(255*e.b)});s.style.filter="progid:DXImageTransform.Microsoft.gradient(startColorstr='"+o+"', endColorstr='"+n+"', GradientType=0)"}else t=[Math.round(255*t.r),Math.round(255*t.g),Math.round(255*t.b)],e=[Math.round(255*e.r),Math.round(255*e.g),Math.round(255*e.b)],this._controllerNodes.contrastArea.style.backgroundImage="linear-gradient(to top, rgb("+t.join(",")+"), rgb("+e.join(",")+"))"},dhtmlXColorPicker.prototype._refreshLines=function(){this._controllerNodes.v_line.style.left=this.conf.x+"px",this._controllerNodes.h_line.style.top=this.conf.y+"px"},dhtmlXColorPicker.prototype._refreshContrastLine=function(){this._controllerNodes.contrast_line.style.top=this.conf.c+"px"},dhtmlXColorPicker.prototype._getOffsetPosition=function(t,e){var i={x:0/0,y:0/0},s=t.target||t.srcElement;return s==e?(i.x=void 0!=t.offsetX?t.offsetX:t.layerX,i.y=void 0!=t.offsetY?t.offsetY:t.layerY):s==this._controllerNodes.v_line?i.y=void 0!=t.offsetY?t.offsetY:t.layerY:i.x=void 0!=t.offsetX?t.offsetX:t.layerX,i},dhtmlXColorPicker.prototype.colorAIP={hex2rgb:function(t){var e=t.match(/^(#)([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i);return null!=e?{r:parseInt("0x"+e[2]),g:parseInt("0x"+e[3]),b:parseInt("0x"+e[4])}:null},rgb2hex:function(t){var e=parseInt(t.r),i=parseInt(t.g),s=parseInt(t.b);return e=e||0,i=i||0,s=s||0,"#"+(e?16>e?"0"+e.toString(16):e.toString(16):"00")+(i?16>i?"0"+i.toString(16):i.toString(16):"00")+(s?16>s?"0"+s.toString(16):s.toString(16):"00")},rgb2hsl:function(t,e,i){var s,n,o,l=Math.max(t,e,i),r=Math.min(t,e,i);return o=.5*(l+r),l==r?s=0:l==t?(s=60*(e-i)/(l-r),i>e&&(s+=360)):s=l==e?60*(i-t)/(l-r)+120:60*(t-e)/(l-r)+240,n=0==o||l==r?0:.5>=o?.5*(l-r)/o:.5*(l-r)/(1-o),{h:s,s:n,l:o}},hsl2rgb:function(t,e,i){var s,n,o,l=[],r=[];s=.5>=i?i*(1+e):i+e-i*e,n=2*i-s,o=t/360,l.push(o+1/3),l.push(o),l.push(o-1/3);for(var a=0;3>a;a++)l[a]<0?l[a]+=1:l[a]>1&&(l[a]-=1),r.push(l[a]<1/6?n+6*(s-n)*l[a]:l[a]<.5?s:l[a]<2/3?n+(s-n)*(2/3-l[a])*6:n);return{r:r[0],g:r[1],b:r[2]}}},dhtmlXColorPicker.prototype._checkIeVersion=function(){var t,e=navigator.userAgent.match(/(MSIE)\s(\d\.\d)/i);return t=e&&e[2]?parseInt(e[2]):null},dhtmlXColorPicker.prototype.setCustomColors=function(){null==this.memory&&(this.initMemoryColors(),this.conf.customColors=!0);var t,e,i,s,n,o;for(e=arguments.length,t=0;e>t;t++)if(arguments[t]instanceof Array)i=this._rgb2value(arguments[t][0],arguments[t][1],arguments[t][2]),this.memory.setValue(i,null,!1);else if("string"==typeof arguments[t]){if(s=arguments[t].match(/^rgb\((\d{1,3})\,(\d{1,3})\,(\d{1,3})\)$/i),s instanceof Array){i=this._rgb2value(s[1],s[2],s[3]),this.memory.setValue(i,null,!1);continue}if(s=arguments[t].match(/(#[\da-f]{6})/gi),s instanceof Array)for(o=s.length,n=0;o>n;n++)i=this._hex2value(s[n]),this.memory.setValue(i,null,!1)}},dhtmlXColorPicker.prototype._rgb2value=function(t,e,i){var s=this.colorAIP.rgb2hsl(t/255,e/255,i/255);return{red:t,green:e,blue:i,hue:Math.round(s.h),sat:Math.round(100*s.s),lum:Math.round(100*s.l)}},dhtmlXColorPicker.prototype._hex2value=function(t){var e,i;return e=this.colorAIP.hex2rgb(t),i=this.colorAIP.rgb2hsl(e.r/255,e.g/255,e.b/255),{red:e.r,green:e.g,blue:e.b,hue:Math.round(i.h),sat:Math.round(100*i.s),lum:Math.round(100*i.l)}},dhtmlXColorPicker.prototype.showMemory=function(){null==this.memory&&this.initMemoryColors(),this._globalNode.className.match(/dhxcp_add_memory/)||(this._globalNode.className+=" dhxcp_add_memory"),this.conf.customColors=!0},dhtmlXColorPicker.prototype.hideMemory=function(){null!=this.memory&&(this._globalNode.className=this._globalNode.className.replace(/\sdhxcp_add_memory/,"")),this.conf.customColors=!1},dhtmlXColorPicker.prototype.setSkin=function(t){t=t.toLowerCase();var e,i,s=-1,n="dhtmlxcp";if(e=this.base.className.match(/\S\w+/gi),e instanceof Array){for(i in this._skinCollection){if(-1!=s)break;s=this._indexOf(e,n+"_"+i)}s=-1==s?e.length:s}else e=[],s=0;e[s]=n+"_"+t,this.base.className=e.join(" "),this.skin=t},dhtmlXColorPicker.prototype.hideOnSelect=function(t){t=dhx4.s2b(t),this.conf.hideOnSelect=t},dhtmlXColorPicker.prototype._indexOf=function(t,e){var i,s,n=-1;for(s=t.length,i=s;i>=0;i--)if(t[i]==e){n=i;break}return n},dhtmlXColorPicker.prototype.destructMemory=function(){if(null!=this.memory){this.hideMemory();var t=this._controllerNodes.memory_block.childNodes[0].firstChild;this._labelNodes.btnAddColor=null,"function"==typeof window.addEventListener?t.removeEventListener("click",this.saveColor,!1):t.detachEvent("onclick",this.saveColor),this.memory.remove(),this._controllerNodes.memory_block.innerHTML="",this.memory=null}},dhtmlXColorPicker.prototype.Memory=function(t){var e=this,i=null,s={red:255,blue:255,green:255,hue:0,sat:0,lum:100};this.select=function(){var t=this!=window?this:event.srcElement,s=s||t.dhxpc_memory;null!=i&&e.unSelect(),i=s,s.domElement.className+=" dhxcp_memory_el_select","function"==typeof e.onSelect&&e.onSelect(s)},this.onSelect=null,this.onSave=null,this._createMemoryController=function(t){var i={domElement:t,value:dhx4._copyObj(s)};return t.dhxpc_memory=i,"function"==typeof window.addEventListener?t.addEventListener("click",e.select,!1):t.attachEvent("onclick",e.select),i},this._findMemoryControllers=function(t){var e,i,s=t.getElementsByTagName("a"),n=[];for(i=s.length,e=0;i>e;e++)n.push(this._createMemoryController(s[e]));return n},this.controllers=this._findMemoryControllers(t),this.unSelect=function(){i&&(i.domElement.className=i.domElement.className.replace(/\s.*$/i,"")),i=null},this.setActiveNext=function(){var t,e=null;return null==i?i=this.controllers[0]:(e=this.getIndex(i),t=this.controllers.length,this.unSelect(),i=t>e+1?this.controllers[e+1]:this.controllers[0]),i.domElement.className+=" dhxcp_memory_el_next",i},this.setValue=function(t,e,s){i=e||i,null==i&&(i=this.controllers[0]),i.value.red=t.red,i.value.blue=t.blue,i.value.green=t.green,i.value.hue=t.hue,i.value.sat=t.sat,i.value.lum=t.lum,i.domElement.style.backgroundColor="rgb("+[t.red,t.green,t.blue].join(", ")+")",this.setActiveNext(),0!=s&&"function"==typeof this.onSave&&this.onSave(t)},this.clean=function(){for(var t,e=this.controllers.length,n=0;e>n;n++)t=this.controllers[n],t.value=dhx4._copyObj(s),t.domElement.style.backgroundColor="rgb("+[s.red,s.green,s.blue].join(", ")+")";this.unSelect(),i=this.controllers[0]},this.getIndex=function(t){var e,i,s=-1;for(i=this.controllers.length,e=0;i>e;e++)if(this.controllers[e]==t){s=e;break}return s},this.remove=function(){var t,e;for(e=this.controllers.length,t=0;e>t;t++)"function"==typeof window.addEventListener?this.controllers[t].domElement.removeEventListener("click",this.select,!1):this.controllers[t].domElement.detachEvent("onclick",this.select),delete this.controllers[t].domElement.dhxpc_memory;delete this.onSelect,delete this.controllers,delete this.onSave}},window.dhx4.isIE6&&(dhtmlXColorPicker.prototype._cpInitFRM=function(){var t;this._controllerNodes.fr_cover||(t=document.createElement("IFRAME"),t.className="dhxcp_frm",t.border=0,t.frameBorder=0,this._controllerNodes.fr_cover=t),this.base._dhx_remove||this.base.insertBefore(t,this._globalNode)}),dhtmlXSlider.prototype._setOrient=function(t){t=t||!1,/\s?dhxsl_cont_hr/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_hr/i,"")),/\s?dhxsl_cont_vr/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_cont_vr/i,"")),this._nodes.cont.className+=t?" dhxsl_cont_vr":" dhxsl_cont_hr"},dhtmlXSlider.prototype._attachEvents=function(t){"function"==typeof window.addEventListener?(t.runner.addEventListener("mousedown",this._initMover,!1),t.cont.addEventListener("mousedown",this._doOnSetValue,!1)):(t.runner.attachEvent("onmousedown",this._initMover),t.cont.attachEvent("onmousedown",this._doOnSetValue))},dhtmlXSlider.prototype._detachEvents=function(t){"function"==typeof window.addEventListener?(t.runner.removeEventListener("mousedown",this._initMover,!1),t.cont.removeEventListener("mousedown",this._doOnSetValue,!1)):(t.runner.detachEvent("onmousedown",this._initMover),t.cont.detachEvent("onmousedown",this._doOnSetValue))},dhtmlXSlider.prototype._mergeConfig=function(t){for(var e in t)switch(e.toLowerCase()){case"size":case"min":case"max":case"value":case"step":this.conf[e]=parseInt(t[e]);break;case"vertical":case"tooltip":case"disabled":case"visible":this.conf[e]=dhx4.s2b(t[e]);break;case"parent":continue;default:this.conf[e]=t[e]}},dhtmlXSlider.prototype._readAttFormNode=function(t){var e,i,s=t.attributes,n=s.length,o={};for(e=0;n>e;e++)switch(i=s[e],i.name.toLowerCase()){case"size":case"min":case"max":case"value":case"step":o[i.name]=parseInt(i.value);break;case"skin":o.skin=i.value;break;case"vertical":case"disabled":case"visible":o[i.name]=dhx4.s2b(i.value);break;case"linkto":o.linkTo=i.value;break;case"tooltip":o.tooltip=dhx4.s2b(i.value)}return o},dhtmlXSlider.prototype._renderArgumets=function(t){var e,i,s={};for(i=t.length,e=0;i>e;e++)switch(e){case 0:s.parent=t[e];break;case 1:s.size=t[e];break;case 2:s.skin=t[e];break;case 3:s.vertical=t[e];break;case 4:s.min=t[e];break;case 5:s.max=t[e];break;case 6:s.value=t[e];break;case 7:s.step=t[e]}return s},dhtmlXSlider.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0},dhtmlXSlider.prototype._indexOf=function(t,e){var i,s,n=-1;for(s=t.length,i=s;i>=0;i--)if(t[i]==e){n=i;break}return n},dhtmlXSlider.prototype._refreshRunner=function(){var t,e;this.conf.vertical?(t=this._nodes.cont.offsetHeight-this._nodes.runner.offsetHeight,e=this._getCoord(t),this._nodes.runner.style.top=e+this.conf.border+"px",this._nodes.runner.style.left=Math.round((this._nodes.cont.offsetWidth-this._nodes.runner.offsetWidth)/2)+"px"):(t=this._nodes.cont.offsetWidth-this._nodes.runner.offsetWidth,e=this._getCoord(t),this._nodes.runner.style.left=e+this.conf.border+"px",this._nodes.runner.style.top=Math.round((this._nodes.cont.offsetHeight-this._nodes.runner.offsetHeight)/2)+"px")},dhtmlXSlider.prototype._setValueByCoord=function(t){var e,i,s=dhx4.absLeft(this._nodes.cont),n=dhx4.absTop(this._nodes.cont);i=this.conf.vertical?(t.y-n-this._nodes.runner.offsetHeight/2)/(this._nodes.cont.offsetHeight-this._nodes.runner.offsetHeight):(t.x-s-this._nodes.runner.offsetWidth/2)/(this._nodes.cont.offsetWidth-this._nodes.runner.offsetWidth),e=Math.round((this.conf.max-this.conf.min)*i+this.conf.min),this.setValue(e,!0)},dhtmlXSlider.prototype._getCoord=function(t){var e=this.conf,i=(e.value-e.min)/(e.max-e.min);return Math.round(t*i)},dhtmlXSlider.prototype._normalize=function(t){return t=parseInt(t),Math.round(t/this.conf.step)*this.conf.step},dhtmlXSlider.prototype._attachNode=function(t){var e=t.tagName.toLowerCase();if(e){switch(this._attachedNode.node=t,e){case"input":"function"==typeof window.addEventListener?(t.addEventListener("change",this._doOnChangeInput,!1),t.addEventListener("keydown",this._doOnKeyDown,!1)):(t.attachEvent("onchange",this._doOnChangeInput),t.attachEvent("onkeydown",this._doOnKeyDown)),this._attachedNode.setValue=function(e){t.value=e};break;default:this._attachedNode.setValue=function(e){t.innerHTML=e}}this._attachedNode.setValue(this.conf.value)}},dhtmlXSlider.prototype._detachNode=function(){var t=this._attachedNode.node;if(t){var e=t.tagName;switch(e){case"input":"function"==typeof window.addEventListener?(t.removeEventListener("change",this._doOnChangeInput,!1),t.removeEventListener("keydown",this._doOnChangeInput,!1)):(t.detachEvent("change",this._doOnChangeInput),t.detachEvent("keydown",this._doOnChangeInput))}delete this._attachedNode.node,delete this._attachedNode.setValue}},dhtmlXSlider.prototype.setSize=function(t){t=parseInt(t),isNaN(t)||(this.conf.vertical?(this._nodes.cont.style.width&&delete this._nodes.cont.style.width,this._nodes.cont.style.height=t-this.conf.margin+"px"):(this._nodes.cont.style.height&&delete this._nodes.cont.style.height,this._nodes.cont.style.width=t-this.conf.margin+"px"),this._refreshRunner())},dhtmlXSlider.prototype.setSkin=function(t){t=t.toLowerCase();var e,i,s=-1,n="dhtmlxslider";if(e=this.base.className.match(/\S\w+/gi),e instanceof Array){for(i in this._skinCollection){if(-1!=s)break;s=this._indexOf(e,n+"_"+i)}s=-1==s?e.length:s}else e=[],s=0;e[s]=n+"_"+t,this.base.className=e.join(" "),this.conf.skin=t,this._nodes&&this._refreshRunner()},dhtmlXSlider.prototype.setValue=function(t,e){t=parseInt(t),e=e||!1,isNaN(t)||(t=this._normalize(t),t=Math.max(this.conf.min,t),t=Math.min(this.conf.max,t),this.conf.value!==t&&(this.conf.value=t,this._refreshRunner(),this.conf.tooltip&&(this._nodes.cont.title=this.conf.value),e&&this.callEvent("onChange",[this.conf.value,this]))),"function"==typeof this._attachedNode.setValue&&this._attachedNode.setValue(this.conf.value)},dhtmlXSlider.prototype.getValue=function(){return this.conf.value},dhtmlXSlider.prototype.disable=function(t){t=0==t?!1:!0;var e=null;if(t){for(var i in this._nodes)"cont"!=i&&(e=new RegExp("\\s?dhxsl_"+i+"_dis","i"),e.test(this._nodes[i].className)||(this._nodes[i].className+=" dhxsl_"+i+"_dis"));this.conf.disabled=!0}else this.enable()},dhtmlXSlider.prototype.enable=function(){var t;for(var e in this._nodes)"cont"!=e&&(t=new RegExp("\\s?dhxsl_"+e+"_dis","i"),t.test(this._nodes[e].className)&&(this._nodes[e].className=this._nodes[e].className.replace(t,"")));this.conf.disabled=!1},dhtmlXSlider.prototype.isEnabled=function(){return!this.conf.disabled},dhtmlXSlider.prototype.disableTooltip=function(){this._nodes.cont.removeAttribute("title"),this.conf.tooltip=!1},dhtmlXSlider.prototype.enableTooltip=function(t){t="undefined"==typeof t?!0:dhx4.s2b(t),t?(this._nodes.cont.title=this.conf.value,this.conf.tooltip=!0):this.disableTooltip()},dhtmlXSlider.prototype.setMax=function(t){t=parseInt(t),!isNaN(t)&&this.conf.min<t&&(this.conf.max=t,this.setValue(this.conf.value))},dhtmlXSlider.prototype.getMax=function(){return this.conf.max},dhtmlXSlider.prototype.setMin=function(t){t=parseInt(t),!isNaN(t)&&this.conf.max>t&&(this.conf.min=t,this.setValue(this.conf.value))},dhtmlXSlider.prototype.getMin=function(){return this.conf.min},dhtmlXSlider.prototype.setStep=function(t){t=parseInt(t);var e=this.conf.max-this.conf.min;!isNaN(t)&&e>t&&(this.conf.step=t,this.setValue(this.conf.value))},dhtmlXSlider.prototype.getStep=function(){return this.conf.step},dhtmlXSlider.prototype.show=function(){/\s?dhxsl_hidden/i.test(this._nodes.cont.className)&&(this._nodes.cont.className=this._nodes.cont.className.replace(/\s?dhxsl_hidden/i,"")),this.conf.visible=!0
},dhtmlXSlider.prototype.hide=function(){/\s?dhxsl_hidden/i.test(this._nodes.cont.className)||(this._nodes.cont.className+=" dhxsl_hidden"),this.conf.visible=!1},dhtmlXSlider.prototype.isVisible=function(){return this.conf.visible},dhtmlXSlider.prototype.linkTo=function(t){"string"==typeof t&&(t=document.getElementById(t)),this._attachedNode.node&&this._detachNode(),this._attachNode(t)},dhtmlXPopup.prototype.attachObject=function(t){return this._attachNode("object",{obj:t})},dhtmlXPopup.prototype._attach_init_object=function(t){this._nodeObj="string"==typeof t.obj?document.getElementById(t.obj):t.obj,t.obj=null,document.getElementById(this._nodeId).appendChild(this._nodeObj),this._nodeObj.style.display="",this._nodeObj.style.visibility="visible"},dhtmlXPopup.prototype.attachHTML=function(t){return this._attachNode("html",{html:t})},dhtmlXPopup.prototype._attach_init_html=function(t){document.getElementById(this._nodeId).innerHTML=t.html,this._nodeObj={text:t.html}},dhtmlXPopup.prototype.attachForm=function(t){return this._attachNode("form",{struct:t})},dhtmlXPopup.prototype._attach_init_form=function(t){var e=this;this._nodeObj=new dhtmlXForm(this._nodeId,t.struct),this._nodeObj.setSkin(this.conf.skin),this._nodeObj.attachEvent("_onBeforeEditorAccess",function(){e._clearClick=!0})},dhtmlXPopup.prototype.attachCalendar=function(){return this._attachNode("calendar",{})},dhtmlXPopup.prototype._attach_init_calendar=function(){this._nodeObj=new dhtmlXCalendarObject(this._nodeId),this._nodeObj.setSkin(this.conf.skin),this._nodeObj.show()},dhtmlXPopup.prototype.attachGrid=function(t,e){return this._attachNode("grid",{width:t||400,height:e||200})},dhtmlXPopup.prototype._attach_init_grid=function(){this._nodeObj=new dhtmlXGridObject(this._nodeId),this._nodeObj.setSkin(this.conf.skin)},dhtmlXPopup.prototype.attachTree=function(t,e,i){return this._attachNode("tree",{width:t||400,height:e||200,rootId:i||0})},dhtmlXPopup.prototype._attach_init_tree=function(t){this._nodeObj=new dhtmlXTreeObject(this._nodeId,"100%","100%",t.rootId)},dhtmlXPopup.prototype.attachLayout=function(t,e,i){return this._attachNode("layout",{width:t||400,height:e||200,pattern:i||"3L"})},dhtmlXPopup.prototype._attach_init_layout=function(t){this._nodeObj=new dhtmlXLayoutObject(this._nodeId,t.pattern,this.conf.skin)},dhtmlXPopup.prototype.attachAccordion=function(t,e,i){return this._attachNode("accordion",{width:t||400,height:e||200,conf:i||{}})},dhtmlXPopup.prototype._attach_init_accordion=function(t){t.conf.parent=this._nodeId,t.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXAccordion(t.conf)},dhtmlXPopup.prototype.attachTabbar=function(t,e,i){return"string"==typeof i?i={mode:i}:("object"!=typeof i||null==i)&&(i={}),this._attachNode("tabbar",{width:t||400,height:e||200,conf:i})},dhtmlXPopup.prototype._attach_init_tabbar=function(t){t.conf.parent=this._nodeId,t.conf.skin=this.conf.skin,this._nodeObj=new dhtmlXTabBar(t.conf)},dhtmlXPopup.prototype.attachEditor=function(t,e,i){return this._attachNode("editor",{width:t||400,height:e||200,conf:i||{}})},dhtmlXPopup.prototype._attach_init_editor=function(t){document.getElementById(this._nodeId).className="dhxeditor_"+this.conf.skin,t.conf.parent=this._nodeId,null==t.conf.skin&&(t.conf.skin=this.conf.skin),this._nodeObj=new dhtmlXEditor(t.conf);var e=this.attachEvent("onShow",function(){this._nodeObj instanceof window.dhtmlXEditor&&this._nodeObj.setSizes()});null==this._nodeObjEv&&(this._nodeObjEv=[]),this._nodeObjEv.push(e)},dhtmlXPopup.prototype.attachColorPicker=function(t){return("object"!=typeof t||null==t)&&(t={}),this._attachNode("colorpicker",{conf:t})},dhtmlXPopup.prototype._attach_init_colorpicker=function(t){t.conf.skin=this.conf.skin,t.conf.parent=this._nodeId,this._nodeObj=new dhtmlXColorPicker(t.conf)},dhtmlXMenuObject.prototype._init=function(){1!=this._isInited&&(this.conf.dload?(this._dhxdataload.onBeforeXLS=function(){var t={params:{}};for(var e in this.conf.dload_params)t.params[e]=this.conf.dload_params[e];return t},this.loadStruct(this.conf.dload_url)):(this._initTopLevelMenu(),this._isInited=!0))},dhtmlXMenuObject.prototype._countVisiblePolygonItems=function(t){var e=0;for(var i in this.itemPull){var s=this.itemPull[i].parent,n=this.itemPull[i].type;null!=this.idPull[i]&&(s!=t||"item"!=n&&"radio"!=n&&"checkbox"!=n||"none"==this.idPull[i].style.display||e++)}return e},dhtmlXMenuObject.prototype._redefineComplexState=function(t){if(this.idPrefix+this.topId!=t&&null!=this.idPull["polygon_"+t]&&null!=this.idPull[t]){var e=this._countVisiblePolygonItems(t);e>0&&!this.itemPull[t].complex&&this._updateItemComplexState(t,!0,!1),0==e&&this.itemPull[t].complex&&this._updateItemComplexState(t,!1,!1)}},dhtmlXMenuObject.prototype._updateItemComplexState=function(t,e){if(!this.conf.context&&"TopLevel"==this._getItemLevelType(t.replace(this.idPrefix,"")))return void(this.itemPull[t].complex=e);if(null!=this.idPull[t]&&null!=this.itemPull[t]&&(this.itemPull[t].complex=e,t!=this.idPrefix+this.topId)){var i=null,s=this.idPull[t].childNodes[this.conf.rtl?0:2];if(s.childNodes[0]&&0===String(s.childNodes[0].className).search("complex_arrow")&&(i=s.childNodes[0]),this.itemPull[t].complex){if(null==i){for(i=document.createElement("DIV"),i.className="complex_arrow",i.id="arrow_"+t;s.childNodes.length>0;)s.removeChild(s.childNodes[0]);s.appendChild(i)}return void(this.conf.dload&&"get"==this.itemPull[t].loaded&&this.conf.dload_icon?"complex_arrow_loading"!=i.className&&(i.className="complex_arrow_loading"):i.className="complex_arrow")}this.itemPull[t].complex||null==i||(s.removeChild(i),null!=this.itemPull[t].hotkey_backup&&this.setHotKey&&this.setHotKey(t.replace(this.idPrefix,""),this.itemPull[t].hotkey_backup))}},dhtmlXMenuObject.prototype._getItemLevelType=function(t){return this.itemPull[this.idPrefix+t].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea"},dhtmlXMenuObject.prototype.setIconsPath=function(t){this.conf.icons_path=t},dhtmlXMenuObject.prototype._updateItemImage=function(t){t=this.idPrefix+t;var e=this.itemPull[t].parent==this.idPrefix+this.topId&&!this.conf.context,i=null;if(e)for(var s=0;s<this.idPull[t].childNodes.length;s++)try{"dhtmlxMenu_TopLevel_Item_Icon"==this.idPull[t].childNodes[s].className&&(i=this.idPull[t].childNodes[s])}catch(n){}else{try{var i=this.idPull[t].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(n){}(null==i||"undefined"==typeof i.className||"sub_icon"!=i.className)&&(i=null)}if("radio"==this.itemPull[t].type)var o=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];else var o=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];if(o.length>0)if(null!=i)i.src=this.conf.icons_path+o;else if(e){var i=document.createElement("IMG");i.className="dhtmlxMenu_TopLevel_Item_Icon",i.src=this.conf.icons_path+o,i.border="0",i.id="image_"+t,!this.conf.rtl&&this.idPull[t].childNodes.length>0?this.idPull[t].insertBefore(i,this.idPull[t].childNodes[0]):this.idPull[t].appendChild(i)}else{var i=document.createElement("IMG");i.className="sub_icon",i.src=this.conf.icons_path+o,i.border="0",i.id="image_"+t;for(var l=this.idPull[t].childNodes[this.conf.rtl?2:0];l.childNodes.length>0;)l.removeChild(l.childNodes[0]);l.appendChild(i)}else if(null!=i){var r=i.parentNode;r.removeChild(i),r.innerHTML="&nbsp;",r=i=null}},dhtmlXMenuObject.prototype._getAllParents=function(t){var e=new Array;for(var i in this.itemPull)if(this.itemPull[i].parent==t&&(e[e.length]=this.itemPull[i].id,this.itemPull[i].complex))for(var s=this._getAllParents(this.itemPull[i].id),n=0;n<s.length;n++)e[e.length]=s[n];return e},dhtmlXMenuObject.prototype._autoDetectVisibleArea=function(){if(!this.conf.v_enabled){var t=window.dhx4.screenDim();this.conf.v.x1=t.left,this.conf.v.x2=t.right,this.conf.v.y1=t.top,this.conf.v.y2=t.bottom}},dhtmlXMenuObject.prototype.getItemPosition=function(t){t=this.idPrefix+t;var e=-1;if(null==this.itemPull[t])return e;for(var i=this.itemPull[t].parent,s=null!=this.idPull["polygon_"+i]?this.idPull["polygon_"+i].tbd:this.cont,n=0;n<s.childNodes.length;n++)(s.childNodes[n]==this.idPull["separator_"+t]||s.childNodes[n]==this.idPull[t])&&(e=n);return e},dhtmlXMenuObject.prototype.setItemPosition=function(t,e){if(t=this.idPrefix+t,null!=this.idPull[t]){var i=this.itemPull[t].parent==this.idPrefix+this.topId,s=this.idPull[t],n=this.getItemPosition(t.replace(this.idPrefix,"")),o=this.itemPull[t].parent,l=null!=this.idPull["polygon_"+o]?this.idPull["polygon_"+o].tbd:this.cont;l.removeChild(l.childNodes[n]),0>e&&(e=0),i&&1>e&&(e=1),e<l.childNodes.length?l.insertBefore(s,l.childNodes[e]):l.appendChild(s)}},dhtmlXMenuObject.prototype.getParentId=function(t){return t=this.idPrefix+t,null==this.itemPull[t]?null:(null!=this.itemPull[t].parent?this.itemPull[t].parent:this.topId).replace(this.idPrefix,"")},dhtmlXMenuObject.prototype.hide=function(){this._clearAndHide()},dhtmlXMenuObject.prototype.clearAll=function(){this.removeItem(this.idPrefix+this.topId,!0),this._isInited=!1,this.idPrefix=this._genStr(12)+"_",this.itemPull={}},"undefined"==typeof dhtmlXMenuObject.prototype.liveInst&&(dhtmlXMenuObject.prototype.liveInst={}),dhtmlXMenuObject.prototype._redistribTopLevelSelection=function(t){var e=this._getSubItemToDeselectByPolygon("parent");this._removeSubItemFromSelected(-1,-1);for(var i=0;i<e.length;i++)e[i]!=t&&this._hidePolygon(e[i]),null!=this.idPull[e[i]]&&e[i]!=t&&(this.idPull[e[i]].className=this.idPull[e[i]].className.replace(/Selected/g,"Normal"));"enabled"==this.itemPull[this.idPrefix+t].state&&(this.idPull[this.idPrefix+t].className="dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_Selected",this._addSubItemToSelected(this.idPrefix+t,"parent"),this.conf.selected="win"==this.conf.mode?-1!=this.conf.selected?t:this.conf.selected:t,this.itemPull[this.idPrefix+t].complex&&-1!=this.conf.selected&&this._showPolygon(this.idPrefix+t,this.conf.dir_toplv))},dhtmlXMenuObject.prototype._initTopLevelMenu=function(){if(this.conf.dir_toplv="bottom",this.conf.dir_sublv=this.conf.rtl?"left":"right",this.conf.context)this.idPull[this.idPrefix+this.topId]=new Array(0,0),this._addSubMenuPolygon(this.idPrefix+this.topId,this.idPrefix+this.topId);else for(var t=this._getMenuNodes(this.idPrefix+this.topId),e=0;e<t.length;e++)"item"==this.itemPull[t[e]].type&&this._renderToplevelItem(t[e],null),"separator"==this.itemPull[t[e]].type&&this._renderSeparator(t[e],null)},dhtmlXMenuObject.prototype._renderToplevelItem=function(t,e){var i=this,s=document.createElement("DIV");if(s.id=t,s.className="enabled"==this.itemPull[t].state&&null!=this.itemPull[t].cssNormal?this.itemPull[t].cssNormal:"dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[t].state?"Normal":"Disabled"),""!=this.itemPull[t].title){var n=document.createElement("DIV");n.className="top_level_text",n.innerHTML=this.itemPull[t].title,s.appendChild(n)}if(this.itemPull[t].tip.length>0&&(s.title=this.itemPull[t].tip),""!=this.itemPull[t].imgen||""!=this.itemPull[t].imgdis){var o=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];if(o){var l=document.createElement("IMG");l.border="0",l.id="image_"+t,l.src=this.conf.icons_path+o,l.className="dhtmlxMenu_TopLevel_Item_Icon",s.childNodes.length>0&&!this.conf.rtl?s.insertBefore(l,s.childNodes[0]):s.appendChild(l)}}s.onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},s.oncontextmenu=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this.cont||(this.cont=document.createElement("DIV"),this.cont.dir="ltr",this.cont.className="right"==this.conf.align?"align_right":"align_left",this.base.appendChild(this.cont)),null!=e&&(e++,0>e&&(e=0),e>this.cont.childNodes.length-1&&(e=null)),null!=e?this.cont.insertBefore(s,this.cont.childNodes[e]):this.cont.appendChild(s),this.idPull[s.id]=s,this.itemPull[t].complex&&!this.conf.dload&&this._addSubMenuPolygon(this.itemPull[t].id,this.itemPull[t].id),s.onmouseover=function(){"web"==i.conf.mode&&window.clearTimeout(i.conf.tm_handler);var t=i._getSubItemToDeselectByPolygon("parent");i._removeSubItemFromSelected(-1,-1);for(var e=0;e<t.length;e++)t[e]!=this.id&&i._hidePolygon(t[e]),null!=i.idPull[t[e]]&&t[e]!=this.id&&(null!=i.itemPull[t[e]].cssNormal?i.idPull[t[e]].className=i.itemPull[t[e]].cssNormal:("sub_item_selected"==i.idPull[t[e]].className&&(i.idPull[t[e]].className="sub_item"),i.idPull[t[e]].className=i.idPull[t[e]].className.replace(/Selected/g,"Normal")));if("enabled"==i.itemPull[this.id].state){if(this.className="dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Selected",i._addSubItemToSelected(this.id,"parent"),i.conf.selected="win"==i.conf.mode?-1!=i.conf.selected?this.id:i.conf.selected:this.id,i.conf.dload){if("no"==i.itemPull[this.id].loaded){this._dynLoadTM=(new Date).getTime(),i.itemPull[this.id].loaded="get";var s=this.id.replace(i.idPrefix,"");i._dhxdataload.onBeforeXLS=function(){var t={params:{}};t.params[this.conf.dload_pid]=s;for(var e in this.conf.dload_params)t.params[e]=this.conf.dload_params[e];return t},i.loadStruct(i.conf.dload_url)}i.conf.top_mode&&"web"==i.conf.mode&&!i.conf.context&&(this._mouseOver=!0)}if((!i.conf.dload||i.conf.dload&&(!i.itemPull[this.id].loaded||"yes"==i.itemPull[this.id].loaded))&&i.itemPull[this.id].complex&&-1!=i.conf.selected)if(i.conf.top_mode&&"web"==i.conf.mode&&!i.conf.context){this._mouseOver=!0;var n=this.id;this._menuOpenTM=window.setTimeout(function(){i._showPolygon(n,i.conf.dir_toplv)},i.conf.top_tmtime)}else i._showPolygon(this.id,i.conf.dir_toplv)}i._doOnTouchMenu(this.id.replace(i.idPrefix,""))},s.onmouseout=function(){i.itemPull[this.id].complex&&-1!=i.conf.selected||"enabled"!=i.itemPull[this.id].state||(s.className=null!=i.itemPull[this.id].cssNormal?i.itemPull[this.id].cssNormal:"dhtmlxMenu_"+i.conf.skin+"_TopLevel_Item_Normal"),"web"==i.conf.mode&&(window.clearTimeout(i.conf.tm_handler),i.conf.tm_handler=window.setTimeout(function(){i._clearAndHide()},i.conf.tm_sec,"JavaScript")),i.conf.top_mode&&"web"==i.conf.mode&&!i.conf.context&&(this._mouseOver=!1,window.clearTimeout(this._menuOpenTM))},s.onclick=function(t){if("web"==i.conf.mode&&window.clearTimeout(i.conf.tm_handler),"web"==i.conf.mode||"disabled"!=i.itemPull[this.id].state){if(t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,"win"==i.conf.mode&&i.itemPull[this.id].complex){if(i.conf.selected==this.id){i.conf.selected=-1;var e=!1}else{i.conf.selected=this.id;var e=!0}e?i._showPolygon(this.id,i.conf.dir_toplv):i._hidePolygon(this.id)}var s=i.itemPull[this.id].complex?"c":"-",n="enabled"!=i.itemPull[this.id].state?"d":"-",o={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey};return i._doOnClick(this.id.replace(i.idPrefix,""),s+n+"t",o),!1}},"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._addSubMenuPolygon=function(t,e){var i=(this._renderSublevelPolygon(t,e),this._getMenuNodes(e));for(s=0;s<i.length;s++)"separator"==this.itemPull[i[s]].type?this._renderSeparator(i[s],null):this._renderSublevelItem(i[s],null);if(t==e);else;for(var s=0;s<i.length;s++)this.itemPull[i[s]].complex&&this._addSubMenuPolygon(t,this.itemPull[i[s]].id)},dhtmlXMenuObject.prototype._renderSublevelPolygon=function(t,e){var i=document.createElement("DIV");i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Polygon "+(this.conf.rtl?"dir_right":""),i.dir="ltr",i.oncontextmenu=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1},i.id="polygon_"+e,i.onclick=function(t){t=t||event,t.cancelBubble=!0},i.style.display="none",document.body.insertBefore(i,document.body.firstChild),i.innerHTML='<div style="position:relative;"></div><div style="position: relative; overflow:hidden;"></div><div style="position:relative;"></div>';var s=document.createElement("TABLE");s.className="dhtmlxMebu_SubLevelArea_Tbl",s.cellSpacing=0,s.cellPadding=0,s.border=0;var n=document.createElement("TBODY");return s.appendChild(n),i.childNodes[1].appendChild(s),i.tbl=s,i.tbd=n,this.idPull[i.id]=i,null!=this.sxDacProc&&(this.idPull["sxDac_"+e]=new this.sxDacProc(i,i.className),window.dhx4.isIE?(this.idPull["sxDac_"+e]._setSpeed(this.dacSpeedIE),this.idPull["sxDac_"+e]._setCustomCycle(this.dacCyclesIE)):(this.idPull["sxDac_"+e]._setSpeed(this.dacSpeed),this.idPull["sxDac_"+e]._setCustomCycle(this.dacCycles))),i},dhtmlXMenuObject.prototype._renderSublevelItem=function(t,e){var i=this,s=document.createElement("TR");s.className="enabled"==this.itemPull[t].state?"sub_item":"sub_item_dis";var n=document.createElement("TD");n.className="sub_item_icon";var o=this.itemPull[t]["enabled"==this.itemPull[t].state?"imgen":"imgdis"];if(""!=o){var l=this.itemPull[t].type;if("checkbox"==l||"radio"==l){var r=document.createElement("DIV");r.id="image_"+this.itemPull[t].id,r.className="sub_icon "+o,n.appendChild(r)}if("checkbox"!=l&&"radio"!=l){var r=document.createElement("IMG");r.id="image_"+this.itemPull[t].id,r.className="sub_icon",r.src=this.conf.icons_path+o,n.appendChild(r)}}else n.innerHTML="&nbsp;";var a=document.createElement("TD");if(a.className="sub_item_text",""!=this.itemPull[t].title){var h=document.createElement("DIV");h.className="sub_item_text",h.innerHTML=this.itemPull[t].title,a.appendChild(h)}else a.innerHTML="&nbsp;";var d=document.createElement("TD");if(d.className="sub_item_hk",this.itemPull[t].complex){var c=document.createElement("DIV");c.className="complex_arrow",c.id="arrow_"+this.itemPull[t].id,d.appendChild(c)}else if(this.itemPull[t].hotkey.length>0&&!this.itemPull[t].complex){var u=document.createElement("DIV");u.className="sub_item_hk",u.innerHTML=this.itemPull[t].hotkey,d.appendChild(u)}else d.innerHTML="&nbsp;";s.appendChild(this.conf.rtl?d:n),s.appendChild(a),s.appendChild(this.conf.rtl?n:d),s.id=this.itemPull[t].id,s.parent=this.itemPull[t].parent,this.itemPull[t].tip.length>0&&(s.title=this.itemPull[t].tip),s.onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},s.onmouseover=function(){i.conf.hide_tm[this.id]&&window.clearTimeout(i.conf.hide_tm[this.id]),"web"==i.conf.mode&&window.clearTimeout(i.conf.tm_handler),this._visible||i._redistribSubLevelSelection(this.id,this.parent),this._visible=!0},s.onmouseout=function(){"web"==i.conf.mode&&(i.conf.tm_handler&&window.clearTimeout(i.conf.tm_handler),i.conf.tm_handler=window.setTimeout(function(){i&&i._clearAndHide&&i._clearAndHide()},i.conf.tm_sec,"JavaScript"));var t=this;i.conf.hide_tm[this.id]&&window.clearTimeout(i.conf.hide_tm[this.id]),i.conf.hide_tm[this.id]=window.setTimeout(function(){t._visible=!1},50)},s.onclick=function(t){if(i.checkEvent("onClick")||!i.itemPull[this.id].complex){t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,tc=i.itemPull[this.id].complex?"c":"-",td="enabled"==i.itemPull[this.id].state?"-":"d";var e={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey};switch(i.itemPull[this.id].type){case"checkbox":i._checkboxOnClickHandler(this.id.replace(i.idPrefix,""),tc+td+"n",e);break;case"radio":i._radioOnClickHandler(this.id.replace(i.idPrefix,""),tc+td+"n",e);break;case"item":i._doOnClick(this.id.replace(i.idPrefix,""),tc+td+"n",e)}return!1}};var _=this.idPull["polygon_"+this.itemPull[t].parent];null!=e&&(e++,0>e&&(e=0),e>_.tbd.childNodes.length-1&&(e=null)),null!=e&&null!=_.tbd.childNodes[e]?_.tbd.insertBefore(s,_.tbd.childNodes[e]):_.tbd.appendChild(s),this.idPull[s.id]=s},dhtmlXMenuObject.prototype._renderSeparator=function(t,e){var i=this.conf.context?"SubLevelArea":this.itemPull[t].parent==this.idPrefix+this.topId?"TopLevel":"SubLevelArea";if("TopLevel"!=i||!this.conf.context){var s=this;if("TopLevel"!=i){var n=document.createElement("TR");n.className="sub_sep";var o=document.createElement("TD");o.colSpan="3",n.appendChild(o)}var l=document.createElement("DIV");if(l.id="separator_"+t,l.className="TopLevel"==i?"top_sep":"sub_sep",l.onselectstart=function(t){t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1},l.onclick=function(t){t=t||event,t.cancelBubble=!0;var e={ctrl:t.ctrlKey,alt:t.altKey,shift:t.shiftKey};s._doOnClick(this.id.replace("separator_"+s.idPrefix,""),"--s",e)},"TopLevel"==i){if(null!=e)e++,0>e&&(e=0),null!=this.cont.childNodes[e]?this.cont.insertBefore(l,this.cont.childNodes[e]):this.cont.appendChild(l);else{var r=this.cont.childNodes[this.cont.childNodes.length-1];-1==String(r).search("TopLevel_Text")?this.cont.appendChild(l):this.cont.insertBefore(l,r)}this.idPull[l.id]=l}else{var a=this.idPull["polygon_"+this.itemPull[t].parent];null!=e&&(e++,0>e&&(e=0),e>a.tbd.childNodes.length-1&&(e=null)),null!=e&&null!=a.tbd.childNodes[e]?a.tbd.insertBefore(n,a.tbd.childNodes[e]):a.tbd.appendChild(n),o.appendChild(l),this.idPull[l.id]=n}}},dhtmlXMenuObject.prototype.addNewSeparator=function(t,e){e=this.idPrefix+(null!=e?e:this._genStr(24));var i=this.idPrefix+this.getParentId(t);this._addItemIntoGlobalStrorage(e,i,"","separator",!1,"",""),this._renderSeparator(e,this.getItemPosition(t))},dhtmlXMenuObject.prototype._initObj=function(t,e,i){t instanceof Array||(i=t.parentId,null!=i&&0!==String(i).indexOf(this.idPrefix)&&(i=this.idPrefix+String(i)),t=t.items);for(var s=0;s<t.length;s++){("undefined"==typeof t[s].id||null==t[s].id)&&(t[s].id=this._genStr(24)),0!==String(t[s].id).indexOf(this.idPrefix)&&(t[s].id=this.idPrefix+String(t[s].id));var n={type:"item",tip:"",hotkey:"",state:"enabled",imgen:"",imgdis:""};for(var o in n)"undefined"==typeof t[s][o]&&(t[s][o]=n[o]);if(""==t[s].imgen&&null!=t[s].img&&(t[s].imgen=t[s].img),""==t[s].imgdis&&null!=t[s].img_disabled&&(t[s].imgdis=t[s].img_disabled),null==t[s].title&&null!=t[s].text&&(t[s].title=t[s].text),null!=t[s].href&&(null!=t[s].href.link&&(t[s].href_link=t[s].href.link),null!=t[s].href.target&&(t[s].href_target=t[s].href.target)),null!=t[s].userdata)for(var o in t[s].userdata)this.userData[t[s].id+"_"+o]=t[s].userdata[o];"undefined"!=typeof t[s].enabled&&0==window.dhx4.s2b(t[s].enabled)?t[s].state="disabled":"undefined"!=typeof t[s].disabled&&1==window.dhx4.s2b(t[s].disabled)&&(t[s].state="disabled"),"undefined"==typeof t[s].parent&&(t[s].parent=null!=i?i:this.idPrefix+this.topId),"checkbox"==t[s].type&&(t[s].checked=window.dhx4.s2b(t[s].checked),t[s].imgen=t[s].imgdis="chbx_"+(t[s].checked?"1":"0")),"radio"==t[s].type&&(t[s].checked=window.dhx4.s2b(t[s].checked),t[s].imgen=t[s].imgdis="rdbt_"+(t[s].checked?"1":"0"),("undefined"==typeof t[s].group||null==t[s].group)&&(t[s].group=this._genStr(24)),null==this.radio[t[s].group]&&(this.radio[t[s].group]=[]),this.radio[t[s].group].push(t[s].id)),this.itemPull[t[s].id]=t[s],null!=t[s].items&&t[s].items.length>0?(this.itemPull[t[s].id].complex=!0,this._initObj(t[s].items,!0,t[s].id)):this.conf.dload&&1==t[s].complex&&(this.itemPull[t[s].id].loaded="no"),this.itemPull[t[s].id].items=null}if(e!==!0)if(1==this.conf.dload)if(null==i)this._initTopLevelMenu();else{if(this._addSubMenuPolygon(i,i),this.conf.selected==i){var l=this.itemPull[i].parent==this.idPrefix+this.topId,r=l&&!this.conf.context?this.conf.dir_toplv:this.conf.dir_sublv,a=!1;if(l&&this.conf.top_mode&&"web"==this.conf.mode&&!this.conf.context){var h=this.idPull[i];if(1==h._mouseOver){var d=this.conf.top_tmtime-((new Date).getTime()-h._dynLoadTM);if(d>1){var c=i,u=this;h._menuOpenTM=window.setTimeout(function(){u._showPolygon(c,r),u=c=null},d),a=!0}}}a||this._showPolygon(i,r)}this.itemPull[i].loaded="yes",1==this.conf.dload_icon&&this._updateLoaderIcon(i,!1)}else this._init()},dhtmlXMenuObject.prototype._xmlToJson=function(t,e){var i=[];if(null==e){var s=t.getElementsByTagName(this.conf.tags.root);if(null==s||0==s.length)return data;s=s[0]}else s=t;null!=s.getAttribute("parentId")&&(e=this.idPrefix+s.getAttribute("parentId"));for(var n=0;n<s.childNodes.length;n++)if("undefined"!=typeof s.childNodes[n].tagName&&String(s.childNodes[n].tagName).toLowerCase()==this.conf.tags.item){var o=s.childNodes[n],l={id:this.idPrefix+(o.getAttribute("id")||this._genStr(24)),title:o.getAttribute("text")||"",imgen:o.getAttribute("img")||"",imgdis:o.getAttribute("imgdis")||"",tip:"",hotkey:"",type:o.getAttribute("type")||"item"};if(null!=o.getAttribute("cssNormal")&&(l.cssNormal=o.getAttribute("cssNormal")),"checkbox"==l.type&&(l.checked=o.getAttribute("checked")),"radio"==l.type&&(l.checked=o.getAttribute("checked"),l.group=o.getAttribute("group")),l.state="enabled",null!=o.getAttribute("enabled")&&0==window.dhx4.s2b(o.getAttribute("enabled"))?l.state="disabled":null!=o.getAttribute("disabled")&&1==window.dhx4.s2b(o.getAttribute("disabled"))&&(l.state="disabled"),l.parent=null!=e?e:this.idPrefix+this.topId,this.conf.dload)l.complex=null!=o.getAttribute("complex"),l.complex&&(l.loaded="no");else{var r=this._xmlToJson(o,l.id);l.items=r.items,l.complex=l.items.length>0}for(var a=0;a<o.childNodes.length;a++)if("undefined"!=typeof o.childNodes[a].tagName){var h=String(o.childNodes[a].tagName||"").toLowerCase();if(h==this.conf.tags.userdata){var d=o.childNodes[a];null!=d.getAttribute("name")&&(this.userData[l.id+"_"+d.getAttribute("name")]=null!=d.firstChild&&null!=d.firstChild.nodeValue?d.firstChild.nodeValue:"")}h==this.conf.tags.text_ext&&(l.title=o.childNodes[a].firstChild.nodeValue),h==this.conf.tags.tooltip&&(l.tip=o.childNodes[a].firstChild.nodeValue),h==this.conf.tags.hotkey&&(l.hotkey=o.childNodes[a].firstChild.nodeValue),h==this.conf.tags.href&&"item"==l.type&&(l.href_link=o.childNodes[a].firstChild.nodeValue,null!=o.childNodes[a].getAttribute("target")&&(l.href_target=o.childNodes[a].getAttribute("target")))}i.push(l)}var o={parentId:e,items:i};return o},dhtmlXMenuObject.prototype.enableDynamicLoading=function(t,e){this.conf.dload=!0,this.conf.dload_url=t,this.conf.dload_sign=-1==String(this.conf.dload_url).search(/\?/)?"?":"&",this.conf.dload_icon=e,this._init()},dhtmlXMenuObject.prototype._updateLoaderIcon=function(t,e){if(null!=this.idPull[t]&&!(String(this.idPull[t].className).search("TopLevel_Item")>=0)){var i=this.conf.rtl?0:2;if(this.idPull[t].childNodes[i]&&this.idPull[t].childNodes[i].childNodes[0]){var s=this.idPull[t].childNodes[i].childNodes[0];0===String(s.className).search("complex_arrow")&&(s.className="complex_arrow"+(e?"_loading":""))}}},dhtmlXMenuObject.prototype.addNewSibling=function(t,e,i,s,n,o){var l=this.idPrefix+(null!=e?e:this._genStr(24)),r=this.idPrefix+(null!=t?this.getParentId(t):this.topId);this._addItemIntoGlobalStrorage(l,r,i,"item",s,n,o),r!=this.idPrefix+this.topId||this.conf.context?this._renderSublevelItem(l,this.getItemPosition(t)):this._renderToplevelItem(l,this.getItemPosition(t))},dhtmlXMenuObject.prototype.addNewChild=function(t,e,i,s,n,o,l){if(null==t){if(!this.conf.context)return this.addNewSibling(t,i,s,n,o,l),void(null!=e&&this.setItemPosition(i,e));t=this.topId}i=this.idPrefix+(null!=i?i:this._genStr(24)),this.setHotKey&&this.setHotKey(t,""),t=this.idPrefix+t,this._addItemIntoGlobalStrorage(i,t,s,"item",n,o,l),null==this.idPull["polygon_"+t]&&this._renderSublevelPolygon(t,t),this._renderSublevelItem(i,e-1),this._redefineComplexState(t)},dhtmlXMenuObject.prototype.removeItem=function(t,e,i){e||(t=this.idPrefix+t);var s=null;if(t!=this.idPrefix+this.topId){if(null==this.itemPull[t])return;this.idPull["polygon_"+t]&&this.idPull["polygon_"+t]._tmShow&&window.clearTimeout(this.idPull["polygon_"+t]._tmShow);var n=this.itemPull[t].type;if("separator"==n){var o=this.idPull["separator_"+t];this.itemPull[t].parent==this.idPrefix+this.topId?(o.onclick=null,o.onselectstart=null,o.id=null,o.parentNode.removeChild(o)):(o.childNodes[0].childNodes[0].onclick=null,o.childNodes[0].childNodes[0].onselectstart=null,o.childNodes[0].childNodes[0].id=null,o.childNodes[0].removeChild(o.childNodes[0].childNodes[0]),o.removeChild(o.childNodes[0]),o.parentNode.removeChild(o)),this.idPull["separator_"+t]=null,this.itemPull[t]=null,delete this.idPull["separator_"+t],delete this.itemPull[t],o=null}else{s=this.itemPull[t].parent;var o=this.idPull[t];for(o.onclick=null,o.oncontextmenu=null,o.onmouseover=null,o.onmouseout=null,o.onselectstart=null,o.id=null;o.childNodes.length>0;)o.removeChild(o.childNodes[0]);o.parentNode.removeChild(o),this.idPull[t]=null,this.itemPull[t]=null,delete this.idPull[t],delete this.itemPull[t],o=null}n=null}for(var l in this.itemPull)this.itemPull[l].parent==t&&this.removeItem(l,!0,!0);var r=new Array(t);null==s||i||null!=this.idPull["polygon_"+s]&&0==this.idPull["polygon_"+s].tbd.childNodes.length&&(r.push(s),this._updateItemComplexState(s,!1,!1));for(var a=0;a<r.length;a++)if(this.idPull["polygon_"+r[a]]){var h=this.idPull["polygon_"+r[a]];if(h.onclick=null,h.oncontextmenu=null,h.tbl.removeChild(h.tbd),h.tbd=null,h.childNodes[1].removeChild(h.tbl),h.tbl=null,h.id=null,h.parentNode.removeChild(h),h=null,window.dhx4.isIE6){var d="polygon_"+r[a]+"_ie6cover";null!=this.idPull[d]&&(document.body.removeChild(this.idPull[d]),delete this.idPull[d])}null!=this.idPull["arrowup_"+t]&&this._removeArrow&&this._removeArrow("arrowup_"+t),null!=this.idPull["arrowdown_"+t]&&this._removeArrow&&this._removeArrow("arrowdown_"+t),this.idPull["polygon_"+r[a]]=null,delete this.idPull["polygon_"+r[a]]}r=null,"dhx_terrace"==this.conf.skin&&1==arguments.length&&this._improveTerraceSkin()},dhtmlXMenuObject.prototype._addItemIntoGlobalStrorage=function(t,e,i,s,n,o,l){var r={id:t,title:i,imgen:null!=o?o:"",imgdis:null!=l?l:"",type:s,state:1==n?"disabled":"enabled",parent:e,complex:!1,hotkey:"",tip:""};this.itemPull[r.id]=r},dhtmlXMenuObject.prototype.renderAsContextMenu=function(){this.conf.context=!0,1==this.base._autoSkinUpdate&&(this.base.className=this.base.className.replace("dhtmlxMenu_"+this.conf.skin+"_Middle",""),this.base._autoSkinUpdate=!1),null!=this.conf.ctx_baseid&&this.addContextZone(this.conf.ctx_baseid)},dhtmlXMenuObject.prototype.addContextZone=function(t){if(t==document.body){t="document.body."+this.idPrefix;var e=document.body}else var e=document.getElementById(t);var i=!1;for(var s in this.conf.ctx_zones)i=i||s==t||this.conf.ctx_zones[s]==e;if(1==i)return!1;this.conf.ctx_zones[t]=e;var n=this;window.dhx4.isOpera?(this.operaContext=function(t){n._doOnContextMenuOpera(t,n)},e.addEventListener("mouseup",this.operaContext,!1)):(null==e.oncontextmenu||e._oldContextMenuHandler||(e._oldContextMenuHandler=e.oncontextmenu),e.oncontextmenu=function(t){for(var e in dhtmlXMenuObject.prototype.liveInst)e!=n.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[e].context&&dhtmlXMenuObject.prototype.liveInst[e]._hideContextMenu();return t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,n._doOnContextBeforeCall(t,this),!1})},dhtmlXMenuObject.prototype._doOnContextMenuOpera=function(t,e){for(var i in dhtmlXMenuObject.prototype.liveInst)i!=e.conf.live_id&&dhtmlXMenuObject.prototype.liveInst[i].context&&dhtmlXMenuObject.prototype.liveInst[i]._hideContextMenu();return t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,0==t.button&&1==t.ctrlKey&&e._doOnContextBeforeCall(t,this),!1},dhtmlXMenuObject.prototype.removeContextZone=function(t){if(!this.isContextZone(t))return!1;t==document.body&&(t="document.body."+this.idPrefix);var e=this.conf.ctx_zones[t];window.dhx4.isOpera?e.removeEventListener("mouseup",this.operaContext,!1):(e.oncontextmenu=null!=e._oldContextMenuHandler?e._oldContextMenuHandler:null,e._oldContextMenuHandler=null);try{this.conf.ctx_zones[t]=null,delete this.conf.ctx_zones[t]}catch(i){}return!0},dhtmlXMenuObject.prototype.isContextZone=function(t){if(t==document.body&&null!=this.conf.ctx_zones["document.body."+this.idPrefix])return!0;var e=!1;return null!=this.conf.ctx_zones[t]&&this.conf.ctx_zones[t]==document.getElementById(t)&&(e=!0),e},dhtmlXMenuObject.prototype._isContextMenuVisible=function(){return null==this.idPull["polygon_"+this.idPrefix+this.topId]?!1:""==this.idPull["polygon_"+this.idPrefix+this.topId].style.display},dhtmlXMenuObject.prototype._showContextMenu=function(t,e,i){return this._clearAndHide(),null==this.idPull["polygon_"+this.idPrefix+this.topId]?!1:(window.clearTimeout(this.conf.tm_handler),this.idPull[this.idPrefix+this.topId]=new Array(t,e),this._showPolygon(this.idPrefix+this.topId,"bottom"),void this.callEvent("onContextMenu",[i]))
},dhtmlXMenuObject.prototype._hideContextMenu=function(){return null==this.idPull["polygon_"+this.idPrefix+this.topId]?!1:(this._clearAndHide(),void this._hidePolygon(this.idPrefix+this.topId))},dhtmlXMenuObject.prototype._doOnContextBeforeCall=function(t,e){this.conf.ctx_zoneid=e.id,this._clearAndHide(),this._hideContextMenu();var i=t.srcElement||t.target,s=window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML?t.offsetX:t.layerX,n=window.dhx4.isIE||window.dhx4.isOpera||window.dhx4.isKHTML?t.offsetY:t.layerY,o=window.dhx4.absLeft(i)+s,l=window.dhx4.absTop(i)+n;this.checkEvent("onBeforeContextMenu")?this.callEvent("onBeforeContextMenu",[e.id,t])&&this.conf.ctx_autoshow&&(this._showContextMenu(o,l,e.id),this.callEvent("onAfterContextMenu",[e.id,t])):this.conf.ctx_autoshow&&(this._showContextMenu(o,l,e.id),this.callEvent("onAfterContextMenu",[e.id]))},dhtmlXMenuObject.prototype.showContextMenu=function(t,e){this._showContextMenu(t,e,!1)},dhtmlXMenuObject.prototype.hideContextMenu=function(){this._hideContextMenu()},dhtmlXMenuObject.prototype.setAutoShowMode=function(t){this.conf.ctx_autoshow=1==t?!0:!1},dhtmlXMenuObject.prototype.setAutoHideMode=function(t){this.conf.ctx_autohide=1==t?!0:!1},dhtmlXMenuObject.prototype.setContextMenuHideAllMode=function(t){this.conf.ctx_hideall=1==t?!0:!1},dhtmlXMenuObject.prototype.getContextMenuHideAllMode=function(){return this.conf.ctx_hideall},dhtmlXMenuObject.prototype._improveTerraceSkin=function(){for(var t in this.itemPull)if(this.itemPull[t].parent==this.idPrefix+this.topId&&null!=this.idPull[t]){var e=!1,i=!1;this.idPull[t].parentNode.firstChild==this.idPull[t]&&(e=!0),this.idPull[t].parentNode.lastChild==this.idPull[t]&&(i=!0);for(var s in this.itemPull)"separator"==this.itemPull[s].type&&this.itemPull[s].parent==this.idPrefix+this.topId&&(this.idPull[t].nextSibling==this.idPull["separator_"+s]&&(i=!0),this.idPull[t].previousSibling==this.idPull["separator_"+s]&&(e=!0));this.idPull[t].style.borderLeftWidth=e?"1px":"0px",this.idPull[t].style.borderTopLeftRadius=this.idPull[t].style.borderBottomLeftRadius=e?"3px":"0px",this.idPull[t].style.borderTopRightRadius=this.idPull[t].style.borderBottomRightRadius=i?"3px":"0px",this.idPull[t]._bl=e,this.idPull[t]._br=i}},dhtmlXMenuObject.prototype._improveTerraceButton=function(t,e){e?(this.idPull[t].style.borderBottomLeftRadius=this.idPull[t]._bl?"3px":"0px",this.idPull[t].style.borderBottomRightRadius=this.idPull[t]._br?"3px":"0px"):(this.idPull[t].style.borderBottomLeftRadius="0px",this.idPull[t].style.borderBottomRightRadius="0px")},dhtmlXMenuObject.prototype.setItemEnabled=function(t){this._changeItemState(t,"enabled",this._getItemLevelType(t))},dhtmlXMenuObject.prototype.setItemDisabled=function(t){this._changeItemState(t,"disabled",this._getItemLevelType(t))},dhtmlXMenuObject.prototype.isItemEnabled=function(t){return null!=this.itemPull[this.idPrefix+t]?"enabled"==this.itemPull[this.idPrefix+t].state:!1},dhtmlXMenuObject.prototype._changeItemState=function(t,e,i){var s=!1,n=this.idPrefix+t;return null!=this.itemPull[n]&&null!=this.idPull[n]&&this.itemPull[n].state!=e&&(this.itemPull[n].state=e,this.idPull[n].className=this.itemPull[n].parent!=this.idPrefix+this.topId||this.conf.context?"sub_item"+("enabled"==this.itemPull[n].state?"":"_dis"):"dhtmlxMenu_"+this.conf.skin+"_TopLevel_Item_"+("enabled"==this.itemPull[n].state?"Normal":"Disabled"),this._updateItemComplexState(this.idPrefix+t,this.itemPull[this.idPrefix+t].complex,!1),this._updateItemImage(t,i),this.idPrefix+this.conf.last_click==n&&"TopLevel"!=i&&this._redistribSubLevelSelection(n,this.itemPull[n].parent),"TopLevel"==i&&!this.conf.context),s},dhtmlXMenuObject.prototype.getItemText=function(t){return null!=this.itemPull[this.idPrefix+t]?this.itemPull[this.idPrefix+t].title:""},dhtmlXMenuObject.prototype.setItemText=function(t,e){if(t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t])if(this._clearAndHide(),this.itemPull[t].title=e,this.itemPull[t].parent!=this.idPrefix+this.topId||this.conf.context){for(var i=null,s=0;s<this.idPull[t].childNodes[1].childNodes.length;s++)"sub_item_text"==String(this.idPull[t].childNodes[1].childNodes[s].className||"")&&(i=this.idPull[t].childNodes[1].childNodes[s]);""==String(this.itemPull[t].title).length||null==this.itemPull[t].title?i&&(i.parentNode.removeChild(i),i=null,this.idPull[t].childNodes[1].innerHTML="&nbsp;"):(i||(i=document.createElement("DIV"),i.className="sub_item_text",this.idPull[t].childNodes[1].innerHTML="",this.idPull[t].childNodes[1].appendChild(i)),i.innerHTML=this.itemPull[t].title)}else{for(var i=null,s=0;s<this.idPull[t].childNodes.length;s++)try{"top_level_text"==this.idPull[t].childNodes[s].className&&(i=this.idPull[t].childNodes[s])}catch(n){}""==String(this.itemPull[t].title).length||null==this.itemPull[t].title?null!=i&&i.parentNode.removeChild(i):(i||(i=document.createElement("DIV"),i.className="top_level_text",this.conf.rtl&&this.idPull[t].childNodes.length>0?this.idPull[t].insertBefore(i,this.idPull[t].childNodes[0]):this.idPull[t].appendChild(i)),i.innerHTML=this.itemPull[t].title)}},dhtmlXMenuObject.prototype.loadFromHTML=function(t,e,i){var s=this.conf.tags.item;this.conf.tags.item="div";var n="string"==typeof t?document.getElementById(t):t,o=this._xmlToJson(n,this.idPrefix+this.topId);this._initObj(o),this.conf.tags.item=s,e&&n.parentNode.removeChild(n),n=objOd=null,null!=onload&&("function"==typeof i?i():"function"==typeof window[i]&&window[i]())},dhtmlXMenuObject.prototype.hideItem=function(t){this._changeItemVisible(t,!1)},dhtmlXMenuObject.prototype.showItem=function(t){this._changeItemVisible(t,!0)},dhtmlXMenuObject.prototype.isItemHidden=function(t){var e=null;return null!=this.idPull[this.idPrefix+t]&&(e="none"==this.idPull[this.idPrefix+t].style.display),e},dhtmlXMenuObject.prototype._changeItemVisible=function(t,e){var i=this.idPrefix+t;null!=this.itemPull[i]&&("separator"==this.itemPull[i].type&&(i="separator_"+i),null!=this.idPull[i]&&(this.idPull[i].style.display=e?"":"none",this._redefineComplexState(this.itemPull[this.idPrefix+t].parent)))},dhtmlXMenuObject.prototype.setUserData=function(t,e,i){this.userData[this.idPrefix+t+"_"+e]=i},dhtmlXMenuObject.prototype.getUserData=function(t,e){return null!=this.userData[this.idPrefix+t+"_"+e]?this.userData[this.idPrefix+t+"_"+e]:null},dhtmlXMenuObject.prototype.setOpenMode=function(t){this.conf.mode="win"==t?"win":"web"},dhtmlXMenuObject.prototype.setWebModeTimeout=function(t){this.conf.tm_sec=isNaN(t)?400:t},dhtmlXMenuObject.prototype.getItemImage=function(t){var e=new Array(null,null);return t=this.idPrefix+t,"item"==this.itemPull[t].type&&(e[0]=this.itemPull[t].imgen,e[1]=this.itemPull[t].imgdis),e},dhtmlXMenuObject.prototype.setItemImage=function(t,e,i){"item"==this.itemPull[this.idPrefix+t].type&&(this.itemPull[this.idPrefix+t].imgen=e,this.itemPull[this.idPrefix+t].imgdis=i,this._updateItemImage(t,this._getItemLevelType(t)))},dhtmlXMenuObject.prototype.clearItemImage=function(t){this.setItemImage(t,"","")},dhtmlXMenuObject.prototype.setVisibleArea=function(t,e,i,s){this.conf.v_enabled=!0,this.conf.v.x1=t,this.conf.v.x2=e,this.conf.v.y1=i,this.conf.v.y2=s},dhtmlXMenuObject.prototype.setTooltip=function(t,e){t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t]&&(this.idPull[t].title=e.length>0?e:null,this.itemPull[t].tip=e)},dhtmlXMenuObject.prototype.getTooltip=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].tip},dhtmlXMenuObject.prototype.setTopText=function(t){this.conf.context||(null==this._topText&&(this._topText=document.createElement("DIV"),this._topText.className="dhtmlxMenu_TopLevel_Text_"+(this.conf.rtl?"left":"left"==this.conf.align?"right":"left"),this.base.appendChild(this._topText)),this._topText.innerHTML=t)},dhtmlXMenuObject.prototype.setAlign=function(t){this.conf.align!=t&&("left"==t||"right"==t)&&(this.conf.align=t,this.cont&&(this.cont.className="right"==this.conf.align?"align_right":"align_left"),null!=this._topText&&(this._topText.className="dhtmlxMenu_TopLevel_Text_"+("left"==this.conf.align?"right":"left")))},dhtmlXMenuObject.prototype.setHref=function(t,e,i){null!=this.itemPull[this.idPrefix+t]&&(this.itemPull[this.idPrefix+t].href_link=e,null!=i&&(this.itemPull[this.idPrefix+t].href_target=i))},dhtmlXMenuObject.prototype.clearHref=function(t){null!=this.itemPull[this.idPrefix+t]&&(delete this.itemPull[this.idPrefix+t].href_link,delete this.itemPull[this.idPrefix+t].href_target)},dhtmlXMenuObject.prototype.getCircuit=function(t){for(var e=new Array(t);this.getParentId(t)!=this.topId;)t=this.getParentId(t),e[e.length]=t;return e.reverse()},dhtmlXMenuObject.prototype._getCheckboxState=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].checked},dhtmlXMenuObject.prototype._setCheckboxState=function(t,e){null!=this.itemPull[this.idPrefix+t]&&(this.itemPull[this.idPrefix+t].checked=e)},dhtmlXMenuObject.prototype._updateCheckboxImage=function(t){if(null!=this.idPull[this.idPrefix+t]){this.itemPull[this.idPrefix+t].imgen="chbx_"+(this._getCheckboxState(t)?"1":"0"),this.itemPull[this.idPrefix+t].imgdis=this.itemPull[this.idPrefix+t].imgen;try{this.idPull[this.idPrefix+t].childNodes[this.conf.rtl?2:0].childNodes[0].className="sub_icon "+this.itemPull[this.idPrefix+t].imgen}catch(e){}}},dhtmlXMenuObject.prototype._checkboxOnClickHandler=function(t,e,i){if("d"!=e.charAt(1)&&null!=this.itemPull[this.idPrefix+t]){var s=this._getCheckboxState(t);this.checkEvent("onCheckboxClick")?this.callEvent("onCheckboxClick",[t,s,this.conf.ctx_zoneid,i])&&this.setCheckboxState(t,!s):this.setCheckboxState(t,!s),this.checkEvent("onClick")&&this.callEvent("onClick",[t])}},dhtmlXMenuObject.prototype.setCheckboxState=function(t,e){this._setCheckboxState(t,e),this._updateCheckboxImage(t)},dhtmlXMenuObject.prototype.getCheckboxState=function(t){return this._getCheckboxState(t)},dhtmlXMenuObject.prototype.addCheckbox=function(t,e,i,s,n,o,l){if(this.conf.context&&e==this.topId);else{if(null==this.itemPull[this.idPrefix+e])return;if("child"==t&&"item"!=this.itemPull[this.idPrefix+e].type)return}var r="chbx_"+(o?"1":"0"),a=r;if("sibling"==t){var h=this.idPrefix+(null!=s?s:this._genStr(24)),d=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(h,d,n,"checkbox",l,r,a),this.itemPull[h].checked=o,this._renderSublevelItem(h,this.getItemPosition(e))}else{var h=this.idPrefix+(null!=s?s:this._genStr(24)),d=this.idPrefix+e;this._addItemIntoGlobalStrorage(h,d,n,"checkbox",l,r,a),this.itemPull[h].checked=o,null==this.idPull["polygon_"+d]&&this._renderSublevelPolygon(d,d),this._renderSublevelItem(h,i-1),this._redefineComplexState(d)}},dhtmlXMenuObject.prototype.setHotKey=function(t,e){if(t=this.idPrefix+t,null!=this.itemPull[t]&&null!=this.idPull[t]&&(this.itemPull[t].parent!=this.idPrefix+this.topId||this.conf.context)&&!this.itemPull[t].complex){var i=this.itemPull[t].type;if("item"==i||"checkbox"==i||"radio"==i){var s=null;try{"sub_item_hk"==this.idPull[t].childNodes[this.conf.rtl?0:2].childNodes[0].className&&(s=this.idPull[t].childNodes[this.conf.rtl?0:2].childNodes[0])}catch(n){}if(0==e.length)this.itemPull[t].hotkey_backup=this.itemPull[t].hotkey,this.itemPull[t].hotkey="",null!=s&&s.parentNode.removeChild(s);else{if(this.itemPull[t].hotkey=e,this.itemPull[t].hotkey_backup=null,null==s){s=document.createElement("DIV"),s.className="sub_item_hk";for(var o=this.idPull[t].childNodes[this.conf.rtl?0:2];o.childNodes.length>0;)o.removeChild(o.childNodes[0]);o.appendChild(s)}s.innerHTML=e}}}},dhtmlXMenuObject.prototype.getHotKey=function(t){return null==this.itemPull[this.idPrefix+t]?null:this.itemPull[this.idPrefix+t].hotkey},dhtmlXMenuObject.prototype._clearAllSelectedSubItemsInPolygon=function(t){for(var e=this._getSubItemToDeselectByPolygon(t),i=0;i<this.conf.opened_poly.length;i++)this.conf.opened_poly[i]!=t&&this._hidePolygon(this.conf.opened_poly[i]);for(var i=0;i<e.length;i++)null!=this.idPull[e[i]]&&"enabled"==this.itemPull[e[i]].state&&(this.idPull[e[i]].className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_Item_Normal")},dhtmlXMenuObject.prototype._checkArrowsState=function(t){var e=this.idPull["polygon_"+t].childNodes[1],i=this.idPull["arrowup_"+t],s=this.idPull["arrowdown_"+t];i.className=0==e.scrollTop?"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp_Disabled":"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp"+(i.over?"_Over":""),s.className=e.scrollTop+e.offsetHeight<e.scrollHeight?"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown"+(s.over?"_Over":""):"dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown_Disabled",e=i=s=null},dhtmlXMenuObject.prototype._addUpArrow=function(t){var e=this,i=document.createElement("DIV");i.pId=this.idPrefix+t,i.id="arrowup_"+this.idPrefix+t,i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowUp",i.over=!1,i.onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},i.oncontextmenu=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},i.onmouseover=function(){"web"==e.conf.mode&&window.clearTimeout(e.conf.tm_handler),e._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp_Over",this.over=!0,e._canScrollUp=!0,e._doScrollUp(this.pId,!0))},i.onmouseout=function(){"web"==e.conf.mode&&(window.clearTimeout(e.conf.tm_handler),e.conf.tm_handler=window.setTimeout(function(){e._clearAndHide()},e.conf.tm_sec,"JavaScript")),this.over=!1,e._canScrollUp=!1,this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowUp",window.clearTimeout(e.conf.of_utm))},i.onclick=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1};var s=this.idPull["polygon_"+this.idPrefix+t];s.childNodes[0].appendChild(i),this.idPull[i.id]=i,s=i=null},dhtmlXMenuObject.prototype._addDownArrow=function(t){var e=this,i=document.createElement("DIV");i.pId=this.idPrefix+t,i.id="arrowdown_"+this.idPrefix+t,i.className="dhtmlxMenu_"+this.conf.skin+"_SubLevelArea_ArrowDown",i.over=!1,i.onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},i.oncontextmenu=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},i.onmouseover=function(){"web"==e.conf.mode&&window.clearTimeout(e.conf.tm_handler),e._clearAllSelectedSubItemsInPolygon(this.pId),this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown_Over",this.over=!0,e._canScrollDown=!0,e._doScrollDown(this.pId,!0))},i.onmouseout=function(){"web"==e.conf.mode&&(window.clearTimeout(e.conf.tm_handler),e.conf.tm_handler=window.setTimeout(function(){e._clearAndHide()},e.conf.tm_sec,"JavaScript")),this.over=!1,e._canScrollDown=!1,this.className!="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown_Disabled"&&(this.className="dhtmlxMenu_"+e.conf.skin+"_SubLevelArea_ArrowDown",window.clearTimeout(e.conf.of_dtm))},i.onclick=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1};var s=this.idPull["polygon_"+this.idPrefix+t];s.childNodes[2].appendChild(i),this.idPull[i.id]=i,s=i=null},dhtmlXMenuObject.prototype._removeUpArrow=function(t){var e="arrowup_"+this.idPrefix+t;this._removeArrow(e)},dhtmlXMenuObject.prototype._removeDownArrow=function(t){var e="arrowdown_"+this.idPrefix+t;this._removeArrow(e)},dhtmlXMenuObject.prototype._removeArrow=function(t){var e=this.idPull[t];e.onselectstart=null,e.oncontextmenu=null,e.onmouseover=null,e.onmouseout=null,e.onclick=null,e.parentNode&&e.parentNode.removeChild(e),e=null,this.idPull[t]=null;try{delete this.idPull[t]}catch(i){}},dhtmlXMenuObject.prototype._isArrowExists=function(t){return null!=this.idPull["arrowup_"+t]&&null!=this.idPull["arrowdown_"+t]?!0:!1},dhtmlXMenuObject.prototype._doScrollUp=function(t,e){var i=this.idPull["polygon_"+t].childNodes[1];if(this._canScrollUp&&i.scrollTop>0){var s=!1,n=i.scrollTop-this.conf.of_ustep;if(0>n&&(s=!0,n=0),i.scrollTop=n,s)e=!0;else{var o=this;this.conf.of_utm=window.setTimeout(function(){o._doScrollUp(t,!1),o=null},this.conf.of_utime)}}else this._canScrollUp=!1,this._checkArrowsState(t);e&&this._checkArrowsState(t)},dhtmlXMenuObject.prototype._doScrollDown=function(t,e){var i=this.idPull["polygon_"+t].childNodes[1];if(this._canScrollDown&&i.scrollTop+i.offsetHeight<=i.scrollHeight){var s=!1,n=i.scrollTop+this.conf.of_dstep;if(n+i.offsetHeight>=i.scrollHeight&&(s=!0,n=i.scrollHeight-i.offsetHeight),i.scrollTop=n,s)e=!0;else{var o=this;this.conf.of_dtm=window.setTimeout(function(){o._doScrollDown(t,!1),o=null},this.conf.of_dtime)}}else this._canScrollDown=!1,this._checkArrowsState(t);e&&this._checkArrowsState(t)},dhtmlXMenuObject.prototype._countPolygonItems=function(t){var e=0;for(var i in this.itemPull){var s=this.itemPull[i].parent,n=this.itemPull[i].type;s!=this.idPrefix+t||"item"!=n&&"radio"!=n&&"checkbox"!=n||e++}return e},dhtmlXMenuObject.prototype.setOverflowHeight=function(t){if("auto"===t)return this.conf.overflow_limit=0,void(this.conf.auto_overflow=!0);if(!(0==this.conf.overflow_limit&&0>=t)){if(this._clearAndHide(),this.conf.overflow_limit>=0&&t>0)return void(this.conf.overflow_limit=t);if(this.conf.overflow_limit>0&&0>=t){for(var e in this.itemPull)if(this._isArrowExists(e)){var i=String(e).replace(this.idPrefix,"");this._removeUpArrow(i),this._removeDownArrow(i),this.idPull["polygon_"+e].childNodes[1].style.height=""}return void(this.conf.overflow_limit=0)}}},dhtmlXMenuObject.prototype._getRadioImgObj=function(t){try{var e=this.idPull[this.idPrefix+t].childNodes[this.conf.rtl?2:0].childNodes[0]}catch(i){var e=null}return e},dhtmlXMenuObject.prototype._setRadioState=function(t,e){var i=this._getRadioImgObj(t);if(null!=i){var s=this.itemPull[this.idPrefix+t];s.checked=e,s.imgen="rdbt_"+(s.checked?"1":"0"),s.imgdis=s.imgen,i.className="sub_icon "+s.imgen}},dhtmlXMenuObject.prototype._radioOnClickHandler=function(t,e,i){if("d"!=e.charAt(1)&&null!=this.itemPull[this.idPrefix+t].group){var s=this.itemPull[this.idPrefix+t].group;this.checkEvent("onRadioClick")?this.callEvent("onRadioClick",[s,this.getRadioChecked(s),t,this.conf.ctx_zoneid,i])&&this.setRadioChecked(s,t):this.setRadioChecked(s,t),this.checkEvent("onClick")&&this.callEvent("onClick",[t])}},dhtmlXMenuObject.prototype.getRadioChecked=function(t){for(var e=null,i=0;i<this.radio[t].length;i++){var s=this.radio[t][i].replace(this.idPrefix,""),n=this._getRadioImgObj(s);if(null!=n){var o=n.className.match(/rdbt_1$/gi);null!=o&&(e=s)}}return e},dhtmlXMenuObject.prototype.setRadioChecked=function(t,e){if(null!=this.radio[t])for(var i=0;i<this.radio[t].length;i++){var s=this.radio[t][i].replace(this.idPrefix,"");this._setRadioState(s,s==e)}},dhtmlXMenuObject.prototype.addRadioButton=function(t,e,i,s,n,o,l,r){if(this.conf.context&&e==this.topId);else{if(null==this.itemPull[this.idPrefix+e])return;if("child"==t&&"item"!=this.itemPull[this.idPrefix+e].type)return}var a=this.idPrefix+(null!=s?s:this._genStr(24)),h="rdbt_"+(l?"1":"0"),d=h;if("sibling"==t){var c=this.idPrefix+this.getParentId(e);this._addItemIntoGlobalStrorage(a,c,n,"radio",r,h,d),this._renderSublevelItem(a,this.getItemPosition(e))}else{var c=this.idPrefix+e;this._addItemIntoGlobalStrorage(a,c,n,"radio",r,h,d),null==this.idPull["polygon_"+c]&&this._renderSublevelPolygon(c,c),this._renderSublevelItem(a,i-1),this._redefineComplexState(c)}var u=null!=o?o:this._genStr(24);this.itemPull[a].group=u,null==this.radio[u]&&(this.radio[u]=new Array),this.radio[u][this.radio[u].length]=a,1==l&&this.setRadioChecked(u,String(a).replace(this.idPrefix,""))},dhtmlXMenuObject.prototype.serialize=function(){var t="<menu>"+this._readLevel(this.idPrefix+this.topId)+"</menu>";return t},dhtmlXMenuObject.prototype._readLevel=function(t){var e="";for(var i in this.itemPull)if(this.itemPull[i].parent==t){var s="",n="",o="",l=String(this.itemPull[i].id).replace(this.idPrefix,""),r="",a=""!=this.itemPull[i].title?' text="'+this.itemPull[i].title+'"':"",h="";"item"==this.itemPull[i].type&&(""!=this.itemPull[i].imgen&&(s=' img="'+this.itemPull[i].imgen+'"'),""!=this.itemPull[i].imgdis&&(n=' imgdis="'+this.itemPull[i].imgdis+'"'),""!=this.itemPull[i].hotkey&&(o="<hotkey>"+this.itemPull[i].hotkey+"</hotkey>")),"separator"==this.itemPull[i].type?r=' type="separator"':"disabled"==this.itemPull[i].state&&(h=' enabled="false"'),"checkbox"==this.itemPull[i].type&&(r=' type="checkbox"'+(this.itemPull[i].checked?' checked="true"':"")),"radio"==this.itemPull[i].type&&(r=' type="radio" group="'+this.itemPull[i].group+'" '+(this.itemPull[i].checked?' checked="true"':"")),e+="<item id='"+l+"'"+a+r+s+n+h+">",e+=o,this.itemPull[i].complex&&(e+=this._readLevel(i)),e+="</item>"}return e},dhtmlXMenuObject.prototype.enableEffect=function(t,e,i){this._menuEffect="opacity"==t||"slide"==t||"slide+"==t?t:!1,this._pOpStyleIE=navigator.userAgent.search(/MSIE\s[678]\.0/gi)>=0;for(var s in this.idPull)0===s.search(/polygon/)&&(this._pOpacityApply(s,this._pOpStyleIE?100:1),this.idPull[s].style.height="");this._pOpMax=("undefined"==typeof e?100:e)/(this._pOpStyleIE?1:100),this._pOpStyleName=this._pOpStyleIE?"filter":"opacity",this._pOpStyleValue=this._pOpStyleIE?"progid:DXImageTransform.Microsoft.Alpha(Opacity=#)":"#",this._pSlSteps=this._pOpStyleIE?10:20,this._pSlTMTimeMax=i||50},dhtmlXMenuObject.prototype._showPolygonEffect=function(t){this._pShowHide(t,!0)},dhtmlXMenuObject.prototype._hidePolygonEffect=function(t){this._pShowHide(t,!1)},dhtmlXMenuObject.prototype._pOpacityApply=function(t,e){this.idPull[t].style[this._pOpStyleName]=String(this._pOpStyleValue).replace("#",e||this.idPull[t]._op)},dhtmlXMenuObject.prototype._pShowHide=function(t,e){if(this.idPull){if(null!=this.idPull[t]._tmShow){if(this.idPull[t]._step_h>0&&1==e||this.idPull[t]._step_h<0&&0==e)return;window.clearTimeout(this.idPull[t]._tmShow),this.idPull[t]._tmShow=null,this.idPull[t]._max_h=null}if(0!=e||"hidden"!=this.idPull[t].style.visibility&&"none"!=this.idPull[t].style.display){if(1==e&&"none"==this.idPull[t].style.display&&(this.idPull[t].style.visibility="hidden",this.idPull[t].style.display=""),null==this.idPull[t]._max_h){if(this.idPull[t]._max_h=parseInt(this.idPull[t].offsetHeight),this.idPull[t]._h=1==e?0:this.idPull[t]._max_h,this.idPull[t]._step_h=Math.round(this.idPull[t]._max_h/this._pSlSteps)*(1==e?1:-1),0==this.idPull[t]._step_h)return;this.idPull[t]._step_tm=Math.round(this._pSlTMTimeMax/this._pSlSteps),"slide+"==this._menuEffect||"opacity"==this._menuEffect?(this.idPull[t].op_tm=this.idPull[t]._step_tm,this.idPull[t].op_step=this._pOpMax/this._pSlSteps*(1==e?1:-1),this._pOpStyleIE&&(this.idPull[t].op_step=Math.round(this.idPull[t].op_step)),this.idPull[t]._op=1==e?0:this._pOpMax,this._pOpacityApply(t)):(this.idPull[t]._op=this._pOpStyleIE?100:1,this._pOpacityApply(t)),0===this._menuEffect.search(/slide/)&&(this.idPull[t].style.height="0px"),this.idPull[t].style.visibility="visible"}this._pEffectSet(t,this.idPull[t]._h+this.idPull[t]._step_h)}}},dhtmlXMenuObject.prototype._pEffectSet=function(t,e){if(this.idPull)if(this.idPull[t]._tmShow&&window.clearTimeout(this.idPull[t]._tmShow),this.idPull[t]._h=Math.max(0,Math.min(e,this.idPull[t]._max_h)),0===this._menuEffect.search(/slide/)&&(this.idPull[t].style.height=this.idPull[t]._h+"px"),e+=this.idPull[t]._step_h,("slide+"==this._menuEffect||"opacity"==this._menuEffect)&&(this.idPull[t]._op=Math.max(0,Math.min(this._pOpMax,this.idPull[t]._op+this.idPull[t].op_step)),this._pOpacityApply(t)),this.idPull[t]._step_h>0&&e<=this.idPull[t]._max_h||this.idPull[t]._step_h<0&&e>=0){var i=this;this.idPull[t]._tmShow=window.setTimeout(function(){i._pEffectSet(t,e)},this.idPull[t]._step_tm)}else 0===this._menuEffect.search(/slide/)&&(this.idPull[t].style.height=""),this.idPull[t]._step_h<0&&(this.idPull[t].style.visibility="hidden"),("slide+"==this._menuEffect||"opacity"==this._menuEffect)&&(this.idPull[t]._op=this.idPull[t]._step_h<0?this._pOpStyleIE?100:1:this._pOpMax,this._pOpacityApply(t)),this.idPull[t]._tmShow=null,this.idPull[t]._h=null,this.idPull[t]._max_h=null,this.idPull[t]._step_tm=null},dhtmlXRibbon.prototype.setSizes=function(){null!=this._tabbar&&"function"==typeof this.setSizes&&this._tabbar.setSizes()},dhtmlXRibbon.prototype._renderData=function(t){var e=this._base.firstChild;null!=t&&(this.conf.icons_path=t.icons_path||this.conf.icons_path,t.tabs instanceof Array?(this._base.className=this._base.className.replace(/\s?dhxrb_without_tabbar/i,""),e.className="dhxrb_with_tabbar",this._tabbar=new dhtmlXTabBar(e),this._attachEventTabbar(),this._tabbar.setSkin(this.conf.skin),this.childIds=this._appendTabs(t.tabs)):t.items instanceof Array&&(/\s?dhxrb_without_tabbar/i.test(this._base.className)||(this._base.className+=" dhxrb_without_tabbar"),/\s?dhxrb_background_area/i.test(e.className)&&(e.className="dhxrb_background_area"),e.innerHTML="<div class='dhxrb_g_area'></div>",this.childIds=this._appendBlocks(t.items,e.firstChild)),this.callEvent("_onHeightChanged",[]))},dhtmlXRibbon.prototype._xmlToJson=function(t){var e=t.lastChild||null,i={},s=[];return e&&"ribbon"==e.tagName&&(s=this._convertXmlNodeListIntoObject(e.childNodes)),s[0]&&s[0].type&&"block"==s[0].type.toLowerCase()?i.items=s:i.tabs=s,i},dhtmlXRibbon.prototype._convertXmlNodeListIntoObject=function(t){var e,i,s,n=[];for(i=t.length,e=0;i>e;e++)s=this._covertXmlNodeToObject(t[e]),s&&n.push(s);return n},dhtmlXRibbon.prototype._covertXmlNodeToObject=function(t){if(!t||!t.tagName||"item"!=t.tagName.toLowerCase()&&"tab"!=t.tagName.toLowerCase())return null;var e,i,s=t.attributes,n={};for(i=s.length,e=0;i>e;e++)switch(s[e].name){case"isbig":n.isbig=dhx4.s2b(s[e].value);break;case"state":n.state=dhx4.s2b(s[e].value);break;default:n[s[e].name]=s[e].value}return t.childNodes.length&&("buttonCombo"==t.getAttribute("type")||"buttonSelect"==t.getAttribute("type")?n.data=t:"tab"==t.tagName.toLowerCase()?n.items=this._convertXmlNodeListIntoObject(t.childNodes):n.list=this._convertXmlNodeListIntoObject(t.childNodes)),n},dhtmlXRibbon.prototype._appendTabs=function(t){var e,i,s,n=[];for(i=t.length,e=0;i>e;e++)s=this._addTab(t[e]),t[e].items instanceof Array&&(s.childIds=this._appendBlocks(t[e].items,s.base,s)),n.push(s.id);return n},dhtmlXRibbon.prototype._addTab=function(t){var e,i={conf:{active:!1,text:"",width:null,position:null,disable:!1},base:document.createElement("div"),type:"tab",childIds:[]};for(e in t)"items"!=e&&(i.conf[e]=t[e]);for(i.id=t.id?t.id:dhx4.newId();this._items[i.id];)i.id=dhx4.newId();return this._tabbar.addTab(i.id,i.conf.text,i.conf.width,i.conf.position,i.conf.active),i.base.className="dhxrb_g_area",i.base._dhx_ribbonId=i.id,this.tabs(i.id).attachObject(i.base),this._changeApiForTab(this.tabs(i.id)),this._items[i.id]=i,i},dhtmlXRibbon.prototype._changeApiForTab=function(t){var e;for(e in this._tabOriginalApi)this._tabOriginalApi[e]=this._tabOriginalApi[e]||t[e],t[e]=this._tabCustomApi[e]},dhtmlXRibbon.prototype._tabOriginalApi={enable:null,disable:null,close:null},dhtmlXRibbon.prototype._appendBlocks=function(t,e,i){var s,n,o,l,r,a,h=[];for(i=i||null,n=t.length,s=0;n>s;s++)if("object"==typeof t[s]&&"block"==t[s].type){if(o=this._addBlock(t[s],e),t[s].list&&t[s].list instanceof Array)for(l=t[s].list,r=l.length,a=0;r>a;a++)this._addItem(o.id,null,null,l[a]);null!=i&&(o.parentId=i.id),o.conf.disable&&this.disable(o.id),h.push(o.id)}return h},dhtmlXRibbon.prototype._addBlock=function(t,e){var i,s;i={conf:{text:"",text_pos:"bottom",type:"block",mode:"cols",disable:!1},type:"block",childIds:[],base:document.createElement("div"),contForItems:document.createElement("div"),contForText:document.createElement("div")};for(s in t)"list"!=s&&"type"!=s&&"id"!=s&&(i.conf[s]=t[s]);for(i.id=t.id?t.id:dhx4.newId();this._items[i.id];)i.id=dhx4.newId();return i.base.className="dhxrb_block_base",e.appendChild(i.base),i.contForItems.className="dhxrb_block_items",i.contForText.className="dhxrb_block_label",i.base.appendChild(i.contForItems),i.conf.text&&(i.contForText.innerHTML=i.conf.text,"top"==i.conf.text_pos?i.base.insertBefore(i.contForText,i.contForItems):i.base.appendChild(i.contForText)),i.base._dhx_ribbonId=i.id,this._items[i.id]=i,i},dhtmlXRibbon.prototype._addItem=function(t,e,i,s){var n,o,l,r=this._items[t],a=null,h=this;if("newLevel"!=s.type&&!this.items[s.type])return null;if("newLevel"==s.type?this._addNewLevel(r):"group"==r.type?(n=document.createElement("div"),n.className="dhxrb_in_group",r.base.appendChild(n)):s.isbig?(n=document.createElement("div"),n.className="dhxrb_big_button",r.contForItems.appendChild(n)):(o=this._getContainerForSmallItem(r),n=document.createElement("div"),n.className="rows"==r.conf.mode?"dhxrb_in_row":"dhxrb_3rows_button",o.appendChild(n)),n){this._attachEventForItem(n),l={icons_path:s.icons_path||this.conf.icons_path,skin:this.conf.skin};for(var d in s)l[d]=s[d];for(l.id||(l.id=dhx4.newId());this._items[l.id];)l.id=dhx4.newId();a=this.items[l.type]&&this.items[l.type].render?this.items[l.type].render(n,l):null}return null!=a&&(this._items[a.id]=a,a.parentId=r.id,r.childIds.push(a.id),n._dhx_ribbonId=a.id,l.onclick&&"function"==typeof l.onclick&&(this._eventHandlers[a.id]=this._eventHandlers[a.id]||{},this._eventHandlers[a.id].onclick=l.onclick),a.callEvent=function(){h.callEvent.apply(h,arguments)},a._callHandler=function(){h._callHandler.apply(h,arguments)},this.items[l.type]&&"function"==typeof this.items[l.type].callAfterInit&&this.items[l.type].callAfterInit.apply(this,[a])),a},dhtmlXRibbon.prototype._callHandler=function(t,e){this._eventHandlers[t]&&this._eventHandlers[t].onclick&&this._eventHandlers[t].onclick.apply(this,e)},dhtmlXRibbon.prototype.items={},dhtmlXRibbon.prototype.items.button={render:function(t,e){var i,s;s={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:e.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:e.skin}};for(i in e)"id"!=i&&"onclick"!=i&&"type"!=i&&(s.conf[i]=e[i]);return t.innerHTML="<img class='dhxrb_image"+(s.conf.img?"'":" dhxrb_invisible'")+" src='"+(s.conf.img?s.conf.icons_path+s.conf.img:"")+"' /><div class='dhxrb_label_button'>"+s.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(s),s.conf.disable&&this.disable(s),s},getText:function(t){return t.conf.text},setText:function(t,e){var i=t.base.childNodes[1];t.conf.text=e,i.innerHTML=e},mousedown:function(){return!0},click:function(t,e,i){return 0!=i.button?!1:(e._callHandler(t.id,[t.id]),t.callEvent("onClick",[t.id]),!1)},disable:function(t){var e=t.base.childNodes[0],i=t.base.childNodes[1];return t.conf.imgdis&&(e.src=t.conf.icons_path+t.conf.imgdis,/\s?dhxrb_invisible/i.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_invisible/i,""))),/\s?dhxrb_disable_text_style/i.test(i.className)||(i.className+=" dhxrb_disable_text_style"),!0},enable:function(t){var e=t.base.childNodes[0],i=t.base.childNodes[1];return t.conf.img?e.src=t.conf.icons_path+t.conf.img:/\s?dhxrb_invisible/i.test(e.className)||(e.className+=" dhxrb_invisible"),/\s?dhxrb_disable_text_style/i.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0}},dhtmlXRibbon.prototype.items.buttonTwoState={click:function(){return!1},afterRender:function(t){t.conf.state&&this.setState(t,t.conf.state)},mouseover:function(t){return/dhxrb_highlight0/.test(t.base.className)||(t.base.className+=" dhxrb_highlight0"),!1},mouseout:function(t){return/dhxrb_highlight0/.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_highlight0/,"")),!1},mousedown:function(t,e){return e._callHandler(t.id,[t.id,!t.conf.state]),this.setState(t,!t.conf.state,!0),!1},mouseup:function(){return!1},setState:function(t,e,i){i=i||!1,e=dhx4.s2b(e),e?/dhxrb_highlight1/.test(t.base.className)||(t.base.className+=" dhxrb_highlight1"):/dhxrb_highlight1/.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_highlight1/,"")),t.conf.state=e,i&&t.callEvent("onStateChange",[t.id,t.conf.state])
}},dhtmlXRibbon.prototype.items.buttonSegment={click:function(){return!1},mousedown:function(t,e){return this.setState(t,e,!0),!1},callAfterInit:function(t){(t.conf.state||null==dhtmlXRibbon.prototype.items.buttonSegment._getSelectedNeighbor(t,this))&&(t.conf.state&&(t.conf.state=!1),dhtmlXRibbon.prototype.items.buttonSegment.setState(t,this,!1))},afterRender:function(){},setState:function(t,e,i){i=i||!1;var s=null,n=dhx4.s2b(t.conf.state);0==n&&(s=this._getSelectedNeighbor(t,e),null!=s&&this._unSelect(s),/dhxrb_highlight1/.test(t.base.className)||(t.base.className+=" dhxrb_highlight1"),t.conf.state=!0,i&&(e._callHandler(t.id,[t.id,s?s.id:null]),e.callEvent("onStateChange",[t.id,s?s.id:null])))},remove:function(t,e){var i,s=dhx4.s2b(t.conf.state),n=null,o=0,l=e._items[t.parentId];if(s){for(;l.childIds[o]&&null==n;)i=e._items[l.childIds[o]],"buttonSegment"==i.type&&i!=t&&(n=i),o++;n&&this.setState(n,e)}},_unSelect:function(t){var e=dhx4.s2b(t.conf.state);e&&(/dhxrb_highlight1/.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_highlight1/,"")),t.conf.state=!1)},_getSelectedNeighbor:function(t,e){var i,s,n,o=e._items[t.parentId],l=null;for(s=o.childIds.length,i=0;s>i;i++)if(n=e._items[o.childIds[i]],"buttonSegment"==n.type&&n.conf.state){l=n;break}return l}},dhtmlXRibbon.prototype.items.buttonSelect={itemCollection:[],_isAttachedEventInWindow:!1,afterRender:function(t){var e=t.base.childNodes[1];e.innerHTML+="<span class='dhxrb_arrow'>&nbsp;</span>",t.menu=null,this.itemCollection.push(t),this._attachEventToWindow(),e=null},setText:function(t,e){var i=t.base.childNodes[1].lastChild;t.conf.text=e,t.base.childNodes[1].innerHTML=e,t.base.childNodes[1].appendChild(i)},_attachEventToWindow:function(){0==this._isAttachedEventInWindow&&("function"==typeof window.addEventListener?document.body.addEventListener("mousedown",this._hideAllMenus,!1):document.body.attachEvent("onmousedown",this._hideAllMenus),this._isAttachedEventInWindow=!0)},_detachEventFromWindow:function(){"function"==typeof window.addEventListener?document.body.removeEventListener("mousedown",this._hideAllMenus,!1):document.body.detachEvent("onmousedown",this._hideAllMenus),this._isAttachedEventInWindow=!1},_hideAllMenus:function(t){t=t||event;for(var e=t.target||t.srcElement,i=!0;null!=e&&1==i;)null!=e.className&&/SubLevelArea_Polygon/i.test(e.className)?i=!1:e=e.parentNode;if(0!=i){var s=dhtmlXRibbon.prototype.items.buttonSelect.itemCollection;for(var n in s){var o=s[n];o.menu instanceof dhtmlXMenuObject&&(o._skipHiding?o._skipHiding=!1:dhtmlXRibbon.prototype.items.buttonSelect.hideMenu(o))}}},mousedown:function(t){return t._skipHiding=!0,this.showMenu(t),!1},mouseup:function(){return!1},click:function(){},setState:function(){},showMenu:function(t){var e=dhx4.absLeft(t.base),i=dhx4.absTop(t.base)+t.base.offsetHeight;t.menu instanceof dhtmlXMenuObject?t.menu.showContextMenu(e,i):(t.menu=new dhtmlXMenuObject({parent:t.base,icons_path:t.conf.icons_path,context:!0,items:t.conf.items,skin:t.conf.skin}),t.conf.data&&(t.menu.loadStruct(t.conf.data),delete t.conf.data),t.menu.setAutoHideMode(!1),t.menu.attachEvent("onHide",function(e){null==e&&dhtmlXRibbon.prototype.items.buttonSelect._doOnHideMenu(t)}),t.menu.attachEvent("onShow",function(e){null==e&&dhtmlXRibbon.prototype.items.buttonSelect._doOnShowMenu(t)}),t.menu.attachEvent("onClick",function(e){t.callEvent("onClick",[e])}),t.base.oncontextmenu=function(){return!1},dhtmlXRibbon.prototype.items.buttonSelect.showMenu(t))},hideMenu:function(t){t.menu instanceof dhtmlXMenuObject&&t.menu.hideContextMenu()},remove:function(t){var e;t.menu instanceof dhtmlXMenuObject&&(t.menu.unload(),t.menu=null),t.base.oncontextmenu=null,e=dhtmlXRibbon.prototype._indexOf(dhtmlXRibbon.prototype.items.buttonSelect.itemCollection,t),-1!=e&&dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.splice(e,1),0==dhtmlXRibbon.prototype.items.buttonSelect.itemCollection.length&&this._detachEventFromWindow()},setSkin:function(t,e){t.menu instanceof dhtmlXMenuObject&&t.menu.setSkin(e)},_doOnHideMenu:function(t){t._skipHiding?t._skipHiding=!1:/dhxrb_highlight1/.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_highlight1/,""))},_doOnShowMenu:function(t){/dhxrb_highlight1/.test(t.base.className)||(t.base.className+=" dhxrb_highlight1")}},dhtmlXRibbon.prototype.items.group={render:function(t,e){var i,s;s={base:t,id:e.id,type:e.type,conf:{disable:!1,skin:e.skin},childIds:[]},t.className="dhxrb_group";for(i in e)"id"!=i&&"onclick"!=i&&"type"!=i&&(s.conf[i]=e[i]);return s},callAfterInit:function(t){this._detachEventFromItem(t.base);var e,i,s,n,o=t.conf.list;for(i=o?o.length:0,e=0;i>e;e++)s=this._addItem(t.id,null,null,o[e]),null!=s&&(n=s.base.childNodes[1],!n||n.innerHTML||/\s?dhxrb_label_hide/i.test(n.className)||(n.className+=" dhxrb_label_hide"));dhtmlXRibbon.prototype.items.group.normalize(t),t.conf.disable&&this.disable(t.id),o=void 0},normalize:function(t){for(var e,i,s=t.base.children,n=s.length,o=!1,l=0,r=0;n>r;r++)if(/dhxrb_separator_group/i.test(s[r].className)||!/dhxrb_item_hide/i.test(s[r].className)){if(Math.ceil((r-l)/2)-Math.floor((r-l)/2)==0){if(/dhxrb_separator_group/i.test(s[r].className)){s[r].parentNode.removeChild(s[r]),o=!0;break}}else if(!/dhxrb_separator_group/i.test(s[r].className)){e=document.createElement("div"),e.className="dhxrb_separator_groupp",t.base.insertBefore(e,s[r]),o=!0;break}}else l++;o?this.normalize(t):(i=t.base.lastChild,i&&/dhxrb_separator_group/i.test(i.className)&&i.parentNode.removeChild(i))},hideChild:function(t,e){var i=dhtmlXRibbon.prototype._indexOf(t.base.children,e.base);if(0==i)i++;else{if(-1==i)return;i--}var s=t.base.children[i];s&&/dhxrb_separator_group/i.test(s.className)&&s.parentNode.removeChild(s)},showChild:function(t){this.normalize(t)}},dhtmlXRibbon.prototype.items.input={render:function(t,e){var i,s;s={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:e.isbig?"bottom":"right",img:null,imgdis:null,isbig:!1,disable:!1,skin:e.skin,value:""}};for(i in e)"id"!=i&&"onclick"!=i&&"type"!=i&&(s.conf[i]=e[i]);return t.innerHTML="<input type='text' class='dhxrb_input'><div class='dhxrb_label_button'>"+s.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(s),s.conf.disable&&this.disable(s),s.conf.width&&this.setWidth(s,s.conf.width),s.conf.value&&this.setValue(s,s.conf.value),s},callAfterInit:function(t){var e=t.base.childNodes[0];this._detachEventFromItem(t.base),this._attachEventsToInput(e)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,change:function(t){var e=t.base.childNodes[0];t.conf.value=e.value},keydown:function(t,e,i){if(13==i.keyCode){var s=t.base.childNodes[0];t.conf.value=s.value,e.callEvent("onEnter",[t.id,t.conf.value])}},remove:function(t,e){var i=t.base.childNodes[0];e._detachEventsFromInput(i)},getValue:function(t){var e,i=t.base.childNodes[0];return e=i.value,i=void 0,e},setValue:function(t,e){var e,i=t.base.childNodes[0];i.value=e,t.conf.value=e},setWidth:function(t,e){var i=t.base.childNodes[0];i.style.width=parseInt(e)+"px"},disable:function(t){var e=t.base.childNodes[0],i=t.base.childNodes[1];return e.disabled=!0,/\s?dhxrb_disable_text_style/i.test(i.className)||(i.className+=" dhxrb_disable_text_style"),!0},enable:function(t){var e=t.base.childNodes[0],i=t.base.childNodes[1];return e.disabled=!1,/\s?dhxrb_disable_text_style/i.test(i.className)&&(i.className=i.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0}},dhtmlXRibbon.prototype.items.checkbox={render:function(t,e){var i,s;s={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:e.isbig?"bottom":"right",disable:!1,checked:!1}};for(i in e)"id"!=i&&"onclick"!=i&&"type"!=i&&(s.conf[i]=e[i]);return t.innerHTML="<div class='dhxrb_checkbox'></div><div class='dhxrb_label_checkbox'>"+s.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(s),s.conf.checked&&this.check(s),s},callAfterInit:function(t){t.conf.disable&&this.disable(t.id)},setText:dhtmlXRibbon.prototype.items.button.setText,getText:dhtmlXRibbon.prototype.items.button.getText,mousedown:function(){return!1},mouseup:function(){return!1},click:function(t,e,i){return 0!=i.button?!1:void("checkbox"==t.type&&(t.conf.checked?this.uncheck(t,!0):this.check(t,!0)))},check:function(t,e){e=e||!1,"checkbox"==t.type&&(t.conf.checked=!0,/\s?dhxrb_checked/i.test(t.base.className)||(t.base.className+=" dhxrb_checked"),e&&t.callEvent("onCheck",[t.id,t.conf.checked]))},uncheck:function(t,e){e=e||!1,"checkbox"==t.type&&(t.conf.checked=!1,/\s?dhxrb_checked/i.test(t.base.className)&&(t.base.className=t.base.className.replace(/\s?dhxrb_checked/i,"")),e&&t.callEvent("onCheck",[t.id,t.conf.checked]))},disable:function(){return!0},enable:function(){return!0}},dhtmlXRibbon.prototype.items.text={render:function(t,e){var i={base:t,id:e.id,type:e.type,conf:{text:""}};for(var s in e)"id"!=s&&"type"!=s&&(i.conf[s]=e[s]);return t.innerHTML="<div class='dhxrb_item_text'>"+i.conf.text+"</div>","function"==typeof this.afterRender&&this.afterRender(i),i},callAfterInit:function(t){this._detachEventFromItem(t.base)},getText:function(t){return t.conf.text},setText:function(t,e){t.conf.text=e,t.base.innerHTML=e}},dhtmlXRibbon.prototype.items.buttonCombo={render:function(t,e){var i,s,n={};s={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:"right",width:140,skin:e.skin}};for(i in e)"id"!=i&&"onclick"!=i&&"type"!=i&&(s.conf[i]=e[i]);for(i in s.conf)"text"!=i&&"text_pos"!=i&&"disable"!=i&&"data"!=i&&(n[i]=s.conf[i]);return s.base.className+=" dhxrb_buttoncombo_cont",s.base.innerHTML="<div class='dhxrb_buttoncombo'></div><div class='dhxrb_label_button'>"+s.conf.text+"</div>",n.parent=s.base.firstChild,s.combo=new dhtmlXCombo(n),s.combo.setSkin(n.skin),s.combo.attachEvent("onChange",function(t,e){s._callHandler(s.id,[t,e]),s.callEvent("onSelectOption",[s.id,t,e])}),s.conf.data&&(s.combo.load(s.conf.data),delete s.conf.data),"function"==typeof this.afterRender&&this.afterRender(s),s.conf.disable&&this.disable(s),s},callAfterInit:function(t){this._detachEventFromItem(t.base)},disable:function(t){var e=t.base.lastChild;return t.combo instanceof dhtmlXCombo&&t.combo.disable(),/\s?dhxrb_disable_text_style/i.test(e.className)||(e.className+=" dhxrb_disable_text_style"),!0},enable:function(t){var e=t.base.lastChild;return t.combo instanceof dhtmlXCombo&&t.combo.enable(),/\s?dhxrb_disable_text_style/i.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},remove:function(t){t.combo instanceof dhtmlXCombo&&(t.combo.unload(),t.combo=null)},getValue:function(t){var e=null;return t.combo instanceof dhtmlXCombo&&(e=t.combo.getSelectedValue()),e},setValue:function(t,e){t.combo instanceof dhtmlXCombo&&t.combo.setComboValue(e)},setSkin:function(t,e){t.combo instanceof dhtmlXCombo&&t.combo.setSkin(e)}},dhtmlXRibbon.prototype.items.slider={render:function(t,e){var i,s,n={};s={base:t,id:e.id,type:e.type,conf:{text:"",text_pos:"right",size:150,vertical:!1,min:0,max:99,value:0,step:1,margin:10,disabled:!1,enableTooltip:!1}};for(i in e)"id"!=i&&"onclick"!=i&&"type"!=i&&(s.conf[i]=e[i]);for(i in s.conf)"text"!=i&&"text_pos"!=i&&"isbig"!=i&&(n[i]=s.conf[i]);return s.base.innerHTML="<center><div class='dhxrb_slider'></div></center><div class='dhxrb_label_button'>"+s.conf.text+"</div>",n.parent=s.base.firstChild.firstChild,s.slider=new dhtmlXSlider(n),"function"==typeof this.afterRender&&this.afterRender(s),s.conf.disable&&this.disable(s),s.slider.attachEvent("onChange",function(t){s._callHandler(s.id,[t]),s.callEvent("onValueChange",[s.id,t])}),s},callAfterInit:function(t){this._detachEventFromItem(t.base)},setSkin:function(t,e){t.slider instanceof dhtmlXSlider&&t.slider.setSkin(e)},disable:function(t){var e=t.base.childNodes[1];return t.slider instanceof dhtmlXSlider&&t.slider.disable(),/\s?dhxrb_disable_text_style/i.test(e.className)||(e.className+=" dhxrb_disable_text_style"),!0},enable:function(t){var e=t.base.childNodes[1];return t.slider instanceof dhtmlXSlider&&t.slider.enable(),/\s?dhxrb_disable_text_style/i.test(e.className)&&(e.className=e.className.replace(/\s?dhxrb_disable_text_style/i,"")),!0},remove:function(t){t.slider instanceof dhtmlXSlider&&(t.slider.unload(),t.slider=null)},getValue:function(t){var e=null;return t.slider instanceof dhtmlXSlider&&(e=t.slider.getValue()),e},setValue:function(t,e){t.slider instanceof dhtmlXSlider&&t.slider.setValue(e)}},dhtmlXRibbon.prototype.items._extends=function(t,e){var i;for(i in e)t[i]=t[i]||e[i];return t},dhtmlXRibbon.prototype._addNewLevel=function(t){var e,i;if("rows"==t.conf.mode)e=t.contForItems.lastChild,e&&/dhxrb_block_rows/i.test(e.className)&&e.childNodes.length<3?(i=document.createElement("div"),i.className="dhxrb_block_row",e.appendChild(i)):(e=document.createElement("div"),e.className="dhxrb_block_rows",t.contForItems.appendChild(e),i=document.createElement("div"),i.className="dhxrb_block_row",e.appendChild(i));else{var i=document.createElement("div");i.className="dhxrb_3rows_block",t.contForItems.appendChild(i)}},dhtmlXRibbon.prototype._attachEventForItem=function(t){"function"==typeof window.addEventListener?(t.addEventListener("mouseover",this._doOnHighlight0,!1),t.addEventListener("mouseout",this._doOffHighlight0,!1),t.addEventListener("mousedown",this._doOnHighlight1,!1),t.addEventListener("mouseup",this._doOffHighlight1,!1),t.addEventListener("click",this._doOnClick,!1)):(t.attachEvent("onmouseover",this._doOnHighlight0),t.attachEvent("onmouseout",this._doOffHighlight0),t.attachEvent("onmousedown",this._doOnHighlight1),t.attachEvent("onmouseup",this._doOffHighlight1),t.attachEvent("onclick",this._doOnClick))},dhtmlXRibbon.prototype._detachEventFromItem=function(t){"function"==typeof window.addEventListener?(t.removeEventListener("mouseover",this._doOnHighlight0,!1),t.removeEventListener("mouseout",this._doOffHighlight0,!1),t.removeEventListener("mousedown",this._doOnHighlight1,!1),t.removeEventListener("mouseup",this._doOffHighlight1,!1),t.removeEventListener("click",this._doOnClick,!1)):(t.detachEvent("onmouseover",this._doOnHighlight0),t.detachEvent("onmouseout",this._doOffHighlight0),t.detachEvent("onmousedown",this._doOnHighlight1),t.detachEvent("onmouseup",this._doOffHighlight1),t.detachEvent("onclick",this._doOnClick))},dhtmlXRibbon.prototype._attachEventsToInput=function(t){"function"==typeof window.addEventListener?(t.addEventListener("focus",this._doOnFocus,!1),t.addEventListener("blur",this._doOnBlur,!1),t.addEventListener("change",this._doOnChange,!1),t.addEventListener("keydown",this._doOnKeydown,!1)):(t.attachEvent("onfocus",this._doOnFocus),t.attachEvent("onblur",this._doOnBlur),t.attachEvent("onchange",this._doOnChange),t.attachEvent("onkeydown",this._doOnKeydown))},dhtmlXRibbon.prototype._detachEventsFromInput=function(t){"function"==typeof window.addEventListener?(t.removeEventListener("focus",this._doOnFocus,!1),t.removeEventListener("blur",this._doOnBlur,!1),t.removeEventListener("change",this._doOnChange,!1),t.removeEventListener("keydown",this._doOnKeydown,!1)):(t.detachEvent("onfocus",this._doOnFocus),t.detachEvent("onblur",this._doOnBlur),t.detachEvent("onchange",this._doOnChange),t.detachEvent("onkeydown",this._doOnKeydown))},dhtmlXRibbon.prototype._getContainerForSmallItem=function(t){var e=t.contForItems.lastChild,i=null;return"rows"==t.conf.mode?e&&/\s?dhxrb_block_rows/i.test(e.className)?(i=e.lastChild,i||(i=document.createElement("div"),i.className="dhxrb_block_row",e.appendChild(i))):(e=document.createElement("div"),e.className="dhxrb_block_rows",t.contForItems.appendChild(e),i=document.createElement("div"),i.className="dhxrb_block_row",e.appendChild(i)):e&&/dhxrb_3rows_block/i.test(e.className)&&e.childNodes.length<3?i=e:(i=document.createElement("div"),i.className="dhxrb_3rows_block",t.contForItems.appendChild(i)),i},dhtmlXRibbon.prototype._findItemByNode=function(t){for(;t&&!t._dhx_ribbonId;)t=t.parentNode;return t},dhtmlXRibbon.prototype._indexOf=function(t,e){var i,s;for(s=t.length,i=0;s>i;i++)if(t[i]==e)return i;return-1},dhtmlXRibbon.prototype._removeItem=function(t){var e,i=-1,s=this._items[t.parentId];return"group"==t.type?void this._removeGroup(t):(delete this._items[t.id],e=t.base.parentNode,this._detachEventFromItem(t.base),e.removeChild(t.base),"block"==s.type?e!=s.contForItems&&0==e.childNodes.length&&e.parentNode.removeChild(e):"group"==s.type&&dhtmlXRibbon.prototype.items.group.normalize(s),i=this._indexOf(s.childIds,t.id),-1!=i&&s.childIds.splice(i,1),void(this.items[t.type]&&"function"==typeof this.items[t.type].remove&&this.items[t.type].remove(t,this)))},dhtmlXRibbon.prototype._removeGroup=function(t){var e,i=[],s=this._items[t.parentId],n=t.base.parentNode;for(e in t.childIds)e=parseInt(e),i.push(this._items[t.childIds[e]]);for(e in i)e=parseInt(e),this._removeItem(i[e]);delete this._items[t.id],t.base.parentNode&&n.removeChild(t.base),0==n.childNodes.length&&n.parentNode.removeChild(n),e=this._indexOf(s.childIds,t.id),-1!=e&&s.childIds.splice(e,1),this.items[t.type]&&"function"==typeof this.items[t.type].remove&&this.items[t.type].remove(t)},dhtmlXRibbon.prototype._removeBlock=function(t){var e,i,s=[];for(e in t.childIds)e=parseInt(e),s.push(this._items[t.childIds[e]]);for(e in s)e=parseInt(e),this._removeItem(s[e]);delete this._items[t.id],t.base.parentNode.removeChild(t.base),i=t.parentId?this._items[t.parentId]:this,e=this._indexOf(i.childIds,t.id),-1!=e&&i.childIds.splice(e,1)},dhtmlXRibbon.prototype._removeTab=function(t){var e,i=[];for(e in t.childIds)e=parseInt(e),i.push(this._items[t.childIds[e]]);for(e in i)e=parseInt(e),this._removeBlock(i[e]);delete this._items[t.id],e=this._indexOf(this.childIds,t.id),-1!=e&&this.childIds.splice(e,1)},dhtmlXRibbon.prototype._skinCollection={dhx_skyblue:!0,dhx_web:!0,dhx_terrace:!0},dhtmlXRibbon.prototype._setSkinForItems=function(t){var e,i;for(e in this._items)i=this._items[e],i.conf.skin=t,dhtmlXRibbon.prototype.items[i.type]&&"function"==typeof dhtmlXRibbon.prototype.items[i.type].setSkin&&dhtmlXRibbon.prototype.items[i.type].setSkin(i,t);i=void 0,e=void 0},dhtmlXRibbon.prototype._setBlockText=function(t,e){t.conf.text=e,t.contForText.innerHTML=e,!e&&0!=e&&t.contForText.parentNode?t.contForText.parentNode.removeChild(t.contForText):t.contForText.parentNode||("top"==t.conf.text_pos?t.base.insertBefore(t.contForText,t.contForItems):t.base.appendChild(t.contForText))},dhtmlXRibbon.prototype.hide=function(t){var e=this._items[t];if((!this.items[e.type]||"function"!=typeof this.items[e.type].hide||1==this.items[e.type].hide(e))&&"tab"!=e.type){/\s?dhxrb_item_hide/i.test(e.base.className)||(e.base.className+=" dhxrb_item_hide");var i=this._items[e.parentId];i&&this.items[i.type]&&"function"==typeof this.items[i.type].hideChild&&this.items[i.type].hideChild(i,e)}},dhtmlXRibbon.prototype.show=function(t){var e=this._items[t];if((!this.items[e.type]||"function"!=typeof this.items[e.type].show||1==this.items[e.type].show(e))&&"tab"!=e.type){/\s?dhxrb_item_hide/i.test(e.base.className)&&(e.base.className=e.base.className.replace(/\s?dhxrb_item_hide/i,""));var i=this._items[e.parentId];i&&this.items[i.type]&&"function"==typeof this.items[i.type].showChild&&this.items[i.type].showChild(i,e)}},dhtmlXRibbon.prototype.getValue=function(t){var e=this._items[t];return this.items[e.type]&&"function"==typeof this.items[e.type].getValue?this.items[e.type].getValue(e):void 0},dhtmlXRibbon.prototype.setValue=function(t,e){var i=this._items[t];this.items[i.type]&&"function"==typeof this.items[i.type].setValue&&this.items[i.type].setValue(i,e)},dhtmlXRibbon.prototype.check=function(t,e){e=dhx4.s2b(e);var i=this._items[t];i&&!i.conf.checked&&"function"==typeof this.items[i.type].check&&(this.items[i.type].check(i),e&&this.callEvent("onCheck",[i.id,i.conf.checked]))},dhtmlXRibbon.prototype.uncheck=function(t,e){e=dhx4.s2b(e);var i=this._items[t];i&&i.conf.checked&&"function"==typeof this.items[i.type].uncheck&&(this.items[i.type].uncheck(i),e&&this.callEvent("onCheck",[i.id,i.conf.checked]))},dhtmlXRibbon.prototype.disable=function(t){var e,i=this._items[t];if((!this.items[i.type]||"function"!=typeof this.items[i.type].disable||1==this.items[i.type].disable(i))&&"tab"!=i.type){if("block"==i.type||"group"==i.type)for(e in i.childIds)e=parseInt(e),this.disable(i.childIds[e]);/\s?dhxrb_item_disable/i.test(i.base.className)||(i.base.className+=" dhxrb_item_disable"),i.conf.disable=!0}},dhtmlXRibbon.prototype.enable=function(t){var e,i=this._items[t];if((!this.items[i.type]||"function"!=typeof this.items[i.type].enable||1==this.items[i.type].enable(i))&&"tab"!=i.type){if("block"==i.type||"group"==i.type)for(e in i.childIds)e=parseInt(e),this.enable(i.childIds[e]);/\s?dhxrb_item_disable/i.test(i.base.className)&&(i.base.className=i.base.className.replace(/\s?dhxrb_item_disable/i,"")),i.conf.disable=!1}},dhtmlXRibbon.prototype.isEnabled=function(t){var e=this._items[t];return this.items[e.type]&&"function"==typeof this.items[e.type].isEnabled?this.items[e.type].isEnabled(e):"tab"==e.type?void 0:1!=e.conf.disable},dhtmlXRibbon.prototype.isVisible=function(t){var e=this._items[t];return this.items[e.type]&&"function"==typeof this.items[e.type].isVisible?this.items[e.type].isVisible(e):"tab"==e.type?void 0:!/\s?dhxrb_item_hide/i.test(e.base.className)},dhtmlXRibbon.prototype.setItemState=function(t,e,i){e=dhx4.s2b(e),i=dhx4.s2b(i);var s=this._items[t];if(s&&"function"==typeof this.items[s.type].setState)switch(s.type){case"buttonSegment":this.items[s.type].setState(s,this,i);break;default:this.items[s.type].setState(s,e,i)}},dhtmlXRibbon.prototype.setIconPath=function(t){this.conf.icons_path=t},dhtmlXRibbon.prototype.removeItem=function(t){var e=this._items[t];switch(e.type){case"tab":break;case"block":this._removeBlock(e);break;case"group":this._removeGroup(e);break;default:this._removeItem(e)}},dhtmlXRibbon.prototype.setSkin=function(t){if(t="string"==typeof t?t.toLowerCase():"",1==this._skinCollection[t]){var e,i,s=-1,n="dhtmlxribbon";if(e=this._base.className.match(/\S\w+/gi),e instanceof Array){for(i in this._skinCollection){if(-1!=s)break;s=this._indexOf(e,n+"_"+i)}s=-1==s?e.length:s}else e=[],s=0;e[s]=n+"_"+t,this._base.className=e.join(" "),this.conf.skin=t,null!=this._tabbar&&this._tabbar.setSkin(t),this._setSkinForItems(t)}},dhtmlXRibbon.prototype.tabs=function(t){return this._tabbar instanceof dhtmlXTabBar?this._tabbar.tabs(t):void 0},dhtmlXRibbon.prototype.getItemType=function(t){var e=this._items[t];return e?e.type:void 0},dhtmlXRibbon.prototype.getValue=function(t){var e=this._items[t],i=void 0;return e&&this.items[e.type]&&"function"==typeof this.items[e.type].getValue&&(i=this.items[e.type].getValue(e)),i},dhtmlXRibbon.prototype.setValue=function(t,e,i){var s=this._items[t];i=i||!1,s&&this.items[s.type]&&"function"==typeof this.items[s.type].setValue&&this.items[s.type].setValue(s,e)},dhtmlXRibbon.prototype.getItemText=function(t){var e=this._items[t];return e?"tab"==e.type?this.tabs(e.id).getText():"block"==e.type?this.items.button.getText(e):this.items[e.type]&&"function"==typeof this.items[e.type].getText?this.items[e.type].getText(e):null:null},dhtmlXRibbon.prototype.setItemText=function(t,e){var i=this._items[t];i&&("tab"==i.type?this.tabs(i.id).setText(e):"block"==i.type?this._setBlockText(i,e):this.items[i.type]&&"function"==typeof this.items[i.type].setText&&this.items[i.type].setText(i,e))},function(){var t=dhtmlXRibbon.prototype.items;t.buttonTwoState=t._extends(t.buttonTwoState,t.button),t.buttonSelect=t._extends(t.buttonSelect,t.buttonTwoState),t.buttonSegment=t._extends(t.buttonSegment,t.buttonTwoState)}(),dhtmlXToolbarObject.prototype.addSpacer=function(t){var e=this.idPrefix+t;if(null!=this._spacer){if(this._spacer.idd==t)return;if(this._spacer==this.objPull[e].obj.parentNode){for(var i=!0;i;){var s=this._spacer.childNodes[0].idd;this.base.appendChild(this._spacer.childNodes[0]),(s==t||0==this._spacer.childNodes.length)&&(null!=this.objPull[e].arw&&this.base.appendChild(this.objPull[e].arw),i=!1)}return this._spacer.idd=t,void this._fixSpacer()}if(this.base==this.objPull[e].obj.parentNode){for(var i=!0,n=null!=this.objPull[e].arw;i;){var o=this.base.childNodes.length-1;1==n&&this.base.childNodes[o]==this.objPull[e].arw&&(i=!1),this.base.childNodes[o].idd==t&&(i=!1),i&&(this._spacer.childNodes.length>0?this._spacer.insertBefore(this.base.childNodes[o],this._spacer.childNodes[0]):this._spacer.appendChild(this.base.childNodes[o]))}return this._spacer.idd=t,void this._fixSpacer()}}else{for(var l=null,o=0;o<this.base.childNodes.length;o++)this.base.childNodes[o]==this.objPull[this.idPrefix+t].obj&&(l=o,null!=this.objPull[this.idPrefix+t].arw&&(l=o+1));if(null!=l){for(this._spacer=document.createElement("DIV"),this._spacer.className="right"==this.conf.align?" dhxtoolbar_float_left":" dhxtoolbar_float_right",this._spacer.dir="ltr",this._spacer.idd=t;this.base.childNodes.length>l+1;)this._spacer.appendChild(this.base.childNodes[l+1]);this.cont.appendChild(this._spacer),this._fixSpacer()}}"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.removeSpacer=function(){if(this._spacer){for(;this._spacer.childNodes.length>0;)this.base.appendChild(this._spacer.childNodes[0]);this._spacer.parentNode.removeChild(this._spacer),this._spacer=null,"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()}},dhtmlXToolbarObject.prototype._fixSpacer=function(){if("undefined"==typeof window.addEventListener&&null!=this._spacer){this._spacer.style.borderLeft="1px solid #a4bed4";var t=this._spacer;window.setTimeout(function(){t.style.borderLeft="0px solid #a4bed4",t=null},1)}},dhtmlXToolbarObject.prototype.getType=function(t){var e=this.getParentId(t);if(null!=e){var i=null,s=this.objPull[this.idPrefix+e]._listOptions[t];return null!=s&&(i=null!=s.sep?"buttonSelectSeparator":"buttonSelectButton"),i}return null==this.objPull[this.idPrefix+t]?null:this.objPull[this.idPrefix+t].type},dhtmlXToolbarObject.prototype.getTypeExt=function(t){var e=this.getType(t);return"buttonSelectButton"==e||"buttonSelectSeparator"==e?e="buttonSelectButton"==e?"button":"separator":null},dhtmlXToolbarObject.prototype.inArray=function(t,e){for(var i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},dhtmlXToolbarObject.prototype.getParentId=function(t){var e=null;for(var i in this.objPull)if(this.objPull[i]._listOptions)for(var s in this.objPull[i]._listOptions)s==t&&(e=String(i).replace(this.idPrefix,""));return e},dhtmlXToolbarObject.prototype._addItem=function(t,e){this._addItemToStorage(t,e),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.addButton=function(t,e,i,s,n){this._addItem({id:t,type:"button",text:i,img:s,imgdis:n},e)},dhtmlXToolbarObject.prototype.addText=function(t,e,i){this._addItem({id:t,type:"text",text:i},e)},dhtmlXToolbarObject.prototype.addButtonSelect=function(t,e,i,s,n,o,l,r,a,h){for(var d=[],c=0;c<s.length;c++){var u={};s[c]instanceof Array?(u.id=s[c][0],u.type="obj"==s[c][1]?"button":"separator",u.text=s[c][2]||null,u.img=s[c][3]||null):s[c]instanceof Object&&null!=s[c]&&"undefined"!=typeof s[c].id&&"undefined"!=typeof s[c].type&&(u.id=s[c].id,u.type="obj"==s[c].type?"button":"separator",u.text=s[c].text,u.img=s[c].img),d.push(u)}this._addItem({id:t,type:"buttonSelect",text:i,img:n,imgdis:o,renderSelect:l,openAll:r,options:d,maxOpen:a,mode:h},e)},dhtmlXToolbarObject.prototype.addButtonTwoState=function(t,e,i,s,n){this._addItem({id:t,type:"buttonTwoState",img:s,imgdis:n,text:i},e)},dhtmlXToolbarObject.prototype.addSeparator=function(t,e){this._addItem({id:t,type:"separator"},e)},dhtmlXToolbarObject.prototype.addSlider=function(t,e,i,s,n,o,l,r,a){this._addItem({id:t,type:"slider",length:i,valueMin:s,valueMax:n,valueNow:o,textMin:l,textMax:r,toolTip:a},e)},dhtmlXToolbarObject.prototype.addInput=function(t,e,i,s){this._addItem({id:t,type:"buttonInput",value:i,width:s},e)},dhtmlXToolbarObject.prototype.forEachItem=function(t){for(var e in this.objPull)this.inArray(this.rootTypes,this.objPull[e].type)&&t(this.objPull[e].id.replace(this.idPrefix,""))},function(){for(var t="isVisible,enableItem,disableItem,isEnabled,setItemText,getItemText,setItemToolTip,getItemToolTip,getInput,setItemImage,setItemImageDis,clearItemImage,clearItemImageDis,setItemState,getItemState,setItemToolTipTemplate,getItemToolTipTemplate,setValue,getValue,setMinValue,getMinValue,setMaxValue,getMaxValue,setWidth,getWidth,setMaxOpen".split(","),e=[!1,"","",!1,"","","","","","","","","",!1,"","","",null,"",[null,null],"",[null,null],"",null],i=function(t,e){return function(i,s,n){return i=this.idPrefix+i,null!=this.objPull[i][t]?this.objPull[i][t].call(this.objPull[i],s,n):e}},s=0;s<t.length;s++){var n=t[s],o=e[s];dhtmlXToolbarObject.prototype[n]=i(n,o)}}(),dhtmlXToolbarObject.prototype.showItem=function(t){t=this.idPrefix+t,null!=this.objPull[t]&&null!=this.objPull[t].showItem&&(this.objPull[t].showItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())},dhtmlXToolbarObject.prototype.hideItem=function(t){t=this.idPrefix+t,null!=this.objPull[t]&&null!=this.objPull[t].hideItem&&(this.objPull[t].hideItem(),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin())},dhtmlXToolbarObject.prototype.getPosition=function(t){return this._getPosition(t)},dhtmlXToolbarObject.prototype._getPosition=function(t){if(null==this.objPull[this.idPrefix+t])return null;for(var e=null,i=0,s=0;s<this.base.childNodes.length;s++)null!=this.base.childNodes[s].idd&&(this.base.childNodes[s].idd==t&&(e=i),i++);if(!e&&null!=this._spacer)for(var s=0;s<this._spacer.childNodes.length;s++)null!=this._spacer.childNodes[s].idd&&(this._spacer.childNodes[s].idd==t&&(e=i),i++);return e},dhtmlXToolbarObject.prototype.setPosition=function(t,e){this._setPosition(t,e)},dhtmlXToolbarObject.prototype._setPosition=function(t,e){if(null!=this.objPull[this.idPrefix+t]){isNaN(e)&&(e=this.base.childNodes.length),0>e&&(e=0);var i=null;this._spacer&&(i=this._spacer.idd,this.removeSpacer());var s=this.objPull[this.idPrefix+t];this.base.removeChild(s.obj),s.arw&&this.base.removeChild(s.arw);var n=this._getIdByPosition(e,!0);null==n[0]?(this.base.appendChild(s.obj),s.arw&&this.base.appendChild(s.arw)):(this.base.insertBefore(s.obj,this.base.childNodes[n[1]]),s.arw&&this.base.insertBefore(s.arw,this.base.childNodes[n[1]+1])),null!=i&&this.addSpacer(i)}},dhtmlXToolbarObject.prototype._getIdByPosition=function(t,e){for(var i=null,s=0,n=0,o=0;o<this.base.childNodes.length;o++)null!=this.base.childNodes[o].idd&&null==i&&s++==t&&(i=this.base.childNodes[o].idd),null==i&&n++;return n=null==i?null:n,1==e?new Array(i,n):i},dhtmlXToolbarObject.prototype.removeItem=function(t){this._removeItem(t),"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype._removeItem=function(t){var e=this.getType(t);t=this.idPrefix+t;var i=this.objPull[t];if("button"==e&&(i.obj._doOnMouseOver=null,i.obj._doOnMouseOut=null,i.obj._doOnMouseUp=null,i.obj._doOnMouseUpOnceAnywhere=null,i.obj.onclick=null,i.obj.onmouseover=null,i.obj.onmouseout=null,i.obj.onmouseup=null,i.obj.onmousedown=null,i.obj.onselectstart=null,i.obj.renderAs=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.state=null,i.img=null,i.imgEn=null,i.imgDis=null,i.type=null,i.enableItem=null,i.disableItem=null,i.isEnabled=null,i.showItem=null,i.hideItem=null,i.isVisible=null,i.setItemText=null,i.getItemText=null,i.setItemImage=null,i.clearItemImage=null,i.setItemImageDis=null,i.clearItemImageDis=null,i.setItemToolTip=null,i.getItemToolTip=null),"buttonTwoState"==e&&(i.obj._doOnMouseOver=null,i.obj._doOnMouseOut=null,i.obj.onmouseover=null,i.obj.onmouseout=null,i.obj.onmousedown=null,i.obj.onselectstart=null,i.obj.renderAs=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.state=null,i.img=null,i.imgEn=null,i.imgDis=null,i.type=null,i.enableItem=null,i.disableItem=null,i.isEnabled=null,i.showItem=null,i.hideItem=null,i.isVisible=null,i.setItemText=null,i.getItemText=null,i.setItemImage=null,i.clearItemImage=null,i.setItemImageDis=null,i.clearItemImageDis=null,i.setItemToolTip=null,i.getItemToolTip=null,i.setItemState=null,i.getItemState=null),"buttonSelect"==e){for(var s in i._listOptions)this.removeListOption(t,s);
i._listOptions=null,i.polygon._ie6cover&&(document.body.removeChild(i.polygon._ie6cover),i.polygon._ie6cover=null),i.p_tbl.removeChild(i.p_tbody),i.polygon.removeChild(i.p_tbl),i.polygon.onselectstart=null,document.body.removeChild(i.polygon),i.p_tbody=null,i.p_tbl=null,i.polygon=null,i.obj.onclick=null,i.obj.onmouseover=null,i.obj.onmouseout=null,i.obj.onmouseup=null,i.obj.onmousedown=null,i.obj.onselectstart=null,i.obj.idd=null,i.obj.iddPrefix=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.arw.onclick=null,i.arw.onmouseover=null,i.arw.onmouseout=null,i.arw.onmouseup=null,i.arw.onmousedown=null,i.arw.onselectstart=null,i.arw.parentNode.removeChild(i.arw),i.arw=null,i.renderSelect=null,i.state=null,i.type=null,i.id=null,i.img=null,i.imgEn=null,i.imgDis=null,i.openAll=null,i._isListButton=null,i._separatorButtonSelectObject=null,i._buttonButtonSelectObject=null,i.setWidth=null,i.enableItem=null,i.disableItem=null,i.isEnabled=null,i.showItem=null,i.hideItem=null,i.isVisible=null,i.setItemText=null,i.getItemText=null,i.setItemImage=null,i.clearItemImage=null,i.setItemImageDis=null,i.clearItemImageDis=null,i.setItemToolTip=null,i.getItemToolTip=null,i.addListOption=null,i.removeListOption=null,i.showListOption=null,i.hideListOption=null,i.isListOptionVisible=null,i.enableListOption=null,i.disableListOption=null,i.isListOptionEnabled=null,i.setListOptionPosition=null,i.getListOptionPosition=null,i.setListOptionImage=null,i.getListOptionImage=null,i.clearListOptionImage=null,i.setListOptionText=null,i.getListOptionText=null,i.setListOptionToolTip=null,i.getListOptionToolTip=null,i.forEachListOption=null,i.getAllListOptions=null,i.setListOptionSelected=null,i.getListOptionSelected=null}if("buttonInput"==e&&(i.obj.childNodes[0].onkeydown=null,i.obj.removeChild(i.obj.childNodes[0]),i.obj.w=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.type=null,i.enableItem=null,i.disableItem=null,i.isEnabled=null,i.showItem=null,i.hideItem=null,i.isVisible=null,i.setItemToolTip=null,i.getItemToolTip=null,i.setWidth=null,i.getWidth=null,i.setValue=null,i.getValue=null,i.setItemText=null,i.getItemText=null),"slider"==e){for(window.dhx4.isIPad?(document.removeEventListener("touchmove",pen._doOnMouseMoveStart,!1),document.removeEventListener("touchend",pen._doOnMouseMoveEnd,!1)):"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",i.pen._doOnMouseMoveStart,!1),window.removeEventListener("mouseup",i.pen._doOnMouseMoveEnd,!1)):(document.body.detachEvent("onmousemove",i.pen._doOnMouseMoveStart),document.body.detachEvent("onmouseup",i.pen._doOnMouseMoveEnd)),i.pen.allowMove=null,i.pen.initXY=null,i.pen.maxX=null,i.pen.minX=null,i.pen.nowX=null,i.pen.newNowX=null,i.pen.valueMax=null,i.pen.valueMin=null,i.pen.valueNow=null,i.pen._definePos=null,i.pen._detectLimits=null,i.pen._doOnMouseMoveStart=null,i.pen._doOnMouseMoveEnd=null,i.pen.onmousedown=null,i.obj.removeChild(i.pen),i.pen=null,i.label.tip=null,document.body.removeChild(i.label),i.label=null,i.obj.onselectstart=null,i.obj.idd=null;i.obj.childNodes.length>0;)i.obj.removeChild(i.obj.childNodes[0]);i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.type=null,i.state=null,i.enableItem=null,i.disableItem=null,i.isEnabled=null,i.setItemToolTipTemplate=null,i.getItemToolTipTemplate=null,i.setMaxValue=null,i.setMinValue=null,i.getMaxValue=null,i.getMinValue=null,i.setValue=null,i.getValue=null,i.showItem=null,i.hideItem=null,i.isVisible=null}"separator"==e&&(i.obj.onselectstart=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.type=null,i.showItem=null,i.hideItem=null,i.isVisible=null),"text"==e&&(i.obj.onselectstart=null,i.obj.idd=null,i.obj.parentNode.removeChild(i.obj),i.obj=null,i.id=null,i.type=null,i.showItem=null,i.hideItem=null,i.isVisible=null,i.setWidth=null,i.setItemText=null,i.getItemText=null),e=null,i=null,this.objPull[this.idPrefix+t]=null,delete this.objPull[this.idPrefix+t]},function(){for(var t="addListOption,removeListOption,showListOption,hideListOption,isListOptionVisible,enableListOption,disableListOption,isListOptionEnabled,setListOptionPosition,getListOptionPosition,setListOptionText,getListOptionText,setListOptionToolTip,getListOptionToolTip,setListOptionImage,getListOptionImage,clearListOptionImage,forEachListOption,getAllListOptions,setListOptionSelected,getListOptionSelected".split(","),e=function(t){return function(e,i,s,n,o,l){return e=this.idPrefix+e,null!=this.objPull[e]&&"buttonSelect"==this.objPull[e].type?this.objPull[e][t].call(this.objPull[e],i,s,n,o,l):void 0}},i=0;i<t.length;i++){var s=t[i];dhtmlXToolbarObject.prototype[s]=e(s)}}(),dhtmlXToolbarObject.prototype._rtlParseBtn=function(t,e){return t+e},dhtmlXToolbarObject.prototype._separatorObject=function(t,e,i){return this.id=t.idPrefix+e,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_sep",this.obj.style.display=null!=i.hidden?"none":"",this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.onselectstart=function(t){t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1},window.dhx4.isIPad&&(this.obj.ontouchstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1}),t.base.appendChild(this.obj),this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this},dhtmlXToolbarObject.prototype._textObject=function(t,e,i){return this.id=t.idPrefix+e,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_text",this.obj.style.display=null!=i.hidden?"none":"",this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.onselectstart=function(t){t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1},window.dhx4.isIPad&&(this.obj.ontouchstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1}),this.obj.innerHTML=i.text||"",t.base.appendChild(this.obj),this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(t){this.obj.innerHTML=t},this.getItemText=function(){return this.obj.innerHTML},this.setWidth=function(t){this.obj.style.width=t+"px"},this.setItemToolTip=function(t){this.obj.title=t},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._buttonObject=function(t,e,i){this.id=t.idPrefix+e,this.state=null!=i.enabled?!1:!0,this.imgEn=i.img||"",this.imgDis=i.imgdis||"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=i.hidden?"none":"",this.obj.allowClick=!1,this.obj.extAction=i.action||null,this.obj.renderAs=this.obj.className,this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.pressed=!1,this.obj.innerHTML=t._rtlParseBtn(""!=this.img?"<img src='"+t.conf.icons_path+this.img+"'>":"",null!=i.text?"<div class='dhxtoolbar_text'>"+i.text+"</div>":"");var s=this;return this.obj.onselectstart=function(t){t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1},this.obj.onmouseover=function(){this._doOnMouseOver()},this.obj.onmouseout=function(){this._doOnMouseOut()},this.obj._doOnMouseOver=function(){this.allowClick=!0,0!=s.state&&"none"==t.anyUsed&&(this.className="dhx_toolbar_btn dhxtoolbar_btn_over",this.renderAs=this.className)},this.obj._doOnMouseOut=function(){this.allowClick=!1,0!=s.state&&"none"==t.anyUsed&&(this.className="dhx_toolbar_btn dhxtoolbar_btn_def",this.renderAs=this.renderAs)},this.obj.onclick=function(e){if(0!=s.state&&0!=this.allowClick){e=e||event;var i=this.idd.replace(t.idPrefix,"");if(this.extAction)try{window[this.extAction](i)}catch(e){}t&&t.callEvent&&t.callEvent("onClick",[i])}},this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(e){if(0==s.state)return e=e||event,e.preventDefault?e.preventDefault():e.returnValue=!1,e.cancelBubble=!0,!1;if("none"==t.anyUsed)return t.anyUsed=this.idd,this.className="dhx_toolbar_btn dhxtoolbar_btn_pres",this.pressed=!0,this.onmouseover=function(){this._doOnMouseOver()},this.onmouseout=function(){t.anyUsed="none",this._doOnMouseOut()},!1},this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(){if(0!=s.state&&("none"==t.anyUsed||t.anyUsed==this.idd)){var e=t.anyUsed;this._doOnMouseUp(),window.dhx4.isIPad&&"none"!=e&&t.callEvent("onClick",[this.idd.replace(t.idPrefix,"")])}},window.dhx4.isIPad&&(this.obj.ontouchmove=function(){this._doOnMouseUp()}),this.obj._doOnMouseUp=function(){t.anyUsed="none",this.className=this.renderAs,this.pressed=!1},this.obj._doOnMouseUpOnceAnywhere=function(){this._doOnMouseUp(),this.onmouseover=function(){this._doOnMouseOver()},this.onmouseout=function(){this._doOnMouseOut()}},t.base.appendChild(this.obj),this.enableItem=function(){t._enableItem(this)},this.disableItem=function(){t._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(e){t._setItemText(this,e)},this.getItemText=function(){return t._getItemText(this)},this.setItemImage=function(e){t._setItemImage(this,e,!0)},this.clearItemImage=function(){t._clearItemImage(this,!0)},this.setItemImageDis=function(e){t._setItemImage(this,e,!1)},this.clearItemImageDis=function(){t._clearItemImage(this,!1)},this.setItemToolTip=function(t){this.obj.title=t},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._buttonSelectObject=function(t,e,i){this.id=t.idPrefix+e,this.state=null!=i.enabled?"true"==i.enabled?!0:!1:!0,this.imgEn=i.img||"",this.imgDis=i.imgdis||"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.mode=i.mode||"button","select"==this.mode?(this.openAll=!0,this.renderSelect=!1,i.text&&0!=i.text.length||(i.text="&nbsp;")):(this.openAll=1==window.dhx4.s2b(i.openAll),this.renderSelect=null==i.renderSelect?!0:window.dhx4.s2b(i.renderSelect)),this.maxOpen=isNaN(i.maxOpen?i.maxOpen:"")?null:i.maxOpen,this._maxOpenTest=function(){if(!isNaN(this.maxOpen)&&!t._sbw){var e=document.createElement("DIV");e.className="dhxtoolbar_maxopen_test",document.body.appendChild(e);var i=document.createElement("DIV");i.className="dhxtoolbar_maxopen_test2",e.appendChild(i),t._sbw=e.offsetWidth-i.offsetWidth,e.removeChild(i),i=null,document.body.removeChild(e),e=null}},this._maxOpenTest(),this.obj=document.createElement("DIV"),this.obj.allowClick=!1,this.obj.extAction=i.action||null,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=i.hidden?"none":"",this.obj.renderAs=this.obj.className,this.obj.onselectstart=function(t){t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1},this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.pressed=!1,this.callEvent=!1,this.obj.innerHTML=t._rtlParseBtn(""!=this.img?"<img src='"+t.conf.icons_path+this.img+"'>":"",null!=i.text?"<div class='dhxtoolbar_text'>"+i.text+"</div>":""),t.base.appendChild(this.obj),this.arw=document.createElement("DIV"),this.arw.className="dhx_toolbar_arw dhxtoolbar_btn_"+(this.state?"def":"dis"),this.arw.style.display=this.obj.style.display,this.arw.innerHTML="<div class='arwimg'>&nbsp;</div>",this.arw.title=this.obj.title,this.arw.onselectstart=function(t){t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1},t.base.appendChild(this.arw);var s=this;if(this.obj.onmouseover=function(e){e=e||event,"none"==t.anyUsed&&s.state&&(s.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over",s.obj.className=s.obj.renderAs,s.arw.className=String(s.obj.renderAs).replace("btn","arw"))},this.obj.onmouseout=function(){s.obj.allowClick=!1,"none"==t.anyUsed&&s.state&&(s.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",s.obj.className=s.obj.renderAs,s.arw.className=String(s.obj.renderAs).replace("btn","arw"),s.callEvent=!1)},this.arw.onmouseover=this.obj.onmouseover,this.arw.onmouseout=this.obj.onmouseout,1==this.openAll||(this.obj.onclick=function(e){if(e=e||event,s.obj.allowClick&&s.state&&"none"==t.anyUsed){var i=s.obj.idd.replace(t.idPrefix,"");if(s.obj.extAction)try{window[s.obj.extAction](i)}catch(e){}t.callEvent("onClick",[i])}},this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(e){e=e||event,"none"==t.anyUsed&&s.state&&(s.obj.allowClick=!0,s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres",s.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres",s.callEvent=!0)},this.obj[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(e){if(e=e||event,e.cancelBubble=!0,"none"==t.anyUsed&&s.state&&(s.obj.className=s.obj.renderAs,s.arw.className=String(s.obj.renderAs).replace("btn","arw"),window.dhx4.isIPad&&s.callEvent)){var i=s.obj.idd.replace(t.idPrefix,"");t.callEvent("onClick",[i])}}),window.dhx4.isIPad&&(this.obj.ontouchmove=this.obj.onmouseout),this.arw[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(e){e=e||event;var i=0===this.className.indexOf("dhx_toolbar_arw")?this:this.nextSibling;if(i._skip?(e=e||event,e.cancelBubble=!0):i._skip=!0,i=null,s.state){if(t.anyUsed==s.obj.idd)s.obj.className=s.obj.renderAs,s.arw.className=String(s.obj.renderAs).replace("btn","arw"),t.anyUsed="none",window.dhx4.zim.clear(s.polygon._idd),s.polygon.style.display="none",s.polygon._ie6cover&&(s.polygon._ie6cover.style.display="none"),"dhx_terrace"==t.conf.skin&&t._improveTerraceButtonSelect(s.id,!0);else{if("none"!=t.anyUsed&&"buttonSelect"==t.objPull[t.idPrefix+t.anyUsed].type){var n=t.objPull[t.idPrefix+t.anyUsed];"none"!=n.polygon.style.display&&(n.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",n.obj.className=n.obj.renderAs,n.arw.className=String(s.obj.renderAs).replace("btn","arw"),window.dhx4.zim.clear(n.polygon._idd),n.polygon.style.display="none",n.polygon._ie6cover&&(n.polygon._ie6cover.style.display="none"),"dhx_terrace"==t.conf.skin&&t._improveTerraceButtonSelect(n.id,!0))}s.obj.className="dhx_toolbar_btn dhxtoolbar_btn_over",s.arw.className="dhx_toolbar_arw dhxtoolbar_btn_pres",t.anyUsed=s.obj.idd,s.polygon.style.top="0px",s.polygon.style.visibility="hidden",s.polygon.style.zIndex=window.dhx4.zim.reserve(s.polygon._idd),s.polygon.style.display="","dhx_terrace"==t.conf.skin&&t._improveTerraceButtonSelect(s.id,!1),s._fixMaxOpenHeight(s.maxOpen||null),t._autoDetectVisibleArea();var o=window.dhx4.absTop(s.obj)+s.obj.offsetHeight+t.conf.sel_ofs_y,l=s.polygon.offsetHeight;if(o+l>t.tY2){var r=null!=s.maxOpen?Math.floor((t.tY2-o)/22):0;r>=1?s._fixMaxOpenHeight(r):(o=window.dhx4.absTop(s.obj)-l-t.conf.sel_ofs_y,0>o&&(o=0))}if(s.polygon.style.top=o+"px",t.rtl)s.polygon.style.left=window.dhx4.absLeft(s.obj)+s.obj.offsetWidth-s.polygon.offsetWidth+t.conf.sel_ofs_x+"px";else{var a=document.body.scrollLeft,h=a+(window.innerWidth||document.body.clientWidth),d=window.dhx4.absLeft(s.obj)+t.conf.sel_ofs_x;d+s.polygon.offsetWidth>h&&(d=window.dhx4.absLeft(s.arw)+s.arw.offsetWidth-s.polygon.offsetWidth),s.polygon.style.left=Math.max(d,5)+"px"}s.polygon.style.visibility="visible",s.polygon._ie6cover&&(s.polygon._ie6cover.style.left=s.polygon.style.left,s.polygon._ie6cover.style.top=s.polygon.style.top,s.polygon._ie6cover.style.width=s.polygon.offsetWidth+"px",s.polygon._ie6cover.style.height=s.polygon.offsetHeight+"px",s.polygon._ie6cover.style.display="")}return!1}},this.arw.onclick=function(t){t=t||event,t.cancelBubble=!0},this.arw[window.dhx4.isIPad?"ontouchend":"onmouseup"]=function(t){t=t||event,t.cancelBubble=!0},this.openAll===!0&&(this.obj.onclick=this.arw.onclick,this.obj.onmousedown=this.arw.onmousedown,this.obj.onmouseup=this.arw.onmouseup,window.dhx4.isIPad&&(this.obj.ontouchstart=this.arw.ontouchstart,this.obj.ontouchend=this.arw.ontouchend)),this.obj.iddPrefix=t.idPrefix,this._listOptions={},this._fixMaxOpenHeight=function(e){var i="auto",n=!1;if(null!==e){var o=0;for(var l in this._listOptions)o++;o>e?(this._ph=22*e,i=this._ph+"px"):n=!0}this.polygon.style.width="auto",this.polygon.style.height="auto",n||null==s.maxOpen||(this.polygon.style.width=this.p_tbl.offsetWidth+t._sbw+"px",this.polygon.style.height=i)},this._separatorButtonSelectObject=function(t,e,i){return this.obj={},this.obj.tr=document.createElement("TR"),this.obj.tr.className="tr_sep",this.obj.tr.onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this.obj.td=document.createElement("TD"),this.obj.td.colSpan="2",this.obj.td.className="td_btn_sep",this.obj.td.onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},isNaN(i)?i=s.p_tbody.childNodes.length+1:1>i&&(i=1),i>s.p_tbody.childNodes.length?s.p_tbody.appendChild(this.obj.tr):s.p_tbody.insertBefore(this.obj.tr,s.p_tbody.childNodes[i-1]),this.obj.tr.appendChild(this.obj.td),this.obj.sep=document.createElement("DIV"),this.obj.sep.className="btn_sep",this.obj.sep.onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this.obj.td.appendChild(this.obj.sep),s._listOptions[t]=this.obj,this},this._buttonButtonSelectObject=function(e,i,n){var o=!0;"undefined"!=typeof i.enabled?o=window.dhx4.s2b(i.enabled):"undefined"!=typeof i.disabled&&(o=window.dhx4.s2b(i.disabled)),this.obj={},this.obj.tr=document.createElement("TR"),this.obj.tr.en=o,this.obj.tr.extAction=i.action||null,this.obj.tr._selected=null!=i.selected,this.obj.tr.className="tr_btn"+(this.obj.tr.en?this.obj.tr._selected&&s.renderSelect?" tr_btn_selected":"":" tr_btn_disabled"),this.obj.tr.onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this.obj.tr.idd=String(e),isNaN(n)?n=s.p_tbody.childNodes.length+1:1>n&&(n=1),n>s.p_tbody.childNodes.length?s.p_tbody.appendChild(this.obj.tr):s.p_tbody.insertBefore(this.obj.tr,s.p_tbody.childNodes[n-1]),this.obj.td_a=document.createElement("TD"),this.obj.td_a.className="td_btn_img",this.obj.td_a.onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this.obj.td_b=document.createElement("TD"),this.obj.td_b.className="td_btn_txt",this.obj.td_b.onselectstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},t.rtl?(this.obj.tr.appendChild(this.obj.td_b),this.obj.tr.appendChild(this.obj.td_a)):(this.obj.tr.appendChild(this.obj.td_a),this.obj.tr.appendChild(this.obj.td_b)),null!=i.img?(this.obj.td_a.innerHTML="<img class='btn_sel_img' src='"+t.conf.icons_path+i.img+"' border='0'>",this.obj.tr._img=i.img):this.obj.td_a.innerHTML="&nbsp;";var l=null!=i.text?i.text:i.itemText||"";return this.obj.td_b.innerHTML="<div class='btn_sel_text'>"+l+"</div>",this.obj.tr[window.dhx4.isIPad?"ontouchstart":"onmouseover"]=function(){!this.en||this._selected&&s.renderSelect||(this.className="tr_btn tr_btn_over")},this.obj.tr.onmouseout=function(){this.en&&(this._selected&&s.renderSelect?-1==String(this.className).search("tr_btn_selected")&&(this.className="tr_btn tr_btn_selected"):this.className="tr_btn")},this.obj.tr[window.dhx4.isIPad?"ontouchend":"onclick"]=function(e){if(e=e||event,e.cancelBubble=!0,this.en){s.setListOptionSelected(this.idd.replace(t.idPrefix,"")),s.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def",s.obj.className=s.obj.renderAs,s.arw.className=String(s.obj.renderAs).replace("btn","arw"),window.dhx4.zim.clear(s.polygon._idd),s.polygon.style.display="none",s.polygon._ie6cover&&(s.polygon._ie6cover.style.display="none"),"dhx_terrace"==t.conf.skin&&t._improveTerraceButtonSelect(s.id,!0),t.anyUsed="none";var i=this.idd.replace(t.idPrefix,"");if(this.extAction)try{window[this.extAction](i)}catch(e){}t.callEvent("onClick",[i])}},s._listOptions[e]=this.obj,this},this.polygon=document.createElement("DIV"),this.polygon.dir="ltr",this.polygon.style.display="none",this.polygon.className="dhx_toolbar_poly_"+t.conf.skin+" dhxtoolbar_icons_"+t.conf.iconSize,this.polygon.onselectstart=function(t){t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1},this.polygon.onmousedown=function(t){t=t||event,t.cancelBubble=!0},this.polygon.style.overflowY="auto",this.polygon._idd=window.dhx4.newId(),window.dhx4.isIPad&&(this.polygon.ontouchstart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,t.cancelBubble=!0,!1}),this.p_tbl=document.createElement("TABLE"),this.p_tbl.className="buttons_cont",this.p_tbl.cellSpacing="0",this.p_tbl.cellPadding="0",this.p_tbl.border="0",this.polygon.appendChild(this.p_tbl),this.p_tbody=document.createElement("TBODY"),this.p_tbl.appendChild(this.p_tbody),null!=i.options)for(var n=0;n<i.options.length;n++){var o="_"+(i.options[n].type||"")+"ButtonSelectObject";null==i.options[n].id&&(i.options[n].id=t._genStr(24)),"function"==typeof this[o]&&new this[o](i.options[n].id,i.options[n])}return document.body.appendChild(this.polygon),window.dhx4.isIE6&&(this.polygon._ie6cover=document.createElement("IFRAME"),this.polygon._ie6cover.frameBorder=0,this.polygon._ie6cover.style.position="absolute",this.polygon._ie6cover.style.border="none",this.polygon._ie6cover.style.backgroundColor="#000000",this.polygon._ie6cover.style.filter="alpha(opacity=100)",this.polygon._ie6cover.style.display="none",this.polygon._ie6cover.setAttribute("src","javascript:false;"),document.body.appendChild(this.polygon._ie6cover)),this.setWidth=function(t){this.obj.style.width=t-this.arw.offsetWidth+"px",this.polygon.style.width=this.obj.offsetWidth+this.arw.offsetWidth-2+"px",this.p_tbl.style.width=this.polygon.style.width},this.enableItem=function(){t._enableItem(this)},this.disableItem=function(){t._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display="",this.arw.style.display=""},this.hideItem=function(){this.obj.style.display="none",this.arw.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(e){t._setItemText(this,e)},this.getItemText=function(){return t._getItemText(this)},this.setItemImage=function(e){t._setItemImage(this,e,!0)},this.clearItemImage=function(){t._clearItemImage(this,!0)},this.setItemImageDis=function(e){t._setItemImage(this,e,!1)},this.clearItemImageDis=function(){t._clearItemImage(this,!1)},this.setItemToolTip=function(t){this.obj.title=t,this.arw.title=t},this.getItemToolTip=function(){return this.obj.title},this.addListOption=function(t,e,i,s,n){if("button"==i||"separator"==i){var o={id:t,type:i,text:s,img:n};new this["_"+i+"ButtonSelectObject"](t,o,e)}},this.removeListOption=function(t){if(this._isListButton(t,!0)){var e=this._listOptions[t];if(null!=e.td_a&&null!=e.td_b){for(e.td_a.onselectstart=null,e.td_b.onselectstart=null;e.td_a.childNodes.length>0;)e.td_a.removeChild(e.td_a.childNodes[0]);for(;e.td_b.childNodes.length>0;)e.td_b.removeChild(e.td_b.childNodes[0]);for(e.tr.onselectstart=null,e.tr.onmouseover=null,e.tr.onmouseout=null,e.tr.onclick=null;e.tr.childNodes.length>0;)e.tr.removeChild(e.tr.childNodes[0]);e.tr.parentNode.removeChild(e.tr),e.td_a=null,e.td_b=null,e.tr=null}else{for(e.sep.onselectstart=null,e.td.onselectstart=null,e.tr.onselectstart=null;e.td.childNodes.length>0;)e.td.removeChild(e.td.childNodes[0]);for(;e.tr.childNodes.length>0;)e.tr.removeChild(e.tr.childNodes[0]);e.tr.parentNode.removeChild(e.tr),e.sep=null,e.td=null,e.tr=null}e=null,this._listOptions[t]=null;try{delete this._listOptions[t]}catch(i){}}},this.showListOption=function(t){this._isListButton(t,!0)&&(this._listOptions[t].tr.style.display="")},this.hideListOption=function(t){this._isListButton(t,!0)&&(this._listOptions[t].tr.style.display="none")},this.isListOptionVisible=function(t){return this._isListButton(t,!0)?"none"!=this._listOptions[t].tr.style.display:void 0},this.enableListOption=function(e){this._isListButton(e)&&(this._listOptions[e].tr.en=!0,this._listOptions[e].tr.className="tr_btn"+(this._listOptions[e].tr._selected&&t.renderSelect?" tr_btn_selected":""))},this.disableListOption=function(t){this._isListButton(t)&&(this._listOptions[t].tr.en=!1,this._listOptions[t].tr.className="tr_btn tr_btn_disabled")},this.isListOptionEnabled=function(t){return this._isListButton(t)?this._listOptions[t].tr.en:void 0},this.setListOptionPosition=function(t,e){if(this._listOptions[t]&&this.getListOptionPosition(t)!=e&&!isNaN(e)){1>e&&(e=1);var i=this._listOptions[t].tr;this.p_tbody.removeChild(i),e>this.p_tbody.childNodes.length?this.p_tbody.appendChild(i):this.p_tbody.insertBefore(i,this.p_tbody.childNodes[e-1]),i=null}},this.getListOptionPosition=function(t){var e=-1;if(!this._listOptions[t])return e;for(var i=0;i<this.p_tbody.childNodes.length;i++)this.p_tbody.childNodes[i]==this._listOptions[t].tr&&(e=i+1);return e},this.setListOptionImage=function(e,i){if(this._isListButton(e)){var s=this._listOptions[e].tr.childNodes[t.rtl?1:0];if(s.childNodes.length>0)s.childNodes[0].src=t.conf.icons_path+i;else{var n=document.createElement("IMG");n.className="btn_sel_img",n.src=t.conf.icons_path+i,s.appendChild(n)}s=null}},this.getListOptionImage=function(e){if(this._isListButton(e)){var i=this._listOptions[e].tr.childNodes[t.rtl?1:0],s=null;return i.childNodes.length>0&&(s=i.childNodes[0].src),i=null,s}},this.clearListOptionImage=function(e){if(this._isListButton(e)){for(var i=this._listOptions[e].tr.childNodes[t.rtl?1:0];i.childNodes.length>0;)i.removeChild(i.childNodes[0]);i.innerHTML="&nbsp;",i=null}},this.setListOptionText=function(e,i){this._isListButton(e)&&(this._listOptions[e].tr.childNodes[t.rtl?0:1].childNodes[0].innerHTML=i)},this.getListOptionText=function(e){return this._isListButton(e)?this._listOptions[e].tr.childNodes[t.rtl?0:1].childNodes[0].innerHTML:void 0},this.setListOptionToolTip=function(t,e){this._isListButton(t)&&(this._listOptions[t].tr.title=e)},this.getListOptionToolTip=function(t){return this._isListButton(t)?this._listOptions[t].tr.title:void 0},this.forEachListOption=function(t){for(var e in this._listOptions)t(e)},this.getAllListOptions=function(){var t=new Array;for(var e in this._listOptions)t[t.length]=e;return t},this.setListOptionSelected=function(t){for(var e in this._listOptions){var i=this._listOptions[e];null!=i.td_a&&null!=i.td_b&&i.tr.en&&(e==t?(i.tr._selected=!0,i.tr.className="tr_btn"+(this.renderSelect?" tr_btn_selected":""),"select"==this.mode&&(i.tr._img?this.setItemImage(i.tr._img):this.clearItemImage(),this.setItemText(this.getListOptionText(t)))):(i.tr._selected=!1,i.tr.className="tr_btn")),i=null}},this.getListOptionSelected=function(){var t=null;for(var e in this._listOptions)1==this._listOptions[e].tr._selected&&(t=e);return t},this._isListButton=function(t,e){return null==this._listOptions[t]?!1:e||"tr_sep"!=this._listOptions[t].tr.className?!0:!1},this.setMaxOpen=function(t){return this._ph=null,"number"==typeof t?(this.maxOpen=t,void this._maxOpenTest()):void(this.maxOpen=null)},i.width&&this.setWidth(i.width),"select"==this.mode&&"undefined"!=typeof i.selected&&this.setListOptionSelected(i.selected),this},dhtmlXToolbarObject.prototype._buttonInputObject=function(t,e,i){this.id=t.idPrefix+e,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def",this.obj.style.display=null!=i.hidden?"none":"",this.obj.idd=String(e),this.obj.w=null!=i.width?i.width:100,this.obj.title=null!=i.title?i.title:"",this.obj.innerHTML="<input class='dhxtoolbar_input' type='text' style='width:"+this.obj.w+"px;'"+(null!=i.value?" value='"+i.value+"'":"")+">";var s=t,n=this;return this.obj.childNodes[0].onkeydown=function(t){t=t||event,13==t.keyCode&&s.callEvent("onEnter",[n.obj.idd,this.value])},t.base.appendChild(this.obj),this.enableItem=function(){this.obj.childNodes[0].disabled=!1},this.disableItem=function(){this.obj.childNodes[0].disabled=!0},this.isEnabled=function(){return!this.obj.childNodes[0].disabled},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return"none"!=this.obj.style.display},this.setValue=function(t){this.obj.childNodes[0].value=t},this.getValue=function(){return this.obj.childNodes[0].value},this.setWidth=function(t){this.obj.w=t,this.obj.childNodes[0].style.width=this.obj.w+"px"},this.getWidth=function(){return this.obj.w},this.setItemToolTip=function(t){this.obj.title=t},this.getItemToolTip=function(){return this.obj.title},this.getInput=function(){return this.obj.firstChild},"undefined"!=typeof i.enabled&&0==window.dhx4.s2b(i.enabled)&&this.disableItem(),this},dhtmlXToolbarObject.prototype._buttonTwoStateObject=function(t,e,i){this.id=t.idPrefix+e,this.state=null!=i.enabled?!1:!0,this.imgEn=null!=i.img?i.img:"",this.imgDis=null!=i.imgdis?i.imgdis:"",this.img=this.state?""!=this.imgEn?this.imgEn:"":""!=this.imgDis?this.imgDis:"",this.obj=document.createElement("DIV"),this.obj.pressed=null!=i.selected,this.obj.extAction=i.action||null,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.obj.pressed?"pres"+(this.state?"":"_dis"):this.state?"def":"dis"),this.obj.style.display=null!=i.hidden?"none":"",this.obj.renderAs=this.obj.className,this.obj.idd=String(e),this.obj.title=i.title||"",this.obj.pressed&&(this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"),this.obj.innerHTML=t._rtlParseBtn(""!=this.img?"<img src='"+t.conf.icons_path+this.img+"'>":"",null!=i.text?"<div class='dhxtoolbar_text'>"+i.text+"</div>":""),t.base.appendChild(this.obj);var s=this;return this.obj.onselectstart=function(t){t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1},this.obj.onmouseover=function(){this._doOnMouseOver()},this.obj.onmouseout=function(){this._doOnMouseOut()},this.obj._doOnMouseOver=function(){if(0!=s.state&&"none"==t.anyUsed){if(this.pressed)return void(this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over");this.className="dhx_toolbar_btn dhxtoolbar_btn_over",this.renderAs=this.className}},this.obj._doOnMouseOut=function(){if(0!=s.state&&"none"==t.anyUsed){if(this.pressed)return void(this.renderAs="dhx_toolbar_btn dhxtoolbar_btn_def");this.className="dhx_toolbar_btn dhxtoolbar_btn_def",this.renderAs=this.className}},this.obj[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(){if((!t.checkEvent("onBeforeStateChange")||t.callEvent("onBeforeStateChange",[this.idd.replace(t.idPrefix,""),this.pressed]))&&0!=s.state&&"none"==t.anyUsed){this.pressed=!this.pressed,this.className=this.pressed?"dhx_toolbar_btn dhxtoolbar_btn_pres":this.renderAs;var e=this.idd.replace(t.idPrefix,"");if(this.extAction)try{window[this.extAction](e,this.pressed)}catch(i){}return t.callEvent("onStateChange",[e,this.pressed]),!1}},this.setItemState=function(e,i){if(this.obj.pressed!=e&&(1==e?(this.obj.pressed=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_pres"+(this.state?"":"_dis"),this.obj.renderAs="dhx_toolbar_btn dhxtoolbar_btn_over"):(this.obj.pressed=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.renderAs=this.obj.className),1==i)){var s=this.obj.idd.replace(t.idPrefix,"");if(this.obj.extAction)try{window[this.obj.extAction](s,this.obj.pressed)}catch(n){}t.callEvent("onStateChange",[s,this.obj.pressed])}},this.getItemState=function(){return this.obj.pressed},this.enableItem=function(){t._enableItem(this)},this.disableItem=function(){t._disableItem(this)},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setItemText=function(e){t._setItemText(this,e)},this.getItemText=function(){return t._getItemText(this)},this.setItemImage=function(e){t._setItemImage(this,e,!0)},this.clearItemImage=function(){t._clearItemImage(this,!0)},this.setItemImageDis=function(e){t._setItemImage(this,e,!1)
},this.clearItemImageDis=function(){t._clearItemImage(this,!1)},this.setItemToolTip=function(t){this.obj.title=t},this.getItemToolTip=function(){return this.obj.title},this},dhtmlXToolbarObject.prototype._sliderObject=function(t,e,i){this.id=t.idPrefix+e,this.state=null!=i.enabled?"true"==i.enabled?!0:!1:!0,this.obj=document.createElement("DIV"),this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_"+(this.state?"def":"dis"),this.obj.style.display=null!=i.hidden?"none":"",this.obj.onselectstart=function(t){t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1},this.obj.idd=String(e),this.obj.len=null!=i.length?Number(i.length):50,this.obj.innerHTML="<div class='dhxtoolbar_text'>"+(i.textMin||"")+"</div><div class='dhxtoolbar_sl_bg_l'></div><div class='dhxtoolbar_sl_bg_m' style='width:"+this.obj.len+"px;'></div><div class='dhxtoolbar_sl_bg_r'></div><div class='dhxtoolbar_text'>"+(i.textMax||"")+"</div>",t.base.appendChild(this.obj);var s=this;this.pen=document.createElement("DIV"),this.pen.className="dhxtoolbar_sl_pen",this.obj.appendChild(this.pen);var n=this.pen;this.label=document.createElement("DIV"),this.label.dir="ltr",this.label.className="dhx_toolbar_slider_label_"+t.conf.skin+(t.rtl?"_rtl":""),this.label.style.display="none",this.label.tip=i.toolTip||"%v",this.label._zi=window.dhx4.newId(),document.body.appendChild(this.label);var o=this.label;return this.pen.valueMin=null!=i.valueMin?Number(i.valueMin):0,this.pen.valueMax=null!=i.valueMax?Number(i.valueMax):100,this.pen.valueMin>this.pen.valueMax&&(this.pen.valueMin=this.pen.valueMax),this.pen.valueNow=null!=i.valueNow?Number(i.valueNow):this.pen.valueMax,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits=function(){this.minX=s.obj.childNodes[1].offsetLeft+2,this.maxX=s.obj.childNodes[3].offsetLeft-this.offsetWidth+1},this.pen._detectLimits(),this.pen._definePos=function(){this.nowX=Math.round((this.valueNow-this.valueMin)*(this.maxX-this.minX)/(this.valueMax-this.valueMin)+this.minX),this.style.left=this.nowX+"px",this.newNowX=this.nowX},this.pen._definePos(),this.pen.initXY=0,this.pen.allowMove=!1,this.pen[window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(t){0!=s.state&&(t=t||event,this.initXY=window.dhx4.isIPad?t.touches[0].clientX:t.clientX,this.newValueNow=this.valueNow,this.allowMove=!0,this.className="dhxtoolbar_sl_pen dhxtoolbar_over",""!=o.tip&&(o.style.visibility="hidden",o.style.display="",o.innerHTML=o.tip.replace("%v",this.valueNow),o.style.left=Math.round(window.dhx4.absLeft(this)+this.offsetWidth/2-o.offsetWidth/2)+"px",o.style.top=window.dhx4.absTop(this)-o.offsetHeight-3+"px",o.style.visibility="",o.style.zIndex=window.dhx4.zim.reserve(o._zi)))},this.pen._doOnMouseMoveStart=function(t){if(t=t||event,n.allowMove){var e=window.dhx4.isIPad?t.touches[0].clientX:t.clientX,i=e-n.initXY;if(!(e<window.dhx4.absLeft(n)+Math.round(n.offsetWidth/2)&&n.nowX==n.minX||e>window.dhx4.absLeft(n)+Math.round(n.offsetWidth/2)&&n.nowX==n.maxX))return n.newNowX=n.nowX+i,n.newNowX<n.minX&&(n.newNowX=n.minX),n.newNowX>n.maxX&&(n.newNowX=n.maxX),n.nowX=n.newNowX,n.style.left=n.nowX+"px",n.initXY=e,n.newValueNow=Math.round((n.valueMax-n.valueMin)*(n.newNowX-n.minX)/(n.maxX-n.minX)+n.valueMin),""!=o.tip&&(o.innerHTML=o.tip.replace(/%v/gi,n.newValueNow),o.style.left=Math.round(window.dhx4.absLeft(n)+n.offsetWidth/2-o.offsetWidth/2)+"px",o.style.top=window.dhx4.absTop(n)-o.offsetHeight-3+"px"),t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1}},this.pen._doOnMouseMoveEnd=function(){n.allowMove&&(n.className="dhxtoolbar_sl_pen",n.allowMove=!1,n.nowX=n.newNowX,n.valueNow=n.newValueNow,""!=o.tip&&(o.style.display="none",window.dhx4.zim.clear(o._zi)),t.callEvent("onValueChange",[s.obj.idd.replace(t.idPrefix,""),n.valueNow]))},window.dhx4.isIPad?(document.addEventListener("touchmove",n._doOnMouseMoveStart,!1),document.addEventListener("touchend",n._doOnMouseMoveEnd,!1)):"undefined"!=typeof window.addEventListener?(window.addEventListener("mousemove",n._doOnMouseMoveStart,!1),window.addEventListener("mouseup",n._doOnMouseMoveEnd,!1)):(document.body.attachEvent("onmousemove",n._doOnMouseMoveStart),document.body.attachEvent("onmouseup",n._doOnMouseMoveEnd)),this.enableItem=function(){this.state||(this.state=!0,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_def")},this.disableItem=function(){this.state&&(this.state=!1,this.obj.className="dhx_toolbar_btn dhxtoolbar_btn_dis")},this.isEnabled=function(){return this.state},this.showItem=function(){this.obj.style.display=""},this.hideItem=function(){this.obj.style.display="none"},this.isVisible=function(){return""==this.obj.style.display},this.setValue=function(e,i){e=Number(e),e<this.pen.valueMin&&(e=this.pen.valueMin),e>this.pen.valueMax&&(e=this.pen.valueMax),this.pen.valueNow=e,this.pen._definePos(),1==i&&t.callEvent("onValueChange",[this.obj.idd.replace(t.idPrefix,""),this.pen.valueNow])},this.getValue=function(){return this.pen.valueNow},this.setMinValue=function(t,e){t=Number(t),t>this.pen.valueMax||(this.obj.childNodes[0].innerHTML=e,this.obj.childNodes[0].style.display=e.length>0?"":"none",this.pen.valueMin=t,this.pen.valueNow<this.pen.valueMin&&(this.pen.valueNow=this.pen.valueMin),this.pen._detectLimits(),this.pen._definePos())},this.setMaxValue=function(t,e){t=Number(t),t<this.pen.valueMin||(this.obj.childNodes[4].innerHTML=e,this.obj.childNodes[4].style.display=e.length>0?"":"none",this.pen.valueMax=t,this.pen.valueNow>this.pen.valueMax&&(this.pen.valueNow=this.pen.valueMax),this.pen._detectLimits(),this.pen._definePos())},this.getMinValue=function(){var t=this.obj.childNodes[0].innerHTML,e=this.pen.valueMin;return new Array(e,t)},this.getMaxValue=function(){var t=this.obj.childNodes[4].innerHTML,e=this.pen.valueMax;return new Array(e,t)},this.setItemToolTipTemplate=function(t){this.label.tip=t},this.getItemToolTipTemplate=function(){return this.label.tip},this},dhtmlXToolbarObject.prototype.unload=function(){for(this.conf.isIPad?document.removeEventListener("touchstart",this._doOnClick,!1):"function"==typeof window.addEventListener?window.removeEventListener("mousedown",this._doOnClick,!1):document.body.detachEvent("onmousedown",this._doOnClick),this._doOnClick=null,this.clearAll(),this.objPull=null,this._xmlLoader&&(this._xmlLoader.destructor(),this._xmlLoader=null);this.base.childNodes.length>0;)this.base.removeChild(this.base.childNodes[0]);for(this.cont.removeChild(this.base),this.base=null;this.cont.childNodes.length>0;)this.cont.removeChild(this.cont.childNodes[0]);this.cont.className="",this.cont=null,window.dhx4._enableDataLoading(this,null,null,null,"clear"),window.dhx4._eventable(this,"clear"),this.tX1=null,this.tX2=null,this.tY1=null,this.tY2=null,this.anyUsed=null,this.idPrefix=null,this.rootTypes=null,this._rtl=null,this._rtlParseBtn=null,this.setRTL=null,this._sbw=null,this._getObj=null,this._addImgObj=null,this._setItemImage=null,this._clearItemImage=null,this._setItemText=null,this._getItemText=null,this._enableItem=null,this._disableItem=null,this._xmlParser=null,this._addItemToStorage=null,this._genStr=null,this._addItem=null,this._getPosition=null,this._setPosition=null,this._getIdByPosition=null,this._separatorObject=null,this._textObject=null,this._buttonObject=null,this._buttonSelectObject=null,this._buttonInputObject=null,this._buttonTwoStateObject=null,this._sliderObject=null,this._autoDetectVisibleArea=null,this._removeItem=null,this.setAlign=null,this.setSkin=null,this.setIconsPath=null,this.setIconPath=null,this.loadXML=null,this.loadXMLString=null,this.clearAll=null,this.addSpacer=null,this.removeSpacer=null,this.getType=null,this.getTypeExt=null,this.inArray=null,this.getParentId=null,this.addButton=null,this.addText=null,this.addButtonSelect=null,this.addButtonTwoState=null,this.addSeparator=null,this.addSlider=null,this.addInput=null,this.forEachItem=null,this.showItem=null,this.hideItem=null,this.isVisible=null,this.enableItem=null,this.disableItem=null,this.isEnabled=null,this.setItemText=null,this.getItemText=null,this.setItemToolTip=null,this.getItemToolTip=null,this.setItemImage=null,this.setItemImageDis=null,this.clearItemImage=null,this.clearItemImageDis=null,this.setItemState=null,this.getItemState=null,this.setItemToolTipTemplate=null,this.getItemToolTipTemplate=null,this.setValue=null,this.getValue=null,this.setMinValue=null,this.getMinValue=null,this.setMaxValue=null,this.getMaxValue=null,this.setWidth=null,this.getWidth=null,this.getPosition=null,this.setPosition=null,this.removeItem=null,this.addListOption=null,this.removeListOption=null,this.showListOption=null,this.hideListOption=null,this.isListOptionVisible=null,this.enableListOption=null,this.disableListOption=null,this.isListOptionEnabled=null,this.setListOptionPosition=null,this.getListOptionPosition=null,this.setListOptionText=null,this.getListOptionText=null,this.setListOptionToolTip=null,this.getListOptionToolTip=null,this.setListOptionImage=null,this.getListOptionImage=null,this.clearListOptionImage=null,this.forEachListOption=null,this.getAllListOptions=null,this.setListOptionSelected=null,this.getListOptionSelected=null,this.unload=null,this.setUserData=null,this.getUserData=null,this.setMaxOpen=null,this.items=null,this.conf=null},dhtmlXToolbarObject.prototype._autoDetectVisibleArea=function(){var t=window.dhx4.screenDim();this.tX1=t.left,this.tX2=t.right,this.tY1=t.top,this.tY2=t.bottom},dhtmlXToolbarObject.prototype._initObj=function(t){for(var e=0;e<t.length;e++)this._addItemToStorage(t[e]);"dhx_terrace"==this.conf.skin&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype._xmlToJson=function(t){var e=[],i=t.getElementsByTagName("toolbar");if(null!=i&&null!=i[0]){i=i[0];for(var s=["id","type","hidden","title","text","enabled","img","imgdis","action","openAll","renderSelect","mode","maxOpen","width","value","selected","length","textMin","textMax","toolTip","valueMin","valueMax","valueNow"],n=["id","type","enabled","disabled","action","selected","img","text"],o=0;o<i.childNodes.length;o++)if("item"==i.childNodes[o].tagName){for(var l={},r=0;r<s.length;r++){var a=i.childNodes[o].getAttribute(s[r]);null!=a&&(l[s[r]]=a)}for(var h=0;h<i.childNodes[o].childNodes.length;h++){if("item"==i.childNodes[o].childNodes[h].tagName&&"buttonSelect"==l.type){for(var d={},r=0;r<n.length;r++){var a=i.childNodes[o].childNodes[h].getAttribute(n[r]);null!=a&&(d[n[r]]=a)}var c=i.childNodes[o].childNodes[h].getElementsByTagName("itemText");null!=c&&null!=c[0]&&(d.itemText=c[0].firstChild.nodeValue);for(var u=i.childNodes[o].childNodes[h].getElementsByTagName("userdata"),r=0;r<u.length;r++){d.userdata||(d.userdata={});var _={};try{_.name=u[r].getAttribute("name")}catch(f){_.name=null}try{_.value=u[r].firstChild.nodeValue}catch(f){_.value=""}null!=_.name&&(d.userdata[_.name]=_.value)}null==l.options&&(l.options=[]),l.options.push(d)}if("userdata"==i.childNodes[o].childNodes[h].tagName){null==l.userdata&&(l.userdata={});var d={};try{d.name=i.childNodes[o].childNodes[h].getAttribute("name")}catch(f){d.name=null}try{d.value=i.childNodes[o].childNodes[h].firstChild.nodeValue}catch(f){d.value=""}null!=d.name&&(l.userdata[d.name]=d.value)}}e.push(l)}}return e},dhtmlXToolbarObject.prototype._addItemToStorage=function(t,e){var i=t.id||this._genStr(24),s=t.type||"";if(""!=s&&null!=this["_"+s+"Object"]){if("buttonSelect"==s&&null!=t.options)for(var n=0;n<t.options.length;n++)"obj"==t.options[n].type&&(t.options[n].type="button"),"sep"==t.options[n].type&&(t.options[n].type="separator");if("slider"==s){var o={tip_template:"toolTip",value_min:"valueMin",value_max:"valueMax",value_now:"valueNow",text_min:"textMin",text_max:"textMax"};for(var l in o)null==t[o[l]]&&null!=t[l]&&(t[o[l]]=t[l])}"buttonInput"==s&&null==t.value&&null!=t.text&&(t.value=t.text),"buttonTwoState"==s&&"undefined"==typeof t.selected&&"undefined"!=typeof t.pressed&&window.dhx4.s2b(t.pressed)&&(t.selected=!0),"undefined"==typeof t.enabled&&"undefined"!=typeof t.disabled&&window.dhx4.s2b(t.disabled)&&(t.enabled=!1),null==t.imgDis&&null!=t.img_disabled&&(t.imgdis=t.img_disabled),"undefined"!=typeof t.openAll&&null!=t.openAll||"dhx_terrace"!=this.conf.skin||(t.openAll=!0),this.objPull[this.idPrefix+i]=new this["_"+s+"Object"](this,i,t),this.objPull[this.idPrefix+i].type=s,this.setPosition(i,e)}if(null!=t.userdata)for(var l in t.userdata)this.setUserData(i,l,t.userdata[l]);if(null!=t.options)for(var n=0;n<t.options.length;n++)if(null!=t.options[n].userdata)for(var l in t.options[n].userdata)this.setListOptionUserData(t.id,t.options[n].id,l,t.options[n].userdata[l])},dhtmlXToolbarObject.prototype.setSkin=function(t,e){e===!0?this.cont.className=this.cont.className.replace(/dhxtoolbar_icons_\d{1,}/,"dhxtoolbar_icons_"+this.conf.iconSize):(this.conf.skin=t,"dhx_skyblue"==this.conf.skin&&(this.conf.sel_ofs_y=1),"dhx_web"==this.conf.skin&&(this.conf.sel_ofs_y=1,this.conf.sel_ofs_x=1),"dhx_terrace"==this.conf.skin&&(this.conf.sel_ofs_y=-1,this.conf.sel_ofs_x=0),this.cont.className="dhx_toolbar_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize);for(var i in this.objPull){var s=this.objPull[i];"slider"==s.type&&(s.pen._detectLimits(),s.pen._definePos(),s.label.className="dhx_toolbar_slider_label_"+this.conf.skin),"buttonSelect"==s.type&&(s.polygon.className="dhx_toolbar_poly_"+this.conf.skin+" dhxtoolbar_icons_"+this.conf.iconSize)}"dhx_terrace"==t&&this._improveTerraceSkin()},dhtmlXToolbarObject.prototype.setAlign=function(t){this.conf.align="right"==t?"right":"left",this.base.className="right"==t?"dhxtoolbar_float_right":"dhxtoolbar_float_left",this._spacer&&(this._spacer.className="right"==t?" dhxtoolbar_float_left":" dhxtoolbar_float_right")},dhtmlXToolbarObject.prototype.setIconSize=function(t){this.conf.iconSize={18:!0,24:!0,32:!0,48:!0}[t]?t:18,this.setSkin(this.conf.skin,!0),this.callEvent("_onIconSizeChange",[this.conf.iconSize])},dhtmlXToolbarObject.prototype.setIconsPath=function(t){this.conf.icons_path=t},dhtmlXToolbarObject.prototype.setUserData=function(t,e,i){t=this.idPrefix+t,null!=this.objPull[t]&&(null==this.objPull[t].userData&&(this.objPull[t].userData={}),this.objPull[t].userData[e]=i)},dhtmlXToolbarObject.prototype.getUserData=function(t,e){return t=this.idPrefix+t,null!=this.objPull[t]&&null!=this.objPull[t].userData?this.objPull[t].userData[e]||null:null},dhtmlXToolbarObject.prototype._isListOptionExists=function(t,e){if(null==this.objPull[this.idPrefix+t])return!1;var i=this.objPull[this.idPrefix+t];return"buttonSelect"!=i.type?!1:null==i._listOptions[e]?!1:!0},dhtmlXToolbarObject.prototype.setListOptionUserData=function(t,e,i,s){if(this._isListOptionExists(t,e)){var n=this.objPull[this.idPrefix+t]._listOptions[e];null==n.userData&&(n.userData={}),n.userData[i]=s}},dhtmlXToolbarObject.prototype.getListOptionUserData=function(t,e,i){if(!this._isListOptionExists(t,e))return null;var s=this.objPull[this.idPrefix+t]._listOptions[e];return s.userData&&s.userData[i]?s.userData[i]:null},dhtmlXToolbarObject.prototype._improveTerraceSkin=function(){null==this.conf.terrace_radius&&(this.conf.terrace_radius="3px");var t=[],e={separator:!0,text:!0},i=[this.base];null!=this._spacer&&i.push(this._spacer);for(var s=0;s<i.length;s++){t[s]=[];for(var n=0;n<i[s].childNodes.length;n++)if(null!=i[s].childNodes[n].idd&&"none"!=i[s].childNodes[n].style.display){var o=this.idPrefix+i[s].childNodes[n].idd;null!=this.objPull[o]&&this.objPull[o].obj==i[s].childNodes[n]&&t[s].push({a:o,type:this.objPull[o].type,node:this.objPull[o]["buttonSelect"==this.objPull[o].type?"arw":"obj"]})}i[s]=null}for(var s=0;s<t.length;s++)for(var n=0;n<t[s].length;n++){var l=t[s][n],r=!1,a=!1;e[l.type]||((n==t[s].length-1||null!=t[s][n+1]&&e[t[s][n+1].type])&&(r=!0),(0==n||n-1>=0&&null!=t[s][n-1]&&e[t[s][n-1].type])&&(a=!0)),l.node.style.borderRightWidth=r?"1px":"0px",l.node.style.borderTopRightRadius=l.node.style.borderBottomRightRadius=r?this.conf.terrace_radius:"0px","buttonSelect"==l.type?(l.node.previousSibling.style.borderTopLeftRadius=l.node.previousSibling.style.borderBottomLeftRadius=a?this.conf.terrace_radius:"0px",l.node.previousSibling._br=r,l.node.previousSibling._bl=a):l.node.style.borderTopLeftRadius=l.node.style.borderBottomLeftRadius=a?this.conf.terrace_radius:"0px",l.node._br=r,l.node._bl=a}for(var s=0;s<t.length;s++){for(var n=0;n<t[s].length;n++){for(var o in t[s][n])t[s][n][o]=null;t[s][n]=null}t[s]=null}t=i=null},dhtmlXToolbarObject.prototype._improveTerraceButtonSelect=function(t,e){var i=this.objPull[t];1==e?(i.obj.style.borderBottomLeftRadius=i.obj._bl?this.conf.terrace_radius:"0px",i.arw.style.borderBottomRightRadius=i.obj._br?this.conf.terrace_radius:"0px"):(i.obj.style.borderBottomLeftRadius="0px",i.arw.style.borderBottomRightRadius="0px"),i=null},dhtmlXEditor.prototype.setSizes=function(){this.cell._setSize(0,0,this.base.clientWidth,this.base.clientHeight)},dhtmlXEditor.prototype.setReadonly=function(t){this.conf.roMode=t===!0,this._prepareContent(!0,this.conf.roMode),this.cBlock.style.display=this.conf.roMode?"":"none"},dhtmlXEditor.prototype.isReadonly=function(){return this.conf.roMode||!1},dhtmlXEditor.prototype.setSkin=function(t){this.base.className=String(this.base.className).replace(new RegExp("dhxeditor_"+this.conf.skin),"dhxeditor_"+t),this.conf.skin=this.cell.conf.skin=t,this.tb&&(this.cell.detachToolbar(t),this.tb=null,this.attachToolbar()),this.setSizes()},window.dhtmlXEditorCell=function(t,e){dhtmlXCellObject.apply(this,[t,"_editor"]);var i=this;return this.editor=e,this.conf.skin=this.editor.conf.skin,this.attachEvent("_onCellUnload",function(){this._stbUnload(),this.editor=null,i=null}),this._stbInit(),this},dhtmlXEditorCell.prototype=new dhtmlXCellObject,dhtmlXEditorCell.prototype._stbInit=function(){var t=this,e=document.createElement("DIV");e.className="dhx_cell_stb",this.cell.insertBefore(e,this.cell.childNodes[this.conf.idx.cont]),e.onselectstart=function(t){return t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1};var i={bold:"applyBold",italic:"applyItalic",underline:"applyUnderscore",clearformat:"clearFormatting"};for(var s in i){var n=document.createElement("A");n.href="javascript:void(0);",n.tabIndex=-1,e.appendChild(n),n.onmousedown=n.onclick=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1};var o=document.createElement("DIV");o.className="dhx_cell_stb_button btn_"+s,o._actv=s.charAt(0),o._cmd=i[s],n.appendChild(o),o.onclick=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},o.onmousedown=function(e){e=e||event,e.preventDefault?e.preventDefault():e.returnValue=!1,t.editor[this._cmd](),t.editor.callEvent("onToolbarClick",[this._actv])},o=n=null}e=null,this._stbUnload=function(){var e=this.cell.childNodes[this.conf.idx.stb];for(e.onselectstart=null;e.childNodes.length>0;)e.lastChild.onmousedown=e.lastChild.onclick=null,e.lastChild.firstChild.onmousedown=e.lastChild.firstChild.onclick=null,e.lastChild.firstChild._actv=e.lastChild.firstChild._cmd=null,e.lastChild.removeChild(e.lastChild.firstChild),e.removeChild(e.lastChild);e.parentNode.removeChild(e),e=t=null,this.conf.idx_data.stb=this.conf.ofs_nodes.t._getStbHeight=null,delete this.conf.ofs_nodes.t._getStbHeight,delete this.conf.idx_data.stb,this._updateIdx()},this.conf.ofs_nodes.t._getStbHeight="func",this.conf.idx_data.stb="dhx_cell_stb",this._updateIdx()},dhtmlXEditorCell.prototype._stbHide=function(){this.cell.childNodes[this.conf.idx.stb].style.display="none"},dhtmlXEditorCell.prototype._getStbHeight=function(){return this.cell.childNodes[this.conf.idx.stb].offsetHeight},dhtmlXEditor.prototype.attachToolbar=function(t){if(null==this.tb){null!=t&&(this.conf.iconsPath=t),this.cell._stbHide(),this.tb=this.cell.attachToolbar({icons_path:this.conf.iconsPath+"/dhxeditor_"+String(this.conf.skin).replace(/^dhx_/,"")+"/",skin:this.conf.skin}),this.setSizes(),this._availFonts=new Array("Arial","Arial Narrow","Comic Sans MS","Courier","Georgia","Impact","Tahoma","Times New Roman","Verdana"),this._initFont=this._availFonts[0],this._xmlFonts="";for(var e=0;e<this._availFonts.length;e++){var i=String(this._availFonts[e]).replace(/\s/g,"_");this._xmlFonts+='<item type="button" id="applyFontFamily:'+i+'"><itemText><![CDATA[<img src="'+this.tb.imagePath+"font_"+String(i).toLowerCase()+'.gif" border="0" style="/*margin-top:1px;margin-bottom:1px;*/width:110px;height:16px;">]]></itemText></item>'}this._availSizes={1:"8pt",2:"10pt",3:"12pt",4:"14pt",5:"18pt",6:"24pt",7:"36pt"},this._xmlSizes="";for(var s in this._availSizes)this._xmlSizes+='<item type="button" id="applyFontSize:'+s+":"+this._availSizes[s]+'" text="'+this._availSizes[s]+'"/>';this.tbXML='<toolbar><item id="applyH1" type="buttonTwoState" img="h1.gif" imgdis="h4_dis.gif" title="H1"/><item id="applyH2" type="buttonTwoState" img="h2.gif" imgdis="h4_dis.gif" title="H2"/><item id="applyH3" type="buttonTwoState" img="h3.gif" imgdis="h4_dis.gif" title="H3"/><item id="applyH4" type="buttonTwoState" img="h4.gif" imgdis="h4_dis.gif" title="H4"/><item id="separ01" type="separator"/><item id="applyBold" type="buttonTwoState" img="bold.gif" imgdis="bold_dis.gif" title="Bold Text"/><item id="applyItalic" type="buttonTwoState" img="italic.gif" imgdis="italic_dis.gif" title="Italic Text"/><item id="applyUnderscore" type="buttonTwoState" img="underline.gif" imgdis="underline_dis.gif" title="Underscore Text"/><item id="applyStrikethrough" type="buttonTwoState" img="strike.gif" imgdis="strike_dis.gif" title="Strikethrough Text"/><item id="separ02" type="separator"/><item id="alignLeft" type="buttonTwoState" img="align_left.gif" imgdis="align_left_dis.gif" title="Left Alignment"/><item id="alignCenter" type="buttonTwoState" img="align_center.gif" imgdis="align_center_dis.gif" title="Center Alignment"/><item id="alignRight" type="buttonTwoState" img="align_right.gif" imgdis="align_right_dis.gif" title="Right Alignment"/><item id="alignJustify" type="buttonTwoState" img="align_justify.gif" title="Justified Alignment"/><item id="separ03" type="separator"/><item id="applySub" type="buttonTwoState" img="script_sub.gif" imgdis="script_sub.gif" title="Subscript"/><item id="applySuper" type="buttonTwoState" img="script_super.gif" imgdis="script_super_dis.gif" title="Superscript"/><item id="separ04" type="separator"/><item id="createNumList" type="button" img="list_number.gif" imgdis="list_number_dis.gif" title="Number List"/><item id="createBulList" type="button" img="list_bullet.gif" imgdis="list_bullet_dis.gif" title="Bullet List"/><item id="separ05" type="separator"/><item id="increaseIndent" type="button" img="indent_inc.gif" imgdis="indent_inc_dis.gif" title="Increase Indent"/><item id="decreaseIndent" type="button" img="indent_dec.gif" imgdis="indent_dec_dis.gif" title="Decrease Indent"/><item id="separ06" type="separator"/><item id="clearFormatting" type="button" img="clear.gif" title="Clear Formatting"/></toolbar>',this.tb.loadStruct(this.tbXML),this._checkAlign=function(t){this.tb.setItemState("alignCenter",!1),this.tb.setItemState("alignRight",!1),this.tb.setItemState("alignJustify",!1),this.tb.setItemState("alignLeft",!1),t&&this.tb.setItemState(t,!0)},this._checkH=function(t){this.tb.setItemState("applyH1",!1),this.tb.setItemState("applyH2",!1),this.tb.setItemState("applyH3",!1),this.tb.setItemState("applyH4",!1),t&&this.tb.setItemState(t,!0)},this._doOnFocusChanged=function(t){if(t.h1||t.h2||t.h3||t.h4)this.tb.setItemState("applyBold",!1);else{var e=-1!=String(t.fontWeight).search(/bold/i)||Number(t.fontWeight)>=700;this.tb.setItemState("applyBold",e)}var i="alignLeft";-1!=String(t.textAlign).search(/center/)&&(i="alignCenter"),-1!=String(t.textAlign).search(/right/)&&(i="alignRight"),-1!=String(t.textAlign).search(/justify/)&&(i="alignJustify"),this.tb.setItemState(i,!0),this._checkAlign(i),this.tb.setItemState("applyH1",t.h1),this.tb.setItemState("applyH2",t.h2),this.tb.setItemState("applyH3",t.h3),this.tb.setItemState("applyH4",t.h4),window._KHTMLrv&&(t.sub="sub"==t.vAlign,t.sup="super"==t.vAlign),this.tb.setItemState("applyItalic","italic"==t.fontStyle),this.tb.setItemState("applyStrikethrough",t.del),this.tb.setItemState("applySub",t.sub),this.tb.setItemState("applySuper",t.sup),this.tb.setItemState("applyUnderscore",t.u)},this._doOnToolbarClick=function(t){var e=String(t).split(":");null!=this[e[0]]&&"function"==typeof this[e[0]]&&(this[e[0]](e[1]),this.callEvent("onToolbarClick",[t]))},this._doOnStateChange=function(t){switch(this[t](),t){case"alignLeft":case"alignCenter":case"alignRight":case"alignJustify":this._checkAlign(t);break;case"applyH1":case"applyH2":case"applyH3":case"applyH4":this._checkH(t)}this.callEvent("onToolbarClick",[t])},this._doOnBeforeStateChange=function(t,e){return"alignLeft"!=t&&"alignCenter"!=t&&"alignRight"!=t&&"alignJustify"!=t||1!=e?!0:!1};var n=this;this.tb.attachEvent("onClick",function(t){n._doOnToolbarClick(t)}),this.tb.attachEvent("onStateChange",function(t,e){n._doOnStateChange(t,e)}),this.tb.attachEvent("onBeforeStateChange",function(t,e){return n._doOnBeforeStateChange(t,e)}),this.applyBold=function(){this._runCommand("Bold")},this.applyItalic=function(){this._runCommand("Italic")},this.applyUnderscore=function(){this._runCommand("Underline")},this.applyStrikethrough=function(){this._runCommand("StrikeThrough")},this.alignLeft=function(){this._runCommand("JustifyLeft")},this.alignRight=function(){this._runCommand("JustifyRight")},this.alignCenter=function(){this._runCommand("JustifyCenter")},this.alignJustify=function(){this._runCommand("JustifyFull")},this.applySub=function(){this._runCommand("Subscript")},this.applySuper=function(){this._runCommand("Superscript")},this.applyH1=function(){this._runCommand("FormatBlock","<H1>")},this.applyH2=function(){this._runCommand("FormatBlock","<H2>")},this.applyH3=function(){this._runCommand("FormatBlock","<H3>")},this.applyH4=function(){this._runCommand("FormatBlock","<H4>")},this.createNumList=function(){this._runCommand("InsertOrderedList")},this.createBulList=function(){this._runCommand("InsertUnorderedList")},this.increaseIndent=function(){this._runCommand("Indent")},this.decreaseIndent=function(){this._runCommand("Outdent")},this.clearFormatting=function(){this._runCommand("RemoveFormat"),this.tb.setItemState("applyBold",!1),this.tb.setItemState("applyItalic",!1),this.tb.setItemState("applyStrikethrough",!1),this.tb.setItemState("applySub",!1),this.tb.setItemState("applySuper",!1),this.tb.setItemState("applyUnderscore",!1)}}},dhtmlx.Group={_init:function(){dhtmlx.assert(this.data,"DataStore required for grouping"),this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(){this._settings.group&&this.group(this._settings.group,!1)},this)),this.attachEvent("onBeforeRender",dhtmlx.bind(function(t){this._settings.sort&&(t.block(),t.sort(this._settings.sort),t.unblock())},this)),this.attachEvent("onBeforeSort",dhtmlx.bind(function(){this._settings.sort=null},this))},_init_group_data_event:function(t,e){t.attachEvent("onClearAll",dhtmlx.bind(function(){this.ungroup(!1),this.block(),this.clearAll(),this.unblock()},e))},sum:function(t,e){t=dhtmlx.Template.setter(t),e=e||this.data;var i=0;return e.each(function(e){i+=1*t(e)}),i},min:function(t,e){t=dhtmlx.Template.setter(t),e=e||this.data;var i=1/0;return e.each(function(e){1*t(e)<i&&(i=1*t(e))}),1*i},max:function(t,e){t=dhtmlx.Template.setter(t),e=e||this.data;var i=-1/0;return e.each(function(e){1*t(e)>i&&(i=1*t(e))}),i},_split_data_by:function(t){var e=function(t,e){return(t=dhtmlx.Template.setter(t))(e[0])},i=dhtmlx.Template.setter(t.by);t.map[i]||(t.map[i]=[i,e]);var s={},n=[];this.data.each(function(t){var e=i(t);s[e]||(n.push({id:e}),s[e]=dhtmlx.toArray()),s[e].push(t)});for(var o in t.map){var l=t.map[o][1]||e;"function"!=typeof l&&(l=this[l]);for(var r=0;r<n.length;r++)n[r][o]=l.call(this,t.map[o][0],s[n[r].id])}this._not_grouped_data=this.data,this.data=new dhtmlx.DataStore,this.data.provideApi(this,!0),this._init_group_data_event(this.data,this),this.parse(n,"json")},group:function(t,e){this.ungroup(!1),this._split_data_by(t),e!==!1&&this.render()},ungroup:function(t){this._not_grouped_data&&(this.data=this._not_grouped_data,this.data.provideApi(this,!0)),t!==!1&&this.render()},group_setter:function(t){return dhtmlx.assert("object"==typeof t,"Incorrect group value"),dhtmlx.assert(t.by,"group.by is mandatory"),dhtmlx.assert(t.map,"group.map is mandatory"),t},sort_setter:function(t){return"object"!=typeof t&&(t={by:t}),this._mergeSettings(t,{as:"string",dir:"asc"}),t}},dhtmlx.Date={Locale:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},date_part:function(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},time_part:function(t){return(t.valueOf()/1e3-60*t.getTimezoneOffset())%86400},week_start:function(t){var e=t.getDay();return this.config.start_on_monday&&(0===e?e=6:e--),this.date_part(this.add(t,-1*e,"day"))},month_start:function(t){return t.setDate(1),this.date_part(t)},year_start:function(t){return t.setMonth(0),this.month_start(t)},day_start:function(t){return this.date_part(t)},add:function(t,e,i){var s=new Date(t.valueOf());switch(i){case"day":s.setDate(s.getDate()+e);break;case"week":s.setDate(s.getDate()+7*e);break;case"month":s.setMonth(s.getMonth()+e);break;case"year":s.setYear(s.getFullYear()+e);break;case"hour":s.setHours(s.getHours()+e);break;case"minute":s.setMinutes(s.getMinutes()+e);break;default:return dhtmlx.Date["add_"+i](t,e,i)}return s},to_fixed:function(t){return 10>t?"0"+t:t},copy:function(t){return new Date(t.valueOf())},date_to_str:function(t,e){return t=t.replace(/%[a-zA-Z]/g,function(t){switch(t){case"%d":return'"+dhtmlx.Date.to_fixed(date.getDate())+"';case"%m":return'"+dhtmlx.Date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+dhtmlx.Date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+dhtmlx.Date.Locale.day_short[date.getDay()]+"';case"%l":return'"+dhtmlx.Date.Locale.day_full[date.getDay()]+"';case"%M":return'"+dhtmlx.Date.Locale.month_short[date.getMonth()]+"';case"%F":return'"+dhtmlx.Date.Locale.month_full[date.getMonth()]+"';case"%h":return'"+dhtmlx.Date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+dhtmlx.Date.to_fixed(date.getHours())+"';case"%i":return'"+dhtmlx.Date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+dhtmlx.Date.to_fixed(date.getSeconds())+"';case"%W":return'"+dhtmlx.Date.to_fixed(dhtmlx.Date.getISOWeek(date))+"';default:return t}}),e&&(t=t.replace(/date\.get/g,"date.getUTC")),new Function("date",'return "'+t+'";')},str_to_date:function(t,e){for(var i="var temp=date.split(/[^0-9a-zA-Z]+/g);",s=t.match(/%[a-zA-Z]/g),n=0;n<s.length;n++)switch(s[n]){case"%j":case"%d":i+="set[2]=temp["+n+"]||1;";break;case"%n":case"%m":i+="set[1]=(temp["+n+"]||1)-1;";break;case"%y":i+="set[0]=temp["+n+"]*1+(temp["+n+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":i+="set[3]=temp["+n+"]||0;";break;case"%i":i+="set[4]=temp["+n+"]||0;";break;case"%Y":i+="set[0]=temp["+n+"]||0;";break;case"%a":case"%A":i+="set[3]=set[3]%12+((temp["+n+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":i+="set[5]=temp["+n+"]||0;"}var o="set[0],set[1],set[2],set[3],set[4],set[5]";return e&&(o=" Date.UTC("+o+")"),new Function("date","var set=[0,0,1,0,0,0]; "+i+" return new Date("+o+");")
},getISOWeek:function(t){if(!t)return!1;var e=t.getDay();0===e&&(e=7);var i=new Date(t.valueOf());i.setDate(t.getDate()+(4-e));var s=i.getFullYear(),n=Math.floor((i.getTime()-new Date(s,0,1).getTime())/864e5),o=1+Math.floor(n/7);return o},getUTCISOWeek:function(t){return this.getISOWeek(t)}},dhtmlx.math={},dhtmlx.math._toHex=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"],dhtmlx.math.toHex=function(t,e){for(t=parseInt(t,10),str="";t>0;)str=this._toHex[t%16]+str,t=Math.floor(t/16);for(;str.length<e;)str="0"+str;return str},dhtmlx.math.hexToDec=function(t){return parseInt(t,16)},dhtmlx.math.toRgb=function(t){var e,i,s,n;return"string"!=typeof t?(e=t[0],i=t[1],s=t[2]):-1!=t.indexOf("rgb")?(n=t.substr(t.indexOf("(")+1,t.lastIndexOf(")")-t.indexOf("(")-1).split(","),e=n[0],i=n[1],s=n[2]):("#"==t.substr(0,1)&&(t=t.substr(1)),e=this.hexToDec(t.substr(0,2)),i=this.hexToDec(t.substr(2,2)),s=this.hexToDec(t.substr(4,2))),e=parseInt(e,10)||0,i=parseInt(i,10)||0,s=parseInt(s,10)||0,(0>e||e>255)&&(e=0),(0>i||i>255)&&(i=0),(0>s||s>255)&&(s=0),[e,i,s]},dhtmlx.math.hsvToRgb=function(t,e,i){var s,n,o,l,r,a,h,d;switch(s=Math.floor(t/60)%6,n=t/60-s,o=i*(1-e),l=i*(1-n*e),r=i*(1-(1-n)*e),a=0,h=0,d=0,s){case 0:a=i,h=r,d=o;break;case 1:a=l,h=i,d=o;break;case 2:a=o,h=i,d=r;break;case 3:a=o,h=l,d=i;break;case 4:a=r,h=o,d=i;break;case 5:a=i,h=o,d=l}return a=Math.floor(255*a),h=Math.floor(255*h),d=Math.floor(255*d),[a,h,d]},dhtmlx.math.rgbToHsv=function(t,e,i){var s,n,o,l,r,a,h,d;s=t/255,n=e/255,o=i/255;var l=Math.min(s,n,o),r=Math.max(s,n,o);return h=0,a=0==r?0:1-l/r,d=r,r==l?h=0:r==s&&n>=o?h=60*(n-o)/(r-l)+0:r==s&&o>n?h=60*(n-o)/(r-l)+360:r==n?h=60*(o-s)/(r-l)+120:r==o&&(h=60*(s-n)/(r-l)+240),[h,a,d]},dhtmlx.presets||(dhtmlx.presets={}),dhtmlx.presets.chart={simple:{item:{borderColor:"#ffffff",color:"#2b7100",shadow:!1,borderWidth:2},line:{color:"#8ecf03",width:2}},plot:{color:"#1293f8",item:{borderColor:"#636363",borderWidth:1,color:"#ffffff",type:"r",shadow:!1},line:{color:"#1293f8",width:2}},diamond:{color:"#b64040",item:{borderColor:"#b64040",color:"#b64040",type:"d",radius:3,shadow:!0},line:{color:"#ff9000",width:2}},point:{color:"#fe5916",disableLines:!0,fill:!1,disableItems:!1,item:{color:"#feb916",borderColor:"#fe5916",radius:2,borderWidth:1,type:"r"},alpha:1},line:{line:{color:"#3399ff",width:2},item:{color:"#ffffff",borderColor:"#3399ff",radius:2,borderWidth:2,type:"d"},fill:!1,disableItems:!1,disableLines:!1,alpha:1},area:{fill:"#3399ff",line:{color:"#3399ff",width:1},disableItems:!0,alpha:.2,disableLines:!1},round:{item:{radius:3,borderColor:"#3f83ff",borderWidth:1,color:"#3f83ff",type:"r",shadow:!1,alpha:.6}},square:{item:{radius:3,borderColor:"#447900",borderWidth:2,color:"#69ba00",type:"s",shadow:!1,alpha:1}},column:{color:"RAINBOW",gradient:!1,width:45,radius:0,alpha:1,border:!0},stick:{width:5,gradient:!1,color:"#67b5c9",radius:2,alpha:1,border:!1},alpha:{color:"#b9a8f9",width:70,gradient:"falling",radius:0,alpha:.5,border:!0}},dhtmlx.ui.Map=function(t){this.name="Map",this._id="map_"+dhtmlx.uid(),this._key=t,this._map=[]},dhtmlx.ui.Map.prototype={addRect:function(t,e,i){this._createMapArea(t,"RECT",e,i)},addPoly:function(t,e,i){this._createMapArea(t,"POLY",e,i)},_createMapArea:function(t,e,i,s){var n="";4==arguments.length&&(n="userdata='"+s+"'"),this._map.push("<area "+this._key+"='"+t+"' shape='"+e+"' coords='"+i.join()+"' "+n+"></area>")},addSector:function(t,e,i,s,n,o,l,r){var a=[];a.push(s),a.push(Math.floor(n*l));for(var h=e;i>h;h+=Math.PI/18)a.push(Math.floor(s+o*Math.cos(h))),a.push(Math.floor((n+o*Math.sin(h))*l));return a.push(Math.floor(s+o*Math.cos(i))),a.push(Math.floor((n+o*Math.sin(i))*l)),a.push(s),a.push(Math.floor(n*l)),this.addPoly(t,a,r)},render:function(t){var e=dhtmlx.html.create("DIV");e.style.cssText="position:absolute; width:100%; height:100%; top:0px; left:0px;",t.appendChild(e);var i=dhtmlx._isIE?"":"src='data:image/gif;base64,R0lGODlhEgASAIAAAP///////yH5BAUUAAEALAAAAAASABIAAAIPjI+py+0Po5y02ouz3pwXADs='";e.innerHTML="<map id='"+this._id+"' name='"+this._id+"'>"+this._map.join("\n")+"</map><img "+i+" class='dhx_map_img' usemap='#"+this._id+"'>",t._htmlmap=e,this._map=[]}},dhtmlx.chart={},dhtmlx.chart.scatter={pvt_render_scatter:function(t,e,i,s,n,o){if(!this._settings.xValue)return dhtmlx.log("warning","Undefined propery: xValue");var l=this._getLimits(),r=this._getLimits("h","xValue");n||(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")),this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")),this._drawYAxis(this.canvases.y.getCanvas(),e,i,s,l.min,l.max),this._drawHXAxis(this.canvases.x.getCanvas(),e,i,s,r.min,r.max)),l={min:this._settings.yAxis.start,max:this._settings.yAxis.end},r={min:this._settings.xAxis.start,max:this._settings.xAxis.end};var a=this._getScatterParams(t,e,i,s,r,l);this._mapStart=i;for(var h=0;h<e.length;h++)this._drawScatterItem(t,o,i,s,a,r,l,e[h],n)},_getScatterParams:function(t,e,i,s,n,o){var l={};return l.totalHeight=s.y-i.y,l.totalWidth=s.x-i.x,this._calcScatterUnit(l,n.min,n.max,l.totalWidth,"X"),this._calcScatterUnit(l,o.min,o.max,l.totalHeight,"Y"),l},_drawScatterItem:function(t,e,i,s,n,o,l,r,a){var h=this._calculateScatterItemPosition(n,s,i,o,r,"X"),d=this._calculateScatterItemPosition(n,i,s,l,r,"Y");this._drawItem(t,h,d,r,this._settings.label.call(this,r),a,e)},_calculateScatterItemPosition:function(t,e,i,s,n,o){var l=this._settings["X"==o?"xValue":"value"].call(this,n),r=t["valueFactor"+o],a=(parseFloat(l||0)-s.min)*r,h=t["unit"+o],d=i[o.toLowerCase()]-("X"==o?-1:1)*Math.floor(h*a);return 0>a&&(d=i[o.toLowerCase()]),l>s.max&&(d=e[o.toLowerCase()]),l<s.min&&(d=i[o.toLowerCase()]),d},_calcScatterUnit:function(t,e,i,s,n){var o=this._getRelativeValue(e,i);n=n||"",t["relValue"+n]=o[0],t["valueFactor"+n]=o[1],t["unit"+n]=t["relValue"+n]?s/t["relValue"+n]:10}},dhtmlx.chart.radar={pvt_render_radar:function(t,e,i,s,n,o){this._renderRadarChart(t,e,i,s,n,o)},_renderRadarChart:function(t,e,i,s,n,o){if(e.length){for(var l=this._getPieParameters(i,s),r=this._settings.radius?this._settings.radius:l.radius,a=this._settings.x?this._settings.x:l.x,h=this._settings.y?this._settings.y:l.y,d=[],c=0;c<e.length;c++)d.push(1);var u=this._getRatios(d,e.length);this._mapStart=i,n||this._drawRadarAxises(u,a,h,r,e),this._drawRadarData(t,u,a,h,r,e,n,o)}},_drawRadarData:function(t,e,i,s,n,o,l,r){var a,h,d,c,u,_,f,p,m,g,b,v,y,x,w,C,N,I,j;for(d=this._settings,u=d.yAxis.start,_=d.yAxis.end,j=this._getRelativeValue(u,_),v=j[0],I=v?n/v:n/2,N=j[1],y=-Math.PI/2,a=h=y,m=[],p=0,c=0;c<o.length;c++)C?w=C:(x=d.value(o[c]),w=(parseFloat(x||0)-u)*N),g=Math.floor(I*w),x=d.value(c!=o.length-1?o[c+1]:o[0]),C=(parseFloat(x||0)-u)*N,b=Math.floor(I*C),a=h,h=c!=o.length-1?y+e[c]-1e-4:y,f=p||this._getPositionByAngle(a,i,s,g),p=this._getPositionByAngle(h,i,s,b),m.push(f);d.fill&&this._fillRadarChart(t,m,o),d.disableLines||this._strokeRadarChart(t,m,o),d.disableItems||this._drawRadarItemMarkers(t,m,o,l,r),m=null},_drawRadarItemMarkers:function(t,e,i,s,n){for(var o=0;o<e.length;o++)this._drawItem(t,e[o].x,e[o].y,i[o],this._settings.label.call(this,i),s,n)},_fillRadarChart:function(t,e,i){var s,n;t.globalAlpha=this._settings.alpha.call(this,{}),t.beginPath();for(var o=0;o<e.length;o++)t.fillStyle=this._settings.fill.call(this,i[o]),s=e[o],n=e[o+1]||e[0],o||t.moveTo(s.x,s.y),t.lineTo(n.x,n.y);t.fill(),t.globalAlpha=1},_strokeRadarChart:function(t,e,i){for(var s,n,o=0;o<e.length;o++)s=e[o],n=e[o+1]||e[0],this._drawLine(t,s.x,s.y,n.x,n.y,this._settings.line.color.call(this,i[o]),this._settings.line.width)},_drawRadarAxises:function(t,e,i,s,n){var o=this._settings.yAxis,l=this._settings.xAxis,r=o.start,a=o.end,h=o.step,d={},c=this._configYAxis;if("undefined"==typeof c.step||"undefined"==typeof c.start||"undefined"==typeof c.end){var u=this._getLimits();d=this._calculateScale(u.min,u.max),r=d.start,a=d.end,h=d.step,o.end=a,o.start=r}var _,f,p,m,g,b=[],v=0,y=s*h/(a-r);1>h&&(m=Math.min(this._log10(h),0>=r?0:this._log10(r)),g=Math.pow(10,-m));var x=[];this.canvases.scale||(this.canvases.scale=new dhtmlx.ui.Canvas(this._obj,"radar_scale"));var w=this.canvases.scale.getCanvas();for(_=a;_>=r;_-=h){d.fixNum&&(_=parseFloat(new Number(_).toFixed(d.fixNum))),b.push(Math.floor(v*y)+.5),g&&(_=Math.round(_*g)/g);var C=i-s+b[b.length-1];if(this.canvases.scale.renderTextAt("middle","left",e,C,o.template(_.toString()),"dhx_axis_item_y dhx_radar"),t.length<2)return void this._drawScaleSector(w,"arc",e,i,s-b[b.length-1],-Math.PI/2,3*Math.PI/2,_);var N,I=-Math.PI/2,j=I;for(f=0;f<t.length;f++)_==a&&x.push(j),N=I+t[f]-1e-4,this._drawScaleSector(w,c.lineShape||"line",e,i,s-b[b.length-1],j,N,_,f,n[_]),j=N;v++}for(_=0;_<x.length;_++)p=this._getPositionByAngle(x[_],e,i,s),l.lines.call(this,n[_],_)&&this._drawLine(w,e,i,p.x,p.y,l?l.lineColor.call(this,n[_]):"#cfcfcf",1),this._drawRadarScaleLabel(w,e,i,s,x[_],l?l.template.call(this,n[_]):"&nbsp;")},_drawScaleSector:function(t,e,i,s,n,o,l,r,a){var h,d;if(0>n)return!1;h=this._getPositionByAngle(o,i,s,n),d=this._getPositionByAngle(l,i,s,n);var c=this._settings.yAxis;c.bg&&(t.beginPath(),t.moveTo(i,s),"arc"==e?t.arc(i,s,n,o,l,!1):(t.lineTo(h.x,h.y),t.lineTo(d.x,d.y)),t.fillStyle=c.bg(r,a),t.moveTo(i,s),t.fill(),t.closePath()),c.lines.call(this,r)&&(t.lineWidth=1,t.beginPath(),"arc"==e?t.arc(i,s,n,o,l,!1):(t.moveTo(h.x,h.y),t.lineTo(d.x,d.y)),t.strokeStyle=c.lineColor.call(this,r),t.stroke())},_drawRadarScaleLabel:function(t,e,i,s,n,o){var l=this.canvases.scale.renderText(0,0,o,"dhx_axis_radar_title",1),r=l.scrollWidth,a=l.offsetHeight,h=.001,d=this._getPositionByAngle(n,e,i,s+5),c=0,u=0;(0>n||n>Math.PI)&&(u=-a),n>Math.PI/2&&(c=-r),Math.abs(n+Math.PI/2)<h||Math.abs(n-Math.PI/2)<h?c=-r/2:(Math.abs(n)<h||Math.abs(n-Math.PI)<h)&&(u=-a/2),l.style.top=d.y+u+"px",l.style.left=d.x+c+"px",l.style.width=r+"px",l.style.whiteSpace="nowrap"}},dhtmlx.chart.area={pvt_render_area:function(t,e,i,s,n,o){var l,r,a,h,d,c,u,_,f,p,m,g,b,v,y;if(c=this._calculateLineParams(t,e,i,s,n),r=this._settings,h=r.eventRadius||Math.floor(c.cellWidth/2),e.length){for(u=[],p=r.offset?i.x+.5*c.cellWidth:i.x,a=0;a<e.length;a++)if(d=e[a],f=this._getPointY(d,i,s,c),b=p+c.cellWidth*a,f){if(v="object"==typeof f?f.y0:f,a&&this._settings.fixOverflow){if(_=this._getPointY(e[a-1],i,s,c),_.out&&_.out==f.out)continue;m=c.cellWidth*(a-1)-.5+p,g="object"==typeof _?_.y0:_,_.out&&(y="min"==_.out?s.y:i.y,u.push([this._calcOverflowX(m,b,g,v,y),y])),f.out&&(y="min"==f.out?s.y:i.y,u.push([this._calcOverflowX(m,b,g,v,y),y]),a==e.length-1&&y==i.y&&u.push([b,i.y]))}f.out||(u.push([b,v]),o.addRect(d.id,[b-h-i.x,v-h-i.y,b+h-i.x,v+h-i.y],n)),r.yAxis||(l=r.offset||a!=e.length-1?"center":"left",this.canvases[n].renderTextAt(!1,l,b,v-r.labelOffset,r.label(d)))}u.length&&(u.push([b,s.y]),u.push([u[0][0],s.y])),t.globalAlpha=this._settings.alpha.call(this,e[0]),t.fillStyle=this._settings.color.call(this,e[0]),t.beginPath(),this._path(t,u),t.fill(),r.border&&(t.lineWidth=r.borderWidth||1,r.borderColor?t.strokeStyle=r.borderColor.call(this,e[0]):this._setBorderStyles(t,t.fillStyle),t.beginPath(),this._path(t,u),t.stroke()),t.lineWidth=1,t.globalAlpha=1}}},dhtmlx.chart.stackedArea={pvt_render_stackedArea:function(t,e,i,s,n,o){var l,r,a,h,d,c,u,_,f,p,m,g,b,v;if(p=this._calculateLineParams(t,e,i,s,n),h=this._settings,_=h.eventRadius||Math.floor(p.cellWidth/2),e.length){m=[],v=[],g=h.offset?i.x+.5*p.cellWidth:i.x;var y=function(t,i){return n?e[t].$startY?i-s.y+e[t].$startY:0:i},x=function(t,e,i){var s=(i.y-e.y)/(i.x-e.x);return s*t+e.y-s*e.x};for(d=0;d<e.length;d++)f=e[d],d?g+=p.cellWidth:(b=y(d,s.y),m.push([g,b])),b=y(d,this._getPointY(f,i,s,p)),v.push(isNaN(b)&&!d?e[d].$startY||s.y:b),b&&(m.push([g,b]),o.addRect(f.id,[g-_-i.x,b-_-i.y,g+_-i.x,b+_-i.y],n),h.yAxis||(a=!h.offset&&u?"left":"center",this.canvases[n].renderTextAt(!1,a,g,b-h.labelOffset,h.label(f))));if(m.push([g,y(d-1,s.y)]),n)for(d=e.length-2;d>0;d--)g-=p.cellWidth,b=e[d].$startY,b&&m.push([g,b]);for(m.push([m[0][0],m[0][1]]),t.globalAlpha=this._settings.alpha.call(this,e[0]),t.fillStyle=this._settings.color.call(this,e[0]),t.beginPath(),this._path(t,m),t.fill(),d=0;d<e.length;d++){if(b=v[d],!b)for(d==e.length-1&&(b=e[d].$startY),c=d+1;c<e.length;c++)if(v[c]){l={x:i.x,y:v[0]},r={x:i.x+p.cellWidth*c,y:v[c]},b=x(i.x+p.cellWidth*d,l,r);break}e[d].$startY=b}}}},dhtmlx.chart.spline={pvt_render_spline:function(t,e,i,s,n,o){var l,r,a,h,d,c,u,_,f,p,m,g,b;if(d=this._calculateLineParams(t,e,i,s,n),l=this._settings,this._mapStart=i,a=[],e.length){for(_=l.offset?i.x+.5*d.cellWidth:i.x,r=0;r<e.length;r++)m=this._getPointY(e[r],i,s,d),m&&(u=r?d.cellWidth*r-.5+_:_,a.push({x:u,y:m,index:r}));for(c=this._getSplineParameters(a),r=0;r<a.length;r++){if(f=a[r].x,g=a[r].y,r<a.length-1){for(p=a[r+1].x,b=a[r+1].y,h=f;p>h;h++){var v=this._getSplineYPoint(h,f,r,c.a,c.b,c.c,c.d);v<i.y&&(v=i.y),v>s.y&&(v=s.y);var y=this._getSplineYPoint(h+1,f,r,c.a,c.b,c.c,c.d);y<i.y&&(y=i.y),y>s.y&&(y=s.y),this._drawLine(t,h,v,h+1,y,l.line.color(e[r]),l.line.width)}this._drawLine(t,p-1,this._getSplineYPoint(h,f,r,c.a,c.b,c.c,c.d),p,b,l.line.color(e[r]),l.line.width)}this._drawItem(t,f,g,e[a[r].index],l.label(e[a[r].index]),n,o)}}},_getSplineParameters:function(t){var e,i,s,n,o,l,r,a,h=[],d=[],c=t.length;for(e=0;c-1>e;e++)h[e]=t[e+1].x-t[e].x,d[e]=(t[e+1].y-t[e].y)/h[e];for(i=[],s=[],i[0]=0,i[1]=2*(h[0]+h[1]),s[0]=0,s[1]=6*(d[1]-d[0]),e=2;c-1>e;e++)i[e]=2*(h[e-1]+h[e])-h[e-1]*h[e-1]/i[e-1],s[e]=6*(d[e]-d[e-1])-h[e-1]*s[e-1]/i[e-1];for(n=[],n[c-1]=n[0]=0,e=c-2;e>=1;e--)n[e]=(s[e]-h[e]*n[e+1])/i[e];for(o=[],l=[],r=[],a=[],e=0;c-1>e;e++)o[e]=t[e].y,l[e]=-h[e]*n[e+1]/6-h[e]*n[e]/3+(t[e+1].y-t[e].y)/h[e],r[e]=n[e]/2,a[e]=(n[e+1]-n[e])/(6*h[e]);return{a:o,b:l,c:r,d:a}},_getSplineYPoint:function(t,e,i,s,n,o,l){return s[i]+(t-e)*(n[i]+(t-e)*(o[i]+(t-e)*l[i]))}},dhtmlx.chart.barH={pvt_render_barH:function(t,e,i,s,n,o){var l,r,a,h,d,c,u,_,f,p,m,g,b,v,y,x,w,C,N,I,j;for(a=(s.y-i.y)/e.length,u=this._getLimits("h"),_=u.max,f=u.min,x=s.x-i.x,j=!!this._settings.yAxis,n||this._drawHScales(t,e,i,s,f,_,a),j&&(_=parseFloat(this._settings.xAxis.end),f=parseFloat(this._settings.xAxis.start)),v=this._getRelativeValue(f,_),g=v[0],m=v[1],C=g?x/g:10,j||(y=10,C=g?(x-y)/g:10),r=parseInt(this._settings.width,10),r*this._series.length+4>a&&(r=a/this._series.length-4),l=Math.floor((a-r*this._series.length)/2),b="undefined"!=typeof this._settings.radius?parseInt(this._settings.radius,10):Math.round(r/5),p=!1,d=this._settings.gradient,d&&"function"!=typeof d?(p=d,d=!1):d&&(d=t.createLinearGradient(i.x,i.y,s.x,i.y),this._settings.gradient(d)),j||this._drawLine(t,i.x-.5,i.y,i.x-.5,s.y,"#000000",1),c=0;c<e.length;c++)if(w=parseFloat(this._settings.value(e[c]||0)),w>_&&(w=_),w-=f,w*=m,N=i.x,I=i.y+l+c*a+(r+1)*n,0>w&&"auto"==this._settings.origin||this._settings.xAxis&&0===w&&!("auto"!=this._settings.origin&&this._settings.origin>f))this.canvases[n].renderTextAt("middle","right",N+10,I+r/2+l,this._settings.label(e[c]));else{0>w&&"auto"!=this._settings.origin&&this._settings.origin>f&&(w=0),j||(w+=y/C),h=d||this._settings.color.call(this,e[c]),this._settings.border&&this._drawBarHBorder(t,N,I,r,f,b,C,w,h),t.globalAlpha=this._settings.alpha.call(this,e[c]);var k=this._drawBarH(t,s,N,I,r,f,b,C,w,h,d,p);0!=p&&this._drawBarHGradient(t,N,I,r,f,b,C,w,h,p),t.globalAlpha=1,k[3]==I?(this.canvases[n].renderTextAt("middle","left",k[0]-5,k[3]+Math.floor(r/2),this._settings.label(e[c])),o.addRect(e[c].id,[k[0]-i.x,k[3]-i.y,k[2]-i.x,k[3]+r-i.y],n)):(this.canvases[n].renderTextAt("middle",!1,k[2]+5,k[1]+Math.floor(r/2),this._settings.label(e[c])),o.addRect(e[c].id,[k[0]-i.x,I-i.y,k[2]-i.x,k[3]-i.y],n))}},_setBarHPoints:function(t,e,i,s,n,o,l,r,a){var h=0;if(n>o*l){var d=(n-o*l)/n;h=-Math.asin(d)+Math.PI/2}t.moveTo(e,i+r);var c=e+o*l-n-(n?0:r);o*l>n&&t.lineTo(c,i+r);var u=i+n;n&&n>0&&t.arc(c,u,n-r,-Math.PI/2+h,0,!1);var _=i+s-n-(n?0:r),f=c+n-(n?r:0);t.lineTo(f,_),n&&n>0&&t.arc(c,_,n-r,0,Math.PI/2-h,!1);var p=i+s-r;return t.lineTo(e,p),a||t.lineTo(e,i+r),[f,p]},_drawHScales:function(t,e,i,s,n,o,l){var r=0;this._settings.xAxis&&(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj)),r=this._drawHXAxis(this.canvases.x.getCanvas(),e,i,s,n,o)),this._settings.yAxis&&(this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj)),this._drawHYAxis(this.canvases.y.getCanvas(),e,i,s,l,r))},_drawHYAxis:function(t,e,i,s,n,o){if(this._settings.yAxis){var l,r=parseInt(o?o:i.x,10)-.5,a=s.y+.5,h=i.y;this._drawLine(t,r,a,r,h,this._settings.yAxis.color,1);for(var d=0;d<e.length;d++){var c="auto"!=this._settings.origin&&"barH"==this._settings.view&&parseFloat(this._settings.value(e[d]))<this._settings.origin;l=h+n/2+d*n,this.canvases.y.renderTextAt("middle",c?!1:"left",c?r+5:r-5,l,this._settings.yAxis.template(e[d]),"dhx_axis_item_y",c?0:r-10),this._settings.yAxis.lines.call(this,e[d])&&this._drawLine(t,i.x,l,s.x,l,this._settings.yAxis.lineColor.call(this,e[d]),1)}this._drawLine(t,i.x+.5,h+.5,s.x,h+.5,this._settings.yAxis.lineColor.call(this,{}),1),this._setYAxisTitle(i,s)}},_drawHXAxis:function(t,e,i,s,n,o){var l,r={},a=this._settings.xAxis;if(a){var h=s.y+.5,d=i.x-.5,c=s.x-.5,u=i.x;if(this._drawLine(t,d,h,c,h,a.color,1),a.step&&(l=parseFloat(a.step)),("undefined"==typeof this._configXAxis.step||"undefined"==typeof this._configXAxis.start||"undefined"==typeof this._configXAxis.end)&&(r=this._calculateScale(n,o),n=r.start,o=r.end,l=r.step,this._settings.xAxis.end=o,this._settings.xAxis.start=n,this._settings.xAxis.step=l),0!==l){for(var _=(c-d)*l/(o-n),f=0,p=n;o>=p;p+=l){r.fixNum&&(p=parseFloat(new Number(p).toFixed(r.fixNum)));var m=Math.floor(d+f*_)+.5;p==n&&"auto"==this._settings.origin||!a.lines.call(this,p)||this._drawLine(t,m,h,m,i.y,this._settings.xAxis.lineColor.call(this,p),1),p==this._settings.origin&&(u=m+1),this.canvases.x.renderTextAt(!1,!0,m,h+2,a.template(p.toString()),"dhx_axis_item_x"),f++}return this.canvases.x.renderTextAt(!0,!1,d,s.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",s.x-i.x),a.lines.call(this,{})||this._drawLine(t,d,i.y-.5,c,i.y-.5,this._settings.xAxis.color,.2),u}}},_correctBarHParams:function(t,e,i,s,n,o,l){var r=this._settings.yAxis,a=e;return r&&"auto"!=this._settings.origin&&this._settings.origin>l&&(e+=(this._settings.origin-l)*n,a=e,s-=this._settings.origin-l,0>s&&(s*=-1,t.translate(e,i+o),t.rotate(Math.PI),e=.5,i=0),e+=.5),{value:s,x0:e,y0:i,start:a}},_drawBarH:function(t,e,i,s,n,o,l,r,a,h,d,c){t.save();var u=this._correctBarHParams(t,i,s,a,r,n,o);t.fillStyle=h,t.beginPath();var _=this._setBarHPoints(t,u.x0,u.y0,n,l,r,u.value,this._settings.border?1:0);d&&!c&&t.lineTo(e.x,u.y0+(this._settings.border?1:0)),t.fill(),t.restore();var f=u.y0,p=u.y0!=s?s:_[1],m=u.y0!=s?u.start-_[0]:u.start,g=u.y0!=s?u.start:_[0];return[m,f,g,p]},_drawBarHBorder:function(t,e,i,s,n,o,l,r,a){t.save();var h=this._correctBarHParams(t,e,i,r,l,s,n);t.beginPath(),this._setBorderStyles(t,a),t.globalAlpha=.9,this._setBarHPoints(t,h.x0,h.y0,s,o,l,h.value,t.lineWidth/2,1),t.stroke(),t.restore()},_drawBarHGradient:function(t,e,i,s,n,o,l,r,a,h){t.save();var d=this._correctBarHParams(t,e,i,r,l,s,n),c=this._setBarGradient(t,d.x0,d.y0+s,d.x0+l*d.value,d.y0,h,a,"x");t.fillStyle=c.gradient,t.beginPath(),this._setBarHPoints(t,d.x0,d.y0+c.offset,s-2*c.offset,o,l,d.value,c.offset),t.fill(),t.globalAlpha=1,t.restore()}},dhtmlx.assert(dhtmlx.chart.barH),dhtmlx.chart.stackedBarH={pvt_render_stackedBarH:function(t,e,i,s,n,o){var l,r,a,h,d=s.x-i.x,c=!!this._settings.yAxis,u=this._getStackedLimits(e);l=u.max,r=u.min;var _=Math.floor((s.y-i.y)/e.length);n||this._drawHScales(t,e,i,s,r,l,_),c&&(l=parseFloat(this._settings.xAxis.end),r=parseFloat(this._settings.xAxis.start));var f=this._getRelativeValue(r,l);h=f[0],a=f[1];var p=h?d/h:10;if(!c){var m=10;p=h?(d-m)/h:10}var g=parseInt(this._settings.width,10);g+4>_&&(g=_-4);var b=(_-g)/2,v=0,y=!1,x=this._settings.gradient;x&&(y=!0),c||this._drawLine(t,i.x-.5,i.y,i.x-.5,s.y,"#000000",1);var w=0,C=0;for(N=0;N<this._series.length;N++)N==n&&(C=w),"stackedBarH"==this._series[N].view&&w++;for(var N=0;N<e.length;N++){C||(e[N].$startX=i.x);var I=parseFloat(this._settings.value(e[N]||0));I>l&&(I=l),I-=r,I*=a;var j=i.x,k=i.y+b+N*_;if(C?j=e[N].$startX:e[N].$startX=j,0>I||this._settings.yAxis&&0===I)this.canvases.y.renderTextAt("middle",!0,j+10,k+g/2,this._settings.label(e[N]));else{c||(I+=m/p);var S=this._settings.color.call(this,e[N]);t.globalAlpha=this._settings.alpha.call(this,e[N]),t.fillStyle=this._settings.color.call(this,e[N]),t.beginPath();var O=this._setBarHPoints(t,j,k,g,v,p,I,this._settings.border?1:0);if(x&&!y&&t.lineTo(i.x+d,k+(this._settings.border?1:0)),t.fill(),0!=y){var T=this._setBarGradient(t,j,k+g,j,k,y,S,"x");t.fillStyle=T.gradient,t.beginPath(),O=this._setBarHPoints(t,j,k,g,v,p,I,0),t.fill()}this._settings.border&&this._drawBarHBorder(t,j,k,g,r,v,p,I,S),t.globalAlpha=1,this.canvases[n].renderTextAt("middle",!0,e[N].$startX+(O[0]-e[N].$startX)/2-1,k+(O[1]-k)/2,this._settings.label(e[N])),o.addRect(e[N].id,[e[N].$startX-i.x,k-i.y,O[0]-i.x,O[1]-i.y],n),e[N].$startX=O[0]}}}},dhtmlx.chart.stackedBar={pvt_render_stackedBar:function(t,e,i,s,n,o){var l,r,a,h,d=s.y-i.y,c=!!this._settings.yAxis,u=!!this._settings.xAxis,_=this._getStackedLimits(e);l=_.max,r=_.min;var f=Math.floor((s.x-i.x)/e.length);n||this._drawScales(e,i,s,r,l,f),c&&(l=parseFloat(this._settings.yAxis.end),r=parseFloat(this._settings.yAxis.start));var p=this._getRelativeValue(r,l);h=p[0],a=p[1];var m=h?d/h:10,g=parseInt(this._settings.width,10);g+4>f&&(g=f-4);var b=Math.floor((f-g)/2),v=this._settings.gradient?this._settings.gradient:!1;u||this._drawLine(t,i.x,s.y+.5,s.x,s.y+.5,"#000000",1);for(var y=0;y<e.length;y++){var x=parseFloat(this._settings.value(e[y]||0));if(x){n||(x-=r),x*=a;var w=i.x+b+y*f,C=s.y;if(n?C=e[y].$startY:e[y].$startY=C,!(C<i.y+1))if(0>x||this._settings.yAxis&&0===x)this.canvases.y.renderTextAt(!0,!0,w+Math.floor(g/2),C,this._settings.label(e[y]));else{var N=this._settings.color.call(this,e[y]);t.globalAlpha=this._settings.alpha.call(this,e[y]),t.fillStyle=this._settings.color.call(this,e[y]),t.beginPath();var I=this._setStakedBarPoints(t,w-(this._settings.border?.5:0),C,g+(this._settings.border?.5:0),m,x,0,i.y);if(t.fill(),v){t.save();var j=this._setBarGradient(t,w,C,w+g,I[1],v,N,"y");t.fillStyle=j.gradient,t.beginPath(),I=this._setStakedBarPoints(t,w+j.offset,C,g-2*j.offset,m,x,this._settings.border?1:0,i.y),t.fill(),t.restore()}this._settings.border&&(t.save(),this._setBorderStyles(t,N),t.beginPath(),this._setStakedBarPoints(t,w-.5,C,g+1,m,x,0,i.y,1),t.stroke(),t.restore()),t.globalAlpha=1,this.canvases[n].renderTextAt(!1,!0,w+Math.floor(g/2),I[1]+(C-I[1])/2-7,this._settings.label(e[y])),o.addRect(e[y].id,[w-i.x,I[1]-i.y,I[0]-i.x,(e[y].$startY||C)-i.y],n),e[y].$startY=this._settings.border?I[1]+1:I[1]}}else n&&e[y].$startY||(e[y].$startY=s.y)}},_setStakedBarPoints:function(t,e,i,s,n,o,l,r,a){t.moveTo(e,i);var h=i-n*o+l;r>h&&(h=r),t.lineTo(e,h);var d=e+s,c=h;t.lineTo(d,c);var u=e+s;return t.lineTo(u,i),a||t.lineTo(e,i),[u,c-2*l]}},dhtmlx.chart.line={pvt_render_line:function(t,e,i,s,n,o){var l,r,a,h,d,c,u,_,f,p,m,g;if(h=this._calculateLineParams(t,e,i,s,n),l=this._settings,e.length){for(d=l.offset?i.x+.5*h.cellWidth:i.x,a=[],r=0;r<e.length;r++)if(g=this._getPointY(e[r],i,s,h)){if(u=r?h.cellWidth*r-.5+d:d,f="object"==typeof g?g.y0:g,r&&this._settings.fixOverflow){if(m=this._getPointY(e[r-1],i,s,h),m.out&&m.out==g.out)continue;c=h.cellWidth*(r-1)-.5+d,_="object"==typeof m?m.y0:m,m.out&&(p="min"==m.out?s.y:i.y,a.push({x:this._calcOverflowX(c,u,_,f,p),y:p})),g.out&&(p="min"==g.out?s.y:i.y,a.push({x:this._calcOverflowX(c,u,_,f,p),y:p}))}g.out||a.push({x:u,y:g,index:r})}for(this._mapStart=i,r=1;r<=a.length;r++)c=a[r-1].x,_=a[r-1].y,r<a.length&&(u=a[r].x,f=a[r].y,this._drawLine(t,c,_,u,f,l.line.color.call(this,e[r-1]),l.line.width),l.line&&l.line.shadow&&(t.globalAlpha=.3,this._drawLine(t,c+2,_+l.line.width+8,u+2,f+l.line.width+8,"#eeeeee",l.line.width+3),t.globalAlpha=1)),"undefined"!=typeof a[r-1].index&&this._drawItem(t,c,_,e[a[r-1].index],l.label(e[a[r-1].index]),n,o,i)}},_calcOverflowX:function(t,e,i,s,n){return t+(n-i)*(e-t)/(s-i)},_drawItem:function(t,e,i,s,n,o,l){var r=this._settings.item,a=parseInt(r.radius.call(this,s),10)||0,h=this._mapStart;if(a){if(t.save(),r.shadow){t.lineWidth=1,t.strokeStyle="#bdbdbd",t.fillStyle="#bdbdbd";for(var d=[.1,.2,.3],c=d.length-1;c>=0;c--)t.globalAlpha=d[c],t.strokeStyle="#d0d0d0",t.beginPath(),this._strokeChartItem(t,e,i+2*a/3,a+c+1,r.type),t.stroke();t.beginPath(),t.globalAlpha=.3,t.fillStyle="#bdbdbd",this._strokeChartItem(t,e,i+2*a/3,a+1,r.type),t.fill()}t.restore(),t.lineWidth=r.borderWidth,t.fillStyle=r.color.call(this,s),t.strokeStyle=r.borderColor.call(this,s),t.globalAlpha=r.alpha.call(this,s),t.beginPath(),this._strokeChartItem(t,e,i,a+1,r.type),t.fill(),t.stroke(),t.globalAlpha=1}n&&this.canvases[o].renderTextAt(!1,!0,e,i-a-this._settings.labelOffset,this._settings.label.call(this,s));var u=this._settings.eventRadius||a+1;l.addRect(s.id,[e-u-h.x,i-u-h.y,e+u-h.x,i+u-h.y],o)},_strokeChartItem:function(t,e,i,s,n){var o=[];if(e=parseInt(e,10),i=parseInt(i,10),!n||"square"!=n&&"s"!=n)if(!n||"diamond"!=n&&"d"!=n)o=!n||"triangle"!=n&&"t"!=n?[[e,i,s,0,2*Math.PI,!0]]:[[e,i-s],[e+Math.sqrt(3)*s/2,i+s/2],[e-Math.sqrt(3)*s/2,i+s/2],[e,i-s]];else{var l=t.lineWidth>1?t.lineWidth*Math.sqrt(2)/4:0;o=[[e,i-s],[e+s,i],[e,i+s],[e-s,i],[e+l,i-s-l]]}else s*=Math.sqrt(2)/2,o=[[e-s-t.lineWidth/2,i-s],[e+s,i-s],[e+s,i+s],[e-s,i+s],[e-s,i-s]];this._path(t,o)},_getPointY:function(t,e,i,s){var n=s.minValue,o=s.maxValue,l=s.unit,r=s.valueFactor,a=this._settings.value(t),h=(parseFloat(a||0)-n)*r;this._settings.yAxis||(h+=s.startValue/l);var d=i.y-l*h;return!this._settings.fixOverflow||"line"!=this._settings.view&&"area"!=this._settings.view?(a>o&&(d=e.y),(0>h||n>a)&&(d=i.y)):a>o?d={y:e.y,y0:d,out:"max"}:(0>h||n>a)&&(d={y:i.y,y0:d,out:"min"}),d},_calculateLineParams:function(t,e,i,s,n){var o,l={};l.totalHeight=s.y-i.y,l.cellWidth=(s.x-i.x)/(this._settings.offset?e.length:e.length-1);var r=!!this._settings.yAxis,a=-1!=this._settings.view.indexOf("stacked")?this._getStackedLimits(e):this._getLimits();l.maxValue=a.max,l.minValue=a.min,n||this._drawScales(e,i,s,l.minValue,l.maxValue,l.cellWidth),r&&(l.maxValue=parseFloat(this._settings.yAxis.end),l.minValue=parseFloat(this._settings.yAxis.start));var h=this._getRelativeValue(l.minValue,l.maxValue);return o=h[0],l.valueFactor=h[1],l.unit=o?l.totalHeight/o:10,l.startValue=0,r||(l.startValue=10,l.unit!=l.totalHeight&&(l.unit=o?(l.totalHeight-l.startValue)/o:10)),l}},dhtmlx.chart.bar={pvt_render_bar:function(t,e,i,s,n,o){var l,r,a,h,d,c,u,_,f,p,m,g,b,v=s.y-i.y;b=!!this._settings.yAxis,g=!!this._settings.xAxis,h=this._getLimits(),d=h.max,c=h.min,r=(s.x-i.x)/e.length,n||"auto"!=this._settings.origin&&!b||this._drawScales(e,i,s,c,d,r),b&&(d=parseFloat(this._settings.yAxis.end),c=parseFloat(this._settings.yAxis.start)),f=this._getRelativeValue(c,d),u=f[0],_=f[1],m=u?v/u:u,b||"auto"!=this._settings.origin&&g||(p=10,m=u?(v-p)/u:p),!n&&"auto"!=this._settings.origin&&!b&&this._settings.origin>c&&this._drawXAxis(t,e,i,s,r,s.y-m*(this._settings.origin-c)),l=parseInt(this._settings.width,10);var y=0,x=0;for(a=0;a<this._series.length;a++)a==n&&(x=y),"bar"==this._series[a].view&&y++;this._series&&l*y+4>r&&(l=parseInt(r/y-4,10));var w=(r-l*y)/2,C="undefined"!=typeof this._settings.radius?parseInt(this._settings.radius,10):Math.round(l/5),N=!1,I=this._settings.gradient;for(I&&"function"!=typeof I?(N=I,I=!1):I&&(I=t.createLinearGradient(0,s.y,0,i.y),this._settings.gradient(I)),g||this._drawLine(t,i.x,s.y+.5,s.x,s.y+.5,"#000000",1),a=0;a<e.length;a++){var j=parseFloat(this._settings.value(e[a])||0);if(!isNaN(j)){j>d&&(j=d),j-=c,j*=_;var k=i.x+w+parseInt(a*r,10)+(l+1)*x,S=s.y;if(0>j||this._settings.yAxis&&0===j&&!("auto"!=this._settings.origin&&this._settings.origin>c))this.canvases[n].renderTextAt(!0,!0,k+Math.floor(l/2),S,this._settings.label(e[a]));else{b||"auto"!=this._settings.origin&&g||(j+=p/m);var O=I||this._settings.color.call(this,e[a]);t.globalAlpha=this._settings.alpha.call(this,e[a]);var T=this._drawBar(t,i,k,S,l,c,C,m,j,O,I,N);N&&this._drawBarGradient(t,k,S,l,c,C,m,j,O,N),this._settings.border&&this._drawBarBorder(t,k,S,l,c,C,m,j,O),t.globalAlpha=1,T[0]!=k?this.canvases[n].renderTextAt(!1,!0,k+Math.floor(l/2),T[1],this._settings.label(e[a])):this.canvases[n].renderTextAt(!0,!0,k+Math.floor(l/2),T[3],this._settings.label(e[a])),o.addRect(e[a].id,[k-i.x,T[3]-i.y,T[2]-i.x,T[1]-i.y],n)}}}},_correctBarParams:function(t,e,i,s,n,o,l){var r=this._settings.xAxis,a=i;return r&&"auto"!=this._settings.origin&&this._settings.origin>l&&(i-=(this._settings.origin-l)*n,a=i,s-=this._settings.origin-l,0>s&&(s*=-1,t.translate(e+o,i),t.rotate(Math.PI),e=0,i=0),i-=.5),{value:s,x0:e,y0:i,start:a}},_drawBar:function(t,e,i,s,n,o,l,r,a,h,d,c){t.save(),t.fillStyle=h;var u=this._correctBarParams(t,i,s,a,r,n,o),_=this._setBarPoints(t,u.x0,u.y0,n,l,r,u.value,this._settings.border?1:0);d&&!c&&t.lineTo(u.x0+(this._settings.border?1:0),e.y),t.fill(),t.restore();var f=u.x0,p=u.x0!=i?i+_[0]:_[0],m=u.x0!=i?u.start-_[1]-u.y0:u.y0,g=u.x0!=i?u.start-u.y0:_[1];return[f,m,p,g]},_drawBarBorder:function(t,e,i,s,n,o,l,r,a){var h;t.save(),h=this._correctBarParams(t,e,i,r,l,s,n),this._setBorderStyles(t,a),this._setBarPoints(t,h.x0,h.y0,s,o,l,h.value,t.lineWidth/2,1),t.stroke(),t.restore()},_drawBarGradient:function(t,e,i,s,n,o,l,r,a,h){t.save();var d=this._correctBarParams(t,e,i,r,l,s,n),c=this._setBarGradient(t,d.x0,d.y0,d.x0+s,d.y0-l*d.value+2,h,a,"y"),u=this._settings.border?1:0;t.fillStyle=c.gradient,this._setBarPoints(t,d.x0+c.offset,d.y0,s-2*c.offset,o,l,d.value,c.offset+u),t.fill(),t.restore()},_setBarPoints:function(t,e,i,s,n,o,l,r,a){t.beginPath();var h=0;if(n>o*l){var d=(n-o*l)/n;1>=d&&d>=-1&&(h=-Math.acos(d)+Math.PI/2)}t.moveTo(e+r,i);var c=i-Math.floor(o*l)+n+(n?0:r);o*l>n&&t.lineTo(e+r,c);var u=e+n;n&&n>0&&t.arc(u,c,n-r,-Math.PI+h,-Math.PI/2,!1);var _=e+s-n-r,f=c-n+(n?r:0);t.lineTo(_,f),n&&n>0&&t.arc(_,c,n-r,-Math.PI/2,0-h,!1);var p=e+s-r;return t.lineTo(p,i),a||t.lineTo(e+r,i),[p,f]}},dhtmlx.chart.pie={pvt_render_pie:function(t,e,i,s,n,o){this._renderPie(t,e,i,s,1,o,n)},_renderPie:function(t,e,i,s,n,o,l){if(e.length){var r=this._getPieParameters(i,s),a=this._settings.radius?this._settings.radius:r.radius;if(!(0>a)){var h=this._getValues(e),d=this._getTotalValue(h),c=this._getRatios(h,d),u=this._settings.x?this._settings.x:r.x,_=this._settings.y?this._settings.y:r.y;1==n&&this._settings.shadow&&this._addShadow(t,u,_,a),_/=n;var f=-Math.PI/2,p=[];if(t.scale(1,n),this._settings.gradient){var m=1!=n?u+a/3:u,g=1!=n?_+a/3:_;this._showRadialGradient(t,u,_,a,m,g)}for(var b=0;b<e.length;b++)if(h[b]){t.strokeStyle=this._settings.lineColor.call(this,e[b]),t.beginPath(),t.moveTo(u,_),p.push(f),alpha1=-Math.PI/2+c[b]-1e-4,t.arc(u,_,a,f,alpha1,!1),t.lineTo(u,_);var v=this._settings.color.call(this,e[b]);t.fillStyle=v,t.fill(),this._settings.pieInnerText&&this._drawSectorLabel(u,_,5*a/6,f,alpha1,n,this._settings.pieInnerText(e[b],d),!0),this._settings.label&&this._drawSectorLabel(u,_,a+this._settings.labelOffset,f,alpha1,n,this._settings.label(e[b])),1!=n&&(this._createLowerSector(t,u,_,f,alpha1,a,!0),t.fillStyle="#000000",t.globalAlpha=.2,this._createLowerSector(t,u,_,f,alpha1,a,!1),t.globalAlpha=1,t.fillStyle=v),o.addSector(e[b].id,f,alpha1,u-i.x,_-i.y/n,a,n,l),f=alpha1}t.globalAlpha=.8;var y;for(b=0;b<p.length;b++)y=this._getPositionByAngle(p[b],u,_,a),this._drawLine(t,u,_,y.x,y.y,this._settings.lineColor.call(this,e[b]),2);1==n&&(t.lineWidth=2,t.strokeStyle="#ffffff",t.beginPath(),t.arc(u,_,a+1,0,2*Math.PI,!1),t.stroke()),t.globalAlpha=1,t.scale(1,1/n)}}},_getValues:function(t){for(var e=[],i=0;i<t.length;i++)e.push(parseFloat(this._settings.value(t[i])||0));return e},_getTotalValue:function(t){for(var e=0,i=0;i<t.length;i++)e+=t[i];return e},_getRatios:function(t,e){var i,s=[],n=0;
e=e||this._getTotalValue(t);for(var o=0;o<t.length;o++)i=t[o],s[o]=2*Math.PI*(e?(i+n)/e:1/t.length),n+=i;return s},_getPieParameters:function(t,e){var i=e.x-t.x,s=e.y-t.y,n=t.x+i/2,o=t.y+s/2,l=Math.min(i/2,s/2);return{x:n,y:o,radius:l}},_createLowerSector:function(t,e,i,s,n,o,l){if(t.lineWidth=1,0>=s&&n>=0||s>=0&&n<=Math.PI||Math.abs(s-Math.PI)>.003&&s<=Math.PI&&n>=Math.PI){0>=s&&n>=0&&(s=0,l=!1,this._drawSectorLine(t,e,i,o,s,n)),s<=Math.PI&&n>=Math.PI&&(n=Math.PI,l=!1,this._drawSectorLine(t,e,i,o,s,n));var r=(this._settings.height||Math.floor(o/4))/this._settings.cant;t.beginPath(),t.arc(e,i,o,s,n,!1),t.lineTo(e+o*Math.cos(n),i+o*Math.sin(n)+r),t.arc(e,i+r,o,n,s,!0),t.lineTo(e+o*Math.cos(s),i+o*Math.sin(s)),t.fill(),l&&t.stroke()}},_drawSectorLine:function(t,e,i,s,n,o){t.beginPath(),t.arc(e,i,s,n,o,!1),t.stroke()},_addShadow:function(t,e,i,s){t.globalAlpha=.5;for(var n=["#c4c4c4","#c6c6c6","#cacaca","#dcdcdc","#dddddd","#e0e0e0","#eeeeee","#f5f5f5","#f8f8f8"],o=n.length-1;o>-1;o--)t.beginPath(),t.fillStyle=n[o],t.arc(e+1,i+1,s+o,0,2*Math.PI,!0),t.fill();t.globalAlpha=1},_getGrayGradient:function(t){return t.addColorStop(0,"#ffffff"),t.addColorStop(.7,"#7a7a7a"),t.addColorStop(1,"#000000"),t},_showRadialGradient:function(t,e,i,s,n,o){t.beginPath();var l;"function"!=typeof this._settings.gradient?(l=t.createRadialGradient(n,o,s/4,e,i,s),l=this._getGrayGradient(l)):l=this._settings.gradient(l),t.fillStyle=l,t.arc(e,i,s,0,2*Math.PI,!0),t.fill(),t.globalAlpha=.7},_drawSectorLabel:function(t,e,i,s,n,o,l,r){var a=this.canvases[0].renderText(0,0,l,0,1);if(a){var h=a.scrollWidth;a.style.width=h+"px",h>t&&(h=t);var d=.2>n-s?4:8;r&&(d=h/1.8);var c=s+(n-s)/2;i-=(d-8)/2;var u=-d,_=-8,f="right";(c>=Math.PI/2&&c<Math.PI||c<=3*Math.PI/2&&c>=Math.PI)&&(u=-h-u+1,f="left");var p=0;!r&&1>o&&c>0&&c<Math.PI&&(p=(this._settings.height||Math.floor(i/4))/o);var m=(e+Math.floor((i+p)*Math.sin(c)))*o+_,g=t+Math.floor((i+d/2)*Math.cos(c))+u,b=n<Math.PI/2+.01,v=s<Math.PI/2;v&&b?g=Math.max(g,t+3):v||b?!r&&(c>=Math.PI/2&&c<Math.PI||c<=3*Math.PI/2&&c>=Math.PI)&&(g+=h/3):g=Math.min(g,t-h),a.style.top=m+"px",a.style.left=g+"px",a.style.width=h+"px",a.style.textAlign=f,a.style.whiteSpace="nowrap"}}},dhtmlx.chart.pie3D={pvt_render_pie3D:function(t,e,i,s,n,o){this._renderPie(t,e,i,s,this._settings.cant,o)}},dhtmlx.chart.donut={pvt_render_donut:function(t,e,i,s,n,o){if(e.length){this._renderPie(t,e,i,s,1,o);var l=this._settings,r=this._getPieParameters(i,s),a=l.radius?l.radius:r.radius,h=l.innerRadius&&l.innerRadius<a?l.innerRadius:a/3,d=l.x?l.x:r.x,c=l.y?l.y:r.y;t.fillStyle="#ffffff",t.beginPath(),t.arc(d,c,h,0,2*Math.PI,!0),t.fill()}}},dhtmlx.DataDriver.dhtmlxgrid={_grid_getter:"_get_cell_value",toObject:function(t){return this._grid=t,t},getRecords:function(t){return t.rowsBuffer},getDetails:function(t){for(var e={},i=0;i<this._grid.getColumnsNum();i++)e["data"+i]=this._grid[this._grid_getter](t,i);return e},getInfo:function(){return{_size:0,_from:0}}},dhtmlx.ui.Canvas=function(t,e,i){this._canvas_labels=[],this._canvas_name=e,this._obj=t;var s=t.offsetWidth*(window.devicePixelRatio||1),n=t.offsetHeight*(window.devicePixelRatio||1),i=i||"";i+=";width:"+t.offsetWidth+"px;height:"+t.offsetHeight+"px;",this._prepareCanvas(e,i,s,n)},dhtmlx.ui.Canvas.prototype={_prepareCanvas:function(t,e,i,s){return this._canvas=dhtmlx.html.create("canvas",{width:i,height:s,canvas_id:t,style:e||""}),this._obj.appendChild(this._canvas),this._canvas.getContext||(dhtmlx._isIE?(dhtmlx.require("thirdparty/excanvas/excanvas.js"),G_vmlCanvasManager.init_(document),G_vmlCanvasManager.initElement(this._canvas)):dhtmlx.error("Canvas is not supported in the current browser")),this._canvas},getCanvas:function(t){var e=(this._canvas||this._prepareCanvas()).getContext(t||"2d");return this._webixDevicePixelRatio||(this._webixDevicePixelRatio=!0,e.scale(window.devicePixelRatio||1,window.devicePixelRatio||1)),e},_resizeCanvas:function(){if(this._canvas){var t=this._canvas.parentNode.offsetWidth,e=this._canvas.parentNode.offsetHeight;this._canvas.setAttribute("width",t*(window.devicePixelRatio||1)),this._canvas.setAttribute("height",e*(window.devicePixelRatio||1)),this._canvas.style.width=t+"px",this._canvas.style.height=e+"px",this._webixDevicePixelRatio=!1}},renderText:function(t,e,i,s,n){if(i){var o=dhtmlx.html.create("DIV",{"class":"dhx_canvas_text"+(s?" "+s:""),style:"left:"+t+"px; top:"+e+"px;"},i);return this._obj.appendChild(o),this._canvas_labels.push(o),n&&(o.style.width=n+"px"),o}},renderTextAt:function(t,e,i,s,n,o,l){var r=this.renderText.call(this,i,s,n,o,l);return r&&(t&&(r.style.top="middle"==t?parseInt(s-r.offsetHeight/2,10)+"px":s-r.offsetHeight+"px"),e&&(r.style.left="left"==e?i-r.offsetWidth+"px":parseInt(i-r.offsetWidth/2,10)+"px")),r},clearCanvas:function(t){var e,i=[];for(e=0;e<this._canvas_labels.length;e++)this._obj.removeChild(this._canvas_labels[e]);if(this._canvas_labels=[],!t&&this._obj._htmlmap){for(i=this._getMapAreas();i.length;)i[0].parentNode.removeChild(i[0]),i.splice(0,1);i=null,this._obj._htmlmap.getElementsByTagName("AREA").length||(this._obj._htmlmap.parentNode.removeChild(this._obj._htmlmap),this._obj._htmlmap=null)}this.getCanvas().clearRect(0,0,this._obj.offsetWidth*(window.devicePixelRatio||1),this._obj.offsetWidth*(window.devicePixelRatio||1))},toggleCanvas:function(){this._toggleCanvas("none"==this._canvas.style.display)},showCanvas:function(){this._toggleCanvas(!0)},hideCanvas:function(){this._toggleCanvas(!1)},_toggleCanvas:function(t){var e,i;for(i=0;i<this._canvas_labels.length;i++)this._canvas_labels[i].style.display=t?"":"none";if(this._obj._htmlmap)for(e=this._getMapAreas(),i=0;i<e.length;i++)t?e[i].removeAttribute("disabled"):e[i].setAttribute("disabled","true");this._canvas.style.display=t?"":"none"},_getMapAreas:function(){var t,e,i=[];for(t=this._obj._htmlmap.getElementsByTagName("AREA"),e=0;e<t.length;e++)t[e].getAttribute("userdata")==this._canvas_name&&i.push(t[e]);return i}},dhtmlXChart=function(t){this.name="Chart",this.version="3.0",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(t,"dhx_chart"),dhtmlx.extend(this,dhtmlx.AtomDataLoader),dhtmlx.extend(this,dhtmlx.DataLoader),this.data.provideApi(this,!0),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.MouseEvents),dhtmlx.extend(this,dhtmlx.Destruction),dhtmlx.extend(this,dhtmlx.Group),dhtmlx.extend(this,dhtmlx.AutoTooltip);for(var e in dhtmlx.chart)dhtmlx.extend(this,dhtmlx.chart[e]);t.preset&&this.definePreset(t),this._parseSettings(t,this.defaults),this._series=[this._settings],this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render()},this)),this.attachEvent("onLocateData",this._switchSerie)},dhtmlXChart.prototype={_id:"dhx_area_id",on_click:{dhx_chart_legend_item:function(t,e,i){var s=i.getAttribute("series_id");if(this.callEvent("onLegendClick",[t,s,i])){var n=this._settings,o=n.legend.values,l=o&&"undefined"!=typeof o[s].toggle?o[s].toggle:n.legend.toggle;"undefined"!=typeof s&&this._series.length>1&&l&&(-1!=i.className.indexOf("hidden")?this.showSeries(s):this.hideSeries(s))}}},on_dblclick:{},on_mouse_move:{},bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},resize:function(){for(var t in this.canvases)this.canvases[t]._resizeCanvas();this.render()},view_setter:function(t){return dhtmlx.chart[t]||dhtmlx.error("Chart type extension is not loaded: "+t),"undefined"==typeof this._settings.offset&&(this._settings.offset=!("area"==t||"stackedArea"==t)),"radar"!=t||this._settings.yAxis||this.define("yAxis",{}),"scatter"==t&&(this._settings.yAxis||this.define("yAxis",{}),this._settings.xAxis||this.define("xAxis",{})),t},clearCanvas:function(){if(this.canvases&&"object"==typeof this.canvases)for(var t in this.canvases)this.canvases[t].clearCanvas()},render:function(){var t,e,i,s,n;if(this.callEvent("onBeforeRender",[this.data])){if(this.canvases&&"object"==typeof this.canvases)for(e in this.canvases)this.canvases[e].clearCanvas();else this.canvases={};for(this._settings.legend&&(this.canvases.legend||(this.canvases.legend=new dhtmlx.ui.Canvas(this._obj,"legend")),this._drawLegend(this.data.getRange(),this._obj.offsetWidth)),t=this._getChartBounds(this._obj.offsetWidth,this._obj.offsetHeight),s=new dhtmlx.ui.Map(this._id),n=this._settings,i=this._getChartData(),e=0;e<this._series.length;e++)this._settings=this._series[e],this.canvases[e]||(this.canvases[e]=new dhtmlx.ui.Canvas(this._obj,e,"z-index:"+(2+e))),this["pvt_render_"+this._settings.view](this.canvases[e].getCanvas(),i,t.start,t.end,e,s);s.render(this._obj),this._obj.lastChild.style.zIndex=1e3,this._applyBounds(this._obj.lastChild,t),this.callEvent("onAfterRender",[]),this._settings=n}},_applyBounds:function(t,e){var i={};i.left=e.start.x,i.top=e.start.y,i.width=e.end.x-e.start.x,i.height=e.end.y-e.start.y;for(var s in i)t.style[s]=i[s]+"px"},_getChartData:function(){var t,e,i,s,n,o,l,r,a,h;if(s=this.data.getRange(),t=-1!=this._settings.view.toLowerCase().indexOf("barh")?"yAxis":"xAxis",e=this._settings[t],e&&e.units&&"object"==typeof e.units){if(i=e.units,r=[],"undefined"!=typeof i.start&&"undefined"!=typeof i.end&&"undefined"!=typeof i.next)for(l=i.start;l<=i.end;)r.push(l),l=i.next.call(this,l);else"[object Array]"===Object.prototype.toString.call(i)&&(r=i);if(o=[],r.length){for(a=e.value,h={},n=0;n<s.length;n++)h[a(s[n])]=n;for(n=0;n<r.length;n++)"undefined"!=typeof h[r[n]]?(s[h[r[n]]].$unit=r[n],o.push(s[h[r[n]]])):o.push({$unit:r[n]})}return o}return s},value_setter:dhtmlx.Template.obj_setter,xValue_setter:dhtmlx.Template.obj_setter,yValue_setter:function(t){this.define("value",t)},alpha_setter:dhtmlx.Template.obj_setter,label_setter:dhtmlx.Template.obj_setter,lineColor_setter:dhtmlx.Template.obj_setter,borderColor_setter:dhtmlx.Template.obj_setter,pieInnerText_setter:dhtmlx.Template.obj_setter,gradient_setter:function(t){return"function"!=typeof t&&t&&t===!0&&(t="light"),t},colormap:{RAINBOW:function(t){var e=Math.floor(this.indexById(t.id)/this.dataCount()*1536);return 1536==e&&(e-=1),this._rainbow[Math.floor(e/256)](e%256)}},color_setter:function(t){return this.colormap[t]||dhtmlx.Template.obj_setter(t)},fill_setter:function(t){return t&&0!=t?dhtmlx.Template.obj_setter(t):!1},definePreset:function(t){this.define("preset",t.preset),delete t.preset},preset_setter:function(t){var e,i,s;if(this.defaults=dhtmlx.extend({},this.defaults),"object"==typeof dhtmlx.presets.chart[t]){s=dhtmlx.presets.chart[t];for(e in s)if("object"==typeof s[e])if(this.defaults[e]&&"object"==typeof this.defaults[e]){this.defaults[e]=dhtmlx.extend({},this.defaults[e]);for(i in s[e])this.defaults[e][i]=s[e][i]}else this.defaults[e]=dhtmlx.extend({},s[e]);else this.defaults[e]=s[e];return t}return!1},legend_setter:function(t){return t?("object"!=typeof t&&(t={template:t}),this._mergeSettings(t,{width:150,height:18,layout:"y",align:"left",valign:"bottom",template:"",toggle:-1!=this._settings.view.toLowerCase().indexOf("stacked")?"":"hide",marker:{type:"square",width:15,height:15,radius:3},margin:4,padding:3}),t.template=dhtmlx.Template.setter(t.template),t):(this.legendObj&&(this.legendObj.innerHTML="",this.legendObj=null),!1)},defaults:{color:"RAINBOW",alpha:"1",label:!1,value:"{obj.value}",padding:{},view:"pie",lineColor:"#ffffff",cant:.5,width:30,labelWidth:100,line:{width:2,color:"#1293f8"},item:{radius:3,borderColor:"#636363",borderWidth:1,color:"#ffffff",alpha:1,type:"r",shadow:!1},shadow:!0,gradient:!1,border:!0,labelOffset:20,origin:"auto"},item_setter:function(t){"object"!=typeof t&&(t={color:t,borderColor:t}),this._mergeSettings(t,dhtmlx.extend({},this.defaults.item));for(var e=["alpha","borderColor","color","radius"],i=0;i<e.length;i++)t[e[i]]=dhtmlx.Template.setter(t[e[i]]);return t},line_setter:function(t){return"object"!=typeof t&&(t={color:t}),dhtmlx.extend(this.defaults.line,t),t=dhtmlx.extend({},this.defaults.line),t.color=dhtmlx.Template.setter(t.color),t},padding_setter:function(t){return"object"!=typeof t&&(t={left:t,right:t,top:t,bottom:t}),this._mergeSettings(t,{left:50,right:20,top:35,bottom:40}),t},xAxis_setter:function(t){if(!t)return!1;"object"!=typeof t&&(t={template:t}),t.value||(t.value=t.template),this._mergeSettings(t,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",value:"{obj}",lines:!0});var e=["lineColor","template","lines","value"];return this._converToTemplate(e,t),this._configXAxis=dhtmlx.extend({},t),t},yAxis_setter:function(t){this._mergeSettings(t,{title:"",color:"#000000",lineColor:"#cfcfcf",template:"{obj}",lines:!0,bg:"#ffffff"});var e=["lineColor","template","lines","bg"];return this._converToTemplate(e,t),this._configYAxis=dhtmlx.extend({},t),t},_converToTemplate:function(t,e){for(var i=0;i<t.length;i++)e[t[i]]=dhtmlx.Template.setter(e[t[i]])},_drawScales:function(t,e,i,s,n,o){var l=0;return this._settings.yAxis&&(this.canvases.y||(this.canvases.y=new dhtmlx.ui.Canvas(this._obj,"axis_y")),l=this._drawYAxis(this.canvases.y.getCanvas(),t,e,i,s,n)),this._settings.xAxis&&(this.canvases.x||(this.canvases.x=new dhtmlx.ui.Canvas(this._obj,"axis_x")),this._drawXAxis(this.canvases.x.getCanvas(),t,e,i,o,l)),l},_drawXAxis:function(t,e,i,s,n,o){for(var l,r=i.x-.5,a=parseInt(o?o:s.y,10)+.5,h=s.x,d=!0,c=0;c<e.length;c++){this._settings.offset===!0?l=r+n/2+c*n:(l=c==e.length-1?s.x:r+c*n,d=!!c),l=Math.ceil(l)-.5;var u="auto"!=this._settings.origin&&"bar"==this._settings.view&&parseFloat(this._settings.value(e[c]))<this._settings.origin;this._drawXAxisLabel(l,a,e[c],d,u),(this._settings.offset||c)&&this._settings.xAxis.lines.call(this,e[c])&&this._drawXAxisLine(t,l,s.y,i.y,e[c])}this.canvases.x.renderTextAt(!0,!1,r,s.y+this._settings.padding.bottom-3,this._settings.xAxis.title,"dhx_axis_title_x",s.x-i.x),this._drawLine(t,r,a,h,a,this._settings.xAxis.color,1),this._settings.xAxis.lines.call(this,{})&&this._settings.offset&&this._drawLine(t,h+.5,s.y,h+.5,i.y+.5,this._settings.xAxis.color,.2)},_drawYAxis:function(t,e,i,s,n,o){var l,r={};if(this._settings.yAxis){var a=i.x-.5,h=s.y,d=i.y,c=s.y;this._settings.yAxis.step&&(l=parseFloat(this._settings.yAxis.step)),("undefined"==typeof this._configYAxis.step||"undefined"==typeof this._configYAxis.start||"undefined"==typeof this._configYAxis.end)&&(r=this._calculateScale(n,o),n=r.start,o=r.end,l=r.step,this._settings.yAxis.end=o,this._settings.yAxis.start=n),this._setYAxisTitle(i,s),0===l&&(o=n,l=1);for(var u=o==n?h-d:(h-d)*l/(o-n),_=0,f=n;o>=f;f+=l){r.fixNum&&(f=parseFloat(new Number(f).toFixed(r.fixNum)));var p=Math.floor(h-_*u)+.5;f==n&&"auto"==this._settings.origin||!this._settings.yAxis.lines.call(this,f)||this._drawLine(t,a,p,s.x,p,this._settings.yAxis.lineColor.call(this,f),1),f==this._settings.origin&&(c=p);var m=f;if(1>l){var g=Math.min(this._log10(l),0>=n?0:this._log10(n)),b=Math.pow(10,-g);m=Math.round(f*b)/b,f=m}this.canvases.y.renderText(0,p-5,this._settings.yAxis.template(m.toString()),"dhx_axis_item_y",i.x-5),_++}return this._drawLine(t,a,h+1,a,d,this._settings.yAxis.color,1),c}},_setYAxisTitle:function(t,e){var i="dhx_axis_title_y"+(dhtmlx._isIE&&9!=dhtmlx._isIE?" dhx_ie_filter":""),s=this.canvases.y.renderTextAt("middle",!1,0,parseInt((e.y-t.y)/2+t.y,10),this._settings.yAxis.title,i);s&&(s.style.left=(dhtmlx.env.transform?(s.offsetHeight-s.offsetWidth)/2:0)+"px")},_calculateScale:function(t,e){"auto"!=this._settings.origin&&this._settings.origin<t&&(t=this._settings.origin);var i,s,n;i=(e-t)/8||1;var o=Math.floor(this._log10(i)),l=Math.pow(10,o),r=i/l;if(r=r>5?10:5,i=parseInt(r,10)*l,i>Math.abs(t))s=0>t?-i:0;else{var a=Math.abs(t),h=Math.floor(this._log10(a)),d=a/Math.pow(10,h);for(s=Math.ceil(10*d)/10*Math.pow(10,h)-i,a>1&&i>.1&&(s=Math.ceil(s));0>t?t>=s:s>=t;)s-=i;0>t&&(s=-s-2*i)}for(n=s;e>n;)n+=i,n=parseFloat(new Number(n).toFixed(Math.abs(o)));return{start:s,end:n,step:i,fixNum:Math.abs(o)}},_getLimits:function(t,e){var i,s,n=arguments.length&&"h"==t?this._configXAxis:this._configYAxis;if(e=e||"value",n&&"undefined"!=typeof n.end&&"undefined"!=typeof n.start&&n.step)i=parseFloat(n.end),s=parseFloat(n.start);else if(i=this.max(this._series[0][e]),s=n&&"undefined"!=typeof n.start?parseFloat(n.start):this.min(this._series[0][e]),this._series.length>1)for(var o=1;o<this._series.length;o++){var l=this.max(this._series[o][e]),r=this.min(this._series[o][e]);l>i&&(i=l),s>r&&(s=r)}return{max:i,min:s}},_log10:function(t){var e="log";return Math.floor(Math[e](t)/Math.LN10)},_drawXAxisLabel:function(t,e,i,s,n){if(this._settings.xAxis){var o=this.canvases.x.renderTextAt(n,s,t,e-(n?2:0),this._settings.xAxis.template(i));o&&(o.className+=" dhx_axis_item_x")}},_drawXAxisLine:function(t,e,i,s,n){this._settings.xAxis&&this._settings.xAxis.lines&&this._drawLine(t,e,i,e,s,this._settings.xAxis.lineColor.call(this,n),1)},_drawLine:function(t,e,i,s,n,o,l){t.strokeStyle=o,t.lineWidth=l,t.beginPath(),t.moveTo(e,i),t.lineTo(s,n),t.stroke(),t.lineWidth=1},_getRelativeValue:function(t,e){var i,s=1;return i=e!=t?e-t:t,[i,s]},_rainbow:[function(t){return"#FF"+dhtmlx.math.toHex(t/2,2)+"00"},function(t){return"#FF"+dhtmlx.math.toHex(t/2+128,2)+"00"},function(t){return"#"+dhtmlx.math.toHex(255-t,2)+"FF00"},function(t){return"#00FF"+dhtmlx.math.toHex(t,2)},function(t){return"#00"+dhtmlx.math.toHex(255-t,2)+"FF"},function(t){return"#"+dhtmlx.math.toHex(t,2)+"00FF"}],addSeries:function(t){var e=this._settings;this._settings=dhtmlx.extend({},e),this._parseSettings(t,{}),this._series.push(this._settings),this._settings=e},_switchSerie:function(t,e){var i;if(this._active_serie=e.getAttribute("userdata"),this._series[this._active_serie]){for(var s=0;s<this._series.length;s++)i=this._series[s].tooltip,i&&i.disable();e.getAttribute("disabled")||(i=this._series[this._active_serie].tooltip,i&&i.enable())}},hideSeries:function(t){this.canvases[t].hideCanvas(),this._settings.legend.values&&this._settings.legend.values[t]&&(this._settings.legend.values[t].$hidden=!0),this._drawLegend()},showSeries:function(t){this.canvases[t].showCanvas(),this._settings.legend.values&&this._settings.legend.values[t]&&delete this._settings.legend.values[t].$hidden,this._drawLegend()},_setBorderStyles:function(t,e){var i,s;s=dhtmlx.math.toRgb(e),i=dhtmlx.math.rgbToHsv(s[0],s[1],s[2]),i[2]/=2,e="rgb("+dhtmlx.math.hsvToRgb(i[0],i[1],i[2])+")",t.strokeStyle=e,1==t.globalAlpha&&(t.globalAlpha=.9)},_drawLegend:function(t,e){var i,s,n,o,l,r,a,h,d,c,u,_=0,f=0;if(t=t||[],e=e||this._obj.offsetWidth,h=this.canvases.legend.getCanvas(),s=this._settings.legend,a="x"!=this._settings.legend.layout?"width:"+s.width+"px":"",this.legendObj&&(this.legendObj.innerHTML="",this.legendObj.parentNode.removeChild(this.legendObj)),this.canvases.legend.clearCanvas(!0),n=dhtmlx.html.create("DIV",{"class":"dhx_chart_legend",style:"left:"+_+"px; top:"+f+"px;"+a},""),s.padding&&(n.style.padding=s.padding+"px"),this.legendObj=n,this._obj.appendChild(n),l=[],s.values)for(i=0;i<s.values.length;i++)l.push(this._drawLegendText(n,s.values[i].text,"undefined"!=typeof s.values[i].id?typeof s.values[i].id:i,s.values[i].$hidden));else for(i=0;i<t.length;i++)l.push(this._drawLegendText(n,s.template(t[i])));for(r=n.offsetWidth,o=n.offsetHeight,r<this._obj.offsetWidth&&("x"==s.layout&&"center"==s.align&&(_=(this._obj.offsetWidth-r)/2),"right"==s.align&&(_=this._obj.offsetWidth-r),s.margin&&"center"!=s.align&&(_+=("left"==s.align?1:-1)*s.margin)),o<this._obj.offsetHeight&&("middle"==s.valign&&"center"!=s.align&&"x"!=s.layout?f=(this._obj.offsetHeight-o)/2:"bottom"==s.valign&&(f=this._obj.offsetHeight-o),s.margin&&"middle"!=s.valign&&(f+=("top"==s.valign?1:-1)*s.margin)),n.style.left=_+"px",n.style.top=f+"px",h.save(),i=0;i<l.length;i++)u=l[i],s.values&&s.values[i].$hidden?(c=!0,d=s.values[i].disableColor?s.values[i].disableColor:"#d9d9d9"):(c=!1,d=s.values?s.values[i].color:this._settings.color.call(this,t[i])),this._drawLegendMarker(h,u.offsetLeft+_,u.offsetTop+f,d,u.offsetHeight,c,i);h.restore(),l=null},_drawLegendText:function(t,e,i,s){var n="";"x"==this._settings.legend.layout&&(n="float:left;");var o=dhtmlx.html.create("DIV",{style:n+"padding-left:"+(10+this._settings.legend.marker.width)+"px","class":"dhx_chart_legend_item"+(s?" hidden":"")},e);return arguments.length>2&&o.setAttribute("series_id",i),t.appendChild(o),o},_drawLegendMarker:function(t,e,i,s,n,o,l){var r=[],a=this._settings.legend.marker,h=this._settings.legend.values,d=h&&h[l].markerType?h[l].markerType:a.type;if(s&&(t.fillStyle=s,t.strokeStyle=this._getDarkenColor(s,.75)),t.beginPath(),"round"!=d&&a.radius)if("item"==d){if(this._settings.line&&"scatter"!=this._settings.view&&!this._settings.disableLines){t.beginPath(),t.lineWidth=this._series[l].line.width,t.strokeStyle=o?s:this._series[l].line.color.call(this,{});var c=e+5,u=i+n/2;t.moveTo(c,u);var _=c+a.width;t.lineTo(_,u),t.stroke()}var f=this._series[l].item,p=parseInt(f.radius.call(this,{}),10)||0;p&&(t.beginPath(),o?(t.lineWidth=f.borderWidth,t.strokeStyle=s,t.fillStyle=s):(t.lineWidth=f.borderWidth,t.fillStyle=f.color.call(this,{}),t.strokeStyle=f.borderColor.call(this,{}),t.globalAlpha=f.alpha.call(this,{})),t.beginPath(),e+=a.width/2+5,i+=n/2,this._strokeChartItem(t,e,i,p+1,f.type),t.fill(),t.stroke()),t.globalAlpha=1}else t.lineWidth=1,e+=5,i+=parseInt(n/2-a.height/2,10),r=[[e+a.radius,i+a.radius,a.radius,Math.PI,3*Math.PI/2,!1],[e+a.width-a.radius,i],[e+a.width-a.radius,i+a.radius,a.radius,-Math.PI/2,0,!1],[e+a.width,i+a.height-a.radius],[e+a.width-a.radius,i+a.height-a.radius,a.radius,0,Math.PI/2,!1],[e+a.radius,i+a.height],[e+a.radius,i+a.height-a.radius,a.radius,Math.PI/2,Math.PI,!1],[e,i+a.radius]],this._path(t,r);else{t.lineWidth=a.height,t.lineCap=d,e+=t.lineWidth/2+5,i+=n/2,t.moveTo(e,i);var _=e+a.width-a.height+1;t.lineTo(_,i)}t.stroke(),t.fill()},_getDarkenColor:function(t,e){var i,s;return s=dhtmlx.math.toRgb(t),i=dhtmlx.math.rgbToHsv(s[0],s[1],s[2]),i[2]=i[2]*e,"rgb("+dhtmlx.math.hsvToRgb(i[0],i[1],i[2])+")"},_getChartBounds:function(t,e){var i,s,n,o;if(i=this._settings.padding.left,s=this._settings.padding.top,n=t-this._settings.padding.right,o=e-this._settings.padding.bottom,this._settings.legend){var l=this._settings.legend,r=this._settings.legend.width,a=this._settings.legend.height;"x"==l.layout?"center"==l.valign?"right"==l.align?n-=r:"left"==l.align&&(i+=r):"bottom"==l.valign?o-=a:s+=a:"right"==l.align?n-=r:"left"==l.align&&(i+=r)}return{start:{x:i,y:s},end:{x:n,y:o}}},_getStackedLimits:function(t){var e,i,s,n,o;if(this._settings.yAxis&&"undefined"!=typeof this._settings.yAxis.end&&"undefined"!=typeof this._settings.yAxis.start&&this._settings.yAxis.step)s=parseFloat(this._settings.yAxis.end),n=parseFloat(this._settings.yAxis.start);else{for(e=0;e<t.length;e++)for(t[e].$sum=0,t[e].$min=1/0,i=0;i<this._series.length;i++)o=parseFloat(this._series[i].value(t[e])||0),isNaN(o)||(-1!=this._series[i].view.toLowerCase().indexOf("stacked")&&(t[e].$sum+=o),o<t[e].$min&&(t[e].$min=o));for(s=-1/0,n=1/0,e=0;e<t.length;e++)t[e].$sum>s&&(s=t[e].$sum),t[e].$min<n&&(n=t[e].$min);n>0&&(n=0)}return{max:s,min:n}},_setBarGradient:function(t,e,i,s,n,o,l,r){var a,h,d,c,u,_;return"light"==o?(a="x"==r?t.createLinearGradient(e,i,s,i):t.createLinearGradient(e,i,e,n),_=[[0,"#FFFFFF"],[.9,l],[1,l]],h=2):"falling"==o||"rising"==o?(a="x"==r?t.createLinearGradient(e,i,s,i):t.createLinearGradient(e,i,e,n),d=dhtmlx.math.toRgb(l),c=dhtmlx.math.rgbToHsv(d[0],d[1],d[2]),c[1]*=.5,u="rgb("+dhtmlx.math.hsvToRgb(c[0],c[1],c[2])+")","falling"==o?_=[[0,u],[.7,l],[1,l]]:"rising"==o&&(_=[[0,l],[.3,l],[1,u]]),h=0):(t.globalAlpha=.37,h=0,a="x"==r?t.createLinearGradient(e,n,e,i):t.createLinearGradient(e,i,s,i),_=[[0,"#9d9d9d"],[.3,"#e8e8e8"],[.45,"#ffffff"],[.55,"#ffffff"],[.7,"#e8e8e8"],[1,"#9d9d9d"]]),this._gradient(a,_),{gradient:a,offset:h}},_getPositionByAngle:function(t,e,i,s){return t*=-1,e+=Math.cos(t)*s,i-=Math.sin(t)*s,{x:e,y:i}},_gradient:function(t,e){for(var i=0;i<e.length;i++)t.addColorStop(e[i][0],e[i][1])},_path:function(t,e){var i,s;for(i=0;i<e.length;i++)s=i?"lineTo":"moveTo",e[i].length>2&&(s="arc"),t[s].apply(t,e[i])},_circle:function(t,e,i,s){t.arc(e,i,s,2*Math.PI,!0)},_addMapRect:function(t,e,i,s,n){t.addRect(e,[i[0].x-s.x,i[0].y-s.y,i[1].x-s.x,i[1].y-s.y],n)}},dhtmlx.compat("layout"),dhtmlx.ui.pager=function(t){this.name="Pager",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(t,"dhx_pager"),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.SingleRender),dhtmlx.extend(this,dhtmlx.MouseEvents),this._parseSettings(t,{size:10,page:-1,group:5,count:0,type:"default"}),this.data=this._settings,this.refresh()},dhtmlx.ui.pager.prototype={_id:"dhx_p_id",on_click:{dhx_pager_item:function(t,e){this.select(e)}},select:function(t){switch(t){case"next":t=this._settings.page+1;break;case"prev":t=this._settings.page-1;break;case"first":t=0;break;case"last":t=this._settings.limit-1}0>t&&(t=0),t>=this.data.limit&&(t=this.data.limit-1),this.callEvent("onBeforePageChange",[this._settings.page,t])&&(this.data.page=1*t,this.refresh(),this.callEvent("onAfterPageChange",[t]))},types:{"default":{template:dhtmlx.Template.fromHTML("{common.pages()}"),pages:function(t){var e="";if(-1==t.page)return"";t.min=t.page-Math.round((t.group-1)/2),t.max=t.min+t.group-1,t.min<0&&(t.max+=-1*t.min,t.min=0),t.max>=t.limit&&(t.min-=Math.min(t.min,t.max-t.limit+1),t.max=t.limit-1);for(var i=t.min||0;i<=t.max;i++)e+=this.button({id:i,index:i+1,selected:i==t.page?"_selected":""});return e},page:function(t){return t.page+1},first:function(){return this.button({id:"first",index:" &lt;&lt; ",selected:""})},last:function(){return this.button({id:"last",index:" &gt;&gt; ",selected:""})},prev:function(){return this.button({id:"prev",index:"&lt;",selected:""})},next:function(){return this.button({id:"next",index:"&gt;",selected:""})},button:dhtmlx.Template.fromHTML("<div dhx_p_id='{obj.id}' class='dhx_pager_item{obj.selected}'>{obj.index}</div>")}},refresh:function(){var t=this._settings;t.limit=Math.ceil(t.count/t.size),t.limit&&t.limit!=t.old_limit&&(t.page=Math.min(t.limit-1,t.page));var e=t.page;(-1!=e&&e!=t.old_page||t.limit!=t.old_limit)&&(this.render(),this.callEvent("onRefresh",[]),t.old_limit=t.limit,t.old_page=t.page)},template_item_start:dhtmlx.Template.fromHTML("<div>"),template_item_end:dhtmlx.Template.fromHTML("</div>")},dhtmlx.DataProcessor={_dp_init:function(t){var e="_methods";t[e]=["setItemStyle","","changeId","remove"],this.attachEvent("onAfterAdd",function(e){t.setUpdated(e,!0,"inserted")}),this.data.attachEvent("onStoreLoad",dhtmlx.bind(function(t,e){t.getUserData&&t.getUserData(e,this._userdata)},this)),this.attachEvent("onBeforeDelete",function(e){if(t._silent_mode)return!0;var i=t.getState(e);return"inserted"==i?(t.setUpdated(e,!1),!0):"deleted"==i?!1:"true_deleted"==i?!0:(t.setUpdated(e,!0,"deleted"),!1)}),this.attachEvent("onAfterEditStop",function(e){t.setUpdated(e,!0,"updated")}),this.attachEvent("onBindUpdate",function(e){window.setTimeout(function(){t.setUpdated(e.id,!0,"updated")},1)}),e="_getRowData",t[e]=function(t){var e=this.obj.data.get(t),i={};for(var s in e)0!==s.indexOf("_")&&(i[s]=e[s]);return i},e="_clearUpdateFlag",t[e]=function(){},this._userdata={},t.attachEvent("insertCallback",this._dp_callback),t.attachEvent("updateCallback",this._dp_callback),t.attachEvent("deleteCallback",function(t,e){this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj.remove(e)}),dhtmlx.compat("dataProcessor",t)},_dp_callback:function(t,e){this.obj.data.set(e,dhtmlx.DataDriver.xml.getDetails(t.firstChild)),this.obj.data.refresh(e)},setItemStyle:function(t,e){var i=this._locateHTML(t);i&&(i.style.cssText+=";"+e)},changeId:function(t,e){this.data.changeId(t,e),this.refresh()},setUserData:function(t,e,i){t?this.data.get(t)[e]=i:this._userdata[e]=i},getUserData:function(t,e){return t?this.data.get(t)[e]:this._userdata[e]}},function(){var t="_dp_init";dhtmlx.DataProcessor[t]=dhtmlx.DataProcessor._dp_init}(),dhtmlx.compat.dnd=function(){if(window.dhtmlDragAndDropObject){var t="_dragged",e=dhtmlDragAndDropObject.prototype.checkLanding;dhtmlDragAndDropObject.prototype.checkLanding=function(t,i,s){if(e.apply(this,arguments),!s){var n=dhtmlx.DragControl._drag_context=dhtmlx.DragControl._drag_context||{};n.from||(n.from=this.dragStartObject),dhtmlx.DragControl._checkLand(t,i,!0)}};var i=dhtmlDragAndDropObject.prototype.stopDrag;dhtmlDragAndDropObject.prototype.stopDrag=function(t,e,n){n||dhtmlx.DragControl._last&&(dhtmlx.DragControl._active=s.dragStartNode,dhtmlx.DragControl._stopDrag(t,!0)),i.apply(this,arguments)};var s=new dhtmlDragAndDropObject,n=dhtmlx.DragControl._startDrag;dhtmlx.DragControl._startDrag=function(){n.apply(this,arguments);var e=dhtmlx.DragControl._drag_context;if(e){for(var i=[],o=[],l=0;l<e.source.length;l++)i[l]={idd:e.source[l]},o.push(e.source[l]);s.dragStartNode={parentNode:{},parentObject:{idd:i,id:1==o.length?o[0]:o,treeNod:{object:e.from}}},s.dragStartNode.parentObject.treeNod[t]=i,s.dragStartObject=e.from}};var o=dhtmlx.DragControl._checkLand;dhtmlx.DragControl._checkLand=function(t,e,i){o.apply(this,arguments),this._last||i||(t=s.checkLanding(t,e,!0))};var l=dhtmlx.DragControl._stopDrag;dhtmlx.DragControl._stopDrag=function(t,e){l.apply(this,arguments),s.lastLanding&&!e&&s.stopDrag(t,!1,!0)};var r=dhtmlx.DragControl.getMaster;dhtmlx.DragControl.getMaster=function(e){var i=null;if(e&&(i=r.apply(this,arguments)),!i){i=s.dragStartObject;for(var n=[],o=i[t],l=0;l<o.length;l++)n.push(o[l].idd||o[l].id);dhtmlx.DragControl._drag_context.source=n}return i}}},dhtmlx.DataMove={_init:function(){dhtmlx.assert(this.data,"DataMove :: Component doesn't have DataStore")},copy:function(t,e,i,s){var n=this.get(t);return n?(i&&(dhtmlx.assert(i.externalData,"DataMove :: External object doesn't support operation"),n=i.externalData(n)),i=i||this,i.add(i.externalData(n,s),e)):void dhtmlx.log("Warning","Incorrect ID in DataMove::copy")},move:function(t,e,i,s){if(!(t instanceof Array)){if(nid=t,0>e)return void dhtmlx.log("Info","DataMove::move - moving outside of bounds is ignored");var n=this.get(t);return n?(i&&i!=this?(dhtmlx.assert(i.externalData,"DataMove :: External object doesn't support operation"),nid=i.add(i.externalData(n,s),e),this.remove(t)):this.data.move(this.indexById(t),e),nid):void dhtmlx.log("Warning","Incorrect ID in DataMove::move")}for(var o=0;o<t.length;o++){var l=(i||this).indexById(this.move(t[o],e,i,dhtmlx.uid()));t[o+1]&&(e=l+(this.indexById(t[o+1])<l?0:1))}},moveUp:function(t,e){return this.move(t,this.indexById(t)-(e||1))},moveDown:function(t,e){return this.moveUp(t,-1*(e||1))},moveTop:function(t){return this.move(t,0)},moveBottom:function(t){return this.move(t,this.data.dataCount()-1)},externalData:function(t,e){var i=dhtmlx.extend({},t);return i.id=e||dhtmlx.uid(),i.$selected=i.$template=null,i}},dhtmlx.DragControl={_drag_masters:dhtmlx.toArray(["dummy"]),addDrop:function(t,e,i){t=dhtmlx.toNode(t),t.dhx_drop=this._getCtrl(e),i&&(t.dhx_master=!0)},_getCtrl:function(t){t=t||dhtmlx.DragControl;var e=this._drag_masters.find(t);return 0>e&&(e=this._drag_masters.length,this._drag_masters.push(t)),e},addDrag:function(t,e){t=dhtmlx.toNode(t),t.dhx_drag=this._getCtrl(e),dhtmlx.event(t,"mousedown",this._preStart,t)},_preStart:function(t){return dhtmlx.DragControl._active&&(dhtmlx.DragControl._preStartFalse(),dhtmlx.DragControl.destroyDrag()),dhtmlx.DragControl._active=this,dhtmlx.DragControl._start_pos={x:t.pageX,y:t.pageY},dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._startDrag),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._preStartFalse),dhtmlx.DragControl._dhx_drag_sc=dhtmlx.event(this,"scroll",dhtmlx.DragControl._preStartFalse),t.cancelBubble=!0,!1},_preStartFalse:function(){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu),dhtmlx.DragControl._dhx_drag_sc=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_sc)
},_startDrag:function(t){var e={x:t.pageX,y:t.pageY};Math.abs(e.x-dhtmlx.DragControl._start_pos.x)<5&&Math.abs(e.y-dhtmlx.DragControl._start_pos.y)<5||(dhtmlx.DragControl._preStartFalse(),dhtmlx.DragControl.createDrag(t)&&(dhtmlx.DragControl.sendSignal("start"),dhtmlx.DragControl._dhx_drag_mm=dhtmlx.event(document.body,"mousemove",dhtmlx.DragControl._moveDrag),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.event(document.body,"mouseup",dhtmlx.DragControl._stopDrag),dhtmlx.DragControl._moveDrag(t)))},_stopDrag:function(t){dhtmlx.DragControl._dhx_drag_mm=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mm),dhtmlx.DragControl._dhx_drag_mu=dhtmlx.eventRemove(dhtmlx.DragControl._dhx_drag_mu),dhtmlx.DragControl._last&&(dhtmlx.DragControl.onDrop(dhtmlx.DragControl._active,dhtmlx.DragControl._last,this._landing,t),dhtmlx.DragControl.onDragOut(dhtmlx.DragControl._active,dhtmlx.DragControl._last,null,t)),dhtmlx.DragControl.destroyDrag(),dhtmlx.DragControl.sendSignal("stop")},_moveDrag:function(t){var e=dhtmlx.html.pos(t);return dhtmlx.DragControl._html.style.top=e.y+dhtmlx.DragControl.top+"px",dhtmlx.DragControl._html.style.left=e.x+dhtmlx.DragControl.left+"px",dhtmlx.DragControl._skip?dhtmlx.DragControl._skip=!1:dhtmlx.DragControl._checkLand(t.srcElement||t.target,t),t.cancelBubble=!0,!1},_checkLand:function(t,e){for(;t&&"BODY"!=t.tagName;){if(t.dhx_drop){if(this._last&&(this._last!=t||t.dhx_master)&&this.onDragOut(this._active,this._last,t,e),!this._last||this._last!=t||t.dhx_master)return this._last=null,this._landing=this.onDragIn(dhtmlx.DragControl._active,t,e),void(this._landing&&(this._last=t));return}t=t.parentNode}this._last&&(this._last=this._landing=this.onDragOut(this._active,this._last,null,e))},sendSignal:function(t){dhtmlx.DragControl.active="start"==t},getMaster:function(t){return this._drag_masters[t.dhx_drag||t.dhx_drop]},getContext:function(){return this._drag_context},createDrag:function(t){var e,i=dhtmlx.DragControl._active,s=this._drag_masters[i.dhx_drag];if(s.onDragCreate)e=s.onDragCreate(i,t),e.style.position="absolute",e.style.zIndex=dhtmlx.zIndex.drag,e.onmousemove=dhtmlx.DragControl._skip_mark;else{var n=dhtmlx.DragControl.onDrag(i,t);if(!n)return!1;var e=document.createElement("DIV");e.innerHTML=n,e.className="dhx_drag_zone",e.onmousemove=dhtmlx.DragControl._skip_mark,document.body.appendChild(e)}return dhtmlx.DragControl._html=e,!0},_skip_mark:function(){dhtmlx.DragControl._skip=!0},destroyDrag:function(){var t=dhtmlx.DragControl._active,e=this._drag_masters[t.dhx_drag];e&&e.onDragDestroy?e.onDragDestroy(t,dhtmlx.DragControl._html):dhtmlx.html.remove(dhtmlx.DragControl._html),dhtmlx.DragControl._landing=dhtmlx.DragControl._active=dhtmlx.DragControl._last=dhtmlx.DragControl._html=null},top:5,left:5,onDragIn:function(t,e,i){var s=this._drag_masters[e.dhx_drop];return s.onDragIn&&s!=this?s.onDragIn(t,e,i):(e.className=e.className+" dhx_drop_zone",e)},onDragOut:function(t,e,i,s){var n=this._drag_masters[e.dhx_drop];return n.onDragOut&&n!=this?n.onDragOut(t,e,i,s):(e.className=e.className.replace("dhx_drop_zone",""),null)},onDrop:function(t,e,i,s){var n=this._drag_masters[e.dhx_drop];return dhtmlx.DragControl._drag_context.from=dhtmlx.DragControl.getMaster(t),n.onDrop&&n!=this?n.onDrop(t,e,i,s):void e.appendChild(t)},onDrag:function(t,e){var i=this._drag_masters[t.dhx_drag];return i.onDrag&&i!=this?i.onDrag(t,e):(dhtmlx.DragControl._drag_context={source:t,from:t},"<div style='"+t.style.cssText+"'>"+t.innerHTML+"</div>")}},dhtmlx.DragItem={_init:function(){dhtmlx.assert(this.move,"DragItem :: Component doesn't have DataMove interface"),dhtmlx.assert(this.locate,"DragItem :: Component doesn't have RenderStack interface"),dhtmlx.assert(dhtmlx.DragControl,"DragItem :: DragControl is not included"),!this._settings||this._settings.drag?dhtmlx.DragItem._initHandlers(this):this._settings&&(this.drag_setter=function(t){return t&&(this._initHandlers(this),delete this.drag_setter),t}),this.dragMarker&&(this.attachEvent("onBeforeDragIn",this.dragMarker),this.attachEvent("onDragOut",this.dragMarker))},_initHandlers:function(t){dhtmlx.DragControl.addDrop(t._obj,t,!0),dhtmlx.DragControl.addDrag(t._obj,t)},onDragIn:function(t,e,i){var s=this.locate(i)||null,n=dhtmlx.DragControl._drag_context,o=dhtmlx.DragControl.getMaster(t),l=this._locateHTML(s)||this._obj;return l==dhtmlx.DragControl._landing?l:(n.target=s,n.to=o,this.callEvent("onBeforeDragIn",[n,i])?(dhtmlx.html.addCss(l,"dhx_drag_over"),l):(n.id=null,null))},onDragOut:function(t,e,i,s){var n=this.locate(s)||null;i!=this._dataobj&&(n=null);var o=this._locateHTML(n)||(i?dhtmlx.DragControl.getMaster(i)._obj:window.undefined);if(o==dhtmlx.DragControl._landing)return null;var l=dhtmlx.DragControl._drag_context;return dhtmlx.html.removeCss(dhtmlx.DragControl._landing,"dhx_drag_over"),l.target=l.to=null,this.callEvent("onDragOut",[l,s]),null},onDrop:function(t,e,i,s){var n=dhtmlx.DragControl._drag_context;n.to=this,n.index=n.target?this.indexById(n.target):this.dataCount(),n.new_id=dhtmlx.uid(),this.callEvent("onBeforeDrop",[n,s])&&(n.from==n.to?this.move(n.source,n.index):n.from?n.from.move(n.source,n.index,n.to,n.new_id):dhtmlx.error("Unsopported d-n-d combination"),this.callEvent("onAfterDrop",[n,s]))},onDrag:function(t,e){var i=this.locate(e),s=[i];if(i){if(this.getSelected){var n=this.getSelected();-1!=dhtmlx.PowerArray.find.call(n,i)&&(s=n)}var o=dhtmlx.DragControl._drag_context={source:s,start:i};if(o.from=this,this.callEvent("onBeforeDrag",[o,e]))return o.html||this._toHTML(this.get(i))}return null}},dhtmlx.EditAbility={_init:function(){this._edit_id=null,this._edit_bind=null,dhtmlx.assert(this.data,"EditAbility :: Component doesn't have DataStore"),dhtmlx.assert(this._locateHTML,"EditAbility :: Component doesn't have RenderStack"),this.attachEvent("onEditKeyPress",function(t,e,i){13!=t||i?27==t&&this.stopEdit(!0):this.stopEdit()}),this.attachEvent("onBeforeRender",function(){this.stopEdit()})},isEdit:function(){return this._edit_id},edit:function(t){if(this.stopEdit(!1,t)){if(!this.callEvent("onBeforeEditStart",[t]))return;var e=this.data.get(t);if(e.$template)return;e.$template="edit",this.data.refresh(t),this._edit_id=t,this._save_binding(t),this._edit_bind(!0,e),this.callEvent("onAfterEditStart",[t])}},stopEdit:function(t,e){if(!this._edit_id)return!0;if(this._edit_id==e)return!1;var i={};if(t?i=null:this._edit_bind(!1,i),!this.callEvent("onBeforeEditStop",[this._edit_id,i]))return!1;var s=this.data.get(this._edit_id);s.$template=null,t||this._edit_bind(!1,s);var n=this._edit_id;return this._edit_bind=this._edit_id=null,this.data.refresh(n),this.callEvent("onAfterEditStop",[n,i]),!0},_save_binding:function(t){var e=this._locateHTML(t),i="",s="",n=[];if(e){for(var o=e.getElementsByTagName("*"),l="",r=0;r<o.length;r++)1==o[r].nodeType&&(l=o[r].getAttribute("bind"))&&(i+="els["+n.length+"].value="+l+";",s+=l+"=els["+n.length+"].value;",n.push(o[r]),o[r].className+=" dhx_allow_selection",o[r].onselectstart=this._block_native);o=null}i=Function("obj","els",i),s=Function("obj","els",s),this._edit_bind=function(t,e){t?(i(e,n),n.length&&n[0].select&&n[0].select()):s(e,n)}},_block_native:function(t){return(t||event).cancelBubble=!0,!0}},dhtmlx.SelectionModel={_init:function(){this._selected=dhtmlx.toArray(),dhtmlx.assert(this.data,"SelectionModel :: Component doesn't have DataStore"),this.data.attachEvent("onStoreUpdated",dhtmlx.bind(this._data_updated,this)),this.data.attachEvent("onStoreLoad",dhtmlx.bind(this._data_loaded,this)),this.data.attachEvent("onAfterFilter",dhtmlx.bind(this._data_filtered,this)),this.data.attachEvent("onIdChange",dhtmlx.bind(this._id_changed,this))},_id_changed:function(t,e){for(var i=this._selected.length-1;i>=0;i--)this._selected[i]==t&&(this._selected[i]=e)},_data_filtered:function(){for(var t=this._selected.length-1;t>=0;t--){if(this.data.indexById(this._selected[t])<0)var e=this._selected[t];var i=this.item(e);i&&delete i.$selected,this._selected.splice(t,1),this.callEvent("onSelectChange",[e])}},_data_updated:function(t,e,i){"delete"==i?this._selected.remove(t):this.data.dataCount()||this.data._filter_order||(this._selected=dhtmlx.toArray())},_data_loaded:function(){this._settings.select&&this.data.each(function(t){t.$selected&&this.select(t.id)},this)},_select_mark:function(t,e,i){return i||this.callEvent("onBeforeSelect",[t,e])?(this.data.item(t).$selected=e,i?i.push(t):(e?this._selected.push(t):this._selected.remove(t),this._refresh_selection(t)),!0):!1},select:function(t,e,i){if(!t)return this.selectAll();{if(!(t instanceof Array))return this.data.exists(t)?i&&this._selected.length?this.selectAll(this._selected[this._selected.length-1],t):(e||1==this._selected.length&&this._selected[0]==t||(this._silent_selection=!0,this.unselectAll(),this._silent_selection=!1),this.isSelected(t)?void(e&&this.unselect(t)):void(this._select_mark(t,!0)&&this.callEvent("onAfterSelect",[t]))):void dhtmlx.error("Incorrect id in select command: "+t);for(var s=0;s<t.length;s++)this.select(t[s],e,i)}},unselect:function(t){return t?void(this.isSelected(t)&&this._select_mark(t,!1)):this.unselectAll()},selectAll:function(t,e){var i,s=[];i=t||e?this.data.getRange(t||null,e||null):this.data.getRange(),i.each(function(t){var e=this.data.item(t.id);return e.$selected||(this._selected.push(t.id),this._select_mark(t.id,!0,s)),t.id},this),this._refresh_selection(s)},unselectAll:function(){var t=[];this._selected.each(function(e){this._select_mark(e,!1,t)},this),this._selected=dhtmlx.toArray(),this._refresh_selection(t)},isSelected:function(t){return-1!=this._selected.find(t)},getSelected:function(t){switch(this._selected.length){case 0:return t?[]:"";case 1:return t?[this._selected[0]]:this._selected[0];default:return[].concat(this._selected)}},_is_mass_selection:function(t){return t.length>100||t.length>this.data.dataCount/2},_refresh_selection:function(t){if("object"!=typeof t&&(t=[t]),t.length){if(this._is_mass_selection(t))this.data.refresh();else for(var e=0;e<t.length;e++)this.render(t[e],this.data.item(t[e]),"update");this._silent_selection||this.callEvent("onSelectChange",[t])}}},dhtmlx.RenderStack={_init:function(){dhtmlx.assert(this.data,"RenderStack :: Component doesn't have DataStore"),dhtmlx.assert(dhtmlx.Template,"dhtmlx.Template :: dhtmlx.Template is not accessible"),this._html=document.createElement("DIV")},_toHTML:function(t){return dhtmlx.assert(!t.$template||this.type["template_"+t.$template],"RenderStack :: Unknown template: "+t.$template),this.callEvent("onItemRender",[t]),this.type._item_start(t,this.type)+(t.$template?this.type["template_"+t.$template]:this.type.template)(t,this.type)+this.type._item_end},_toHTMLObject:function(t){return this._html.innerHTML=this._toHTML(t),this._html.firstChild},_locateHTML:function(t){if(this._htmlmap)return this._htmlmap[t];this._htmlmap={};for(var e=this._dataobj.childNodes,i=0;i<e.length;i++){var s=e[i].getAttribute(this._id);s&&(this._htmlmap[s]=e[i])}return this._locateHTML(t)},locate:function(t){return dhtmlx.html.locate(t,this._id)},show:function(t){var e=this._locateHTML(t);e&&(this._dataobj.scrollTop=e.offsetTop-this._dataobj.offsetTop)},render:function(t,e,i){if(t){var s=this._locateHTML(t);switch(i){case"update":if(!s)return;var n=this._htmlmap[t]=this._toHTMLObject(e);dhtmlx.html.insertBefore(n,s),dhtmlx.html.remove(s);break;case"delete":if(!s)return;dhtmlx.html.remove(s),delete this._htmlmap[t];break;case"add":var n=this._htmlmap[t]=this._toHTMLObject(e);dhtmlx.html.insertBefore(n,this._locateHTML(this.data.next(t)),this._dataobj);break;case"move":this.render(t,e,"delete"),this.render(t,e,"add");break;default:dhtmlx.error("Unknown render command: "+i)}}else this.callEvent("onBeforeRender",[this.data])&&(this._dataobj.innerHTML=this.data.getRange().map(this._toHTML,this).join(""),this._htmlmap=null);this.callEvent("onAfterRender",[])},pager_setter:function(t){this.attachEvent("onBeforeRender",function(){var t=this._settings.pager._settings;return-1==t.page?!1:(this.data.min=t.page*t.size,this.data.max=(t.page+1)*t.size-1,!0)});var e=new dhtmlx.ui.pager(t),i=dhtmlx.bind(function(){this.data.refresh()},this);return e.attachEvent("onRefresh",i),this.data.attachEvent("onStoreUpdated",function(){var t=this.dataCount();t!=e._settings.count&&(e._settings.count=t,-1==e._settings.page&&(e._settings.page=0),e.refresh())}),e},height_setter:function(t){return"auto"==t&&(this.attachEvent("onAfterRender",this._correct_height),dhtmlx.event(window,"resize",dhtmlx.bind(this._correct_height,this))),t},_correct_height:function(){this._dataobj.style.overflow="hidden",this._dataobj.style.height="1px";var t=this._dataobj.scrollHeight;if(this._dataobj.style.height=t+"px",dhtmlx._isFF){var e=this._dataobj.scrollHeight;e!=t&&(this._dataobj.style.height=e+"px")}this._obj.style.height=this._dataobj.style.height},_getDimension:function(){var t=this.type,e=(t.border||0)+2*(t.padding||0)+2*(t.margin||0);return{x:t.width+e,y:t.height+e}},x_count_setter:function(t){var e=this._getDimension(),i=dhtmlx.$customScroll?0:18;return this._dataobj.style.width=e.x*t+("auto"!=this._settings.height?i:0)+"px",t},y_count_setter:function(t){var e=this._getDimension();return this._dataobj.style.height=e.y*t+"px",t}},dhtmlx.VirtualRenderStack={_init:function(){dhtmlx.assert(this.render,"VirtualRenderStack :: Object must use RenderStack first"),this._htmlmap={},this._dataobj.style.overflowY="scroll",dhtmlx.event(this._dataobj,"scroll",dhtmlx.bind(this._render_visible_rows,this)),dhtmlx.event(window,"resize",dhtmlx.bind(function(){this.render()},this)),this.data._unrendered_area=[],this.data.getIndexRange=this._getIndexRange},_locateHTML:function(t){return this._htmlmap[t]},show:function(t){range=this._getVisibleRange();var e=this.data.indexById(t),i=Math.floor(e/range._dx)*range._y;this._dataobj.scrollTop=i},_getIndexRange:function(t,e){0!==e&&(e=Math.min(e||1/0,this.dataCount()-1));for(var i=dhtmlx.toArray(),s=t||0;e>=s;s++){var n=this.item(this.order[s]);this.order.length>s&&(n?"loading"==n.$template&&this._unrendered_area.push(this.order[s]):(this.order[s]=dhtmlx.uid(),n={id:this.order[s],$template:"loading"},this._unrendered_area.push(this.order[s])),i.push(n))}return i},render:function(t,e,i){if(t){var s=this._locateHTML(t);switch(i){case"update":if(!s)return;var n=this._htmlmap[t]=this._toHTMLObject(e);dhtmlx.html.insertBefore(n,s),dhtmlx.html.remove(s);break;default:this._render_delayed()}}else this.callEvent("onBeforeRender",[this.data])&&(this._htmlmap={},this._render_visible_rows(null,!0),this._wait_for_render=!1,this.callEvent("onAfterRender",[]))},_render_delayed:function(){this._wait_for_render||(this._wait_for_render=!0,window.setTimeout(dhtmlx.bind(function(){this.render()},this),1))},_create_placeholder:function(t){var e=document.createElement("DIV");return e.style.cssText="height:"+t+"px; width:100%; overflow:hidden;",e},_render_visible_rows:function(t,e){this.data._unrendered_area=[];var i=this._getVisibleRange();(!this._dataobj.firstChild||e)&&(this._dataobj.innerHTML="",this._dataobj.appendChild(this._create_placeholder(i._max)),this._htmlrows=[this._dataobj.firstChild]);for(var s=Math.max(i._from,0),n=this.data.max||0===this.data.max?this.data.max:1/0;s<=i._height;){for(;this._htmlrows[s]&&this._htmlrows[s]._filled&&s<=i._height;)s++;if(s>i._height)break;for(var o=s;!this._htmlrows[o];)o--;var l=this._htmlrows[o],r=s*i._dx+(this.data.min||0);if(r>n)break;var a=Math.min(r+i._dx-1,n),h=this._create_placeholder(i._y),d=this.data.getIndexRange(r,a);if(!d.length)break;h.innerHTML=d.map(this._toHTML,this).join("");for(var c=0;c<d.length;c++)this._htmlmap[this.data.idByIndex(r+c)]=h.childNodes[c];var u=parseInt(l.style.height,10),_=(s-o)*i._y,f=u-_-i._y;if(dhtmlx.html.insertBefore(h,_?l.nextSibling:l,this._dataobj),this._htmlrows[s]=h,h._filled=!0,0>=_&&f>0)l.style.height=f+"px",this._htmlrows[s+1]=l;else if(0>_?dhtmlx.html.remove(l):l.style.height=_+"px",f>0){var p=this._htmlrows[s+1]=this._create_placeholder(f);dhtmlx.html.insertBefore(p,h.nextSibling,this._dataobj)}s++}if(this.data._unrendered_area.length){var m=this.indexById(this.data._unrendered_area[0]),g=this.indexById(this.data._unrendered_area.pop())+1;if(g>m){if(!this.callEvent("onDataRequest",[m,g-m]))return!1;dhtmlx.assert(this.data.feed,"Data feed is missed"),this.data.feed.call(this,m,g-m)}}if(dhtmlx._isIE){var b=this._getVisibleRange();b._from!=i._from&&this._render_visible_rows()}},_getVisibleRange:function(){var t=dhtmlx.$customScroll?0:18,e=this._dataobj.scrollTop,i=Math.max(this._dataobj.scrollWidth,this._dataobj.offsetWidth)-t,s=this._dataobj.offsetHeight,n=(this.type,this._getDimension()),o=Math.floor(i/n.x)||1,l=Math.floor(e/n.y),r=Math.ceil((s+e)/n.y)-1,a=this.data.max?this.data.max-this.data.min:this.data.dataCount(),h=Math.ceil(a/o)*n.y;return{_from:l,_height:r,_top:e,_max:h,_y:n.y,_dx:o}}},dhtmlXDataView=function(t){this.name="DataView",this.version="3.0",dhtmlx.assert_enabled()&&this._assert(),dhtmlx.extend(this,dhtmlx.Settings),this._parseContainer(t,"dhx_dataview"),dhtmlx.extend(this,dhtmlx.AtomDataLoader),dhtmlx.extend(this,dhtmlx.DataLoader),dhtmlx.extend(this,dhtmlx.EventSystem),dhtmlx.extend(this,dhtmlx.RenderStack),dhtmlx.extend(this,dhtmlx.SelectionModel),dhtmlx.extend(this,dhtmlx.MouseEvents),dhtmlx.extend(this,dhtmlx.KeyEvents),dhtmlx.extend(this,dhtmlx.EditAbility),dhtmlx.extend(this,dhtmlx.DataMove),dhtmlx.extend(this,dhtmlx.DragItem),dhtmlx.extend(this,dhtmlx.DataProcessor),dhtmlx.extend(this,dhtmlx.AutoTooltip),dhtmlx.extend(this,dhtmlx.Destruction),this.data.attachEvent("onStoreUpdated",dhtmlx.bind(function(){this.render.apply(this,arguments)},this)),this._parseSettings(t,{drag:!1,edit:!1,select:"multiselect",type:"default"}),"auto"==this._settings.height||this._settings.renderAll||dhtmlx.extend(this,dhtmlx.VirtualRenderStack),this.data.provideApi(this,!0),dhtmlx.$customScroll&&dhtmlx.CustomScroll.enable(this)},dhtmlXDataView.prototype={bind:function(){dhx.BaseBind.legacyBind.apply(this,arguments)},sync:function(){dhx.BaseBind.legacySync.apply(this,arguments)},dragMarker:function(t){var e=this._locateHTML(t.target);if(this.type.drag_marker&&(this._drag_marker&&(this._drag_marker.style.backgroundImage="",this._drag_marker.style.backgroundRepeat=""),e&&(e.style.backgroundImage="url("+(dhtmlx.image_path||"")+this.type.drag_marker+")",e.style.backgroundRepeat="no-repeat",this._drag_marker=e)),e&&this._settings.auto_scroll){var i=e.offsetTop,s=e.offsetHeight,n=this._obj.scrollTop,o=this._obj.offsetHeight;i-s>=0&&n>i-.75*s?n=Math.max(i-s,0):i+s/.75>n+o&&(n+=s),this._obj.scrollTop=n}return!0},_id:"dhx_f_id",on_click:{dhx_dataview_item:function(t,e){this.stopEdit(!1,e)&&this._settings.select&&("multiselect"==this._settings.select?this.select(e,t.ctrlKey,t.shiftKey):this.select(e))}},on_dblclick:{dhx_dataview_item:function(t,e){this._settings.edit&&this.edit(e)}},on_mouse_move:{},types:{"default":{css:"default",template:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>{obj.text}</div>"),template_edit:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'><textarea style='width:100%; height:100%;' bind='obj.text'></textarea></div>"),template_loading:dhtmlx.Template.fromHTML("<div style='padding:10px; white-space:nowrap; overflow:hidden;'>Loading...</div>"),width:210,height:115,margin:0,padding:10,border:1}},template_item_start:dhtmlx.Template.fromHTML("<div dhx_f_id='{-obj.id}' class='dhx_dataview_item dhx_dataview_{obj.css}_item{-obj.$selected?_selected:}' style='width:{obj.width}px; height:{obj.height}px; padding:{obj.padding}px; margin:{obj.margin}px; float:left; overflow:hidden;'>"),template_item_end:dhtmlx.Template.fromHTML("</div>")},dhtmlx.compat("layout"),xmlPointer.prototype={text:function(){if(!_isFF)return this.d.xml;var t=new XMLSerializer;return t.serializeToString(this.d)},get:function(t){return this.d.getAttribute(t)},exists:function(){return!!this.d},content:function(){return this.d.firstChild?this.d.firstChild.wholeText||this.d.firstChild.data:""},each:function(t,e,i,s){var n=this.d.childNodes,o=new xmlPointer;if(n.length)for(s=s||0;s<n.length;s++)if(n[s].tagName==t&&(o.d=n[s],-1==e.apply(i,[o,s])))return},get_all:function(){for(var t={},e=this.d.attributes,i=0;i<e.length;i++)t[e[i].name]=e[i].value;return t},sub:function(t){var e=this.d.childNodes,i=new xmlPointer;if(e.length)for(var s=0;s<e.length;s++)if(e[s].tagName==t)return i.d=e[s],i},up:function(){return new xmlPointer(this.d.parentNode)},set:function(t,e){this.d.setAttribute(t,e)},clone:function(){return new xmlPointer(this.d)},sub_exists:function(t){var e=this.d.childNodes;if(e.length)for(var i=0;i<e.length;i++)if(e[i].tagName==t)return!0;return!1},through:function(t,e,i,s,n){var o=this.d.childNodes;if(o.length)for(var l=0;l<o.length;l++){if(o[l].tagName==t&&null!=o[l].getAttribute(e)&&""!=o[l].getAttribute(e)&&(!i||o[l].getAttribute(e)==i)){var r=new xmlPointer(o[l]);s.apply(n,[r,l])}var a=this.d;this.d=o[l],this.through(t,e,i,s,n),this.d=a}}},dhtmlXTreeObject.prototype.setDataMode=function(t){this._datamode=t},dhtmlXTreeObject.prototype._doContClick=function(t,e){if(!e&&2!=t.button)return this._acMenu&&(this._acMenu.hideContextMenu?this._acMenu.hideContextMenu():this.cMenu._contextEnd()),!0;for(var i=_isIE?t.srcElement:t.target;i&&"BODY"!=i.tagName&&!i.parentObject;)i=i.parentNode;if(!i||!i.parentObject)return!0;var s=i.parentObject;if(this.callEvent("onRightClick",[s.id,t])||((t.srcElement||t.target).oncontextmenu=function(t){return(t||event).cancelBubble=!0,!1}),this._acMenu=s.cMenu||this.cMenu,this._acMenu){if(!this.callEvent("onBeforeContextMenu",[s.id]))return!0;if(_isMacOS||((t.srcElement||t.target).oncontextmenu=function(t){return(t||event).cancelBubble=!0,!1}),this._acMenu.showContextMenu){var n=window.document.documentElement,o=window.document.body,l=new Array(n.scrollLeft||o.scrollLeft,n.scrollTop||o.scrollTop);if(_isIE)var r=t.clientX+l[0],a=t.clientY+l[1];else var r=t.pageX,a=t.pageY;this._acMenu.showContextMenu(r-1,a-1),this.contextID=s.id,t.cancelBubble=!0,this._acMenu._skip_hide=!0}else i.contextMenuId=s.id,i.contextMenu=this._acMenu,i.a=this._acMenu._contextStart,i.a(i,t),i.a=null;return!1}return!0},dhtmlXTreeObject.prototype.enableIEImageFix=function(t){t?(this._getImg=function(){var t=document.createElement("DIV");return t.innerHTML="&nbsp;",t.className="dhx_bg_img_fix",t},this._setSrc=function(t,e){t.style.backgroundImage="url("+e+")"},this._getSrc=function(t){var e=t.style.backgroundImage;return e.substr(4,e.length-5).replace(/(^")|("$)/g,"")}):(this._getImg=function(t){return document.createElement(t==this.rootId?"div":"img")},this._setSrc=function(t,e){t.src=e},this._getSrc=function(t){return t.src})},dhtmlXTreeObject.prototype.destructor=function(){for(var t in this._idpull){var e=this._idpull[t];e&&(e.parentObject=null,e.treeNod=null,e.childNodes=null,e.span=null,e.tr.nodem=null,e.tr=null,e.htmlNode.objBelong=null,e.htmlNode=null,this._idpull[t]=null)}this.parentObject.innerHTML="",this.XMLLoader&&this.XMLLoader.destructor(),this.allTree.onselectstart=null,this.allTree.oncontextmenu=null,this.allTree.onmousedown=null;for(var t in this)this[t]=null},cObject.prototype=new Object,cObject.prototype.clone=function(){function t(){}return t.prototype=this,new t},dhtmlXTreeObject.prototype._globalIdStorageAdd=function(t,e){return this._globalIdStorageFind(t,1,1)?(t=t+"_"+(new Date).valueOf(),this._globalIdStorageAdd(t,e)):(this._idpull[t]=e,this._pullSize++,t)},dhtmlXTreeObject.prototype._globalIdStorageSub=function(t){this._idpull[t]&&(this._unselectItem(this._idpull[t]),this._idpull[t]=null,this._pullSize--),this._locker&&this._locker[t]&&(this._locker[t]=!1)},dhtmlXTreeObject.prototype._globalIdStorageFind=function(t,e,i,s){var n=this._idpull[t];if(n){if(n.unParsed&&!i&&this.reParse(n,0),this._srnd&&!n.htmlNode&&this._buildSRND(n,i),s&&this._edsbpsA)for(var o=0;o<this._edsbpsA.length;o++)if(this._edsbpsA[o][2]==t)return dhtmlxError.throwError("getItem","Requested item still in parsing process.",t),null;return n}return this.slowParse&&0!=t&&!e?this.preParse(t):null},dhtmlXTreeObject.prototype._getSubItemsXML=function(t){var e=[];return t.each("item",function(t){e.push(t.get("id"))},this),e.join(this.dlmtr)},dhtmlXTreeObject.prototype.enableSmartXMLParsing=function(t){this.slowParse=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.findXML=function(){},dhtmlXTreeObject.prototype._getAllCheckedXML=function(t,e,i){var s=[];return 2==i&&t.through("item","checked",-1,function(t){s.push(t.get("id"))},this),1==i&&t.through("item","id",null,function(t){t.get("checked")&&-1!=t.get("checked")&&s.push(t.get("id"))},this),0==i&&t.through("item","id",null,function(t){t.get("checked")&&0!=t.get("checked")||s.push(t.get("id"))},this),s.length?e+(e?this.dlmtr:"")+s.join(this.dlmtr):e?e:""},dhtmlXTreeObject.prototype._setSubCheckedXML=function(t,e){var i=t?"1":"";e.through("item","id",null,function(t){t.get("disabled")&&0!=t.get("disabled")||t.set("checked",i)},this)},dhtmlXTreeObject.prototype._getAllScraggyItemsXML=function(t){var e=[],i=function(t){t.sub_exists("item")?t.each("item",i,this):e.push(t.get("id"))};return i(t),e.join(",")},dhtmlXTreeObject.prototype._getAllFatItemsXML=function(t){var e=[],i=function(t){t.sub_exists("item")&&(e.push(t.get("id")),t.each("item",i,this))};return i(t),e.join(",")},dhtmlXTreeObject.prototype._getAllSubItemsXML=function(t,e,i){var e=[];return i.through("item","id",null,function(t){e.push(t.get("id"))},this),e.join(",")},dhtmlXTreeObject.prototype.reParse=function(t){var e=this;this.parsCount||e.callEvent("onXLS",[e,t.id]),this.xmlstate=1;var i=t.unParsed;t.unParsed=0,this.XMLloadingWarning=1;var s=this.parsingOn,n=this.waitUpdateXML,o=this.parsedArray;this.parsedArray=new Array,this.waitUpdateXML=!1,this.parsingOn=t.id,this.parsedArray=new Array,this.setCheckList="",this._parse(i,t.id,2);for(var l=this.setCheckList.split(this.dlmtr),r=0;r<this.parsedArray.length;r++)t.htmlNode.childNodes[0].appendChild(this.parsedArray[r]);i.get("order")&&"none"!=i.get("order")&&this._reorderBranch(t,i.get("order"),!0),this.oldsmcheck=this.smcheck,this.smcheck=!1;for(var a=0;a<l.length;a++)l[a]&&this.setCheck(l[a],1);return this.smcheck=this.oldsmcheck,this.parsingOn=s,this.waitUpdateXML=n,this.parsedArray=o,this.XMLloadingWarning=0,this._redrawFrom(this,t),this._srnd&&!t._sready&&this.prepareSR(t.id),this.xmlstate=0,!0},dhtmlXTreeObject.prototype.preParse=function(t){if(!t||!this._p)return null;var e=!1;if(this._p.clone().through("item","id",t,function(t){return this._globalIdStorageFind(t.up().get("id")),e=!0},this),e){var i=this._globalIdStorageFind(t,!0,!1);i||dhtmlxError.throwError("getItem","The item "+t+" not operable. Seems you have non-unique|incorrect IDs in tree's XML.",t)}return i},dhtmlXTreeObject.prototype._escape=function(t){switch(this.utfesc){case"none":return t;case"utf8":return encodeURIComponent(t);default:return escape(t)}},dhtmlXTreeObject.prototype._drawNewTr=function(t){var e=document.createElement("tr"),i=document.createElement("td"),s=document.createElement("td");return i.appendChild(document.createTextNode(" ")),s.colSpan=3,s.appendChild(t),e.appendChild(i),e.appendChild(s),e},dhtmlXTreeObject.prototype.loadXMLString=function(t,e){var i=this;this.parsCount||this.callEvent("onXLS",[i,null]),this.xmlstate=1,e&&(this.XMLLoader.waitCall=e),this.XMLLoader.loadXMLString(t)},dhtmlXTreeObject.prototype.loadXML=function(t,e){if(this._datamode&&"xml"!=this._datamode)return this["load"+this._datamode.toUpperCase()](t,e);var i=this;this.parsCount||this.callEvent("onXLS",[i,this._ld_id]),this._ld_id=null,this.xmlstate=1,this.XMLLoader=new dtmlXMLLoaderObject(this._parseXMLTree,this,!0,this.no_cashe),e&&(this.XMLLoader.waitCall=e),this.XMLLoader.loadXML(t)},dhtmlXTreeObject.prototype._attachChildNode=function(t,e,i,s,n,o,l,r,a,h,d){h&&h.parentObject&&(t=h.parentObject),0==t.XMLload&&this.XMLsource&&!this.XMLloadingWarning&&(t.XMLload=1,this._loadDynXML(t.id));var c=t.childsCount,u=t.childNodes;if(d&&d.tr.previousSibling&&(d.tr.previousSibling.previousSibling?h=d.tr.previousSibling.nodem:r=r.replace("TOP","")+",TOP"),h){var _,f;for(_=0;c>_;_++)if(u[_]==h){for(f=c;f!=_;f--)u[1+f]=u[f];break}_++,c=_}if(r)for(var p=r.split(","),m=0;m<p.length;m++)switch(p[m]){case"TOP":for(t.childsCount>0&&(h=new Object,h.tr=t.childNodes[0].tr.previousSibling),t._has_top=!0,_=c;_>0;_--)u[_]=u[_-1];c=0}var g;(g=this._idpull[e])&&-1==g.span||(g=u[c]=new dhtmlXTreeItemObject(e,i,t,this,s,1),e=u[c].id,t.childsCount++),g.htmlNode||(g.label=i,g.htmlNode=this._createItem(this.checkBoxOff?1:0,g),g.htmlNode.objBelong=g),n&&(g.images[0]=n),o&&(g.images[1]=o),l&&(g.images[2]=l);var b=this._drawNewTr(g.htmlNode);if((this.XMLloadingWarning||this._hAdI)&&(g.htmlNode.parentNode.parentNode.style.display="none"),h&&h.tr&&h.tr.nextSibling?t.htmlNode.childNodes[0].insertBefore(b,h.tr.nextSibling):this.parsingOn==t.id?this.parsedArray[this.parsedArray.length]=b:t.htmlNode.childNodes[0].appendChild(b),h&&!h.span&&(h=null),this.XMLsource&&(g.XMLload=a&&0!=a?0:1),g.tr=b,b.nodem=g,0==t.itemId&&(b.childNodes[0].className="hiddenRow"),(t._r_logic||this._frbtr)&&this._setSrc(g.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.imPath+this.radioArray[0]),r)for(var p=r.split(","),m=0;m<p.length;m++)switch(p[m]){case"SELECT":this.selectItem(e,!1);break;case"CALL":this.selectItem(e,!0);break;case"CHILD":g.XMLload=0;break;case"CHECKED":this.XMLloadingWarning?this.setCheckList+=this.dlmtr+e:this.setCheck(e,1);break;case"HCHECKED":this._setCheck(g,"unsure");break;case"OPEN":g.openMe=1}if(!this.XMLloadingWarning&&(this._getOpenState(t)<0&&!this._hAdI&&this.openItem(t.id),h&&(this._correctPlus(h),this._correctLine(h)),this._correctPlus(t),this._correctLine(t),this._correctPlus(g),t.childsCount>=2&&(this._correctPlus(u[t.childsCount-2]),this._correctLine(u[t.childsCount-2])),2!=t.childsCount&&this._correctPlus(u[0]),this.tscheck&&this._correctCheckStates(t),this._onradh))if(1==this.xmlstate){var v=this.onXLE;this.onXLE=function(t){this._onradh(e),v&&v(t)}}else this._onradh(e);return g},dhtmlXTreeObject.prototype.enableContextMenu=function(t){t&&(this.cMenu=t)},dhtmlXTreeObject.prototype.setItemContextMenu=function(t,e){for(var i=t.toString().split(this.dlmtr),s=0;s<i.length;s++){var n=this._globalIdStorageFind(i[s]);n&&(n.cMenu=e)}},dhtmlXTreeObject.prototype.insertNewItem=function(t,e,i,s,n,o,l,r,a){var h=this._globalIdStorageFind(t);if(!h)return-1;var d=this._attachChildNode(h,e,i,s,n,o,l,r,a);return this._idpull[this.rootId].XMLload||(this._idpull[this.rootId].XMLload=1),!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(h),d},dhtmlXTreeObject.prototype.insertNewChild=function(t,e,i,s,n,o,l,r,a){return this.insertNewItem(t,e,i,s,n,o,l,r,a)},dhtmlXTreeObject.prototype._parseXMLTree=function(t,e,i,s,n){var o=new xmlPointer(n.getXMLTopNode("tree"));t._parse(o),t._p=o},dhtmlXTreeObject.prototype._parseItem=function(t,e,i,s){var n;if(this._srnd&&(!this._idpull[n=t.get("id")]||!this._idpull[n].span))return void this._addItemSRND(e.id,n,t);var o=t.get_all();if("object"==typeof this.waitUpdateXML&&!this.waitUpdateXML[o.id])return void this._parse(t,o.id,1);(null===o.text||"undefined"==typeof o.text)&&(o.text=t.sub("itemtext"),o.text&&(o.text=o.text.content()));var l=[];if(o.select&&l.push("SELECT"),o.top&&l.push("TOP"),o.call&&(this.nodeAskingCall=o.id),-1==o.checked?l.push("HCHECKED"):o.checked&&l.push("CHECKED"),o.open&&l.push("OPEN"),this.waitUpdateXML)if(this._globalIdStorageFind(o.id))var r=this.updateItem(o.id,o.text,o.im0,o.im1,o.im2,o.checked,o.child);else{0==this.npl?l.push("TOP"):i=e.childNodes[this.npl];var r=this._attachChildNode(e,o.id,o.text,0,o.im0,o.im1,o.im2,l.join(","),o.child,0,i);o.id=r.id,i=null}else var r=this._attachChildNode(e,o.id,o.text,0,o.im0,o.im1,o.im2,l.join(","),o.child,s||0,i);if(o.tooltip&&(r.span.parentNode.parentNode.title=o.tooltip),o.style&&(r.span.style.cssText?r.span.style.cssText+=";"+o.style:r.span.setAttribute("style",r.span.getAttribute("style")+"; "+o.style)),o.radio&&(r._r_logic=!0),o.nocheckbox){var a=r.span.parentNode.previousSibling.previousSibling;
a.style.display="none",r.nocheckbox=!0}o.disabled&&(null!=o.checked&&this._setCheck(r,o.checked),this.disableCheckbox(r,1)),r._acc=o.child||0,this.parserExtension&&this.parserExtension._parseExtension.call(this,t,o,e?e.id:0),this.setItemColor(r,o.aCol,o.sCol),"1"==o.locked&&this.lockItem(r.id,!0,!0),(o.imwidth||o.imheight)&&this.setIconSize(o.imwidth,o.imheight,r),("0"==o.closeable||"1"==o.closeable)&&this.setItemCloseable(r,o.closeable);var h="";o.topoffset&&this.setItemTopOffset(r,o.topoffset),this.slowParse&&"object"!=typeof this.waitUpdateXML?(!r.childsCount&&t.sub_exists("item")&&(r.unParsed=t.clone()),t.each("userdata",function(t){this.setUserData(o.id,t.get("name"),t.content())},this)):t.sub_exists("item")&&(h=this._parse(t,o.id,1)),""!=h&&(this.nodeAskingCall=h),t.each("userdata",function(e){this.setUserData(t.get("id"),e.get("name"),e.content())},this)},dhtmlXTreeObject.prototype._parse=function(t,e,i,s){if(this._srnd&&!this.parentObject.offsetHeight){var n=this;return window.setTimeout(function(){n._parse(t,e,i,s)},100)}if(t.exists()){if(this.skipLock=!0,!e){e=t.get("id");var o=t.get("dhx_security");o&&(dhtmlx.security_key=o),t.get("radio")&&(this.htmlNode._r_logic=!0),this.parsingOn=e,this.parsedArray=new Array,this.setCheckList="",this.nodeAskingCall=""}var l=this._globalIdStorageFind(e);if(!l)return dhtmlxError.throwError("DataStructure","XML refers to not existing parent");if(this.parsCount=this.parsCount?this.parsCount+1:1,this.XMLloadingWarning=1,!l.childsCount||s||this._edsbps||l._has_top)var r=0;else var r=0;if(this.npl=0,t.each("item",function(s,n){return l.XMLload=1,this._parseItem(s,l,0,r),this._edsbps&&this.npl==this._edsbpsC?(this._distributedStart(t,n+1,e,i,l.childsCount),-1):void this.npl++},this,s),!i){if(t.each("userdata",function(e){this.setUserData(t.get("id"),e.get("name"),e.content())},this),l.XMLload=1,this.waitUpdateXML){this.waitUpdateXML=!1;for(var a=l.childsCount-1;a>=0;a--)l.childNodes[a]._dmark&&this.deleteItem(l.childNodes[a].id)}for(var a=(this._globalIdStorageFind(this.parsingOn),0);a<this.parsedArray.length;a++)l.htmlNode.childNodes[0].appendChild(this.parsedArray[a]);this.parsedArray=[],this.lastLoadedXMLId=e,this.XMLloadingWarning=0;for(var h=this.setCheckList.split(this.dlmtr),d=0;d<h.length;d++)h[d]&&this.setCheck(h[d],1);this.XMLsource&&this.tscheck&&this.smcheck&&l.id!=this.rootId&&(0===l.checkstate?this._setSubChecked(0,l):1===l.checkstate&&this._setSubChecked(1,l)),this._redrawFrom(this,null,s),t.get("order")&&"none"!=t.get("order")&&this._reorderBranch(l,t.get("order"),!0),""!=this.nodeAskingCall&&this.callEvent("onClick",[this.nodeAskingCall,this.getSelectedItemId()]),this._branchUpdate&&this._branchUpdateNext(t)}if(1==this.parsCount){if(this.parsingOn=null,this._srnd&&l.id!=this.rootId&&(this.prepareSR(l.id),this.XMLsource&&this.openItem(l.id)),t.through("item","open",null,function(t){this.openItem(t.get("id"))},this),!this._edsbps||!this._edsbpsA.length){var c=this;window.setTimeout(function(){c.callEvent("onXLE",[c,e])},1),this.xmlstate=0}this.skipLock=!1}this.parsCount--;var c=this;return this._edsbps&&window.setTimeout(function(){c._distributedStep(e)},this._edsbpsD),!i&&this.onXLE&&this.onXLE(this,e),this.nodeAskingCall}},dhtmlXTreeObject.prototype._branchUpdateNext=function(t){t.each("item",function(t){var e=t.get("id");(!this._idpull[e]||this._idpull[e].XMLload)&&(this._branchUpdate++,this.smartRefreshItem(t.get("id"),t))},this),this._branchUpdate--},dhtmlXTreeObject.prototype.checkUserData=function(t,e){if(1==t.nodeType&&"userdata"==t.tagName){var i=t.getAttribute("name");i&&t.childNodes[0]&&this.setUserData(e,i,t.childNodes[0].data)}},dhtmlXTreeObject.prototype._redrawFrom=function(t,e,i,s){if(e)n=e;else{var n=t._globalIdStorageFind(t.lastLoadedXMLId);if(t.lastLoadedXMLId=-1,!n)return 0}for(var o=0,l=i?i-1:0;l<n.childsCount;l++)if(this._branchUpdate&&1!=this._getOpenState(n)||e&&1!=s||(n.childNodes[l].htmlNode.parentNode.parentNode.style.display=""),1==n.childNodes[l].openMe&&(this._openItem(n.childNodes[l]),n.childNodes[l].openMe=0),t._redrawFrom(t,n.childNodes[l]),null!=this.childCalc){if((n.childNodes[l].unParsed||!n.childNodes[l].XMLload&&this.XMLsource)&&(n.childNodes[l].span.innerHTML=n.childNodes[l]._acc?n.childNodes[l].label+this.htmlcA+n.childNodes[l]._acc+this.htmlcB:n.childNodes[l].label),n.childNodes[l].childNodes.length&&this.childCalc){if(1==this.childCalc&&(n.childNodes[l].span.innerHTML=n.childNodes[l].label+this.htmlcA+n.childNodes[l].childsCount+this.htmlcB),2==this.childCalc){var r=n.childNodes[l].childsCount-(n.childNodes[l].pureChilds||0);r&&(n.childNodes[l].span.innerHTML=n.childNodes[l].label+this.htmlcA+r+this.htmlcB),n.pureChilds?n.pureChilds++:n.pureChilds=1}if(3==this.childCalc&&(n.childNodes[l].span.innerHTML=n.childNodes[l].label+this.htmlcA+n.childNodes[l]._acc+this.htmlcB),4==this.childCalc){var r=n.childNodes[l]._acc;r&&(n.childNodes[l].span.innerHTML=n.childNodes[l].label+this.htmlcA+r+this.htmlcB)}}else 4==this.childCalc&&o++;o+=n.childNodes[l]._acc,3==this.childCalc&&o++}n.unParsed||!n.XMLload&&this.XMLsource||(n._acc=o),t._correctLine(n),t._correctPlus(n),this.childCalc&&!e&&t._fixChildCountLabel(n)},dhtmlXTreeObject.prototype._createSelf=function(){var t=document.createElement("div");return t.className="containerTableStyle",t.style.width=this.width,t.style.height=this.height,this.parentObject.appendChild(t),t},dhtmlXTreeObject.prototype._xcloseAll=function(t){if(!t.unParsed){if(this.rootId!=t.id){if(!t.htmlNode)return;for(var e=t.htmlNode.childNodes[0].childNodes,i=e.length,s=1;i>s;s++)e[s].style.display="none";this._correctPlus(t)}for(var s=0;s<t.childsCount;s++)t.childNodes[s].childsCount&&this._xcloseAll(t.childNodes[s])}},dhtmlXTreeObject.prototype._xopenAll=function(t){this._HideShow(t,2);for(var e=0;e<t.childsCount;e++)this._xopenAll(t.childNodes[e])},dhtmlXTreeObject.prototype._correctPlus=function(t){if(t.htmlNode){var e=t.htmlNode.childNodes[0].childNodes[0].childNodes[0].lastChild,i=t.htmlNode.childNodes[0].childNodes[0].childNodes[2].childNodes[0],s=this.lineArray;if(this.XMLsource&&!t.XMLload){var s=this.plusArray;if(this._setSrc(i,this.iconURL+t.images[2]),this._txtimg)return e.innerHTML="[+]"}else if(t.childsCount||t.unParsed)if(t.htmlNode.childNodes[0].childNodes[1]&&"none"!=t.htmlNode.childNodes[0].childNodes[1].style.display){if(!t.wsign)var s=this.minusArray;if(this._setSrc(i,this.iconURL+t.images[1]),this._txtimg)return e.innerHTML="[-]"}else{if(!t.wsign)var s=this.plusArray;if(this._setSrc(i,this.iconURL+t.images[2]),this._txtimg)return e.innerHTML="[+]"}else this._setSrc(i,this.iconURL+t.images[0]);var n=2;t.treeNod.treeLinesOn?(t.parentObject&&(n=this._getCountStatus(t.id,t.parentObject)),this._setSrc(e,this.imPath+s[n])):this._setSrc(e,this.imPath+s[3])}},dhtmlXTreeObject.prototype._correctLine=function(t){if(t.htmlNode){var e=t.parentObject;if(e)if(0!=this._getLineStatus(t.id,e)&&this.treeLinesOn)for(var i=1;i<=t.childsCount&&t.htmlNode.childNodes[0].childNodes[i];i++)t.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundImage="url("+this.imPath+this.lineArray[5]+")",t.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundRepeat="repeat-y";else for(var i=1;i<=t.childsCount&&t.htmlNode.childNodes[0].childNodes[i];i++)t.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundImage="",t.htmlNode.childNodes[0].childNodes[i].childNodes[0].style.backgroundRepeat=""}},dhtmlXTreeObject.prototype._getCountStatus=function(t,e){return e.childsCount<=1?e.id==this.rootId?4:0:e.childNodes[0].id==t?e.id==this.rootId?2:1:e.childNodes[e.childsCount-1].id==t?0:1},dhtmlXTreeObject.prototype._getLineStatus=function(t,e){return e.childNodes[e.childsCount-1].id==t?0:1},dhtmlXTreeObject.prototype._HideShow=function(t,e){if(this.XMLsource&&!t.XMLload){if(1==e)return;return t.XMLload=1,void this._loadDynXML(t.id)}t.unParsed&&this.reParse(t);var i=t.htmlNode.childNodes[0].childNodes,s=i.length;if(s>1){"none"==i[1].style.display&&1!=e||2==e?nodestyle="":(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0",nodestyle="none");for(var n=1;s>n;n++)i[n].style.display=nodestyle}this._correctPlus(t)},dhtmlXTreeObject.prototype._getOpenState=function(t){if(!t.htmlNode)return 0;var e=t.htmlNode.childNodes[0].childNodes;return e.length<=1?0:"none"!=e[1].style.display?1:-1},dhtmlXTreeObject.prototype.onRowClick2=function(){var t=this.parentObject.treeNod;return t.callEvent("onDblClick",[this.parentObject.id,t])?(this.parentObject.closeble&&"0"!=this.parentObject.closeble?t._HideShow(this.parentObject):t._HideShow(this.parentObject,2),t.checkEvent("onOpenEnd")&&(t.xmlstate?(t._oie_onXLE.push(t.onXLE),t.onXLE=t._epnFHe):t.callEvent("onOpenEnd",[this.parentObject.id,t._getOpenState(this.parentObject)])),!1):!1},dhtmlXTreeObject.prototype.onRowClick=function(){var t=this.parentObject.treeNod;return t.callEvent("onOpenStart",[this.parentObject.id,t._getOpenState(this.parentObject)])?(this.parentObject.closeble&&"0"!=this.parentObject.closeble?t._HideShow(this.parentObject):t._HideShow(this.parentObject,2),void(t.checkEvent("onOpenEnd")&&(t.xmlstate?(t._oie_onXLE.push(t.onXLE),t.onXLE=t._epnFHe):t.callEvent("onOpenEnd",[this.parentObject.id,t._getOpenState(this.parentObject)])))):0},dhtmlXTreeObject.prototype._epnFHe=function(t,e,i){e!=this.rootId&&this.callEvent("onOpenEnd",[e,t.getOpenState(e)]),t.onXLE=t._oie_onXLE.pop(),i||t._oie_onXLE.length||t.onXLE&&t.onXLE(t,e)},dhtmlXTreeObject.prototype.onRowClickDown=function(t){t=t||window.event;var e=this.parentObject.treeNod;e._selectItem(this.parentObject,t)},dhtmlXTreeObject.prototype.getSelectedItemId=function(){for(var t=new Array,e=0;e<this._selected.length;e++)t[e]=this._selected[e].id;return t.join(this.dlmtr)},dhtmlXTreeObject.prototype._selectItem=function(t,e){if(this.checkEvent("onSelect")&&(this._onSSCFold=this.getSelectedItemId()),this._amsel&&e&&(e.ctrlKey||e.metaKey||e.shiftKey)||this._unselectItems(),t.i_sel&&this._amsel&&e&&(e.ctrlKey||e.metaKey))this._unselectItem(t);else if(!(t.i_sel||this._amselS&&0!=this._selected.length&&this._selected[0].parentObject!=t.parentObject))if(this._amsel&&e&&e.shiftKey&&0!=this._selected.length&&this._selected[this._selected.length-1].parentObject==t.parentObject){var i=this._getIndex(this._selected[this._selected.length-1]),s=this._getIndex(t);if(i>s){var n=i;i=s,s=n}for(var o=i;s>=o;o++)t.parentObject.childNodes[o].i_sel||this._markItem(t.parentObject.childNodes[o])}else this._markItem(t);if(this.checkEvent("onSelect")){var l=this.getSelectedItemId();l!=this._onSSCFold&&this.callEvent("onSelect",[l])}},dhtmlXTreeObject.prototype._markItem=function(t){t.scolor&&(t.span.style.color=t.scolor),t.span.className="selectedTreeRow",t.i_sel=!0,this._selected[this._selected.length]=t},dhtmlXTreeObject.prototype.getIndexById=function(t){var e=this._globalIdStorageFind(t);return e?this._getIndex(e):null},dhtmlXTreeObject.prototype._getIndex=function(t){for(var e=t.parentObject,i=0;i<e.childsCount;i++)if(e.childNodes[i]==t)return i},dhtmlXTreeObject.prototype._unselectItem=function(t){if(t&&t.i_sel){t.span.className="standartTreeRow",t.acolor&&(t.span.style.color=t.acolor),t.i_sel=!1;for(var e=0;e<this._selected.length;e++)if(!this._selected[e].i_sel){this._selected.splice(e,1);break}}},dhtmlXTreeObject.prototype._unselectItems=function(){for(var t=0;t<this._selected.length;t++){var e=this._selected[t];e.span.className="standartTreeRow",e.acolor&&(e.span.style.color=e.acolor),e.i_sel=!1}this._selected=new Array},dhtmlXTreeObject.prototype.onRowSelect=function(t,e,i){t=t||window.event;var s=this.parentObject;e&&(s=e.parentObject);var n=s.treeNod,o=n.getSelectedItemId();t&&t.skipUnSel||n._selectItem(s,t),i||(s.actionHandler?s.actionHandler(s.id,o):n.callEvent("onClick",[s.id,o]))},dhtmlXTreeObject.prototype._correctCheckStates=function(t){if(this.tscheck&&t&&t.id!=this.rootId){var e=t.childNodes,i=0,s=0;if(0!=t.childsCount){for(var n=0;n<t.childsCount;n++)if(!e[n].dscheck)if(0==e[n].checkstate)i=1;else{if(1!=e[n].checkstate){i=1,s=1;break}s=1}i&&s?this._setCheck(t,"unsure"):i?this._setCheck(t,!1):this._setCheck(t,!0),this._correctCheckStates(t.parentObject)}}},dhtmlXTreeObject.prototype.onCheckBoxClick=function(){return this.treeNod.callEvent("onBeforeCheck",[this.parentObject.id,this.parentObject.checkstate])?this.parentObject.dscheck?!0:(this.treeNod.tscheck?1==this.parentObject.checkstate?this.treeNod._setSubChecked(!1,this.parentObject):this.treeNod._setSubChecked(!0,this.parentObject):1==this.parentObject.checkstate?this.treeNod._setCheck(this.parentObject,!1):this.treeNod._setCheck(this.parentObject,!0),this.treeNod._correctCheckStates(this.parentObject.parentObject),this.treeNod.callEvent("onCheck",[this.parentObject.id,this.parentObject.checkstate])):void 0},dhtmlXTreeObject.prototype._createItem=function(t,e,i){var s=document.createElement("table");s.cellSpacing=0,s.cellPadding=0,s.border=0,this.hfMode&&(s.style.tableLayout="fixed"),s.style.margin=0,s.style.padding=0;var n=document.createElement("tbody"),o=document.createElement("tr"),l=document.createElement("td");if(l.className="standartTreeImage",this._txtimg){var r=document.createElement("div");l.appendChild(r),r.className="dhx_tree_textSign"}else{var r=this._getImg(e.id);r.border="0","IMG"==r.tagName&&(r.align="absmiddle"),l.appendChild(r),r.style.padding=0,r.style.margin=0,r.style.width=this.def_line_img_x,r.style.height=this.def_line_img_y}var a=document.createElement("td"),h=this._getImg(this.cBROf?this.rootId:e.id);h.checked=0,this._setSrc(h,this.imPath+this.checkArray[0]),h.style.width="18px",h.style.height="18px",t||(a.style.display="none"),a.appendChild(h),this.cBROf||"IMG"!=h.tagName||(h.align="absmiddle"),h.onclick=this.onCheckBoxClick,h.treeNod=this,h.parentObject=e,a.width=window._KHTMLrv?"16px":"20px";var d=document.createElement("td");d.className="standartTreeImage";var c=this._getImg(this.timgen?e.id:this.rootId);c.onmousedown=this._preventNsDrag,c.ondragstart=this._preventNsDrag,c.border="0",this._aimgs&&(c.parentObject=e,"IMG"==c.tagName&&(c.align="absmiddle"),c.onclick=this.onRowSelect),i||this._setSrc(c,this.iconURL+this.imageArray[0]),d.appendChild(c),c.style.padding=0,c.style.margin=0,this.timgen?(d.style.width=c.style.width=this.def_img_x,c.style.height=this.def_img_y):(c.style.width="0px",c.style.height="0px",(_isOpera||window._KHTMLrv)&&(d.style.display="none"));var u=document.createElement("td");return u.className="standartTreeRow",e.span=document.createElement("span"),e.span.className="standartTreeRow",this.mlitems?(e.span.style.width=this.mlitems,e.span.style.display="block"):u.noWrap=!0,_isIE&&_isIE>7?u.style.width="999999px":window._KHTMLrv||(u.style.width="100%"),e.span.innerHTML=e.label,u.appendChild(e.span),u.parentObject=e,l.parentObject=e,u.onclick=this.onRowSelect,l.onclick=this.onRowClick,u.ondblclick=this.onRowClick2,this.ettip&&(o.title=e.label),this.dragAndDropOff&&(this._aimgs&&(this.dragger.addDraggableItem(d,this),d.parentObject=e),this.dragger.addDraggableItem(u,this)),e.span.style.paddingLeft="5px",e.span.style.paddingRight="5px",u.style.verticalAlign="",u.style.fontSize="10pt",u.style.cursor=this.style_pointer,o.appendChild(l),o.appendChild(a),o.appendChild(d),o.appendChild(u),n.appendChild(o),s.appendChild(n),(this.ehlt||this.checkEvent("onMouseIn")||this.checkEvent("onMouseOut"))&&(o.onmousemove=this._itemMouseIn,o[_isIE?"onmouseleave":"onmouseout"]=this._itemMouseOut),s},dhtmlXTreeObject.prototype.setImagePath=function(t){this.imPath=t,this.iconURL=t},dhtmlXTreeObject.prototype.setIconPath=function(t){this.iconURL=t},dhtmlXTreeObject.prototype._getLeafCount=function(t){for(var e=0,i=0;i<t.childsCount;i++)0==t.childNodes[i].childsCount&&e++;return e},dhtmlXTreeObject.prototype._getChildCounterValue=function(t){var e=this._globalIdStorageFind(t);if(!e)return 0;if(e.unParsed||!e.XMLload&&this.XMLsource)return e._acc;switch(this.childCalc){case 1:return e.childsCount;case 2:return this._getLeafCount(e);case 3:return e._acc;case 4:return e._acc}},dhtmlXTreeObject.prototype._fixChildCountLabel=function(t){if(null!=this.childCalc){if(t.unParsed||!t.XMLload&&this.XMLsource)return void(t.span.innerHTML=t._acc?t.label+this.htmlcA+t._acc+this.htmlcB:t.label);switch(this.childCalc){case 1:t.span.innerHTML=0!=t.childsCount?t.label+this.htmlcA+t.childsCount+this.htmlcB:t.label;break;case 2:var e=this._getLeafCount(t);t.span.innerHTML=0!=e?t.label+this.htmlcA+e+this.htmlcB:t.label;break;case 3:if(0!=t.childsCount){for(var i=0,s=0;s<t.childsCount;s++)t.childNodes[s]._acc||(t.childNodes[s]._acc=0),i+=1*t.childNodes[s]._acc;i+=1*t.childsCount,t.span.innerHTML=t.label+this.htmlcA+i+this.htmlcB,t._acc=i}else t.span.innerHTML=t.label,t._acc=0;t.parentObject&&t.parentObject!=this.htmlNode&&this._fixChildCountLabel(t.parentObject);break;case 4:if(0!=t.childsCount){for(var i=0,s=0;s<t.childsCount;s++)t.childNodes[s]._acc||(t.childNodes[s]._acc=1),i+=1*t.childNodes[s]._acc;t.span.innerHTML=t.label+this.htmlcA+i+this.htmlcB,t._acc=i}else t.span.innerHTML=t.label,t._acc=1;t.parentObject&&t.parentObject!=this.htmlNode&&this._fixChildCountLabel(t.parentObject)}}},dhtmlXTreeObject.prototype.setChildCalcMode=function(t){switch(t){case"child":this.childCalc=1;break;case"leafs":this.childCalc=2;break;case"childrec":this.childCalc=3;break;case"leafsrec":this.childCalc=4;break;case"disabled":this.childCalc=null;break;default:this.childCalc=4}},dhtmlXTreeObject.prototype.setChildCalcHTML=function(t,e){this.htmlcA=t,this.htmlcB=e},dhtmlXTreeObject.prototype.setOnRightClickHandler=function(t){this.attachEvent("onRightClick",t)},dhtmlXTreeObject.prototype.setOnClickHandler=function(t){this.attachEvent("onClick",t)},dhtmlXTreeObject.prototype.setOnSelectStateChange=function(t){this.attachEvent("onSelect",t)},dhtmlXTreeObject.prototype.setXMLAutoLoading=function(t){this.XMLsource=t},dhtmlXTreeObject.prototype.setOnCheckHandler=function(t){this.attachEvent("onCheck",t)},dhtmlXTreeObject.prototype.setOnOpenHandler=function(t){this.attachEvent("onOpenStart",t)},dhtmlXTreeObject.prototype.setOnOpenStartHandler=function(t){this.attachEvent("onOpenStart",t)},dhtmlXTreeObject.prototype.setOnOpenEndHandler=function(t){this.attachEvent("onOpenEnd",t)},dhtmlXTreeObject.prototype.setOnDblClickHandler=function(t){this.attachEvent("onDblClick",t)},dhtmlXTreeObject.prototype.openAllItems=function(t){var e=this._globalIdStorageFind(t);return e?void this._xopenAll(e):0},dhtmlXTreeObject.prototype.getOpenState=function(t){var e=this._globalIdStorageFind(t);return e?this._getOpenState(e):""},dhtmlXTreeObject.prototype.closeAllItems=function(t){t===window.undefined&&(t=this.rootId);var e=this._globalIdStorageFind(t);return e?(this._xcloseAll(e),this.allTree.childNodes[0].border="1",void(this.allTree.childNodes[0].border="0")):0},dhtmlXTreeObject.prototype.setUserData=function(t,e,i){var s=this._globalIdStorageFind(t,0,!0);s&&("hint"==e&&(s.htmlNode.childNodes[0].childNodes[0].title=i),"undefined"==typeof s.userData["t_"+e]&&(s._userdatalist?s._userdatalist+=","+e:s._userdatalist=e),s.userData["t_"+e]=i)},dhtmlXTreeObject.prototype.getUserData=function(t,e){var i=this._globalIdStorageFind(t,0,!0);if(i)return i.userData["t_"+e]},dhtmlXTreeObject.prototype.getItemColor=function(t){var e=this._globalIdStorageFind(t);if(!e)return 0;var i=new Object;return e.acolor&&(i.acolor=e.acolor),e.scolor&&(i.scolor=e.scolor),i},dhtmlXTreeObject.prototype.setItemColor=function(t,e,i){if(t&&t.span)var s=t;else var s=this._globalIdStorageFind(t);return s?(s.i_sel?i&&(s.span.style.color=i):e&&(s.span.style.color=e),i&&(s.scolor=i),e&&(s.acolor=e),void 0):0},dhtmlXTreeObject.prototype.getItemText=function(t){var e=this._globalIdStorageFind(t);return e?e.htmlNode.childNodes[0].childNodes[0].childNodes[3].childNodes[0].innerHTML:0},dhtmlXTreeObject.prototype.getParentId=function(t){var e=this._globalIdStorageFind(t);return e&&e.parentObject?e.parentObject.id:""},dhtmlXTreeObject.prototype.changeItemId=function(t,e){if(t!=e){var i=this._globalIdStorageFind(t);if(!i)return 0;i.id=e,i.span.contextMenuId=e,this._idpull[e]=this._idpull[t],delete this._idpull[t]}},dhtmlXTreeObject.prototype.doCut=function(){this.nodeCut&&this.clearCut(),this.nodeCut=(new Array).concat(this._selected);for(var t=0;t<this.nodeCut.length;t++){var e=this.nodeCut[t];e._cimgs=new Array,e._cimgs[0]=e.images[0],e._cimgs[1]=e.images[1],e._cimgs[2]=e.images[2],e.images[0]=e.images[1]=e.images[2]=this.cutImage,this._correctPlus(e)}},dhtmlXTreeObject.prototype.doPaste=function(t){var e=this._globalIdStorageFind(t);if(!e)return 0;for(var i=0;i<this.nodeCut.length;i++)this._checkPNodes(e,this.nodeCut[i])||this._moveNode(this.nodeCut[i],e);this.clearCut()},dhtmlXTreeObject.prototype.clearCut=function(){for(var t=0;t<this.nodeCut.length;t++){var e=this.nodeCut[t];e.images[0]=e._cimgs[0],e.images[1]=e._cimgs[1],e.images[2]=e._cimgs[2],this._correctPlus(e)}this.nodeCut=new Array},dhtmlXTreeObject.prototype._moveNode=function(t,e){var i=this.dadmodec;if(1==i){var s=e;if(this.dadmodefix<0){for(;;){if(s=this._getPrevNode(s),-1==s){s=this.htmlNode;break}if(0==s.tr||""==s.tr.style.display||!s.parentObject)break}var n=s,o=e}else{s.tr&&s.tr.nextSibling&&s.tr.nextSibling.nodem&&this._getOpenState(s)<1?s=s.tr.nextSibling.nodem:(s=this._getNextNode(s),-1==s&&(s=this.htmlNode));var o=s,n=e}return this._getNodeLevel(n,0)>this._getNodeLevel(o,0)?this.dropLower?o.id!=this.rootId?this._moveNodeTo(t,o.parentObject,o):this._moveNodeTo(t,this.htmlNode,null):this._moveNodeTo(t,n.parentObject):this._moveNodeTo(t,o.parentObject,o)}return this._moveNodeTo(t,e)},dhtmlXTreeObject.prototype._fixNodesCollection=function(t,e){var i=0,s=t.childNodes,n=t.childsCount-1;if(e!=s[n]){for(var o=0;n>o;o++)s[o]==s[n]&&(s[o]=s[o+1],s[o+1]=s[n]);for(var o=0;n+1>o;o++)if(i){var l=s[o];s[o]=i,i=l}else s[o]==e&&(i=s[o],s[o]=s[n])}},dhtmlXTreeObject.prototype._recreateBranch=function(t,e,i,s){var n,o="";if(i){for(n=0;n<e.childsCount&&e.childNodes[n]!=i;n++);0!=n?i=e.childNodes[n-1]:(o="TOP",i="")}var l=this._onradh;this._onradh=null;var r=this._attachChildNode(e,t.id,t.label,0,t.images[0],t.images[1],t.images[2],o,0,i);if(r._userdatalist=t._userdatalist,r.userData=t.userData.clone(),t._attrs){r._attrs={};for(var a in t._attrs)r._attrs[a]=t._attrs[a]}r.XMLload=t.XMLload,l&&(this._onradh=l,this._onradh(r.id)),t.treeNod.dpcpy?t.treeNod._globalIdStorageFind(t.id):r.unParsed=t.unParsed,this._correctPlus(r);for(var n=0;n<t.childsCount;n++)this._recreateBranch(t.childNodes[n],r,0,1);return!s&&this.childCalc&&this._redrawFrom(this,e),r},dhtmlXTreeObject.prototype._moveNodeTo=function(t,e,i){if(t.treeNod._nonTrivialNode)return t.treeNod._nonTrivialNode(this,e,i,t);if(this._checkPNodes(e,t))return!1;if(e.mytype)var s=t.treeNod.lWin!=e.lWin;else var s=t.treeNod.lWin!=e.treeNod.lWin;if(!this.callEvent("onDrag",[t.id,e.id,i?i.id:null,t.treeNod,e.treeNod]))return!1;0==e.XMLload&&this.XMLsource&&(e.XMLload=1,this._loadDynXML(e.id)),this.openItem(e.id);var n=t.treeNod,o=t.parentObject.childsCount,l=t.parentObject;if(s||n.dpcpy){var r=t.id;t=this._recreateBranch(t,e,i),n.dpcpy||n.deleteItem(r)}else{var a=e.childsCount,h=e.childNodes;0==a&&(e._open=!0),n._unselectItem(t),h[a]=t,t.treeNod=e.treeNod,e.childsCount++;var d=this._drawNewTr(h[a].htmlNode);i?(e.htmlNode.childNodes[0].insertBefore(d,i.tr),this._fixNodesCollection(e,i),h=e.childNodes):(e.htmlNode.childNodes[0].appendChild(d),1==this.dadmode&&this._fixNodesCollection(e,i))}if(!n.dpcpy&&!s){var c=t.tr;if(document.all&&-1!=navigator.appVersion.search(/MSIE\ 5\.0/gi)?window.setTimeout(function(){c.parentNode.removeChild(c)},250):t.parentObject.htmlNode.childNodes[0].removeChild(t.tr),i&&e==t.parentObject)l.childNodes[l.childsCount-1]=0;else for(var u=0;u<l.childsCount;u++)if(l.childNodes[u].id==t.id){l.childNodes[u]=0;break}n._compressChildList(l.childsCount,l.childNodes),l.childsCount--}if(!s&&!n.dpcpy){if(t.tr=d,d.nodem=t,t.parentObject=e,n!=e.treeNod){if(t.treeNod._registerBranch(t,n))return;this._clearStyles(t),this._redrawFrom(this,t.parentObject),this._onradh&&this._onradh(t.id)}this._correctPlus(e),this._correctLine(e),this._correctLine(t),this._correctPlus(t),i?this._correctPlus(i):e.childsCount>=2&&(this._correctPlus(h[e.childsCount-2]),this._correctLine(h[e.childsCount-2])),this._correctPlus(h[e.childsCount-1]),this.tscheck&&this._correctCheckStates(e),n.tscheck&&n._correctCheckStates(l)}return o>1&&(n._correctPlus(l.childNodes[o-2]),n._correctLine(l.childNodes[o-2])),n._correctPlus(l),n._correctLine(l),this._fixChildCountLabel(e),n._fixChildCountLabel(l),this.callEvent("onDrop",[t.id,e.id,i?i.id:null,n,e.treeNod]),t.id},dhtmlXTreeObject.prototype._clearStyles=function(t){if(t.htmlNode){var e=t.htmlNode.childNodes[0].childNodes[0].childNodes[1],i=e.nextSibling.nextSibling;t.span.innerHTML=t.label,t.i_sel=!1,t._aimgs&&this.dragger.removeDraggableItem(e.nextSibling),this.checkBoxOff?(e.childNodes[0].style.display="",e.childNodes[0].onclick=this.onCheckBoxClick,this._setSrc(e.childNodes[0],this.imPath+this.checkArray[t.checkstate])):e.style.display="none",e.childNodes[0].treeNod=this,this.dragger.removeDraggableItem(i),this.dragAndDropOff&&this.dragger.addDraggableItem(i,this),this._aimgs&&this.dragger.addDraggableItem(e.nextSibling,this),i.childNodes[0].className="standartTreeRow",i.onclick=this.onRowSelect,i.ondblclick=this.onRowClick2,e.previousSibling.onclick=this.onRowClick,this._correctLine(t),this._correctPlus(t);for(var s=0;s<t.childsCount;s++)this._clearStyles(t.childNodes[s])}},dhtmlXTreeObject.prototype._registerBranch=function(t,e){e&&e._globalIdStorageSub(t.id),t.id=this._globalIdStorageAdd(t.id,t),t.treeNod=this;for(var i=0;i<t.childsCount;i++)this._registerBranch(t.childNodes[i],e);return 0},dhtmlXTreeObject.prototype.enableThreeStateCheckboxes=function(t){this.tscheck=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.setOnMouseInHandler=function(t){this.ehlt=!0,this.attachEvent("onMouseIn",t)},dhtmlXTreeObject.prototype.setOnMouseOutHandler=function(t){this.ehlt=!0,this.attachEvent("onMouseOut",t)},dhtmlXTreeObject.prototype.enableMercyDrag=function(t){this.dpcpy=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.enableTreeImages=function(t){this.timgen=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.enableFixedMode=function(t){this.hfMode=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.enableCheckBoxes=function(t,e){this.checkBoxOff=convertStringToBoolean(t),this.cBROf=!(this.checkBoxOff||convertStringToBoolean(e))},dhtmlXTreeObject.prototype.setStdImages=function(t,e,i){this.imageArray[0]=t,this.imageArray[1]=e,this.imageArray[2]=i},dhtmlXTreeObject.prototype.enableTreeLines=function(t){this.treeLinesOn=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.setImageArrays=function(t,e,i,s,n,o){switch(t){case"plus":this.plusArray[0]=e,this.plusArray[1]=i,this.plusArray[2]=s,this.plusArray[3]=n,this.plusArray[4]=o;break;case"minus":this.minusArray[0]=e,this.minusArray[1]=i,this.minusArray[2]=s,this.minusArray[3]=n,this.minusArray[4]=o}},dhtmlXTreeObject.prototype.openItem=function(t){this.skipLock=!0;var e=this._globalIdStorageFind(t);return e?this._openItem(e):0},dhtmlXTreeObject.prototype._openItem=function(t){var e=this._getOpenState(t);if(0>e||this.XMLsource&&!t.XMLload){if(!this.callEvent("onOpenStart",[t.id,e]))return 0;this._HideShow(t,2),this.checkEvent("onOpenEnd")&&(this.onXLE==this._epnFHe&&this._epnFHe(this,t.id,!0),this.xmlstate&&this.XMLsource?(this._oie_onXLE.push(this.onXLE),this.onXLE=this._epnFHe):this.callEvent("onOpenEnd",[t.id,this._getOpenState(t)]))}else this._srnd&&this._HideShow(t,2);t.parentObject&&!this._skip_open_parent&&this._openItem(t.parentObject)},dhtmlXTreeObject.prototype.closeItem=function(t){if(this.rootId==t)return 0;this.skipLock=!0;var e=this._globalIdStorageFind(t);return e?(e.closeble&&this._HideShow(e,1),void(this.skipLock=!1)):0},dhtmlXTreeObject.prototype.getLevel=function(t){var e=this._globalIdStorageFind(t);return e?this._getNodeLevel(e,0):0},dhtmlXTreeObject.prototype.setItemCloseable=function(t,e){if(e=convertStringToBoolean(e),t&&t.span)var i=t;else var i=this._globalIdStorageFind(t);return i?void(i.closeble=e):0},dhtmlXTreeObject.prototype._getNodeLevel=function(t,e){return t.parentObject?this._getNodeLevel(t.parentObject,e+1):e},dhtmlXTreeObject.prototype.hasChildren=function(t){var e=this._globalIdStorageFind(t);return e?this.XMLsource&&!e.XMLload?!0:e.childsCount:0},dhtmlXTreeObject.prototype._getLeafCount=function(t){for(var e=0,i=0;i<t.childsCount;i++)0==t.childNodes[i].childsCount&&e++;return e},dhtmlXTreeObject.prototype.setItemText=function(t,e,i){var s=this._globalIdStorageFind(t);return s?(s.label=e,s.span.innerHTML=e,this.childCalc&&this._fixChildCountLabel(s),void(s.span.parentNode.parentNode.title=i||"")):0},dhtmlXTreeObject.prototype.getItemTooltip=function(t){var e=this._globalIdStorageFind(t);return e?e.span.parentNode.parentNode._dhx_title||e.span.parentNode.parentNode.title||"":""},dhtmlXTreeObject.prototype.refreshItem=function(t){t||(t=this.rootId);this._globalIdStorageFind(t);this.deleteChildItems(t),this._loadDynXML(t)},dhtmlXTreeObject.prototype.setItemImage2=function(t,e,i,s){var n=this._globalIdStorageFind(t);return n?(n.images[1]=i,n.images[2]=s,n.images[0]=e,void this._correctPlus(n)):0},dhtmlXTreeObject.prototype.setItemImage=function(t,e,i){var s=this._globalIdStorageFind(t);return s?(i?(s.images[1]=e,s.images[2]=i):s.images[0]=e,void this._correctPlus(s)):0},dhtmlXTreeObject.prototype.getSubItems=function(t){var e=this._globalIdStorageFind(t,0,1);if(!e)return 0;if(e.unParsed)return this._getSubItemsXML(e.unParsed);var s="";for(i=0;i<e.childsCount;i++)s?s+=this.dlmtr+e.childNodes[i].id:s=""+e.childNodes[i].id;return s},dhtmlXTreeObject.prototype._getAllScraggyItems=function(t){for(var e="",i=0;i<t.childsCount;i++)if(t.childNodes[i].unParsed||t.childNodes[i].childsCount>0){if(t.childNodes[i].unParsed)var s=this._getAllScraggyItemsXML(t.childNodes[i].unParsed,1);else var s=this._getAllScraggyItems(t.childNodes[i]);s&&(e?e+=this.dlmtr+s:e=s)}else e?e+=this.dlmtr+t.childNodes[i].id:e=""+t.childNodes[i].id;return e},dhtmlXTreeObject.prototype._getAllFatItems=function(t){for(var e="",i=0;i<t.childsCount;i++)if(t.childNodes[i].unParsed||t.childNodes[i].childsCount>0){if(e?e+=this.dlmtr+t.childNodes[i].id:e=""+t.childNodes[i].id,t.childNodes[i].unParsed)var s=this._getAllFatItemsXML(t.childNodes[i].unParsed,1);else var s=this._getAllFatItems(t.childNodes[i]);s&&(e+=this.dlmtr+s)}return e},dhtmlXTreeObject.prototype._getAllSubItems=function(t,e,i){if(i)s=i;else var s=this._globalIdStorageFind(t);if(!s)return 0;e="";for(var n=0;n<s.childsCount;n++){e?e+=this.dlmtr+s.childNodes[n].id:e=""+s.childNodes[n].id;var o=this._getAllSubItems(0,e,s.childNodes[n]);o&&(e+=this.dlmtr+o)}return s.unParsed&&(e=this._getAllSubItemsXML(t,e,s.unParsed)),e},dhtmlXTreeObject.prototype.selectItem=function(t,e,i){e=convertStringToBoolean(e);var s=this._globalIdStorageFind(t);if(!s||!s.parentObject)return 0;this.XMLloadingWarning?s.parentObject.openMe=1:this._openItem(s.parentObject);var n=null;i&&(n=new Object,n.ctrlKey=!0,s.i_sel&&(n.skipUnSel=!0)),e?this.onRowSelect(n,s.htmlNode.childNodes[0].childNodes[0].childNodes[3],!1):this.onRowSelect(n,s.htmlNode.childNodes[0].childNodes[0].childNodes[3],!0)},dhtmlXTreeObject.prototype.getSelectedItemText=function(){for(var t=new Array,e=0;e<this._selected.length;e++)t[e]=this._selected[e].span.innerHTML;return t.join(this.dlmtr)},dhtmlXTreeObject.prototype._compressChildList=function(t,e){t--;for(var i=0;t>i;i++)0==e[i]&&(e[i]=e[i+1],e[i+1]=0)},dhtmlXTreeObject.prototype._deleteNode=function(t,e,i){if(!e||!e.parentObject)return 0;var s=0,n=0;e.tr.nextSibling&&(s=e.tr.nextSibling.nodem),e.tr.previousSibling&&(n=e.tr.previousSibling.nodem);for(var o=e.parentObject,l=o.childsCount,r=o.childNodes,a=0;l>a;a++)if(r[a].id==t){i||o.htmlNode.childNodes[0].removeChild(r[a].tr),r[a]=0;
break}this._compressChildList(l,r),i||o.childsCount--,s&&(this._correctPlus(s),this._correctLine(s)),n&&(this._correctPlus(n),this._correctLine(n)),this.tscheck&&this._correctCheckStates(o),i||this._globalIdStorageRecSub(e)},dhtmlXTreeObject.prototype.setCheck=function(t,e){var i=this._globalIdStorageFind(t,0,1);i&&("unsure"===e?this._setCheck(i,e):(e=convertStringToBoolean(e),this.tscheck&&this.smcheck?this._setSubChecked(e,i):this._setCheck(i,e)),this.smcheck&&this._correctCheckStates(i.parentObject))},dhtmlXTreeObject.prototype._setCheck=function(t,e){if(t){if((t.parentObject._r_logic||this._frbtr)&&e)if(this._frbtrs)this._frbtrL&&this.setCheck(this._frbtrL.id,0),this._frbtrL=t;else for(var i=0;i<t.parentObject.childsCount;i++)this._setCheck(t.parentObject.childNodes[i],0);var s=t.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];t.checkstate="unsure"==e?2:e?1:0,t.dscheck&&(t.checkstate=t.dscheck),this._setSrc(s,this.imPath+(t.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[t.checkstate])}},dhtmlXTreeObject.prototype.setSubChecked=function(t,e){var i=this._globalIdStorageFind(t);this._setSubChecked(e,i),this._correctCheckStates(i.parentObject)},dhtmlXTreeObject.prototype._setSubChecked=function(t,e){if(t=convertStringToBoolean(t),e){if((e.parentObject._r_logic||this._frbtr)&&t)for(var i=0;i<e.parentObject.childsCount;i++)this._setSubChecked(0,e.parentObject.childNodes[i]);if(e.unParsed&&this._setSubCheckedXML(t,e.unParsed),e._r_logic||this._frbtr)this._setSubChecked(t,e.childNodes[0]);else for(var i=0;i<e.childsCount;i++)this._setSubChecked(t,e.childNodes[i]);var s=e.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0];e.checkstate=t?1:0,e.dscheck&&(e.checkstate=e.dscheck),this._setSrc(s,this.imPath+(e.parentObject._r_logic||this._frbtr?this.radioArray:this.checkArray)[e.checkstate])}},dhtmlXTreeObject.prototype.isItemChecked=function(t){var e=this._globalIdStorageFind(t);if(e)return e.checkstate},dhtmlXTreeObject.prototype.deleteChildItems=function(t){var e=this._globalIdStorageFind(t);if(e)for(var i=e.childsCount,s=0;i>s;s++)this._deleteNode(e.childNodes[0].id,e.childNodes[0])},dhtmlXTreeObject.prototype.deleteItem=function(t,e){if(!this._onrdlh||this._onrdlh(t)){var i=this._deleteItem(t,e);i&&this._fixChildCountLabel(i)}this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"},dhtmlXTreeObject.prototype._deleteItem=function(t,e,i){e=convertStringToBoolean(e);var s=this._globalIdStorageFind(t);if(s){var n=this.getParentId(t),o=s.parentObject;return this._deleteNode(t,s,i),this._editCell&&this._editCell.id==t&&(this._editCell=null),this._correctPlus(o),this._correctLine(o),e&&n!=this.rootId&&this.selectItem(n,1),o}},dhtmlXTreeObject.prototype._globalIdStorageRecSub=function(t){for(var e=0;e<t.childsCount;e++)this._globalIdStorageRecSub(t.childNodes[e]),this._globalIdStorageSub(t.childNodes[e].id);this._globalIdStorageSub(t.id);var i=t;i.span=null,i.tr.nodem=null,i.tr=null,i.htmlNode=null},dhtmlXTreeObject.prototype.insertNewNext=function(t,e,i,s,n,o,l,r,a){var h=this._globalIdStorageFind(t);if(!h||!h.parentObject)return 0;var d=this._attachChildNode(0,e,i,s,n,o,l,r,a,h);return!this.XMLloadingWarning&&this.childCalc&&this._fixChildCountLabel(h.parentObject),d},dhtmlXTreeObject.prototype.getItemIdByIndex=function(t,e){var i=this._globalIdStorageFind(t);return!i||e>=i.childsCount?null:i.childNodes[e].id},dhtmlXTreeObject.prototype.getChildItemIdByIndex=function(t,e){var i=this._globalIdStorageFind(t);return!i||e>=i.childsCount?null:i.childNodes[e].id},dhtmlXTreeObject.prototype.setDragHandler=function(t){this.attachEvent("onDrag",t)},dhtmlXTreeObject.prototype._clearMove=function(){this._lastMark&&(this._lastMark.className=this._lastMark.className.replace(/dragAndDropRow/g,""),this._lastMark=null),this.selectionBar.style.display="none",this.allTree.className=this.allTree.className.replace(" selectionBox","")},dhtmlXTreeObject.prototype.enableDragAndDrop=function(t,e){"temporary_disabled"==t?(this.dADTempOff=!1,t=!0):this.dADTempOff=!0,this.dragAndDropOff=convertStringToBoolean(t),this.dragAndDropOff&&this.dragger.addDragLanding(this.allTree,this),arguments.length>1&&(this._ddronr=!convertStringToBoolean(e))},dhtmlXTreeObject.prototype._setMove=function(t,e,i){if(t.parentObject.span){var s=getAbsoluteTop(t),n=getAbsoluteTop(this.allTree)-this.allTree.scrollTop;if(this.dadmodec=this.dadmode,this.dadmodefix=0,2==this.dadmode){var o=i-s+(document.body.scrollTop||document.documentElement.scrollTop)-2-t.offsetHeight/2;Math.abs(o)-t.offsetHeight/6>0?(this.dadmodec=1,0>o&&(this.dadmodefix=0-t.offsetHeight)):this.dadmodec=0}if(0==this.dadmodec){var l=t.parentObject.span;l.className+=" dragAndDropRow",this._lastMark=l}else this._clearMove(),this.selectionBar.style.top=s-n+((parseInt(t.parentObject.span.parentNode.previousSibling.childNodes[0].style.height)||18)-1)+this.dadmodefix+"px",this.selectionBar.style.left="5px",this.allTree.offsetWidth>20&&(this.selectionBar.style.width=this.allTree.offsetWidth-(_isFF?30:25)+"px"),this.selectionBar.style.display="";this._autoScroll(null,s,n)}},dhtmlXTreeObject.prototype._autoScroll=function(t,e,i){this.autoScroll&&(t&&(e=getAbsoluteTop(t),i=getAbsoluteTop(this.allTree)-this.allTree.scrollTop),e-i-parseInt(this.allTree.scrollTop)>parseInt(this.allTree.offsetHeight)-50&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)+20),e-i<parseInt(this.allTree.scrollTop)+30&&(this.allTree.scrollTop=parseInt(this.allTree.scrollTop)-20))},dhtmlXTreeObject.prototype._createDragNode=function(t,e){if(!this.dADTempOff)return null;var i=t.parentObject;if(!this.callEvent("onBeforeDrag",[i.id,e]))return null;i.i_sel||this._selectItem(i,e),this._checkMSelectionLogic();var s=document.createElement("div"),n=new Array;if(this._itim_dg)for(var o=0;o<this._selected.length;o++)n[o]="<table cellspacing='0' cellpadding='0'><tr><td><img width='18px' height='18px' src='"+this._getSrc(this._selected[o].span.parentNode.previousSibling.childNodes[0])+"'></td><td>"+this._selected[o].span.innerHTML+"</td></tr></table>";else n=this.getSelectedItemText().split(this.dlmtr);return s.innerHTML=n.join(""),s.style.position="absolute",s.className="dragSpanDiv",this._dragged=(new Array).concat(this._selected),s},dhtmlXTreeObject.prototype._focusNode=function(t){var e=getAbsoluteTop(t.htmlNode)-getAbsoluteTop(this.allTree);(e>this.allTree.offsetHeight-30||0>e)&&(this.allTree.scrollTop=e+this.allTree.scrollTop)},dhtmlXTreeObject.prototype._preventNsDrag=function(t){return t&&t.preventDefault?(t.preventDefault(),!1):!1},dhtmlXTreeObject.prototype._drag=function(t,e,i){this._autoOpenTimer&&clearTimeout(this._autoOpenTimer),i.parentObject||(i=this.htmlNode.htmlNode.childNodes[0].childNodes[0].childNodes[1].childNodes[0],this.dadmodec=0),this._clearMove();var s=t.parentObject.treeNod;if(s&&s._clearMove&&s._clearMove(""),!this.dragMove||this.dragMove()){if(s&&s._clearMove&&s._dragged)var n=s._dragged;else var n=new Array(t.parentObject);for(var o=i.parentObject,l=0;l<n.length;l++){var r=this._moveNode(n[l],o);this.dadmodec&&r!==!1&&(o=this._globalIdStorageFind(r,!0,!0)),r&&!this._sADnD&&this.selectItem(r,0,1)}}s&&(s._dragged=new Array)},dhtmlXTreeObject.prototype._dragIn=function(t,e,i,s){if(!this.dADTempOff)return 0;var n=e.parentObject,o=t.parentObject;if(o||!this._ddronr){if(!this.callEvent("onDragIn",[n.id,o?o.id:null,n.treeNod,this]))return o&&this._autoScroll(t),0;if(o){if(null==n.childNodes)return this._setMove(t,i,s),t;for(var l=n.treeNod,r=0;r<l._dragged.length;r++)if(this._checkPNodes(o,l._dragged[r]))return this._autoScroll(t),0;this.selectionBar.parentNode.removeChild(this.selectionBar),o.span.parentNode.appendChild(this.selectionBar),this._setMove(t,i,s),this._getOpenState(o)<=0&&(this._autoOpenId=o.id,this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1e3))}else this.allTree.className+=" selectionBox";return t}},dhtmlXTreeObject.prototype._autoOpenItem=function(t,e){e.openItem(e._autoOpenId)},dhtmlXTreeObject.prototype._dragOut=function(){this._clearMove(),this._autoOpenTimer&&clearTimeout(this._autoOpenTimer)},dhtmlXTreeObject.prototype._getNextNode=function(t,e){return!e&&t.childsCount?t.childNodes[0]:t==this.htmlNode?-1:t.tr&&t.tr.nextSibling&&t.tr.nextSibling.nodem?t.tr.nextSibling.nodem:this._getNextNode(t.parentObject,!0)},dhtmlXTreeObject.prototype._lastChild=function(t){return t.childsCount?this._lastChild(t.childNodes[t.childsCount-1]):t},dhtmlXTreeObject.prototype._getPrevNode=function(t){return t.tr&&t.tr.previousSibling&&t.tr.previousSibling.nodem?this._lastChild(t.tr.previousSibling.nodem):t.parentObject?t.parentObject:-1},dhtmlXTreeObject.prototype.findItem=function(t,e,i){var s=this._findNodeByLabel(t,e,i?this.htmlNode:null);return s?(this.selectItem(s.id,!0),this._focusNode(s),s.id):null},dhtmlXTreeObject.prototype.findItemIdByLabel=function(t,e,i){var s=this._findNodeByLabel(t,e,i?this.htmlNode:null);return s?s.id:null},dhtmlXTreeObject.prototype.findStrInXML=function(t,e,i){if(!t.childNodes&&t.item)return this.findStrInJSON(t,e,i);if(!t.childNodes)return!1;for(var s=0;s<t.childNodes.length;s++)if(1==t.childNodes[s].nodeType){var n=t.childNodes[s].getAttribute(e);if(n||"itemtext"!=t.childNodes[s].tagName||(n=t.childNodes[s].firstChild.data),n&&-1!=n.toLowerCase().search(i))return!0;if(this.findStrInXML(t.childNodes[s],e,i))return!0}return!1},dhtmlXTreeObject.prototype.findStrInJSON=function(t,e,i){for(var s=0;s<t.item.length;s++){var n=t.item[s].text;if(n&&-1!=n.toLowerCase().search(i))return!0;if(t.item[s].item&&this.findStrInJSON(t.item[s],e,i))return!0}return!1},dhtmlXTreeObject.prototype._findNodeByLabel=function(t,e,i){var t=t.replace(new RegExp("^( )+"),"").replace(new RegExp("( )+$"),"");t=new RegExp(t.replace(/([\^\.\?\*\+\\\[\]\(\)]{1})/gi,"\\$1").replace(/ /gi,".*"),"gi"),i||(i=this._selected[0],i||(i=this.htmlNode));var s=i;if(e){var n=this._getPrevNode(s);-1==n&&(n=this._lastChild(this.htmlNode)),n.unParsed&&this.findStrInXML(n.unParsed.d,"text",t)?(this.reParse(n),i=this._getPrevNode(s)):i=n,-1==i&&(i=this._lastChild(this.htmlNode))}else i.unParsed&&this.findStrInXML(i.unParsed.d,"text",t)&&this.reParse(i),i=this._getNextNode(s),-1==i&&(i=this.htmlNode.childNodes[0]);for(;i&&i!=s;){if(i.label&&-1!=i.label.search(t))return i;if(e){var n=this._getPrevNode(i);-1==n&&(n=this._lastChild(this.htmlNode)),n.unParsed&&this.findStrInXML(n.unParsed.d,"text",t)?(this.reParse(n),i=this._getPrevNode(i)):i=n,-1==i&&(i=this._lastChild(this.htmlNode))}else{if(-1==i){if(s==this.htmlNode)break;i=this.htmlNode.childNodes[0]}i.unParsed&&this.findStrInXML(i.unParsed.d,"text",t)&&this.reParse(i),i=this._getNextNode(i),-1==i&&(i=this.htmlNode)}}return null},dhtmlXTreeObject.prototype.moveItem=function(t,e,i,s){var n=this._globalIdStorageFind(t);if(!n)return 0;var o=null;switch(e){case"right":alert("Not supported yet");break;case"item_child":var l=(s||this)._globalIdStorageFind(i);if(!l)return 0;o=(s||this)._moveNodeTo(n,l,0);break;case"item_sibling":var l=(s||this)._globalIdStorageFind(i);if(!l)return 0;o=(s||this)._moveNodeTo(n,l.parentObject,l);break;case"item_sibling_next":var l=(s||this)._globalIdStorageFind(i);if(!l)return 0;o=l.tr&&l.tr.nextSibling&&l.tr.nextSibling.nodem?(s||this)._moveNodeTo(n,l.parentObject,l.tr.nextSibling.nodem):(s||this)._moveNodeTo(n,l.parentObject);break;case"left":n.parentObject.parentObject&&(o=this._moveNodeTo(n,n.parentObject.parentObject,n.parentObject));break;case"up":var r=this._getPrevNode(n);if(-1==r||!r.parentObject)return null;o=this._moveNodeTo(n,r.parentObject,r);break;case"up_strict":var r=this._getIndex(n);0!=r&&(o=this._moveNodeTo(n,n.parentObject,n.parentObject.childNodes[r-1]));break;case"down_strict":var r=this._getIndex(n),a=n.parentObject.childsCount-2;r==a?o=this._moveNodeTo(n,n.parentObject):a>r&&(o=this._moveNodeTo(n,n.parentObject,n.parentObject.childNodes[r+2]));break;case"down":var r=this._getNextNode(this._lastChild(n));if(-1==r||!r.parentObject)return;if(r.parentObject==n.parentObject)var r=this._getNextNode(r);if(-1==r)o=this._moveNodeTo(n,n.parentObject);else{if(-1==r||!r.parentObject)return;o=this._moveNodeTo(n,r.parentObject,r)}}return _isIE&&8>_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0"),o},dhtmlXTreeObject.prototype.setDragBehavior=function(t,e){switch(this._sADnD=!convertStringToBoolean(e),t){case"child":this.dadmode=0;break;case"sibling":this.dadmode=1;break;case"complex":this.dadmode=2}},dhtmlXTreeObject.prototype._loadDynXML=function(t,e){e=e||this.XMLsource;var i=(new Date).valueOf();this._ld_id=t,"function"==this.xmlalb?e&&e(this._escape(t)):this.loadXML("name"==this.xmlalb?e+this._escape(t):"xmlname"==this.xmlalb?e+this._escape(t)+".xml?uid="+i:e+getUrlSymbol(e)+"uid="+i+"&id="+this._escape(t))},dhtmlXTreeObject.prototype.enableMultiselection=function(t,e){this._amsel=convertStringToBoolean(t),this._amselS=convertStringToBoolean(e)},dhtmlXTreeObject.prototype._checkMSelectionLogic=function(){for(var t=new Array,e=0;e<this._selected.length;e++)for(var i=0;i<this._selected.length;i++)e!=i&&this._checkPNodes(this._selected[i],this._selected[e])&&(t[t.length]=this._selected[i]);for(var e=0;e<t.length;e++)this._unselectItem(t[e])},dhtmlXTreeObject.prototype._checkPNodes=function(t,e){return this._dcheckf?!1:e==t?1:t.parentObject?this._checkPNodes(t.parentObject,e):0},dhtmlXTreeObject.prototype.disableDropCheck=function(t){this._dcheckf=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.enableDistributedParsing=function(t,e,i){this._edsbps=convertStringToBoolean(t),this._edsbpsA=new Array,this._edsbpsC=e||10,this._edsbpsD=i||250},dhtmlXTreeObject.prototype.getDistributedParsingState=function(){return!(!this._edsbpsA||!this._edsbpsA.length)},dhtmlXTreeObject.prototype.getItemParsingState=function(t){var e=this._globalIdStorageFind(t,!0,!0);if(!e)return 0;if(this._edsbpsA)for(var i=0;i<this._edsbpsA.length;i++)if(this._edsbpsA[i][2]==t)return-1;return 1},dhtmlXTreeObject.prototype._distributedStart=function(t,e,i,s,n){this._edsbpsA||(this._edsbpsA=new Array),this._edsbpsA[this._edsbpsA.length]=[t,e,i,s,n]},dhtmlXTreeObject.prototype._distributedStep=function(t){var e=this;if(!this._edsbpsA||!this._edsbpsA.length)return void(e.XMLloadingWarning=0);var i=this._edsbpsA[0];this.parsedArray=new Array,this._parse(i[0],i[2],i[3],i[1]);var s=this._globalIdStorageFind(i[2]);this._redrawFrom(this,s,i[4],this._getOpenState(s));for(var n=this.setCheckList.split(this.dlmtr),o=0;o<n.length;o++)n[o]&&this.setCheck(n[o],1);this._edsbpsA=(new Array).concat(this._edsbpsA.slice(1)),this._edsbpsA.length||(window.setTimeout(function(){e.onXLE&&e.onXLE(e,t),e.callEvent("onXLE",[e,t])},1),e.xmlstate=0)},dhtmlXTreeObject.prototype.enableTextSigns=function(t){this._txtimg=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.preventIECaching=function(t){this.no_cashe=convertStringToBoolean(t),this.XMLLoader.rSeed=this.no_cashe},dhtmlXTreeObject.prototype.preventIECashing=dhtmlXTreeObject.prototype.preventIECaching,dhtmlXTreeObject.prototype.disableCheckbox=function(t,e){if("object"!=typeof t)var i=this._globalIdStorageFind(t,0,1);else var i=t;i&&(i.dscheck=convertStringToBoolean(e)?(i.checkstate||0)%3+3:i.checkstate>2?i.checkstate-3:i.checkstate,this._setCheck(i),i.dscheck<3&&(i.dscheck=!1))},dhtmlXTreeObject.prototype.smartRefreshBranch=function(t,e){this._branchUpdate=1,this.smartRefreshItem(t,e)},dhtmlXTreeObject.prototype.smartRefreshItem=function(t,e){for(var i=this._globalIdStorageFind(t),s=0;s<i.childsCount;s++)i.childNodes[s]._dmark=!0;this.waitUpdateXML=!0,e&&e.exists?this._parse(e,t):this._loadDynXML(t,e)},dhtmlXTreeObject.prototype.refreshItems=function(t,e){var i=t.toString().split(this.dlmtr);this.waitUpdateXML=new Array;for(var s=0;s<i.length;s++)this.waitUpdateXML[i[s]]=!0;this.loadXML((e||this.XMLsource)+getUrlSymbol(e||this.XMLsource)+"ids="+this._escape(t))},dhtmlXTreeObject.prototype.updateItem=function(t,e,i,s,n,o,l){var r=this._globalIdStorageFind(t);return r.userData=new cObject,e&&(r.label=e),r.images=new Array(i||this.imageArray[0],s||this.imageArray[1],n||this.imageArray[2]),this.setItemText(t,e),o&&this._setCheck(r,!0),"1"!=l||this.hasChildren(t)||(r.XMLload=0),this._correctPlus(r),r._dmark=!1,r},dhtmlXTreeObject.prototype.setDropHandler=function(t){this.attachEvent("onDrop",t)},dhtmlXTreeObject.prototype.setOnLoadingStart=function(t){this.attachEvent("onXLS",t)},dhtmlXTreeObject.prototype.setOnLoadingEnd=function(t){this.attachEvent("onXLE",t)},dhtmlXTreeObject.prototype.setXMLAutoLoadingBehaviour=function(t){this.xmlalb=t},dhtmlXTreeObject.prototype.enableSmartCheckboxes=function(t){this.smcheck=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.getXMLState=function(){return 1==this.xmlstate},dhtmlXTreeObject.prototype.setItemTopOffset=function(t,e){var i;i="object"!=typeof t?this._globalIdStorageFind(t):t;var s=i.span.parentNode.parentNode;i.span.style.paddingBottom="1px";for(var n=0;n<s.childNodes.length;n++){if(0!=n)_isIE?(s.childNodes[n].style.height="18px",s.childNodes[n].style.paddingTop=parseInt(e)+"px"):s.childNodes[n].style.height=18+parseInt(e)+"px";else{var o=s.childNodes[n].firstChild;"DIV"!=s.childNodes[n].firstChild.tagName&&(o=document.createElement("DIV"),s.childNodes[n].insertBefore(o,s.childNodes[n].firstChild)),o.style.height=parseInt(e)+"px",i.parentObject.id==this.rootId&&i.parentObject.childNodes[0]==i||!this.treeLinesOn||(o.style.backgroundImage="url("+this.imPath+this.lineArray[5]+")"),o.innerHTML="&nbsp;",o.style.overflow="hidden",0==parseInt(e)&&s.childNodes[n].removeChild(o)}_isIE||(s.childNodes[n].style.verticalAlign="bottom"),_isIE&&(this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0")}},dhtmlXTreeObject.prototype.setIconSize=function(t,e,i){if(i){if(i&&i.span)var s=i;else var s=this._globalIdStorageFind(i);if(!s)return 0;var n=s.span.parentNode.previousSibling.childNodes[0];t&&(n.style.width=t,window._KHTMLrv&&(n.parentNode.style.width=t)),e&&(n.style.height=e,window._KHTMLrv&&(n.parentNode.style.height=e))}else this.def_img_x=t,this.def_img_y=e},dhtmlXTreeObject.prototype.getItemImage=function(t,e,i){var s=this._globalIdStorageFind(t);if(!s)return"";var n=s.images[e||0];return i&&(n=this.iconURL+n),n},dhtmlXTreeObject.prototype.enableRadioButtons=function(t,e){if(1==arguments.length)return this._frbtr=convertStringToBoolean(t),void(this.checkBoxOff=this.checkBoxOff||this._frbtr);var i=this._globalIdStorageFind(t);if(!i)return"";if(e=convertStringToBoolean(e),e&&!i._r_logic){i._r_logic=!0;for(var s=0;s<i.childsCount;s++)this._setCheck(i.childNodes[s],i.childNodes[s].checkstate)}if(!e&&i._r_logic){i._r_logic=!1;for(var s=0;s<i.childsCount;s++)this._setCheck(i.childNodes[s],i.childNodes[s].checkstate)}},dhtmlXTreeObject.prototype.enableSingleRadioMode=function(t){this._frbtrs=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.openOnItemAdded=function(t){this._hAdI=!convertStringToBoolean(t)},dhtmlXTreeObject.prototype.openOnItemAdding=function(t){this._hAdI=!convertStringToBoolean(t)},dhtmlXTreeObject.prototype.enableMultiLineItems=function(t){this.mlitems=t===!0?"100%":t},dhtmlXTreeObject.prototype.enableAutoTooltips=function(t){this.ettip=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.clearSelection=function(t){t?this._unselectItem(this._globalIdStorageFind(t)):this._unselectItems()},dhtmlXTreeObject.prototype.showItemSign=function(t,e){var i=this._globalIdStorageFind(t);if(!i)return 0;i.span.parentNode.previousSibling.previousSibling.previousSibling;convertStringToBoolean(e)?(i.closeble=!0,i.wsign=!1):(this._openItem(i),i.closeble=!1,i.wsign=!0),this._correctPlus(i)},dhtmlXTreeObject.prototype.showItemCheckbox=function(t,e){if(!t)for(var i in this._idpull)this.showItemCheckbox(this._idpull[i],e);if("object"!=typeof t&&(t=this._globalIdStorageFind(t,0,0)),!t)return 0;t.nocheckbox=!convertStringToBoolean(e);var s=t.span.parentNode.previousSibling.previousSibling.childNodes[0];s.parentNode.style.display=t.nocheckbox?"none":""},dhtmlXTreeObject.prototype.setListDelimeter=function(t){this.dlmtr=t},dhtmlXTreeObject.prototype.setEscapingMode=function(t){this.utfesc=t},dhtmlXTreeObject.prototype.enableHighlighting=function(t){this.ehlt=!0,this.ehlta=convertStringToBoolean(t)},dhtmlXTreeObject.prototype._itemMouseOut=function(){var t=this.childNodes[3].parentObject,e=t.treeNod;e.callEvent("onMouseOut",[t.id]),t.id==e._l_onMSI&&(e._l_onMSI=null),e.ehlta&&(t.span.className=t.span.className.replace("_lor",""))},dhtmlXTreeObject.prototype._itemMouseIn=function(){var t=this.childNodes[3].parentObject,e=t.treeNod;e._l_onMSI!=t.id&&e.callEvent("onMouseIn",[t.id]),e._l_onMSI=t.id,e.ehlta&&(t.span.className=t.span.className.replace("_lor",""),t.span.className=t.span.className.replace(/((standart|selected)TreeRow)/,"$1_lor"))},dhtmlXTreeObject.prototype.enableActiveImages=function(t){this._aimgs=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.focusItem=function(t){var e=this._globalIdStorageFind(t);return e?void this._focusNode(e):0},dhtmlXTreeObject.prototype.getAllSubItems=function(t){return this._getAllSubItems(t)},dhtmlXTreeObject.prototype.getAllChildless=function(){return this._getAllScraggyItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllLeafs=dhtmlXTreeObject.prototype.getAllChildless,dhtmlXTreeObject.prototype._getAllScraggyItems=function(t){for(var e="",i=0;i<t.childsCount;i++)if(t.childNodes[i].unParsed||t.childNodes[i].childsCount>0){if(t.childNodes[i].unParsed)var s=this._getAllScraggyItemsXML(t.childNodes[i].unParsed,1);else var s=this._getAllScraggyItems(t.childNodes[i]);s&&(e?e+=this.dlmtr+s:e=s)}else e?e+=this.dlmtr+t.childNodes[i].id:e=""+t.childNodes[i].id;return e},dhtmlXTreeObject.prototype._getAllFatItems=function(t){for(var e="",i=0;i<t.childsCount;i++)if(t.childNodes[i].unParsed||t.childNodes[i].childsCount>0){if(e?e+=this.dlmtr+t.childNodes[i].id:e=""+t.childNodes[i].id,t.childNodes[i].unParsed)var s=this._getAllFatItemsXML(t.childNodes[i].unParsed,1);else var s=this._getAllFatItems(t.childNodes[i]);s&&(e+=this.dlmtr+s)}return e},dhtmlXTreeObject.prototype.getAllItemsWithKids=function(){return this._getAllFatItems(this.htmlNode)},dhtmlXTreeObject.prototype.getAllFatItems=dhtmlXTreeObject.prototype.getAllItemsWithKids,dhtmlXTreeObject.prototype.getAllChecked=function(){return this._getAllChecked("","",1)},dhtmlXTreeObject.prototype.getAllUnchecked=function(t){return t&&(t=this._globalIdStorageFind(t)),this._getAllChecked(t,"",0)},dhtmlXTreeObject.prototype.getAllPartiallyChecked=function(){return this._getAllChecked("","",2)},dhtmlXTreeObject.prototype.getAllCheckedBranches=function(){var t=[this._getAllChecked("","",1)],e=this._getAllChecked("","",2);return e&&t.push(e),t.join(this.dlmtr)},dhtmlXTreeObject.prototype._getAllChecked=function(t,e,i){t||(t=this.htmlNode),t.checkstate==i&&(t.nocheckbox||(e?e+=this.dlmtr+t.id:e=""+t.id));for(var s=t.childsCount,n=0;s>n;n++)e=this._getAllChecked(t.childNodes[n],e,i);return t.unParsed&&(e=this._getAllCheckedXML(t.unParsed,e,i)),e?e:""},dhtmlXTreeObject.prototype.setItemStyle=function(t,e,i){var i=i||!1,s=this._globalIdStorageFind(t);return s?void(s.span.style.cssText?s.span.style.cssText=i?e:s.span.style.cssText+";"+e:s.span.setAttribute("style",s.span.getAttribute("style")+"; "+e)):0},dhtmlXTreeObject.prototype.enableImageDrag=function(t){this._itim_dg=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.setOnDragIn=function(t){this.attachEvent("onDragIn",t)},dhtmlXTreeObject.prototype.enableDragAndDropScrolling=function(t){this.autoScroll=convertStringToBoolean(t)},dhtmlXTreeObject.prototype.setSkin=function(t){var e=this.parentObject.className.replace(/dhxtree_[^ ]*/gi,"");this.parentObject.className=e+" dhxtree_"+t,("dhx_terrace"==t||"dhx_web"==t)&&this.enableTreeLines(!1)},function(){dhtmlx.extend_api("dhtmlXTreeObject",{_init:function(t){return[t.parent,t.width||"100%",t.height||"100%",t.root_id||0]},auto_save_selection:"enableAutoSavingSelected",auto_tooltip:"enableAutoTooltips",checkbox:"enableCheckBoxes",checkbox_3_state:"enableThreeStateCheckboxes",checkbox_smart:"enableSmartCheckboxes",context_menu:"enableContextMenu",distributed_parsing:"enableDistributedParsing",drag:"enableDragAndDrop",drag_copy:"enableMercyDrag",drag_image:"enableImageDrag",drag_scroll:"enableDragAndDropScrolling",editor:"enableItemEditor",hover:"enableHighlighting",images:"enableTreeImages",image_fix:"enableIEImageFix",image_path:"setImagePath",lines:"enableTreeLines",loading_item:"enableLoadingItem",multiline:"enableMultiLineItems",multiselect:"enableMultiselection",navigation:"enableKeyboardNavigation",radio:"enableRadioButtons",radio_single:"enableSingleRadioMode",rtl:"enableRTL",search:"enableKeySearch",smart_parsing:"enableSmartXMLParsing",smart_rendering:"enableSmartRendering",text_icons:"enableTextSigns",xml:"loadXML",skin:"setSkin"},{})}(),dhtmlXTreeObject.prototype._dp_init=function(t){t.attachEvent("insertCallback",function(t,e,i){var s=this._loader.doXPath(".//item",t),n=s[0].getAttribute("text");this.obj.insertNewItem(i,e,n,0,0,0,0,"CHILD")}),t.attachEvent("updateCallback",function(t,e,i){var s=this._loader.doXPath(".//item",t),n=s[0].getAttribute("text");this.obj.setItemText(e,n),this.obj.getParentId(e)!=i&&this.obj.moveItem(e,"item_child",i),this.setUpdated(e,!0,"updated")}),t.attachEvent("deleteCallback",function(t,e){this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj.deleteItem(e,!1)}),t._methods=["setItemStyle","","changeItemId","deleteItem"],this.attachEvent("onEdit",function(e,i){return 3==e&&t.setUpdated(i,!0),!0}),this.attachEvent("onDrop",function(e,i,s,n,o){n==o&&t.setUpdated(e,!0)}),this._onrdlh=function(e){var i=t.getState(e);return"inserted"==i?(t.set_invalid(e,!1),t.setUpdated(e,!1),!0):"true_deleted"==i?(t.setUpdated(e,!1),!0):(t.setUpdated(e,!0,"deleted"),!1)},this._onradh=function(e){t.setUpdated(e,!0,"inserted")},t._getRowData=function(t){var e={},i=this.obj._globalIdStorageFind(t),s=i.parentObject,n=0;for(n=0;n<s.childsCount&&s.childNodes[n]!=i;n++);for(e.tr_id=i.id,e.tr_pid=s.id,e.tr_order=n,e.tr_text=i.span.innerHTML,s=(i._userdatalist||"").split(","),n=0;n<s.length;n++)e[s[n]]=i.userData["t_"+s[n]];return e}},dhtmlXTreeObject.prototype.makeDraggable=function(t,e){"object"!=typeof t&&(t=document.getElementById(t)),dragger=new dhtmlDragAndDropObject,dropper=new dhx_dragSomethingInTree,dragger.addDraggableItem(t,dropper),t.dragLanding=null,t.ondragstart=dropper._preventNsDrag,t.onselectstart=new Function("return false;"),t.parentObject=new Object,t.parentObject.img=t,t.parentObject.treeNod=dropper,dropper._customDrop=e},dhtmlXTreeObject.prototype.makeDragable=dhtmlXTreeObject.prototype.makeDraggable,dhtmlXTreeObject.prototype.makeAllDraggable=function(t){for(var e=document.getElementsByTagName("div"),i=0;i<e.length;i++)e[i].getAttribute("dragInDhtmlXTree")&&this.makeDragable(e[i],t)},dhtmlXTreeObject.prototype.enableItemEditor=function(t){this._eItEd=convertStringToBoolean(t),this._eItEdFlag||(this._edn_click_IE=!0,this._edn_dblclick=!0,this._ie_aFunc=this.aFunc,this._ie_dblclickFuncHandler=this.dblclickFuncHandler,this.setOnDblClickHandler(function(t,e){return this._edn_dblclick&&this._editItem(t,e),!0}),this.setOnClickHandler(function(t,e){return this._stopEditItem(t,e),this.ed_hist_clcik==t&&this._edn_click_IE&&this._editItem(t,e),this.ed_hist_clcik=t,!0}),this._eItEdFlag=!0)},dhtmlXTreeObject.prototype.setOnEditHandler=function(t){this.attachEvent("onEdit",t)},dhtmlXTreeObject.prototype.setEditStartAction=function(t,e){this._edn_click_IE=convertStringToBoolean(t),this._edn_dblclick=convertStringToBoolean(e)},dhtmlXTreeObject.prototype._stopEdit=function(t,e){if(this._editCell&&(this.dADTempOff=this.dADTempOffEd,this._editCell.id!=t)){var i=!0;e?(i=!1,this.callEvent("onEditCancel",[this._editCell.id,this._editCell._oldValue])):i=this.callEvent("onEdit",[2,this._editCell.id,this,this._editCell.span.childNodes[0].value]),i===!0?i=this._editCell.span.childNodes[0].value:i===!1&&(i=this._editCell._oldValue);var s=i!=this._editCell._oldValue;this._editCell.span.innerHTML=i,this._editCell.label=this._editCell.span.innerHTML;var n=this._editCell.i_sel?"selectedTreeRow":"standartTreeRow";this._editCell.span.className=n,this._editCell.span.parentNode.className="standartTreeRow",this._editCell.span.style.paddingRight=this._editCell.span.style.paddingLeft="5px",this._editCell.span.onclick=this._editCell.span.ondblclick=function(){};var o=this._editCell.id;this.childCalc&&this._fixChildCountLabel(this._editCell),this._editCell=null,e||this.callEvent("onEdit",[3,o,this,s]),this._enblkbrd&&(this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus())}},dhtmlXTreeObject.prototype._stopEditItem=function(t){this._stopEdit(t)},dhtmlXTreeObject.prototype.stopEdit=function(t){this._editCell&&this._stopEdit(this._editCell.id+"_non",t)},dhtmlXTreeObject.prototype.editItem=function(t){this._editItem(t,this)},dhtmlXTreeObject.prototype._editItem=function(t){if(this._eItEd){this._stopEdit();var e=this._globalIdStorageFind(t);if(!e)return;var i=this.callEvent("onEdit",[0,t,this,e.span.innerHTML]);if(i===!0)i="undefined"!=typeof e.span.innerText?e.span.innerText:e.span.textContent;else if(i===!1)return;this.dADTempOffEd=this.dADTempOff,this.dADTempOff=!1,this._editCell=e,e._oldValue=i,e.span.innerHTML="<input type='text' class='intreeeditRow' />",e.span.style.paddingRight=e.span.style.paddingLeft="0px",e.span.onclick=e.span.ondblclick=function(t){(t||event).cancelBubble=!0},e.span.childNodes[0].value=i,e.span.childNodes[0].onselectstart=function(t){return(t||event).cancelBubble=!0,!0},e.span.childNodes[0].onmousedown=function(t){return(t||event).cancelBubble=!0,!0},e.span.childNodes[0].focus(),e.span.childNodes[0].focus(),e.span.onclick=function(t){return(t||event).cancelBubble=!0,!1},e.span.className="",e.span.parentNode.className="";var s=this;e.span.childNodes[0].onkeydown=function(t){t||(t=window.event),13==t.keyCode?(t.cancelBubble=!0,s._stopEdit(window.undefined)):27==t.keyCode&&s._stopEdit(window.undefined,!0),(t||event).cancelBubble=!0},this.callEvent("onEdit",[1,t,this])}},jsonPointer.prototype={text:function(){var t=function(t){for(var i=[],s=0;s<t.length;s++)i.push("{"+e(t[s])+"}");return i.join(",")},e=function(i){var s=[];for(var n in i)s.push("object"==typeof i[n]?n.length?'"'+n+'":['+t(i[n])+"]":'"'+n+'":{'+e(i[n])+"}":'"'+n+'":"'+i[n]+'"');return s.join(",")};return"{"+e(this.d)+"}"},get:function(t){return this.d[t]},exists:function(){return!!this.d},content:function(){return this.d.content},each:function(t,e,i){var s=this.d[t],n=new jsonPointer;if(s)for(var o=0;o<s.length;o++)n.d=s[o],e.apply(i,[n,o])},get_all:function(){return this.d},sub:function(t){return new jsonPointer(this.d[t],this.d)},sub_exists:function(t){return!!this.d[t]},each_x:function(t,e,i,s,n){var o=this.d[t],l=new jsonPointer(0,this.d);if(o)for(n=n||0;n<o.length;n++)if(o[n][e]&&(l.d=o[n],-1==i.apply(s,[l,n])))return},up:function(){return new jsonPointer(this.dp,this.d)},set:function(t,e){this.d[t]=e},clone:function(){return new jsonPointer(this.d,this.dp)},through:function(t,e,i,s,n){var o=this.d[t];if(o.length)for(var l=0;l<o.length;l++){if(null!=o[l][e]&&""!=o[l][e]&&(!i||o[l][e]==i)){var r=new jsonPointer(o[l],this.d);s.apply(n,[r,l])}var a=this.d;this.d=o[l],this.sub_exists(t)&&this.through(t,e,i,s,n),this.d=a}}},dhtmlXTreeObject.prototype.loadJSArrayFile=function(file,afterCall){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){eval("var z="+arguments[4].xmlDoc.responseText),that.loadJSArray(z)},this,!0,this.no_cashe),afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXML(file)},dhtmlXTreeObject.prototype.loadCSV=function(t,e){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;
var i=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){i.loadCSVString(arguments[4].xmlDoc.responseText)},this,!0,this.no_cashe),e&&(this.XMLLoader.waitCall=e),this.XMLLoader.loadXML(t)},dhtmlXTreeObject.prototype.loadJSArray=function(t,e){for(var i=[],s=0;s<t.length;s++)i[t[s][1]]||(i[t[s][1]]=[]),i[t[s][1]].push({id:t[s][0],text:t[s][2]});var n={id:this.rootId},o=function(t,e){if(i[t.id]){t.item=i[t.id];for(var s=0;s<t.item.length;s++)e(t.item[s],e)}};o(n,o),this.loadJSONObject(n,e)},dhtmlXTreeObject.prototype.loadCSVString=function(t,e){for(var i=[],s=t.split("\n"),n=0;n<s.length;n++){var o=s[n].split(",");i[o[1]]||(i[o[1]]=[]),i[o[1]].push({id:o[0],text:o[2]})}var l={id:this.rootId},r=function(t,e){if(i[t.id]){t.item=i[t.id];for(var s=0;s<t.item.length;s++)e(t.item[s],e)}};r(l,r),this.loadJSONObject(l,e)},dhtmlXTreeObject.prototype.loadJSONObject=function(t,e){this.parsCount||this.callEvent("onXLS",[this,null]),this.xmlstate=1;var i=new jsonPointer(t);this._parse(i),this._p=i,e&&e()},dhtmlXTreeObject.prototype.loadJSON=function(file,afterCall){this.parsCount||this.callEvent("onXLS",[this,this._ld_id]),this._ld_id=null,this.xmlstate=1;var that=this;this.XMLLoader=new dtmlXMLLoaderObject(function(){try{eval("var t="+arguments[4].xmlDoc.responseText)}catch(e){return void dhtmlxError.throwError("LoadXML","Incorrect JSON",[arguments[4].xmlDoc,this])}var p=new jsonPointer(t);that._parse(p),that._p=p},this,!0,this.no_cashe),afterCall&&(this.XMLLoader.waitCall=afterCall),this.XMLLoader.loadXML(file)},dhtmlXTreeObject.prototype.serializeTreeToJSON=function(){for(var t=['{"id":"'+this.rootId+'", "item":['],e=[],i=0;i<this.htmlNode.childsCount;i++)e.push(this._serializeItemJSON(this.htmlNode.childNodes[i]));return t.push(e.join(",")),t.push("]}"),t.join("")},dhtmlXTreeObject.prototype._serializeItemJSON=function(t){var e=[];if(t.unParsed)return t.unParsed.text();if(this._selected.length)var i=this._selected[0].id;else i="";var s=t.span.innerHTML;if(s=s.replace(/\"/g,'\\"',s),e.push(this._xfullXML?'{ "id":"'+t.id+'", '+(1==this._getOpenState(t)?' "open":"1", ':"")+(i==t.id?' "select":"1",':"")+' "text":"'+s+'", "im0":"'+t.images[0]+'", "im1":"'+t.images[1]+'", "im2":"'+t.images[2]+'" '+(t.acolor?', "aCol":"'+t.acolor+'" ':"")+(t.scolor?', "sCol":"'+t.scolor+'" ':"")+(1==t.checkstate?', "checked":"1" ':2==t.checkstate?', "checked":"-1"':"")+(t.closeable?', "closeable":"1" ':"")+(this.XMLsource&&0==t.XMLload?', "child":"1" ':""):'{ "id":"'+t.id+'", '+(1==this._getOpenState(t)?' "open":"1", ':"")+(i==t.id?' "select":"1",':"")+' "text":"'+s+'"'+(this.XMLsource&&0==t.XMLload?', "child":"1" ':"")),this._xuserData&&t._userdatalist){e.push(', "userdata":[');for(var n=t._userdatalist.split(","),o=[],l=0;l<n.length;l++)o.push('{ "name":"'+n[l]+'" , "content":"'+t.userData["t_"+n[l]]+'" }');e.push(o.join(",")),e.push("]")}if(t.childsCount){e.push(', "item":[');for(var o=[],l=0;l<t.childsCount;l++)o.push(this._serializeItemJSON(t.childNodes[l]));e.push(o.join(",")),e.push("]\n")}return e.push("}\n"),e.join("")},window.addEventListener?window.addEventListener("load",dhx_init_trees,!1):window.attachEvent&&window.attachEvent("onload",dhx_init_trees),dhtmlXTreeObject.prototype.parserExtension={_parseExtension:function(t,e){this._idpull[e.id]._attrs=e}},dhtmlXTreeObject.prototype.getAttribute=function(t,e){this._globalIdStorageFind(t);var i=this._idpull[t]._attrs;return i?i[e]:window.undefined},dhtmlXTreeObject.prototype.setAttribute=function(t,e,i){this._globalIdStorageFind(t);var s=this._idpull[t]._attrs||{};s[e]=i,this._idpull[t]._attrs=s},dhtmlXTreeObject.prototype.enableKeyboardNavigation=function(t){if(this._enblkbrd=convertStringToBoolean(t),this._enblkbrd){if(_isFF){var e=window.getComputedStyle(this.parentObject,null).position;"absolute"!=e&&"relative"!=e&&(this.parentObject.style.position="relative")}this._navKeys=[["up",38],["down",40],["open",39],["close",37],["call",13],["edit",113]];var i=this,e=document.createElement("INPUT");e.className="a_dhx_hidden_input",e.autocomplete="off",window._KHTMLrv&&(e.style.color="white"),this.parentObject.appendChild(e),this.parentObject[_isOpera?"onkeypress":"onkeydown"]=function(t){return i.callEvent("onKeyPress",[(t||window.event).keyCode,t||window.event])?i._onKeyDown(t||window.event):void 0},this.parentObject.onclick=function(){(_isFF||_isIE)&&e.select(),(window._KHTMLrv||_isOpera)&&e.focus()}}else this.parentObject.onkeydown=null},dhtmlXTreeObject.prototype._onKeyDown=function(t){if(window.globalActiveDHTMLGridObject&&globalActiveDHTMLGridObject.isActive)return!0;for(var e=0;e<this._navKeys.length;e++)if(this._navKeys[e][1]==t.keyCode)return this["_onkey_"+this._navKeys[e][0]].apply(this,[this.getSelectedItemId()]),t.preventDefault&&t.preventDefault(),(t||event).cancelBubble=!0,!1;return this._textSearch?this._searchItemByKey(t):!0},dhtmlXTreeObject.prototype._onkey_up=function(t){var e=this._globalIdStorageFind(t);if(e){var i=this._getPrevVisibleNode(e);i.id!=this.rootId&&(this.focusItem(i.id),this.selectItem(i.id,!1))}},dhtmlXTreeObject.prototype._onkey_down=function(t){var e=this._globalIdStorageFind(t);if(e){var i=this._getNextVisibleNode(e);i.id!=this.rootId&&(this.focusItem(i.id),this.selectItem(i.id,!1))}},dhtmlXTreeObject.prototype._onkey_open=function(t){this.openItem(t)},dhtmlXTreeObject.prototype._onkey_close=function(t){this.closeItem(t)},dhtmlXTreeObject.prototype._onkey_call=function(t){this.stopEdit?(this.stopEdit(),this.parentObject.lastChild.focus(),this.parentObject.lastChild.focus(),this.selectItem(t,!0)):this.selectItem(this.getSelectedItemId(),!0)},dhtmlXTreeObject.prototype._onkey_edit=function(t){this.editItem&&this.editItem(t)},dhtmlXTreeObject.prototype._getNextVisibleNode=function(t,e){return!e&&this._getOpenState(t)>0?t.childNodes[0]:t.tr&&t.tr.nextSibling&&t.tr.nextSibling.nodem?t.tr.nextSibling.nodem:t.parentObject?this._getNextVisibleNode(t.parentObject,1):t},dhtmlXTreeObject.prototype._getPrevVisibleNode=function(t){return t.tr&&t.tr.previousSibling&&t.tr.previousSibling.nodem?this._lastVisibleChild(t.tr.previousSibling.nodem):t.parentObject?t.parentObject:t},dhtmlXTreeObject.prototype._lastVisibleChild=function(t){return this._getOpenState(t)>0?this._lastVisibleChild(t.childNodes[t.childsCount-1]):t},dhtmlXTreeObject.prototype._searchItemByKey=function(t){if(8==t.keyCode)return this._textSearchString="",!0;var e=String.fromCharCode(t.keyCode).toUpperCase();return e.match(/[A-Z,a-z,0-9\ ]/)?(this._textSearchString+=e,this._textSearchInProgress=!0,(this.getSelectedItemText()||"").match(RegExp("^"+this._textSearchString,"i"))||this.findItem(this._textSearchString,0),this._textSearchInProgress=!1,t.preventDefault&&t.preventDefault(),(t||event).cancelBubble=!0,!1):!0},dhtmlXTreeObject.prototype.assignKeys=function(t){this._navKeys=t},dhtmlXTreeObject.prototype.enableKeySearch=function(t){if(this._textSearch=convertStringToBoolean(t),this._textSearch){this._textSearchString="";var e=this;this._markItem2=this._markItem,this._markItem=function(t){e._textSearchInProgress||(e._textSearchString=""),e._markItem2(t)}}},dhtmlXTreeObject.prototype.enableLoadingItem=function(t){this.attachEvent("onXLS",this._showFakeItem),this.attachEvent("onXLE",this._hideFakeItem),this._tfi_text=t||"Loading..."},dhtmlXTreeObject.prototype._showFakeItem=function(t,e){if(null!==e&&!this._globalIdStorageFind("fake_load_xml_"+e)){var i=this.XMLsource;this.XMLsource=null,this.insertNewItem(e,"fake_load_xml_"+e,this._tfi_text),this.XMLsource=i}},dhtmlXTreeObject.prototype._hideFakeItem=function(t,e){null!==e&&this.deleteItem("fake_load_xml_"+e)},dhtmlXTreeObject.prototype.isLocked=function(t){return this._locker||this._init_lock(),1==this._locker[t]},dhtmlXTreeObject.prototype._lockItem=function(t,e,i){if(this._locker||this._init_lock(),e){if(1==this._locker[t.id])return;this._locker[t.id]=!0,t.bIm0=t.images[0],t.bIm1=t.images[1],t.bIm2=t.images[2],t.images[0]=this.lico0,t.images[1]=this.lico1,t.images[2]=this.lico2;var s=t.span.parentNode,n=s.previousSibling;this.dragger.removeDraggableItem(s),this.dragger.removeDraggableItem(n)}else{if(1!=this._locker[t.id])return;this._locker[t.id]=!1,t.images[0]=t.bIm0,t.images[1]=t.bIm1,t.images[2]=t.bIm2;var s=t.span.parentNode,n=s.previousSibling;this.dragger.addDraggableItem(s,this),this.dragger.addDraggableItem(n,this)}i||this._correctPlus(t)},dhtmlXTreeObject.prototype.lockItem=function(t,e){this._locker||this._init_lock(),this._lockOn=!1;var i=this._globalIdStorageFind(t);this._lockOn=!0,this._lockItem(i,convertStringToBoolean(e))},dhtmlXTreeObject.prototype.setLockedIcons=function(t,e,i){this._locker||this._init_lock(),this.lico0=t,this.lico1=e,this.lico2=i},dhtmlXTreeObject.prototype._init_lock=function(){this._locker=new Array,this._locker_count="0",this._lockOn=!0,this._globalIdStorageFindA=this._globalIdStorageFind,this._globalIdStorageFind=this._lockIdFind,this._serializeItem&&(this._serializeItemA=this._serializeItem,this._serializeItem=this._serializeLockItem,this._serializeTreeA=this.serializeTree,this.serializeTree=this._serializeLockTree),this.setLockedIcons(this.imageArray[0],this.imageArray[1],this.imageArray[2])},dhtmlXTreeObject.prototype._lockIdFind=function(t,e,i){return this.skipLock||i||1!=this._lockOn||1!=this._locker[t]?this._globalIdStorageFindA(t,e,i):null},dhtmlXTreeObject.prototype._serializeLockItem=function(t){return 1==this._locker[t.id]?"":this._serializeItemA(t)},dhtmlXTreeObject.prototype._serializeLockTree=function(){var t=this._serializeTreeA();return t.replace(/<item[^>]+locked\=\"1\"[^>]+\/>/g,"")},dhtmlXTreeObject.prototype._moveNodeToA=dhtmlXTreeObject.prototype._moveNodeTo,dhtmlXTreeObject.prototype._moveNodeTo=function(t,e,i){return e.treeNod.isLocked&&e.treeNod.isLocked(e.id)?!1:this._moveNodeToA(t,e,i)},dhtmlXTreeObject.prototype.lockTree=function(t){convertStringToBoolean(t)?this._initTreeLocker():this._TreeLocker&&(this._TreeLocker.parentNode.removeChild(this._TreeLocker),this._TreeLocker=null)},dhtmlXTreeObject.prototype._initTreeLocker=function(){if(!this._TreeLocker){this.parentObject.style.overflow="hidden","absolute"!=this.parentObject.style.position&&(this.parentObject.style.position="relative");var t=document.createElement("div");t.style.position="absolute",t.style.left="0px",t.style.top="0px",t.className="dhx_tree_opacity",t.style.width=this.allTree.offsetWidth+"px",t.style.backgroundColor="#FFFFFF",t.style.height=this.allTree.offsetHeight+"px",this._TreeLocker=t,this.parentObject.appendChild(this._TreeLocker)}},dhtmlXTreeObject.prototype.enableRTL=function(t){var e=convertStringToBoolean(t);(e&&!this.rtlMode||!e&&this.rtlMode)&&(this.rtlMode=e,this._switchToRTL(this.rtlMode))},dhtmlXTreeObject.prototype._switchToRTL=function(t){t?(this.allTree.className=this._ltr_line=this.lineArray,this._ltr_min=this.minusArray,this._ltr_plus=this.plusArray,this.lineArray=new Array("line2_rtl.gif","line3_rtl.gif","line4_rtl.gif","blank.gif","blank.gif","line1_rtl.gif"),this.minusArray=new Array("minus2_rtl.gif","minus3_rtl.gif","minus4_rtl.gif","minus.gif","minus5_rtl.gif"),this.plusArray=new Array("plus2_rtl.gif","plus3_rtl.gif","plus4_rtl.gif","plus.gif","plus5_rtl.gif"),this.allTree.className="containerTableStyleRTL"):(this.allTree.className="containerTableStyle",this.lineArray=this._ltr_line,this.minusArray=this._ltr_min,this.plusArray=this._ltr_plus),this.htmlNode.childsCount&&this._redrawFrom(this,this.htmlNode)},dhtmlXTreeObject.prototype.sortTree=function(t,e,i){var s=this._globalIdStorageFind(t);return s?void this._reorderBranch(s,"asc"==e.toString().toLowerCase(),convertStringToBoolean(i)):!1},dhtmlXTreeObject.prototype.setCustomSortFunction=function(t){this._csfunca=t},dhtmlXTreeObject.prototype._reorderBranch=function(t,e,i){var s=[],n=t.childsCount;if(n){for(var o=t.childNodes[0].tr.parentNode,l=0;n>l;l++)s[l]=t.childNodes[l],o.removeChild(s[l].tr);var r=this;s.sort(1==e?this._csfunca?function(t,e){return r._csfunca(t.id,e.id)}:function(t,e){return t.span.innerHTML.toUpperCase()>e.span.innerHTML.toUpperCase()?1:t.span.innerHTML.toUpperCase()==e.span.innerHTML.toUpperCase()?0:-1}:this._csfunca?function(t,e){return r._csfunca(e.id,t.id)}:function(t,e){return t.span.innerHTML.toUpperCase()<e.span.innerHTML.toUpperCase()?1:t.span.innerHTML.toUpperCase()==e.span.innerHTML.toUpperCase()?0:-1});for(var l=0;n>l;l++)o.appendChild(s[l].tr),t.childNodes[l]=s[l],i&&s[l].unParsed?s[l].unParsed.set("order",e?1:-1):i&&s[l].childsCount&&this._reorderBranch(s[l],e,i);for(var l=0;n>l;l++)this._correctPlus(s[l]),this._correctLine(s[l])}},dhtmlXTreeObject.prototype._reorderXMLBranch=function(t){var e=t.getAttribute("order");if("none"!=e){var i=1==e,s=t.childNodes.length;if(s){for(var n=new Array,o=0,l=0;s>l;l++)1==t.childNodes[l].nodeType&&(n[o]=t.childNodes[l],o++);for(var l=s-1;0!=l;l--)t.removeChild(t.childNodes[l]);n.sort(i?function(t,e){return t.getAttribute("text")>e.getAttribute("text")?1:t.getAttribute("text")==e.getAttribute("text")?0:-1}:function(t,e){return t.getAttribute("text")<e.getAttribute("text")?1:t.getAttribute("text")==e.getAttribute("text")?0:-1});for(var l=0;o>l;l++)n[l].setAttribute("order",e),t.appendChild(n[l]);t.setAttribute("order","none")}}},dhtmlXTreeObject.prototype._serEnts=[["&","&amp;"],["<","&lt;"],[">","&gt;"]],dhtmlXTreeObject.prototype.registerXMLEntity=function(t,e){this._serEnts[this._serEnts.length]=[t,e,new RegExp(t,"g")]},dhtmlXTreeObject.prototype.setSerializationLevel=function(t,e,i,s,n){this._xuserData=convertStringToBoolean(t),this._xfullXML=convertStringToBoolean(e),this._dtd=n,this._xescapeEntities=convertStringToBoolean(i),convertStringToBoolean(s)&&(this._apreUC="<![CDATA[",this._apstUC="]]>");for(var o=0;o<this._serEnts.length;o++)this._serEnts[o][2]=new RegExp(this._serEnts[o][0],"g")},dhtmlXTreeObject.prototype.serializeTree=function(){this.stopEdit&&this.stopEdit(),this._apreUC=this._apreUC||"",this._apstUC=this._apstUC||"";var t='<?xml version="1.0"?>';if(this._dtd&&(t+='<!DOCTYPE tree SYSTEM "'+this._dtd+'">'),t+='<tree id="'+this.rootId+'">',this._xuserData&&this._idpull[this.rootId]._userdatalist)for(var e=this._idpull[this.rootId]._userdatalist.split(","),i=0;i<e.length;i++)t+='<userdata name="'+e[i]+'">'+this._apreUC+this._idpull[this.rootId].userData["t_"+e[i]]+this._apstUC+"</userdata>";for(var i=0;i<this.htmlNode.childsCount;i++)t+=this._serializeItem(this.htmlNode.childNodes[i]);return t+="</tree>"},dhtmlXTreeObject.prototype._serializeItem=function(t){if(t.unParsed){if(document.all)return t.unParsed.d.xml;var e=new XMLSerializer;return e.serializeToString(t.unParsed.d)}var i="";if(this._selected.length)var s=this._selected[0].id;else s='"';var n=t.span.innerHTML;if(this._xescapeEntities)for(var o=0;o<this._serEnts.length;o++)n=n.replace(this._serEnts[o][2],this._serEnts[o][1]);if(i=this._xfullXML?'<item id="'+t.id+'" '+(1==this._getOpenState(t)?' open="1" ':"")+(s==t.id?' select="1"':"")+' text="'+n+'" im0="'+t.images[0]+'" im1="'+t.images[1]+'" im2="'+t.images[2]+'" '+(t.acolor?'aCol="'+t.acolor+'" ':"")+(t.scolor?'sCol="'+t.scolor+'" ':"")+(1==t.checkstate?'checked="1" ':2==t.checkstate?'checked="-1"':"")+(t.closeable?'closeable="1" ':"")+(this.XMLsource&&0==t.XMLload?' child="1" ':"")+">":'<item id="'+t.id+'" '+(1==this._getOpenState(t)?' open="1" ':"")+(s==t.id?' select="1"':"")+' text="'+n+'"'+(this.XMLsource&&0==t.XMLload?' child="1" ':"")+">",this._xuserData&&t._userdatalist)for(var l=t._userdatalist.split(","),o=0;o<l.length;o++)i+='<userdata name="'+l[o]+'">'+this._apreUC+t.userData["t_"+l[o]]+this._apstUC+"</userdata>";for(var o=0;o<t.childsCount;o++)i+=this._serializeItem(t.childNodes[o]);return i+="</item>"},dhtmlXTreeObject.prototype.saveSelectedItem=function(t,e){t=t||"",this.setCookie("treeStateSelected"+t,this.getSelectedItemId(),e)},dhtmlXTreeObject.prototype.restoreSelectedItem=function(t){t=t||"";var e=this.getCookie("treeStateSelected"+t);this.selectItem(e,!1)},dhtmlXTreeObject.prototype.enableAutoSavingSelected=function(t,e){this.assMode=convertStringToBoolean(t),this.assMode&&!this.oldOnSelect&&(this.oldOnSelect=this.onRowSelect,this.onRowSelect=function(t,e,i){e||(e=this),e.parentObject.treeNod.oldOnSelect(t,e,i),e.parentObject.treeNod.assMode&&e.parentObject.treeNod.saveSelectedItem(e.parentObject.treeNod.assCookieName)}),this.assCookieName=e},dhtmlXTreeObject.prototype.saveState=function(t,e){var i=this._escape(this.serializeTree()),s=4e3;if(i.length>s){if(-1!=navigator.appName.indexOf("Microsoft"))return!1;this.setCookie("treeStatex"+t,Math.ceil(i.length/s));for(var n=0;n<Math.ceil(i.length/s);n++)this.setCookie("treeStatex"+t+"x"+n,i.substr(n*s,s),e)}else this.setCookie("treeStatex"+t,i,e);var i=this.getCookie("treeStatex"+t);return i?!0:(this.setCookie("treeStatex"+t,"",e),!1)},dhtmlXTreeObject.prototype.loadState=function(t){var e=this.getCookie("treeStatex"+t);if(!e)return!1;if(e.length){if(e.toString().length<4){for(var i="",s=0;e>s;s++)i+=this.getCookie("treeStatex"+t+"x"+s);e=i}this.loadXMLString("utf8"==this.utfesc?decodeURI(e):unescape(e))}return!0},dhtmlXTreeObject.prototype.setCookie=function(t,e,i){var s=t+"="+e+(i?"; "+i:"");document.cookie=s},dhtmlXTreeObject.prototype.getCookie=function(t){var e=t+"=";if(document.cookie.length>0){var i=document.cookie.indexOf(e);if(-1!=i){i+=e.length;var s=document.cookie.indexOf(";",i);return-1==s&&(s=document.cookie.length),document.cookie.substring(i,s)}}},dhtmlXTreeObject.prototype.saveOpenStates=function(t,e){for(var i=[],s=0;s<this.htmlNode.childsCount;s++)i=i.concat(this._collectOpenStates(this.htmlNode.childNodes[s]));i=i.join(this.dlmtr),this.setCookie("treeOpenStatex"+t,i,e)},dhtmlXTreeObject.prototype.loadOpenStates=function(t){for(var e=0;e<this.htmlNode.childsCount;e++)this._xcloseAll(this.htmlNode.childNodes[e]);this.allTree.childNodes[0].border="1",this.allTree.childNodes[0].border="0";var i=getCookie("treeOpenStatex"+t);if(i)for(var s=i.split(this.dlmtr),e=0;e<s.length;e++){var n=this._globalIdStorageFind(s[e]);if(n){if(this.XMLsource&&!n.XMLload&&n.id!=this.rootId)return void this._delayedLoad(n,"loadOpenStates('"+t+"')");this.openItem(s[e])}}this.callEvent("onAllOpenDynamic",[])},dhtmlXTreeObject.prototype._delayedLoad=function(t,e){this.afterLoadMethod=e,this.onLoadReserve=this.onXLE,this.onXLE=this._delayedLoadStep2,this._loadDynXML(t.id)},dhtmlXTreeObject.prototype._delayedLoadStep2=function(tree){tree.onXLE=tree.onLoadReserve,window.setTimeout(function(){dhtmlx.temp=tree,eval("dhtmlx.temp."+tree.afterLoadMethod)},100),tree.onXLE&&tree.onXLE(tree),tree.callEvent("onXLE",[tree])},dhtmlXTreeObject.prototype._collectOpenStates=function(t){var e=[];if(1==this._getOpenState(t)){e.push(t.id);for(var i=0;i<t.childsCount;i++)e=e.concat(this._collectOpenStates(t.childNodes[i]))}return e},dhtmlXTreeObject.prototype.openAllItemsDynamic=function(t){this.ClosedElem=new Array,this.G_node=null;var e=this._globalIdStorageFind(t||this.rootId);e.id!=this.rootId&&0!=this.getOpenState(e.id)&&this.openItem(t),this._openAllNodeChilds(e,0),this.ClosedElem.length>0&&(this.onLoadReserve=this.onXLE,this.onXLE=this._loadAndOpen,this._loadAndOpen(this))},dhtmlXTreeObject.prototype._openAllNodeChilds=function(t){(0==t.XMLload||t.unParsed)&&this.ClosedElem.push(t);for(var e=0;e<t.childsCount;e++)this._getOpenState(t.childNodes[e])<0&&this._HideShow(t.childNodes[e],2),t.childNodes[e].childsCount>0&&this._openAllNodeChilds(t.childNodes[e]),(0==t.childNodes[e].XMLload||t.childNodes[e].unParsed)&&this.ClosedElem.push(t.childNodes[e])},dhtmlXTreeObject.prototype._loadAndOpen=function(t){t.G_node&&(t._openItem(t.G_node),t._openAllNodeChilds(t.G_node),t.G_node=null),t.ClosedElem.length>0&&(t.G_node=t.ClosedElem.shift()),t.G_node?t.G_node.unParsed?t.reParse(t.G_node):window.setTimeout(function(){t._loadDynXML(t.G_node.id)},100):(t.onXLE=t.onLoadReserve,t.onXLE&&t.onXLE(t),t.callEvent("onAllOpenDynamic",[t]))},dhtmlXTreeObject.prototype.openItemsDynamic=function(t,e){this.onXLE!=this._stepOpen&&(this._opnItmsDnmcFlg=convertStringToBoolean(e),this.onLoadReserve=this.onXLE,this.onXLE=this._stepOpen,this.ClosedElem=t.split(",").reverse(),this._stepOpen(this))},dhtmlXTreeObject.prototype._stepOpen=function(t){if(!t.ClosedElem.length)return t.onXLE=t.onLoadReserve,t._opnItmsDnmcFlg&&t.selectItem(t.G_node,!0),t.onXLE&&arguments[1]&&t.onXLE.apply(t,arguments),void t.callEvent("onOpenDynamicEnd",[]);t.G_node=t.ClosedElem.pop(),t.skipLock=!0;var e=t._globalIdStorageFind(t.G_node);e&&(0===e.XMLload?t.openItem(t.G_node):(t.openItem(t.G_node),t._stepOpen(t))),t.skipLock=!1};var globalActiveDHTMLGridObject;String.prototype._dhx_trim=function(){return this.replace(/&nbsp;/g," ").replace(/(^[ \t]*)|([ \t]*$)/g,"")},dhtmlxArray._master={_dhx_find:function(t){for(var e=0;e<this.length;e++)if(t==this[e])return e;return-1},_dhx_insertAt:function(t,e){this[this.length]=null;for(var i=this.length-1;i>=t;i--)this[i]=this[i-1];this[t]=e},_dhx_removeAt:function(t){this.splice(t,1)},_dhx_swapItems:function(t,e){var i=this[t];this[t]=this[e],this[e]=i}},dhtmlXGridObject.prototype={getRowAttribute:function(t,e){return this.getRowById(t)._attrs[e]},setRowAttribute:function(t,e,i){this.getRowById(t)._attrs[e]=i},isTreeGrid:function(){return-1!=this.cellType._dhx_find("tree")},setRowHidden:function(t,e){var i=(convertStringToBoolean(e),this.getRowById(t));if(i){if(""===i.expand&&this.collapseKids(i),e&&"none"!=i.style.display){i.style.display="none";var s=this.selectedRows._dhx_find(i);if(-1!=s){i.className=i.className.replace("rowselected","");for(var n=0;n<i.childNodes.length;n++)i.childNodes[n].className=i.childNodes[n].className.replace(/cellselected/g,"");this.selectedRows._dhx_removeAt(s)}this.callEvent("onGridReconstructed",[])}e||"none"!=i.style.display||(i.style.display="",this.callEvent("onGridReconstructed",[])),this.callEvent("onRowHide",[t,e]),this.setSizes()}},setColumnHidden:function(t,e){if(!this.hdr.rows.length)return this._ivizcol||(this._ivizcol=[]),this._ivizcol[t]=e;this.fldSorted&&this.fldSorted.cellIndex==t&&e&&(this.sortImg.style.display="none");var i=convertStringToBoolean(e);if(i){if(this._hrrar){if(this._hrrar[t])return}else this._hrrar=new Array;this._hrrar[t]="display:none;",this._hideShowColumn(t,"none")}else{if(!this._hrrar||!this._hrrar[t])return;this._hrrar[t]="",this._hideShowColumn(t,"")}this.fldSorted&&this.fldSorted.cellIndex==t&&!e&&(this.sortImg.style.display="inline"),this.setSortImgPos(),this.callEvent("onColumnHidden",[t,e])},isColumnHidden:function(t){return this._hrrar&&this._hrrar[t]?!0:!1},setColumnsVisibility:function(t){if(t&&(this._ivizcol=t.split(this.delim)),this.hdr.rows.length&&this._ivizcol)for(var e=0;e<this._ivizcol.length;e++)this.setColumnHidden(e,this._ivizcol[e])},_fixHiddenRowsAll:function(t,e,i,s,n){n=n||"_cellIndex";for(var o=t.rows.length,l=0;o>l;l++){var r=t.rows[l].childNodes;if(r.length!=this._cCount){for(var a=0;a<r.length;a++)if(r[a][n]==e){r[a].style[i]=s;break}}else r[e].style[i]=s}},_hideShowColumn:function(t,e){var i=t;if(this.hdr.rows[1]&&this.hdr.rows[1]._childIndexes&&this.hdr.rows[1]._childIndexes[t]!=t&&(i=this.hdr.rows[1]._childIndexes[t]),"none"==e){this.hdr.rows[0].cells[t]._oldWidth=this.hdr.rows[0].cells[t].style.width||this.initCellWidth[t]+"px",this.hdr.rows[0].cells[t]._oldWidthP=this.cellWidthPC[t],this.obj.rows[0].cells[t].style.width="0px";var s={rows:[this.obj.rows[0]]};this.forEachRow(function(t){"TR"==this.rowsAr[t].tagName&&s.rows.push(this.rowsAr[t])}),this._fixHiddenRowsAll(s,t,"display","none"),this.isTreeGrid()&&this._fixHiddenRowsAllTG(t,"none"),(_isOpera&&9>_OperaRv||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,t,"display","none","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],t,"display","none"),this._fixHiddenRowsAll(this.hdr,t,"whiteSpace","nowrap","_cellIndexS"),this.cellWidthPX.length||this.cellWidthPC.length||(this.cellWidthPX=[].concat(this.initCellWidth)),this.cellWidthPX[t]&&(this.cellWidthPX[t]=0),this.cellWidthPC[t]&&(this.cellWidthPC[t]=0)}else if(this.hdr.rows[0].cells[t]._oldWidth){var n=this.hdr.rows[0].cells[t];(_isOpera||_isKHTML||_isFF)&&this._fixHiddenRowsAll(this.hdr,t,"display","","_cellIndexS"),this.ftr&&this._fixHiddenRowsAll(this.ftr.childNodes[0],t,"display","");var s={rows:[this.obj.rows[0]]};this.forEachRow(function(t){"TR"==this.rowsAr[t].tagName&&s.rows.push(this.rowsAr[t])}),this._fixHiddenRowsAll(s,t,"display",""),this.isTreeGrid()&&this._fixHiddenRowsAllTG(t,""),this._fixHiddenRowsAll(this.hdr,t,"whiteSpace","normal","_cellIndexS"),n._oldWidthP&&(this.cellWidthPC[t]=n._oldWidthP),n._oldWidth&&(this.cellWidthPX[t]=parseInt(n._oldWidth))}this.setSizes(),_isIE||_isFF||(this.obj.border=1,this.obj.border=0)},enableColSpan:function(t){this._ecspn=convertStringToBoolean(t)},enableRowsHover:function(t,e){this._unsetRowHover(!1,!0),this._hvrCss=e,convertStringToBoolean(t)?this._elmnh||(this.obj._honmousemove=this.obj.onmousemove,this.obj.onmousemove=this._setRowHover,_isIE?this.obj.onmouseleave=this._unsetRowHover:this.obj.onmouseout=this._unsetRowHover,this._elmnh=!0):this._elmnh&&(this.obj.onmousemove=this.obj._honmousemove,_isIE?this.obj.onmouseleave=null:this.obj.onmouseout=null,this._elmnh=!1)},enableEditEvents:function(t,e,i){this._sclE=convertStringToBoolean(t),this._dclE=convertStringToBoolean(e),this._f2kE=convertStringToBoolean(i)},enableLightMouseNavigation:function(t){convertStringToBoolean(t)?this._elmn||(this.entBox._onclick=this.entBox.onclick,this.entBox.onclick=function(){return!0},this.obj._onclick=this.obj.onclick,this.obj.onclick=function(t){var e=this.grid.getFirstParentOfType(t?t.target:event.srcElement,"TD");e&&(this.grid.editStop(),this.grid.doClick(e),this.grid.editCell(),(t||event).cancelBubble=!0)},this.obj._onmousemove=this.obj.onmousemove,this.obj.onmousemove=this._autoMoveSelect,this._elmn=!0):this._elmn&&(this.entBox.onclick=this.entBox._onclick,this.obj.onclick=this.obj._onclick,this.obj.onmousemove=this.obj._onmousemove,this._elmn=!1)},_unsetRowHover:function(t,e){if(that=e?this:this.grid,that._lahRw&&that._lahRw!=e){for(var i=0;i<that._lahRw.childNodes.length;i++)that._lahRw.childNodes[i].className=that._lahRw.childNodes[i].className.replace(that._hvrCss,"");that._lahRw=null}},_setRowHover:function(t){var e=this.grid.getFirstParentOfType(t?t.target:event.srcElement,"TD");if(e&&e.parentNode!=this.grid._lahRw){if(this.grid._unsetRowHover(0,e),e=e.parentNode,!e.idd||"__filler__"==e.idd)return;for(var i=0;i<e.childNodes.length;i++)e.childNodes[i].className+=" "+this.grid._hvrCss;this.grid._lahRw=e}this._honmousemove(t)},_autoMoveSelect:function(t){if(!this.grid.editor){var e=this.grid.getFirstParentOfType(t?t.target:event.srcElement,"TD");e.parentNode.idd&&this.grid.doClick(e,!0,0)}this._onmousemove(t)},enableDistributedParsing:function(t,e,i){convertStringToBoolean(t)?(this._ads_count=e||10,this._ads_time=i||250):this._ads_count=0},destructor:function(){if(this.editStop(!0),this._sizeTime&&(this._sizeTime=window.clearTimeout(this._sizeTime)),this.entBox.className=(this.entBox.className||"").replace(/gridbox.*/,""),this.formInputs)for(var t=0;t<this.formInputs.length;t++)this.parentForm.removeChild(this.formInputs[t]);var e;this.xmlLoader=this.xmlLoader.destructor();for(var t=0;t<this.rowsCol.length;t++)this.rowsCol[t]&&(this.rowsCol[t].grid=null);for(t in this.rowsAr)this.rowsAr[t]&&(this.rowsAr[t]=null);this.rowsCol=new dhtmlxArray,this.rowsAr={},this.entBox.innerHTML="";var i=function(){};this.entBox.onclick=this.entBox.onmousedown=this.entBox.onbeforeactivate=this.entBox.onbeforedeactivate=this.entBox.onbeforedeactivate=this.entBox.onselectstart=i,this.setSizes=this._update_srnd_view=this.callEvent=i,this.entBox.grid=this.objBox.grid=this.hdrBox.grid=this.obj.grid=this.hdr.grid=null,this._fake&&(this.globalBox.innerHTML="",this._fake.setSizes=this._fake._update_srnd_view=this._fake.callEvent=i,this.globalBox.onclick=this.globalBox.onmousedown=this.globalBox.onbeforeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onbeforedeactivate=this.globalBox.onselectstart=i);for(e in this)this[e]&&this[e].m_obj&&(this[e].m_obj=null),this[e]=null;return this==globalActiveDHTMLGridObject&&(globalActiveDHTMLGridObject=null),null},getSortingState:function(){var t=new Array;return this.fldSorted&&(t[0]=this.fldSorted._cellIndex,t[1]="dhxgrid_sort_desc"==this.sortImg.className?"des":"asc"),t},enableAutoHeight:function(t,e,i){this._ahgr=convertStringToBoolean(t),this._ahgrF=convertStringToBoolean(i),this._ahgrM=e||null,1==arguments.length&&(this.objBox.style.overflowY=t?"hidden":"auto"),"auto"==e&&(this._ahgrM=null,this._ahgrMA=!0,this._setAutoResize())},enableStableSorting:function(t){this._sst=convertStringToBoolean(t),this.rowsCol.stablesort=function(t){for(var e=this.length-1,i=0;i<this.length-1;i++){for(var s=0;e>s;s++)if(t(this[s],this[s+1])>0){var n=this[s];this[s]=this[s+1],this[s+1]=n}e--}}},enableKeyboardSupport:function(t){this._htkebl=!convertStringToBoolean(t)},enableContextMenu:function(t){this._ctmndx=t},setScrollbarWidthCorrection:function(){},enableTooltips:function(t){this._enbTts=t.split(",");for(var e=0;e<this._enbTts.length;e++)this._enbTts[e]=convertStringToBoolean(this._enbTts[e])},enableResizing:function(t){this._drsclmn=t.split(",");for(var e=0;e<this._drsclmn.length;e++)this._drsclmn[e]=convertStringToBoolean(this._drsclmn[e])},setColumnMinWidth:function(t,e){2==arguments.length?(this._drsclmW||(this._drsclmW=new Array),this._drsclmW[e]=t):this._drsclmW=t.split(",")},enableCellIds:function(t){this._enbCid=convertStringToBoolean(t)},lockRow:function(t,e){var i=this.getRowById(t);i&&(i._locked=convertStringToBoolean(e),this.cell&&this.cell.parentNode.idd==t&&this.editStop())},_getRowArray:function(t){for(var e=new Array,i=0;i<t.childNodes.length;i++){var s=this.cells3(t,i);e[i]=s.getValue()}return e},setDateFormat:function(t,e){this._dtmask=t,this._dtmask_inc=e},setNumberFormat:function(t,e,i,s){var n=t.replace(/[^0\,\.]*/g,""),o=n.indexOf(".");o>-1&&(o=n.length-o-1);var l=n.indexOf(",");l>-1&&(l=n.length-o-2-l),"string"!=typeof i&&(i=this.i18n.decimal_separator),"string"!=typeof s&&(s=this.i18n.group_separator);var r=t.split(n)[0],a=t.split(n)[1];this._maskArr[e]=[o,l,r,a,i,s]},_aplNFb:function(t,e){var i=this._maskArr[e];if(!i)return t;var s=parseFloat(t.toString().replace(/[^0-9]*/g,""));return"-"==t.toString().substr(0,1)&&(s=-1*s),i[0]>0&&(s/=Math.pow(10,i[0])),s},_aplNF:function(t,e){var i=this._maskArr[e];if(!i)return t;var s=(parseFloat(t)<0?"-":"")+i[2];if(t=Math.abs(Math.round(parseFloat(t)*Math.pow(10,i[0]>0?i[0]:0))).toString(),t=(t.length<i[0]?Math.pow(10,i[0]+1-t.length).toString().substr(1,i[0]+1)+t.toString():t).split("").reverse(),t[i[0]]=(t[i[0]]||"0")+i[4],i[1]>0)for(var n=(i[0]>0?0:1)+i[0]+i[1];n<t.length;n+=i[1])t[n]+=i[5];return s+t.reverse().join("")+i[3]},_launchCommands:function(t){for(var e=0;e<t.length;e++){for(var i=new Array,s=0;s<t[e].childNodes.length;s++)1==t[e].childNodes[s].nodeType&&(i[i.length]=t[e].childNodes[s].firstChild.data);this[t[e].getAttribute("command")].apply(this,i)}},_parseHead:function(t){var e=this.xmlLoader.doXPath("./head",t);if(e.length){var i=this.xmlLoader.doXPath("./column",e[0]),s=this.xmlLoader.doXPath("./settings",e[0]),n="setInitWidths",o=!1;if(s[0])for(var l=0;l<s[0].childNodes.length;l++)switch(s[0].childNodes[l].tagName){case"colwidth":s[0].childNodes[l].firstChild&&"%"==s[0].childNodes[l].firstChild.data&&(n="setInitWidthsP");break;case"splitat":o=s[0].childNodes[l].firstChild?s[0].childNodes[l].firstChild.data:!1}if(this._launchCommands(this.xmlLoader.doXPath("./beforeInit/call",e[0])),i.length>0){this.hdr.rows.length>0&&this.clearAll(!0);for(var r=[[],[],[],[],[],[],[],[],[]],a=["","width","type","align","sort","color","format","hidden","id"],h=["",n,"setColTypes","setColAlign","setColSorting","setColumnColor","","","setColumnIds"],d=0;d<i.length;d++){for(var c=1;c<a.length;c++)r[c].push(i[d].getAttribute(a[c]));r[0].push((i[d].firstChild?i[d].firstChild.data:"").replace(/^\s*((\s\S)*.+)\s*$/gi,"$1"))
}this.setHeader(r[0]);for(var d=0;d<h.length;d++)h[d]&&this[h[d]](r[d].join(this.delim));for(var d=0;d<i.length;d++)if(0==this.cellType[d].indexOf("co")||"clist"==this.cellType[d]){var u=this.xmlLoader.doXPath("./option",i[d]);if(u.length){var _=new Array;if("clist"==this.cellType[d]){for(var c=0;c<u.length;c++)_[_.length]=u[c].firstChild?u[c].firstChild.data:"";this.registerCList(d,_)}else for(var f=this.getCombo(d),c=0;c<u.length;c++)f.put(u[c].getAttribute("value"),u[c].firstChild?u[c].firstChild.data:"")}}else r[6][d]&&(-1!=this.cellType[d].toLowerCase().indexOf("calendar")||"date"==this.fldSort[d]?this.setDateFormat(r[6][d]):this.setNumberFormat(r[6][d],d));this.init();var p=r[7].join(this.delim);this.setColHidden&&""!=p.replace(/,/g,"")&&this.setColHidden(p),o&&this.splitAt&&this.splitAt(o)}this._launchCommands(this.xmlLoader.doXPath("./afterInit/call",e[0]))}var m=this.xmlLoader.doXPath("//rows/userdata",t);if(m.length>0){this.UserData.gridglobaluserdata||(this.UserData.gridglobaluserdata=new Hashtable);for(var c=0;c<m.length;c++){for(var g="",b=0;b<m[c].childNodes.length;b++)g+=m[c].childNodes[b].nodeValue;this.UserData.gridglobaluserdata.put(m[c].getAttribute("name"),g)}}},getCheckedRows:function(t){var e=new Array;return this.forEachRowA(function(i){var s=this.cells(i,t);s.changeState&&0!=s.getValue()&&e.push(i)},!0),e.join(",")},checkAll:function(){for(var t=arguments.length?arguments[0]:1,e=0;e<this.getColumnsNum();e++)"ch"==this.getColType(e)&&this.setCheckedRows(e,t)},uncheckAll:function(){this.checkAll(0)},setCheckedRows:function(t,e){this.forEachRowA(function(i){this.cells(i,t).isCheckbox()&&this.cells(i,t).setValue(e)})},_drawTooltip:function(t){var e=this.grid.getFirstParentOfType(t?t.target:event.srcElement,"TD");if(!e||this.grid.editor&&this.grid.editor.cell==e)return!0;var i=e.parentNode;if(i.idd&&"__filler__"!=i.idd){var s=t?t.target:event.srcElement;if(i.idd==window.unknown)return!0;if(!this.grid.callEvent("onMouseOver",[i.idd,e._cellIndex,t||window.event]))return!0;if(this.grid._enbTts&&!this.grid._enbTts[e._cellIndex])return s.title&&(s.title=""),!0;if(!(e._cellIndex>=this.grid._cCount)){var n=this.grid.cells3(i,e._cellIndex);if(n&&n.cell&&n.cell._attrs)return s._title&&(n.cell.title=""),n.cell._attrs.title||(s._title=!0),n&&(s.title=n.cell._attrs.title||(n.getTitle?n.getTitle():(n.getValue()||"").toString().replace(/<[^>]*>/gi,""))),!0}}},enableCellWidthCorrection:function(t){_isFF&&(this._wcorr=parseInt(t))},getAllRowIds:function(t){for(var e=[],i=0;i<this.rowsBuffer.length;i++)this.rowsBuffer[i]&&e.push(this.rowsBuffer[i].idd);return e.join(t||this.delim)},getAllItemIds:function(){return this.getAllRowIds()},setColspan:function(t,e,i){if(this._ecspn){var s=this.getRowById(t);if(s._childIndexes&&s.childNodes[s._childIndexes[e]]){var n=s._childIndexes[e],o=s.childNodes[n],l=o.colSpan;if(o.colSpan=1,l&&1!=l)for(var r=1;l>r;r++){var a=document.createElement("TD");o.nextSibling?s.insertBefore(a,o.nextSibling):s.appendChild(a),s._childIndexes[e+r]=n+r,a._cellIndex=e+r,a.style.textAlign=this.cellAlign[r],a.style.verticalAlign=this.cellVAlign[r],o=a,this.cells3(s,e+r).setValue("")}for(var h=1*e+1*l;h<s._childIndexes.length;h++)s._childIndexes[h]+=1*(l-1)}if(i&&i>1){if(s._childIndexes)var n=s._childIndexes[e];else{var n=e;s._childIndexes=new Array;for(var h=0;h<s.childNodes.length;h++)s._childIndexes[h]=h}s.childNodes[n].colSpan=i;for(var h=1;i>h;h++)s._childIndexes[s.childNodes[n+1]._cellIndex]=n,s.removeChild(s.childNodes[n+1]);for(var d=s.childNodes[s._childIndexes[e]]._cellIndex,h=1*d+1*i;h<s._childIndexes.length;h++)s._childIndexes[h]-=i-1}}},preventIECaching:function(t){this.no_cashe=convertStringToBoolean(t),this.xmlLoader.rSeed=this.no_cashe},enableColumnAutoSize:function(t){this._eCAS=convertStringToBoolean(t)},_onHeaderDblClick:function(t){var e=this.grid,i=e.getFirstParentOfType(_isIE?event.srcElement:t.target,"TD");return e._eCAS?void e.adjustColumnSize(i._cellIndexS):!1},adjustColumnSize:function(t,e){if(!this._hrrar||!this._hrrar[t]){this._notresize=!0;var i=0;this._setColumnSizeR(t,20);for(var s=1;s<this.hdr.rows.length;s++){var n=this.hdr.rows[s];n=n.childNodes[n._childIndexes?n._childIndexes[t]:t],n&&(!n.colSpan||n.colSpan<2)&&n._cellIndex==t&&(n.childNodes[0]&&"hdrcell"==n.childNodes[0].className&&(n=n.childNodes[0]),i=Math.max(i,n.scrollWidth))}for(var o=this.obj.rows.length,l=0,r=this.cellType._dhx_find("tree"),a=1;o>a;a++){var h=this.obj.rows[a];this.rowsAr[h.idd]&&(h._childIndexes&&h._childIndexes[t]!=t||!h.childNodes[t]||(l=(h.childNodes[t].innerText||h.childNodes[t].textContent||"").length*this.fontWidth,this._h2&&t==r&&(l+=22*this._h2.get[h.idd].level),l>i&&(i=l)))}i+=20+(e||0),this._setColumnSizeR(t,i),this._notresize=!1,this.setSizes()}},detachHeader:function(t,e){e=e||this.hdr;var i=e.rows[t+1];i&&i.parentNode.removeChild(i),this.setSizes()},detachFooter:function(t){this.detachHeader(t,this.ftr)},attachHeader:function(t,e,i){if("string"==typeof t&&(t=this._eSplit(t)),"string"==typeof e&&(e=e.split(this.delim)),i=i||"_aHead",this.hdr.rows.length){if(t)this._createHRow([t,e],this["_aHead"==i?"hdr":"ftr"]);else if(this[i])for(var s=0;s<this[i].length;s++)this.attachHeader.apply(this,this[i][s])}else this[i]||(this[i]=new Array),this[i][this[i].length]=[t,e,i]},_createHRow:function(t,e){if(!e){"absolute"!=this.entBox.style.position&&(this.entBox.style.position="relative");var i=document.createElement("DIV");i.className="c_ftr".substr(2),this.entBox.appendChild(i);var s=document.createElement("TABLE");s.cellPadding=s.cellSpacing=0,_isIE&&8!=_isIE||(s.width="100%",s.style.paddingRight="20px"),s.style.marginRight="20px",s.style.tableLayout="fixed",i.appendChild(s),s.appendChild(document.createElement("TBODY")),this.ftr=e=s;for(var n=s.insertRow(0),o=this.hdrLabels.length<=1?t[0].length:this.hdrLabels.length,l=0;o>l;l++)n.appendChild(document.createElement("TH")),n.childNodes[l]._cellIndex=l;_isIE&&8>_isIE?n.style.position="absolute":n.style.height="auto"}var r=t[1],i=document.createElement("TR");e.rows[0].parentNode.appendChild(i);for(var l=0;l<t[0].length;l++)if("#cspan"!=t[0][l])if("#rspan"==t[0][l]&&e.rows.length>1){for(var a=e.rows.length-2,h=!1,d=null;!h;){for(var d=e.rows[a],c=0;c<d.cells.length;c++)if(d.cells[c]._cellIndex==l){h=c+1;break}a--}d=d.cells[h-1],d.rowSpan=(d.rowSpan||1)+1}else{var u=document.createElement("TD");if(u._cellIndex=u._cellIndexS=l,this._hrrar&&this._hrrar[l]&&!_isIE&&(u.style.display="none"),"object"==typeof t[0][l])u.appendChild(t[0][l]);else if(u.innerHTML=this.forceDivInHeader?"<div class='hdrcell'>"+(t[0][l]||"&nbsp;")+"</div>":t[0][l]||"&nbsp;",-1!=(t[0][l]||"").indexOf("#")){var s=t[0][l].match(/(^|{)#([^}]+)(}|$)/);if(s){var _="_in_header_"+s[2];this[_]&&this[_](this.forceDivInHeader?u.firstChild:u,l,t[0][l].split(s[0]))}}r&&(u.style.cssText=r[l]),i.appendChild(u)}else{var d=i.cells[i.cells.length-1];d.colSpan=(d.colSpan||1)+1}_isKHTML&&(e._kTimer&&window.clearTimeout(e._kTimer),e._kTimer=window.setTimeout(function(){e.rows[1].style.display="none",window.setTimeout(function(){e.rows[1].style.display=""},1)},500))},attachFooter:function(t,e){this.attachHeader(t,e,"_aFoot")},setCellExcellType:function(t,e,i){this.changeCellType(this.getRowById(t),e,i)},changeCellType:function(t,e,i){i=i||this.cellType[e];var s=this.cells3(t,e),n=s.getValue();s.cell._cellType=i;var s=this.cells3(t,e);s.setValue(n)},setRowExcellType:function(t,e){for(var i=this.rowsAr[t],s=0;s<i.childNodes.length;s++)this.changeCellType(i,s,e)},setColumnExcellType:function(t,e){for(var i=0;i<this.rowsBuffer.length;i++)this.rowsBuffer[i]&&"TR"==this.rowsBuffer[i].tagName&&this.changeCellType(this.rowsBuffer[i],t,e);"math"==this.cellType[t]?this._strangeParams[i]=e:this.cellType[t]=e},forEachRow:function(t){for(var e in this.rowsAr)this.rowsAr[e]&&this.rowsAr[e].idd&&t.apply(this,[this.rowsAr[e].idd])},forEachRowA:function(t){for(var e=0;e<this.rowsBuffer.length;e++)this.rowsBuffer[e]&&t.call(this,this.render_row(e).idd)},forEachCell:function(t,e){var i=this.getRowById(t);if(i)for(var s=0;s<this._cCount;s++)e(this.cells3(i,s),s)},enableAutoWidth:function(t,e,i){this._awdth=[convertStringToBoolean(t),parseInt(e||99999),parseInt(i||0)],1==arguments.length&&(this.objBox.style.overflowX=t?"hidden":"auto")},updateFromXML:function(t,e,i,s){"undefined"==typeof e&&(e=!0),this._refresh_mode=[!0,e,i],this.load(t,s)},_refreshFromXML:function(t){this._f_rowsBuffer&&this.filterBy(0,""),reset=!1,window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(t){var e=this.grid._h2.get[this.cell.parentNode.idd];e&&this.cell.parentNode.valTag?this.setLabel(t):this.setValueX(t)});var e=this.cellType._dhx_find("tree");t.getXMLTopNode("rows");var i=t.doXPath("//rows")[0].getAttribute("parent")||0,s={};this._refresh_mode[2]&&(-1!=e?this._h2.forEachChild(i,function(t){s[t.id]=!0},this):this.forEachRow(function(t){s[t]=!0}));for(var n=t.doXPath("//row"),o=0;o<n.length;o++){var l=n[o],r=l.getAttribute("id");s[r]=!1;var i=l.parentNode.getAttribute("id")||i;if(this.rowsAr[r]&&"TR"!=this.rowsAr[r].tagName)this._h2?this._h2.get[r].buff.data=l:this.rowsBuffer[this.getRowIndex(r)].data=l,this.rowsAr[r]=l;else if(this.rowsAr[r])this._process_xml_row(this.rowsAr[r],l,-1),this._postRowProcessing(this.rowsAr[r],!0),this._fake&&this._fake.rowsAr[r]&&this._fake._process_xml_row(this._fake.rowsAr[r],l,-1);else if(this._refresh_mode[1]){var a={idd:r,data:l,_parser:this._process_xml_row,_locator:this._get_xml_data},h=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(a),h=0):this.rowsBuffer.push(a),this._h2?(reset=!0,this._h2.add(r,l.parentNode.getAttribute("id")||l.parentNode.getAttribute("parent")).buff=this.rowsBuffer[this.rowsBuffer.length-1]):this._srnd&&(reset=!0),this.rowsAr[r]=l,l=this.render_row(h),this._insertRowAt(l,h?-1:0)}}if(this._refresh_mode[2])for(r in s)s[r]&&this.rowsAr[r]&&this.deleteRow(r);this._refresh_mode=null,window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX),reset&&(this._h2?this._renderSort():this.render_dataset()),this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},getCustomCombo:function(t,e){var i=this.cells(t,e).cell;return i._combo||(i._combo=new dhtmlXGridComboObject),i._combo},setTabOrder:function(t){var e=t.split(this.delim);this._tabOrder=[];for(var i=this._cCount||t.length,s=0;i>s;s++)e[s]={c:parseInt(e[s]),ind:s};e.sort(function(t,e){return t.c>e.c?1:-1});for(var s=0;i>s;s++)this._tabOrder[e[s].ind]=e[s+1]&&"undefined"!=typeof e[s].c?e[s+1].ind:-1*(e[0].ind+1)},i18n:{loading:"Loading",decimal_separator:".",group_separator:","},_key_events:{k13_1_0:function(){var t=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[t+1],this.cell._cellIndex,!0)},k13_0_1:function(){var t=this.rowsCol._dhx_find(this.row);this.selectCell(this.rowsCol[t-1],this.cell._cellIndex,!0)},k13_0_0:function(){this.editStop(),this.callEvent("onEnter",[this.row?this.row.idd:null,this.cell?this.cell._cellIndex:null]),this._still_active=!0},k9_0_0:function(){if(this.editStop(),!this.callEvent("onTab",[!0]))return!0;var t=this._getNextCell(null,1);t&&(this.selectCell(t.parentNode,t._cellIndex,this.row!=t.parentNode,!1,!0),this._still_active=!0)},k9_0_1:function(){if(this.editStop(),!this.callEvent("onTab",[!1]))return!1;var t=this._getNextCell(null,-1);t&&(this.selectCell(t.parentNode,t._cellIndex,this.row!=t.parentNode,!1,!0),this._still_active=!0)},k113_0_0:function(){this._f2kE&&this.editCell()},k32_0_0:function(){var t=this.cells4(this.cell);return t.changeState&&t.changeState()!==!1?void 0:!1},k27_0_0:function(){this.editStop(!0)},k33_0_0:function(){this.pagingOn?this.changePage(this.currentPage-1):this.scrollPage(-1)},k34_0_0:function(){this.pagingOn?this.changePage(this.currentPage+1):this.scrollPage(1)},k37_0_0:function(){return this.editor||!this.isTreeGrid()?!1:void this.collapseKids(this.row)},k39_0_0:function(){return this.editor||!this.isTreeGrid()?!1:void this.expandKids(this.row)},k40_0_0:function(){var t=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftNext();else{if(!this.row.idd)return;var e=Math.max(t._r_select||0,this.getRowIndex(this.row.idd)),i=this._nextRow(e,1);if(i)t._r_select=null,this.selectCell(i,this.cell._cellIndex,!0),t.pagingOn&&t.showRow(i.idd);else{if(!this.callEvent("onLastRow",[]))return!1;this._key_events.k34_0_0.apply(this,[]),this.pagingOn&&this.rowsCol[e+1]&&this.selectCell(e+1,0,!0)}}this._still_active=!0},k38_0_0:function(){var t=this._realfake?this._fake:this;if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{if(!this.row.idd)return;var e=this.getRowIndex(this.row.idd)+1;if(-1==e||this.pagingOn&&1==e)this._key_events.k33_0_0.apply(this,[]);else{var i=this._nextRow(e-1,-1);this.selectCell(i,this.cell._cellIndex,!0),t.pagingOn&&i&&t.showRow(i.idd)}}this._still_active=!0}},_build_master_row:function(){for(var t=document.createElement("DIV"),e=["<table><tr>"],i=0;i<this._cCount;i++)e.push("<td></td>");e.push("</tr></table>"),t.innerHTML=e.join(""),this._master_row=t.firstChild.rows[0]},_prepareRow:function(t){this._master_row||this._build_master_row();for(var e=this._master_row.cloneNode(!0),i=0;i<e.childNodes.length;i++)e.childNodes[i]._cellIndex=i,this._enbCid&&(e.childNodes[i].id="c_"+t+"_"+i),this.dragAndDropOff&&this.dragger.addDraggableItem(e.childNodes[i],this);return e.idd=t,e.grid=this,e},_process_jsarray_row:function(t,e){t._attrs={};for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};return this._fillRow(t,this._c_order?this._swapColumns(e):e),t},_get_jsarray_data:function(t,e){return t[e]},_process_json_row:function(t,e){return e=this._c_order?this._swapColumns(e.data):e.data,this._process_some_row(t,e)},_process_some_row:function(t,e){t._attrs={};for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};return this._fillRow(t,e),t},_get_json_data:function(t,e){return t.data[e]},_process_js_row:function(t,e){for(var i=[],s=0;s<this.columnIds.length;s++)i[s]=e[this.columnIds[s]],i[s]||0===i[s]||(i[s]="");return this._process_some_row(t,i),t._attrs=e,t},_get_js_data:function(t,e){return t[this.columnIds[e]]},_process_csv_row:function(t,e){t._attrs={};for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};return this._fillRow(t,this._c_order?this._swapColumns(e.split(this.csv.cell)):e.split(this.csv.cell)),t},_get_csv_data:function(t,e){return t.split(this.csv.cell)[e]},_process_store_row:function(t,e){for(var i=[],s=0;s<this.columnIds.length;s++)i[s]=e[this.columnIds[s]];for(var n=0;n<t.childNodes.length;n++)t.childNodes[n]._attrs={};t._attrs=e,this._fillRow(t,i)},_process_xml_row:function(t,e){var i=this.xmlLoader.doXPath(this.xml.cell,e),s=[];if(t._attrs=this._xml_attrs(e),this._ud_enabled)for(var n=this.xmlLoader.doXPath("./userdata",e),o=n.length-1;o>=0;o--){for(var l="",r=0;r<n[o].childNodes.length;r++)l+=n[o].childNodes[r].nodeValue;this.setUserData(t.idd,n[o].getAttribute("name"),l)}for(var r=0;r<i.length;r++){var a=i[this._c_order?this._c_order[r]:r];if(a){var h=t._childIndexes?t._childIndexes[r]:r,d=a.getAttribute("type");t.childNodes[h]&&(d&&(t.childNodes[h]._cellType=d),t.childNodes[h]._attrs=this._xml_attrs(a)),a.getAttribute("xmlcontent")||(a=a.firstChild?a.firstChild.data:""),s.push(a)}}for(r<i.length;r<t.childNodes.length;r++)t.childNodes[r]._attrs={};return t.parentNode&&"row"==t.parentNode.tagName&&(t._attrs.parent=t.parentNode.getAttribute("idd")),this._fillRow(t,s),t},_get_xml_data:function(t,e){for(t=t.firstChild;;){if(!t)return"";if("cell"==t.tagName&&e--,0>e)break;t=t.nextSibling}return t.firstChild?t.firstChild.data:""},_fillRow:function(t,e){this.editor&&this.editStop();for(var i=0;i<t.childNodes.length;i++)if(i<e.length||this.defVal[i]){var s=t.childNodes[i]._cellIndex,n=e[s],o=this.cells4(t.childNodes[i]);!this.defVal[s]||""!=n&&"undefined"!=typeof n||(n=this.defVal[s]),o&&o.setValue(n)}else t.childNodes[i].innerHTML="&nbsp;",t.childNodes[i]._clearCell=!0;return t},_postRowProcessing:function(t,e){t._attrs["class"]&&(t._css=t.className=t._attrs["class"]),t._attrs.locked&&(t._locked=!0),t._attrs.bgColor&&(t.bgColor=t._attrs.bgColor);for(var i=0,s=0;s<t.childNodes.length;s++){var n=t.childNodes[s],o=n._cellIndex,l=n._attrs.style||t._attrs.style;l&&(n.style.cssText+=";"+l),n._attrs["class"]&&(n.className=n._attrs["class"]),l=n._attrs.align||this.cellAlign[o],l&&(n.align=l),n.vAlign=n._attrs.valign||this.cellVAlign[o];var r=n._attrs.bgColor||this.columnColor[o];r&&(n.bgColor=r),n._attrs.colspan&&!e&&(this.setColspan(t.idd,s+i,n._attrs.colspan),i+=n._attrs.colspan-1),this._hrrar&&this._hrrar[o]&&!e&&(n.style.display="none")}this.callEvent("onRowCreated",[t.idd,t,null])},load:function(t,e,i){this.callEvent("onXLS",[this]),2==arguments.length&&"function"!=typeof e&&(i=e,e=null),i=i||"xml",this.xmlFileUrl||(this.xmlFileUrl=t),this._data_type=i,this.xmlLoader=new dtmlXMLLoaderObject(this.doLoadDetails,this,!0,this.no_cashe),this.xmlLoader.onloadAction=function(t,s,n,o,l){t.callEvent&&(l=t["_process_"+i](l),t._contextCallTimer||t.callEvent("onXLE",[t,0,0,l]),e&&(e(),e=null))},this.xmlLoader.loadXML(t)},loadXMLString:function(t,e){var i=new dtmlXMLLoaderObject(function(){});i.loadXMLString(t),this.parse(i,e,"xml")},loadXML:function(t,e){this.load(t,e,"xml")},parse:function(t,e,i){2==arguments.length&&"function"!=typeof e&&(i=e,e=null),i=i||"xml",this._data_type=i,t=this["_process_"+i](t),this._contextCallTimer||this.callEvent("onXLE",[this,0,0,t]),e&&e()},xml:{top:"rows",row:"./row",cell:"./cell",s_row:"row",s_cell:"cell",row_attrs:[],cell_attrs:[]},csv:{row:"\n",cell:","},_xml_attrs:function(t){var e={};if(t.attributes.length)for(var i=0;i<t.attributes.length;i++)e[t.attributes[i].name]=t.attributes[i].value;return e},_process_xml:function(t){if(!t.doXPath){var e=new dtmlXMLLoaderObject(function(){});"string"==typeof t?e.loadXMLString(t):(e.xmlDoc=t.responseXML?t:{},e.xmlDoc.responseXML=t),t=e}if(this._refresh_mode)return this._refreshFromXML(t);this._parsing=!0;var i=t.getXMLTopNode(this.xml.top);if(i.tagName==this.xml.top){var s=i.getAttribute("dhx_security");s&&(dhtmlx.security_key=s),this._parseHead(i);var n=t.doXPath(this.xml.row,i),o=parseInt(t.doXPath("//"+this.xml.top)[0].getAttribute("pos")||0),l=parseInt(t.doXPath("//"+this.xml.top)[0].getAttribute("total_count")||0),l=Math.min(l,32e6/this._srdh),r=!1;if(l&&l!=this.rowsBuffer.length&&(this.rowsBuffer[l-1]||(this.rowsBuffer.length&&(r=!0),this.rowsBuffer[l-1]=null),l<this.rowsBuffer.length&&(this.rowsBuffer.splice(l,this.rowsBuffer.length-l),r=!0)),this.isTreeGrid())return this._process_tree_xml(t);for(var a=0;a<n.length;a++)if(!this.rowsBuffer[a+o]){var h=n[a].getAttribute("id")||a+o+1;this.rowsBuffer[a+o]={idd:h,data:n[a],_parser:this._process_xml_row,_locator:this._get_xml_data},this.rowsAr[h]=n[a]}if(this.callEvent("onDataReady",[]),r&&this._srnd){var d=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=d}else this.render_dataset();return this._parsing=!1,t.xmlDoc.responseXML?t.xmlDoc.responseXML:t.xmlDoc}},_process_jsarray:function(data){this._parsing=!0,data&&data.xmlDoc&&(eval("dhtmlx.temp="+data.xmlDoc.responseText+";"),data=dhtmlx.temp);for(var i=0;i<data.length;i++){var id=i+1;this.rowsBuffer.push({idd:id,data:data[i],_parser:this._process_jsarray_row,_locator:this._get_jsarray_data}),this.rowsAr[id]=data[i]}this.render_dataset(),this._parsing=!1},_process_csv:function(t){if(this._parsing=!0,t.xmlDoc&&(t=t.xmlDoc.responseText),t=t.replace(/\r/g,""),t=t.split(this.csv.row),this._csvHdr){this.clearAll();var e=t.splice(0,1)[0].split(this.csv.cell);this._csvAID||e.splice(0,1),this.setHeader(e.join(this.delim)),this.init()}for(var i=0;i<t.length;i++)if(t[i]||i!=t.length-1){if(this._csvAID){var s=i+1;this.rowsBuffer.push({idd:s,data:t[i],_parser:this._process_csv_row,_locator:this._get_csv_data})}else{var n=t[i].split(this.csv.cell),s=n.splice(0,1)[0];this.rowsBuffer.push({idd:s,data:n,_parser:this._process_jsarray_row,_locator:this._get_jsarray_data})}this.rowsAr[s]=t[i]}this.render_dataset(),this._parsing=!1},_process_js:function(t){return this._process_json(t,"js")},_process_json:function(data,mode){if(this._parsing=!0,data&&data.xmlDoc&&(eval("dhtmlx.temp="+data.xmlDoc.responseText+";"),data=dhtmlx.temp),"js"==mode){data.data&&(data=data.data);for(var i=0;i<data.length;i++){var row=data[i],id=row.id||i+1;this.rowsBuffer.push({idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data}),this.rowsAr[id]=data[i]}}else for(var i=0;i<data.rows.length;i++){var id=data.rows[i].id;this.rowsBuffer.push({idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data}),this.rowsAr[id]=data.rows[i]}data.dhx_security&&(dhtmlx.security_key=data.dhx_security),this.render_dataset(),this._parsing=!1},render_dataset:function(t,e){if(this._srnd){if(this._fillers)return this._update_srnd_view();e=Math.min(this._get_view_size()+(this._srnd_pr||0),this.rowsBuffer.length)}this.pagingOn?(t=Math.max(t||0,(this.currentPage-1)*this.rowsBufferOutSize),e=Math.min(this.currentPage*this.rowsBufferOutSize,this.rowsBuffer.length)):(t=t||0,e=e||this.rowsBuffer.length);for(var i=t;e>i;i++){var s=this.render_row(i);if(-1==s){this.xmlFileUrl&&this.callEvent("onDynXLS",[i,this._dpref?this._dpref:e-i])&&this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+i+"&count="+(this._dpref?this._dpref:e-i),this._data_type),e=i;break}if(s.parentNode&&s.parentNode.tagName||(this._insertRowAt(s,i),(s._attrs.selected||s._attrs.select)&&(this.selectRow(s,s._attrs.call?!0:!1,!0),s._attrs.selected=s._attrs.select=null)),this._ads_count&&i-t==this._ads_count){var n=this;return this._context_parsing=this._context_parsing||this._parsing,this._contextCallTimer=window.setTimeout(function(){n._contextCallTimer=null,n.render_dataset(i,e),n._contextCallTimer||(n._context_parsing?n.callEvent("onXLE",[]):n._fixAlterCss(),n.callEvent("onDistributedEnd",[]),n._context_parsing=!1)},this._ads_time)}}if(this._ads_count&&i==e&&this.callEvent("onDistributedEnd",[]),this._srnd&&!this._fillers){var o=this.rowsBuffer.length-e;for(this._fillers=[],this._fake&&(this._fake._fillers=[]);o>0;){var l=_isIE||window._FFrv?Math.min(o,5e4):o,r=this._add_filler(e,l);r&&this._fillers.push(r),o-=l,e+=l}}this.setSizes()},render_row:function(t){if(!this.rowsBuffer[t])return-1;if(this.rowsBuffer[t]._parser){var e=this.rowsBuffer[t];if(this.rowsAr[e.idd]&&"TR"==this.rowsAr[e.idd].tagName)return this.rowsBuffer[t]=this.rowsAr[e.idd];var i=this._prepareRow(e.idd);return this.rowsBuffer[t]=i,this.rowsAr[e.idd]=i,e._parser.call(this,i,e.data),this._postRowProcessing(i),i}return this.rowsBuffer[t]},_get_cell_value:function(t,e,i){return t._locator?(this._c_order&&(e=this._c_order[e]),t._locator.call(this,t.data,e)):this.cells3(t,e)[i?i:"getValue"]()},sortRows:function(t,e,i){if(this.editStop(),i=(i||"asc").toLowerCase(),e=e||this.fldSort[t],t=t||0,this.isTreeGrid())this.sortTreeRows(t,e,i);else{var s={},n=this.cellType[t],o="getValue";"link"==n&&(o="getContent"),("dhxCalendar"==n||"dhxCalendarA"==n)&&(o="getDate");for(var l=0;l<this.rowsBuffer.length;l++)s[this.rowsBuffer[l].idd]=this._get_cell_value(this.rowsBuffer[l],t,o);this._sortRows(t,e,i,s)}this.callEvent("onAfterSorting",[t,e,i])},_sortCore:function(t,e,i,s,n){var o="sort";if(this._sst&&(n.stablesort=this.rowsCol.stablesort,o="stablesort"),e.length>4&&(e=window[e]),"cus"==e){var l=this._customSorts[t];n[o](function(t,e){return l(s[t.idd],s[e.idd],i,t.idd,e.idd)})}else"function"==typeof e?n[o](function(t,n){return e(s[t.idd],s[n.idd],i,t.idd,n.idd)}):"str"==e?n[o](function(t,e){return"asc"==i?s[t.idd]>s[e.idd]?1:s[t.idd]<s[e.idd]?-1:0:s[t.idd]<s[e.idd]?1:s[t.idd]>s[e.idd]?-1:0}):"int"==e?n[o](function(t,e){var n=parseFloat(s[t.idd]);n=isNaN(n)?-99999999999999:n;var o=parseFloat(s[e.idd]);return o=isNaN(o)?-99999999999999:o,"asc"==i?n-o:o-n}):"date"==e&&n[o](function(t,e){var n=Date.parse(s[t.idd])||Date.parse("01/01/1900"),o=Date.parse(s[e.idd])||Date.parse("01/01/1900");return"asc"==i?n-o:o-n})},_sortRows:function(t,e,i,s){this._sortCore(t,e,i,s,this.rowsBuffer),this._reset_view(),this.callEvent("onGridReconstructed",[])},_reset_view:function(t){if(this.obj.rows[0]){this._lahRw&&this._unsetRowHover(0,!0),this.callEvent("onResetView",[]);var e=this.obj.rows[0].parentNode,i=e.removeChild(e.childNodes[0],!0);if(_isKHTML)for(var s=e.parentNode.childNodes.length-1;s>=0;s--)"TR"==e.parentNode.childNodes[s].tagName&&e.parentNode.removeChild(e.parentNode.childNodes[s],!0);else if(_isIE)for(var s=e.childNodes.length-1;s>=0;s--)e.childNodes[s].removeNode(!0);else e.innerHTML="";e.appendChild(i),this.rowsCol=dhtmlxArray(),this._sst&&this.enableStableSorting(!0),this._fillers=this.undefined,t||(_isIE&&this._srnd,this.render_dataset())}},deleteRow:function(t,e){if(e||(e=this.getRowById(t)),e){if(this.editStop(),!this._realfake&&0==this.callEvent("onBeforeRowDeleted",[t]))return!1;var i=0;if(-1==this.cellType._dhx_find("tree")||this._realfake){e.parentNode&&e.parentNode.removeChild(e);var s=this.rowsCol._dhx_find(e);-1!=s&&this.rowsCol._dhx_removeAt(s);for(var n=0;n<this.rowsBuffer.length;n++)if(this.rowsBuffer[n]&&this.rowsBuffer[n].idd==t){this.rowsBuffer._dhx_removeAt(n),s=n;break}}else i=this._h2.get[t].parent.id,this._removeTrGrRow(e);this.rowsAr[t]=null;for(var n=0;n<this.selectedRows.length;n++)this.selectedRows[n].idd==t&&this.selectedRows._dhx_removeAt(n);if(this._srnd){for(var n=0;n<this._fillers.length;n++){var o=this._fillers[n];o&&(o[0]>=s?this._update_fillers(n,0,-1):o[0]+o[1]>s&&this._update_fillers(n,-1,0))}this._update_srnd_view()}return this.pagingOn&&this.changePage(),this._realfake||this.callEvent("onAfterRowDeleted",[t,i]),this.callEvent("onGridReconstructed",[]),this._ahgr&&this.setSizes(),!0}},_addRow:function(t,e,i){(-1==i||"undefined"==typeof i)&&(i=this.rowsBuffer.length),"string"==typeof e&&(e=e.split(this.delim));var s=this._prepareRow(t);s._attrs={};for(var n=0;n<s.childNodes.length;n++)s.childNodes[n]._attrs={};if(this.rowsAr[s.idd]=s,this._h2&&(this._h2.get[s.idd].buff=s),this._fillRow(s,e),this._postRowProcessing(s),this._skipInsert)return this._skipInsert=!1,this.rowsAr[s.idd]=s;if(this.pagingOn)return this.rowsBuffer._dhx_insertAt(i,s),this.rowsAr[s.idd]=s,s;if(this._fillers){this.rowsCol._dhx_insertAt(i,null),this.rowsBuffer._dhx_insertAt(i,s),this._fake&&this._fake.rowsCol._dhx_insertAt(i,null),this.rowsAr[s.idd]=s;for(var o=!1,l=0;l<this._fillers.length;l++){var r=this._fillers[l];if(r&&r[0]<=i&&r[0]+r[1]>=i){r[1]=r[1]+1;var a=r[2].firstChild.style.height=parseInt(r[2].firstChild.style.height)+this._srdh+"px";o=!0,this._fake&&(this._fake._fillers[l][1]++,this._fake._fillers[l][2].firstChild.style.height=a)}r&&r[0]>i&&(r[0]=r[0]+1,this._fake&&this._fake._fillers[l][0]++)}return o||this._fillers.push(this._add_filler(i,1,0==i?{parentNode:this.obj.rows[0].parentNode,nextSibling:this.rowsCol[1]}:this.rowsCol[i-1])),s}return this.rowsBuffer._dhx_insertAt(i,s),this._insertRowAt(s,i)},addRow:function(t,e,i){var s=this._addRow(t,e,i);return this.dragContext||this.callEvent("onRowAdded",[t]),this.pagingOn&&this.changePage(this.currentPage),this._srnd&&this._update_srnd_view(),s._added=!0,this._ahgr&&this.setSizes(),this.callEvent("onGridReconstructed",[]),s},_insertRowAt:function(t,e,i){if(this.rowsAr[t.idd]=t,this._skipInsert)return this._skipInsert=!1,t;if(0>e||!e&&0!==parseInt(e)?e=this.rowsCol.length:e>this.rowsCol.length&&(e=this.rowsCol.length),this._cssEven){var s=t.className.replace(this._cssUnEven,"");t.className=(this._cssSP?this.getLevel(t.idd):e)%2==1?s+" "+this._cssUnEven+(this._cssSU?" "+this._cssUnEven+"_"+this.getLevel(t.idd):""):s+" "+this._cssEven+(this._cssSU?" "+this._cssEven+"_"+this.getLevel(t.idd):"")}return i||(e!=this.obj.rows.length-1&&this.rowsCol[e]?this.rowsCol[e].parentNode.insertBefore(t,this.rowsCol[e]):_isKHTML?this.obj.appendChild(t):this.obj.firstChild.appendChild(t)),this.rowsCol._dhx_insertAt(e,t),this.callEvent("onRowInserted",[t,e]),t},getRowById:function(t){var e=this.rowsAr[t];if(e){if("TR"!=e.tagName){for(var i=0;i<this.rowsBuffer.length;i++)if(this.rowsBuffer[i]&&this.rowsBuffer[i].idd==t)return this.render_row(i);if(this._h2)return this.render_row(null,e.idd)}return e}return null},cellById:function(t,e){return this.cells(t,e)},cells:function(t,e){if(0==arguments.length)return this.cells4(this.cell);var i=this.getRowById(t),s=i._childIndexes?i.childNodes[i._childIndexes[e]]:i.childNodes[e];return!s&&i._childIndexes&&(s=i.firstChild||{}),this.cells4(s)},cellByIndex:function(t,e){return this.cells2(t,e)},cells2:function(t,e){var i=this.render_row(t),s=i._childIndexes?i.childNodes[i._childIndexes[e]]:i.childNodes[e];return!s&&i._childIndexes&&(s=i.firstChild||{}),this.cells4(s)},cells3:function(t,e){var i=t._childIndexes?t.childNodes[t._childIndexes[e]]:t.childNodes[e];return this.cells4(i)},cells4:function(t){var e=window["eXcell_"+(t._cellType||this.cellType[t._cellIndex])];return e?new e(t):void 0},cells5:function(t,e){var e=e||t._cellType||this.cellType[t._cellIndex];if(!this._ecache[e]){if(window["eXcell_"+e])var i=window["eXcell_"+e];else var i=eXcell_ro;this._ecache[e]=new i(t)}return this._ecache[e].cell=t,this._ecache[e]},dma:function(t){this._ecache||(this._ecache={}),t&&!this._dma?(this._dma=this.cells4,this.cells4=this.cells5):!t&&this._dma&&(this.cells4=this._dma,this._dma=null)},getRowsNum:function(){return this.rowsBuffer.length},enableEditTabOnly:function(t){this.smartTabOrder=arguments.length>0?convertStringToBoolean(t):!0},setExternalTabOrder:function(t,e){var i=this;this.tabStart="object"==typeof t?t:document.getElementById(t);var s=this.tabStart.onkeydown;this.tabStart.onkeydown=function(t){s&&s.call(this,t);var e=t||window.event;return 9!=e.keyCode||e.shiftKey?void 0:(e.cancelBubble=!0,i.selectCell(0,0,0,0,1),i.smartTabOrder&&i.cells2(0,0).isDisabled()&&i._key_events.k9_0_0.call(i),this.blur(),!1)},_isOpera&&(this.tabStart.onkeypress=this.tabStart.onkeydown),this.tabEnd="object"==typeof e?e:document.getElementById(e);var n=this.tabEnd.onkeydown;this.tabEnd.onkeydown=this.tabEnd.onkeypress=function(t){n&&n.call(this,t);var e=t||window.event;return 9==e.keyCode&&e.shiftKey?(e.cancelBubble=!0,i.selectCell(i.getRowsNum()-1,i.getColumnCount()-1,0,0,1),i.smartTabOrder&&i.cells2(i.getRowsNum()-1,i.getColumnCount()-1).isDisabled()&&i._key_events.k9_0_1.call(i),this.blur(),!1):void 0},_isOpera&&(this.tabEnd.onkeypress=this.tabEnd.onkeydown)},uid:function(){return this._ui_seed||(this._ui_seed=(new Date).valueOf()),this._ui_seed++},clearAndLoad:function(){var t=this._pgn_skin;this._pgn_skin=null,this.clearAll(),this._pgn_skin=t,this.load.apply(this,arguments)},getStateOfView:function(){if(this.pagingOn){var t=(this.currentPage-1)*this.rowsBufferOutSize;return[this.currentPage,t,Math.min(t+this.rowsBufferOutSize,this.rowsBuffer.length),this.rowsBuffer.length]}return[Math.floor(this.objBox.scrollTop/this._srdh),Math.ceil(parseInt(this.objBox.offsetHeight)/this._srdh),this.rowsBuffer.length]}},function(){function t(t,e){this[t]=e}function e(t,e){this[t].call(this,e)}function i(t,e){this[t].call(this,e.join(this.delim))}function s(t,e){for(var i=0;i<e.length;i++)if("object"==typeof e[i]){var s=this.getCombo(i);for(var n in e[i])s.put(n,e[i][n])}}function n(t,e){function i(t,e,i){s[e]||(s[e]=[]),"object"==typeof i&&(i.toString=function(){return this.text}),s[e][t]=i}for(var s=[],n=0;n<e.length;n++)if("object"==typeof e[n]&&e[n].length)for(var o=0;o<e[n].length;o++)i(n,o,e[n][o]);else i(n,0,e[n]);for(var n=0;n<s.length;n++)for(var o=0;o<s[0].length;o++){var l=s[n][o];if(s[n][o]=(l||"").toString()||"&nbsp;",l&&l.colspan)for(var r=1;r<l.colspan;r++)i(o+r,n,"#cspan");if(l&&l.rowspan)for(var r=1;r<l.rowspan;r++)i(o,n+r,"#rspan")}this.setHeader(s[0]);for(var n=1;n<s.length;n++)this.attachHeader(s[n])}var o=[{name:"label",def:"&nbsp;",operation:"setHeader",type:n},{name:"id",def:"",operation:"columnIds",type:t},{name:"width",def:"*",operation:"setInitWidths",type:i},{name:"align",def:"left",operation:"cellAlign",type:t},{name:"valign",def:"middle",operation:"cellVAlign",type:t},{name:"sort",def:"na",operation:"fldSort",type:t},{name:"type",def:"ro",operation:"setColTypes",type:i},{name:"options",def:"",operation:"",type:s}];
dhtmlx.extend_api("dhtmlXGridObject",{_init:function(t){return[t.parent]},image_path:"setImagePath",columns:"columns",rows:"rows",headers:"headers",skin:"setSkin",smart_rendering:"enableSmartRendering",css:"enableAlterCss",auto_height:"enableAutoHeight",save_hidden:"enableAutoHiddenColumnsSaving",save_cookie:"enableAutoSaving",save_size:"enableAutoSizeSaving",auto_width:"enableAutoWidth",block_selection:"enableBlockSelection",csv_id:"enableCSVAutoID",csv_header:"enableCSVHeader",cell_ids:"enableCellIds",colspan:"enableColSpan",column_move:"enableColumnMove",context_menu:"enableContextMenu",distributed:"enableDistributedParsing",drag:"enableDragAndDrop",drag_order:"enableDragOrder",tabulation:"enableEditTabOnly",header_images:"enableHeaderImages",header_menu:"enableHeaderMenu",keymap:"enableKeyboardSupport",mouse_navigation:"enableLightMouseNavigation",markers:"enableMarkedCells",math_editing:"enableMathEditing",math_serialization:"enableMathSerialization",drag_copy:"enableMercyDrag",multiline:"enableMultiline",multiselect:"enableMultiselect",save_column_order:"enableOrderSaving",hover:"enableRowsHover",rowspan:"enableRowspan",smart:"enableSmartRendering",save_sorting:"enableSortingSaving",stable_sorting:"enableStableSorting",undo:"enableUndoRedo",csv_cell:"setCSVDelimiter",date_format:"setDateFormat",drag_behavior:"setDragBehavior",editable:"setEditable",without_header:"setNoHeader",submit_changed:"submitOnlyChanged",submit_serialization:"submitSerialization",submit_selected:"submitOnlySelected",submit_id:"submitOnlyRowID",xml:"load"},{columns:function(t){for(var i=0;i<o.length;i++){for(var s=[],n=0;n<t.length;n++)s[n]=t[n][o[i].name]||o[i].def;var l=o[i].type||e;l.call(this,o[i].operation,s,t)}this.init()},rows:function(){},headers:function(t){for(var e=0;e<t.length;e++)this.attachHeader(t[e])}})}(),dhtmlXGridObject.prototype._dp_init=function(t){t.attachEvent("insertCallback",function(t,e){this.obj._h2?this.obj.addRow(e,i,null,parent):this.obj.addRow(e,[],0);var i=this.obj.getRowById(e);i&&(this.obj._process_xml_row(i,t.firstChild),this.obj._postRowProcessing(i))}),t.attachEvent("updateCallback",function(t,e){var i=this.obj.getRowById(e);i&&(this.obj._process_xml_row(i,t.firstChild),this.obj._postRowProcessing(i))}),t.attachEvent("deleteCallback",function(t,e){this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj.deleteRow(e)}),t._methods=["setRowTextStyle","setCellTextStyle","changeRowId","deleteRow"],this.attachEvent("onEditCell",function(e,i,s){if(t._columns&&!t._columns[s])return!0;var n=this.cells(i,s);return 1==e?n.isCheckbox()&&t.setUpdated(i,!0):2==e&&n.wasChanged()&&t.setUpdated(i,!0),!0}),this.attachEvent("onRowPaste",function(e){t.setUpdated(e,!0)}),this.attachEvent("onUndo",function(e){t.setUpdated(e,!0)}),this.attachEvent("onRowIdChange",function(e,i){var s=t.findRow(e);s<t.updatedRows.length&&(t.updatedRows[s]=i)}),this.attachEvent("onSelectStateChanged",function(){return"row"==t.updateMode&&t.sendData(),!0}),this.attachEvent("onEnter",function(){return"row"==t.updateMode&&t.sendData(),!0}),this.attachEvent("onBeforeRowDeleted",function(e){if(!this.rowsAr[e])return!0;if(this.dragContext&&t.dnd)return window.setTimeout(function(){t.setUpdated(e,!0)},1),!0;var i=t.getState(e);return this._h2&&this._h2.forEachChild(e,function(e){t.setUpdated(e.id,!1),t.markRow(e.id,!0,"deleted")},this),"inserted"==i?(t.set_invalid(e,!1),t.setUpdated(e,!1),!0):"deleted"==i?!1:"true_deleted"==i?(t.setUpdated(e,!1),!0):(t.setUpdated(e,!0,"deleted"),!1)}),this.attachEvent("onBindUpdate",function(e){"object"==typeof e&&(e=e.id),t.setUpdated(e,!0)}),this.attachEvent("onRowAdded",function(e){return this.dragContext&&t.dnd?!0:(t.setUpdated(e,!0,"inserted"),!0)}),t._getRowData=function(t){var e=[];e.gr_id=t,this.obj.isTreeGrid()&&(e.gr_pid=this.obj.getParentId(t));for(var i=this.obj.getRowById(t),s=0;s<this.obj._cCount;s++){if(this.obj._c_order)var n=this.obj._c_order[s];else var n=s;var o=this.obj.cells(i.idd,s);(!this._changed||o.wasChanged())&&(this._endnm?e[this.obj.getColumnId(s)]=o.getValue():e["c"+n]=o.getValue())}var l=this.obj.UserData[t];if(l)for(var r=0;r<l.keys.length;r++)l.keys[r]&&0!=l.keys[r].indexOf("__")&&(e[l.keys[r]]=l.values[r]);var l=this.obj.UserData.gridglobaluserdata;if(l)for(var r=0;r<l.keys.length;r++)e[l.keys[r]]=l.values[r];return e},t._clearUpdateFlag=function(t){var e=this.obj.getRowById(t);if(e)for(var i=0;i<this.obj._cCount;i++)this.obj.cells(t,i).cell.wasChanged=!1},t.checkBeforeUpdate=function(t){for(var e=!0,i=[],s=0;s<this.obj._cCount;s++)if(this.mandatoryFields[s]){var n=this.mandatoryFields[s].call(this.obj,this.obj.cells(t,s).getValue(),t,s);"string"==typeof n?(this.messages.push(n),e=!1):(e&=n,i[s]=!n)}return e||(this.set_invalid(t,"invalid",i),this.setUpdated(t,!1)),e}},dhtmlXGridCellObject.prototype={getAttribute:function(t){return this.cell._attrs[t]},setAttribute:function(t,e){this.cell._attrs[t]=e},getInput:function(){if(this.obj&&("INPUT"==this.obj.tagName||"TEXTAREA"==this.obj.tagName))return this.obj;var t=(this.obj||this.cell).getElementsByTagName("TEXTAREA");return t.length||(t=(this.obj||this.cell).getElementsByTagName("INPUT")),t[0]}},dhtmlXGridCellObject.prototype.setValue=function(t){"number"==typeof t||t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t="&nbsp;",this.cell._clearCell=!0),this.setCValue(t)},dhtmlXGridCellObject.prototype.getTitle=function(){return _isIE?this.cell.innerText:this.cell.textContent},dhtmlXGridCellObject.prototype.setCValue=function(t,e){this.cell.innerHTML=t,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,arguments.length>1?e:t])},dhtmlXGridCellObject.prototype.setCTxtValue=function(t){this.cell.innerHTML="",this.cell.appendChild(document.createTextNode(t)),this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,t])},dhtmlXGridCellObject.prototype.setLabel=function(t){this.cell.innerHTML=t},dhtmlXGridCellObject.prototype.getMath=function(){return this._val?this.val:this.getValue()},eXcell.prototype=new dhtmlXGridCellObject,eXcell_ed.prototype=new eXcell,eXcell_edtxt.prototype=new eXcell_ed,eXcell_edn.prototype=new eXcell_ed,eXcell_edn.prototype.setValue=function(t){return t&&""!=t.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell._orig_value=t,void this.setCValue(this.grid._aplNF(t,this.cell._cellIndex),t)):(this.cell._clearCell=!0,this.setCValue("&nbsp;",0))},eXcell_ch.prototype=new eXcell,eXcell_ch.prototype.setValue=function(t){this.cell.style.verticalAlign="middle",t&&(t=t.toString()._dhx_trim(),("false"==t||"0"==t)&&(t="")),t?(t="1",this.cell.chstate="1"):(t="0",this.cell.chstate="0");this.setCValue("<img src='"+this.grid.imgURL+"item_chk"+t+".gif' onclick='new eXcell_ch(this.parentNode).changeState(true); (arguments[0]||event).cancelBubble=true; '>",this.cell.chstate)},eXcell_ra.prototype=new eXcell_ch,eXcell_ra.prototype.setValue=function(t){if(this.cell.style.verticalAlign="middle",t&&(t=t.toString()._dhx_trim(),("false"==t||"0"==t)&&(t="")),t){if(this.grid._RaSeCol||(this.grid._RaSeCol=[]),this.grid._RaSeCol[this.cell._cellIndex]){var e=this.grid.cells4(this.grid._RaSeCol[this.cell._cellIndex]);e.setValue("0"),this.grid.rowsAr[e.cell.parentNode.idd]&&this.grid.callEvent("onEditCell",[1,e.cell.parentNode.idd,e.cell._cellIndex])}this.grid._RaSeCol[this.cell._cellIndex]=this.cell,t="1",this.cell.chstate="1"}else t="0",this.cell.chstate="0";this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+t+".gif' onclick='new eXcell_ra(this.parentNode).changeState(false);'>",this.cell.chstate)},eXcell_txt.prototype=new eXcell,eXcell_txttxt.prototype=new eXcell_txt,eXcell_txt.prototype.setValue=function(t){this.cell._brval=t,t&&""!=t.toString()._dhx_trim()?this.cell._clearCell=!1:(t="&nbsp;",this.cell._clearCell=!0),!this.grid.multiLine||this.cell._clearCell?this.setCValue(t,this.cell._brval):this.setCValue(t.replace(/\n/g,"<br/>"),t)},eXcell_co.prototype=new eXcell,eXcell_co.prototype.getText=function(){return this.cell.innerHTML},eXcell_co.prototype.setValue=function(t){if("object"==typeof t){var e=this.grid.xmlLoader.doXPath("./option",t);e.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var i=0;i<e.length;i++)this.cell._combo.put(e[i].getAttribute("value"),e[i].firstChild?e[i].firstChild.data:"");t=t.firstChild.data}if(""==(t||"").toString()._dhx_trim()&&(t=null),this.cell.combo_value=t,null!==t){var s=(this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(t);this.setCValue(null===s?t:s,t)}else this.setCValue("&nbsp;",t)},eXcell_coro.prototype=new eXcell_co,eXcell_cotxt.prototype=new eXcell_co,eXcell_cotxt.prototype.getText=function(){return _isIE?this.cell.innerText:this.cell.textContent},eXcell_cotxt.prototype.setValue=function(t){if("object"==typeof t){var e=this.grid.xmlLoader.doXPath("./option",t);e.length&&(this.cell._combo=new dhtmlXGridComboObject);for(var i=0;i<e.length;i++)this.cell._combo.put(e[i].getAttribute("value"),e[i].firstChild?e[i].firstChild.data:"");t=t.firstChild.data}""==(t||"").toString()._dhx_trim()&&(t=null),null!==t?this.setCTxtValue((this.cell._combo||this.grid.getCombo(this.cell._cellIndex)).get(t)||t,t):this.setCTxtValue(" ",t),this.cell.combo_value=t},eXcell_corotxt.prototype=new eXcell_cotxt,eXcell_cp.prototype=new eXcell,eXcell_cp.prototype.setValue=function(t){this.setCValue("<div style='width:100%;height:"+(this.grid.multiLine?this.cell.offsetHeight-2:16)+";background-color:"+(t||"")+";border:0px;'>&nbsp;</div>",t),this.cell.firstChild._bg=t},eXcell_img.prototype=new eXcell,eXcell_img.prototype.getTitle=function(){return this.cell._brval},eXcell_img.prototype.setValue=function(t){var e=t;if(-1!=(t||"").indexOf("^")){var i=t.split("^");t=i[0],e=this.cell._attrs.title||i[1],i.length>2&&(this.cell.lnk=i[2],i[3]&&(this.cell.trg=i[3])),this.cell.titFl="1"}this.setCValue("<img src='"+this.grid.iconURL+(t||"")._dhx_trim()+"' border='0'>",t),this.cell.lnk&&(this.cell.innerHTML="<a href='"+this.cell.lnk+"' target='"+this.cell.trg+"'>"+this.cell.innerHTML+"</a>"),this.cell._brval=e},eXcell_price.prototype=new eXcell_ed,eXcell_price.prototype.setValue=function(t){isNaN(parseFloat(t))&&(t=this.val||0);var e="green";0>t&&(e="red"),this.setCValue("<span>$</span><span style='padding-right:2px;color:"+e+";'>"+t+"</span>",t)},eXcell_dyn.prototype=new eXcell_ed,eXcell_dyn.prototype.setValue=function(t){if((!t||isNaN(Number(t)))&&""!==t&&(t=0),t>0)var e="green",i="dyn_up.gif";else if(0==t)var e="black",i="dyn_.gif";else var e="red",i="dyn_down.gif";this.setCValue("<div style='position:relative;padding-right:2px; width:100%;overflow:hidden; white-space:nowrap;'><img src='"+this.grid.imgURL+i+"' height='15' style='position:absolute;top:0px;left:0px;'><span style=' padding-left:20px; width:100%;color:"+e+";'>"+t+"</span></div>",t)},eXcell_ro.prototype=new eXcell,window.eXcell_hidden=function(t){t&&(this.cell=t,this.grid=this.cell.parentNode.grid),this.edit=function(){},this.isDisabled=function(){return!0},this.getValue=function(){return this.cell.val}},eXcell_hidden.prototype=new eXcell,eXcell_hidden.prototype.setValue=function(t){this.cell.val=t},eXcell_ron.prototype=new eXcell,eXcell_ron.prototype.setValue=function(t){if(0===t);else if(!t||""==t.toString()._dhx_trim())return this.setCValue("&nbsp;"),this.cell._clearCell=!0;this.cell._clearCell=!1,this.setCValue(t?this.grid._aplNF(t,this.cell._cellIndex):"0")},eXcell_rotxt.prototype=new eXcell,Hashtable.prototype=new dhtmlXGridComboObject,dhtmlXGridObject.prototype.enableDragAndDrop=function(t){"temporary_disabled"==t?(this.dADTempOff=!1,t=!0):this.dADTempOff=!0,this.dragAndDropOff=convertStringToBoolean(t),this._drag_validate=!0,t&&(this.objBox.ondragstart=function(t){return(t||event).cancelBubble=!0,!1})},dhtmlXGridObject.prototype.setDragBehavior=function(t){switch(this.dadmodec=this.dadmodefix=0,t){case"child":this.dadmode=0,this._sbmod=!1;break;case"sibling":this.dadmode=1,this._sbmod=!1;break;case"sibling-next":this.dadmode=1,this._sbmod=!0;break;case"complex":this.dadmode=2,this._sbmod=!1;break;case"complex-next":this.dadmode=2,this._sbmod=!0}},dhtmlXGridObject.prototype.enableDragOrder=function(t){this._dndorder=convertStringToBoolean(t)},dhtmlXGridObject.prototype._checkParent=function(t,e){var i=this._h2.get[t.idd].parent;if(i.parent){for(var s=0;s<e.length;s++)if(e[s]==i.id)return!0;return this._checkParent(this.rowsAr[i.id],e)}},dhtmlXGridObject.prototype._createDragNode=function(t,e){if(this.editStop(),window.dhtmlDragAndDrop.dragNode)return null;if(!this.dADTempOff)return null;t.parentObject=new Object,t.parentObject.treeNod=this;var i=this.callEvent("onBeforeDrag",[t.parentNode.idd,t._cellIndex,e]);if(!i)return null;var s=new Array;s=this.getSelectedId(),s=s&&""!=s?s.split(this.delim):[];for(var n=!1,o=0;o<s.length;o++)s[o]==t.parentNode.idd&&(n=!0);if(n||(this.selectRow(this.rowsAr[t.parentNode.idd],!1,e.ctrlKey,!1),e.ctrlKey||(s=[]),s[this.selMultiRows?s.length:0]=t.parentNode.idd),this.isTreeGrid())for(var o=s.length-1;o>=0;o--)this._checkParent(this.rowsAr[s[o]],s)&&s.splice(o,1);var l=this;s.length&&this._dndorder&&s.sort(function(t,e){return l.rowsAr[t].rowIndex>l.rowsAr[e].rowIndex?1:-1});var r=this.getFirstParentOfType(_isIE?e.srcElement:e.target,"TD");r&&(this._dndExtra=r._cellIndex),this._dragged=new Array;for(var o=0;o<s.length;o++)this.rowsAr[s[o]]&&(this._dragged[this._dragged.length]=this.rowsAr[s[o]],this.rowsAr[s[o]].treeNod=this);t.parentObject.parentNode=t.parentNode;var a=document.createElement("div");return a.innerHTML=i!==!0?i:this.rowToDragElement(t.parentNode.idd),a.style.position="absolute",a.className="dragSpanDiv",a},dhtmlXGridObject.prototype._createSdrgc=function(){this._sdrgc=document.createElement("DIV"),this._sdrgc.innerHTML="&nbsp;",this._sdrgc.className="gridDragLine",this.objBox.appendChild(this._sdrgc)},dragContext.prototype.valid=function(){if(this.sobj!=this.tobj)return!0;if(this.sid==this.tid)return!1;if("treeGrid"==this.target)for(var t=this.tid;t=this.tobj.getParentId(t);)if(this.sid==t)return!1;return!0},dragContext.prototype.close=function(){this.sobj=null,this.tobj=null},dragContext.prototype.copy=function(){return new dragContext(this.source,this.target,this.mode,this.dropmode,this.sid,this.tid,this.sobj,this.tobj,this.sExtra,this.tExtra)},dragContext.prototype.set=function(t,e){return this[t]=e,this},dragContext.prototype.uid=function(){for(this.nid=this.sid;this.tobj.rowsAr[this.nid];)this.nid=this.nid+(new Date).valueOf();return this},dragContext.prototype.data=function(){return this.sobj==this.tobj?this.sobj._getRowArray(this.sobj.rowsAr[this.sid]):"tree"==this.source?this.tobj.treeToGridElement(this.sobj,this.sid,this.tid):this.tobj.gridToGrid(this.sid,this.sobj,this.tobj)},dragContext.prototype.attrs=function(){return"tree"==this.source?{}:this.sobj.rowsAr[this.sid]._attrs},dragContext.prototype.childs=function(){return"treeGrid"==this.source&&this.sobj._h2.get[this.sid]._xml_await?this.sobj._h2.get[this.sid].has_kids:null},dragContext.prototype.pid=function(){if(!this.tid)return 0;if(!this.tobj._h2)return 0;if("treeGrid"==this.target){if("child"==this.dropmode)return this.tid;var t=this.tobj.rowsAr[this.tid],e=this.tobj._h2.get[t.idd].parent.id;if(this.alfa&&this.tobj._sbmod&&t.nextSibling){var i=this.tobj._h2.get[t.nextSibling.idd].parent.id;if(i==this.tid)return this.tid;if(i!=e)return i}return e}},dragContext.prototype.ind=function(){if(this.tid==window.unknown)return this.tobj.rowsBuffer.length;"treeGrid"==this.target&&this.tobj.openItem("child"==this.dropmode?this.tid:this.tobj.getParentId(this.tid));var t=this.tobj.rowsBuffer._dhx_find(this.tobj.rowsAr[this.tid]);if(this.alfa&&this.tobj._sbmod&&"sibling"==this.dropmode){var e=this.tobj.rowsAr[this.tid];if(e.nextSibling&&this._h2.get[e.nextSibling.idd].parent.id==this.tid)return t+1}return t+1+("treeGrid"==this.target&&t>=0&&"minus"==this.tobj._h2.get[this.tobj.rowsBuffer[t].idd].state?this.tobj._getOpenLenght(this.tobj.rowsBuffer[t].idd,0):0)},dragContext.prototype.img=function(){return"grid"!=this.target&&this.sobj._h2?this.sobj.getItemImage(this.sid):null},dragContext.prototype.slist=function(){for(var t=new Array,e=0;e<this.sid.length;e++)t[t.length]=this.sid[e]["tree"==this.source?"id":"idd"];return t.join(",")},dhtmlXGridObject.prototype._drag=function(t,e,i,s){if(this._realfake)return this._fake._drag();this.lastLanding;this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer);var n=i.parentNode,o=t.parentObject;n.idd||(n.grid=this,this.dadmodefix=0);var l=new dragContext(0,0,0,1==n.grid.dadmode||n.grid.dadmodec?"sibling":"child");if(o&&o.childNodes)l.set("source","tree").set("sobj",o.treeNod).set("sid",l.sobj._dragged);else{if(!o)return!0;o.treeNod.isTreeGrid&&o.treeNod.isTreeGrid()&&l.set("source","treeGrid"),l.set("sobj",o.treeNod).set("sid",l.sobj._dragged)}n.grid.isTreeGrid()?l.set("target","treeGrid"):l.set("dropmode","sibling"),l.set("tobj",n.grid).set("tid",n.idd),2==l.tobj.dadmode&&1==l.tobj.dadmodec&&l.tobj.dadmodefix<0&&(l.tid=l.tobj.obj.rows[1].idd!=l.tid?n.previousSibling.idd:0);var r=this.getFirstParentOfType(s,"TD");if(r&&l.set("tExtra",r._cellIndex),r&&l.set("sExtra",l.sobj._dndExtra),l.sobj.dpcpy&&l.set("mode","copy"),l.tobj._realfake&&(l.tobj=l.tobj._fake),l.sobj._realfake&&(l.sobj=l.sobj._fake),l.tobj._clearMove(),o&&o.treeNod&&o.treeNod._nonTrivialRow)o.treeNod._nonTrivialRow(this,l.tid,l.dropmode,o);else{if(l.tobj.dragContext=l,!l.tobj.callEvent("onDrag",[l.slist(),l.tid,l.sobj,l.tobj,l.sExtra,l.tExtra]))return l.tobj.dragContext=null;var a=new Array;if("object"==typeof l.sid){for(var h=l.copy(),d=0;d<l.sid.length;d++)h.set("alfa",!d).set("sid",l.sid[d]["tree"==l.source?"id":"idd"]).valid()&&(h.tobj._dragRoutine(h),"treeGrid"==h.target&&"child"==h.dropmode&&h.tobj.openItem(h.tid),a[a.length]=h.nid,h.set("dropmode","sibling").set("tid",h.nid));h.close()}else l.tobj._dragRoutine(l);l.tobj.laterLink&&l.tobj.laterLink(),l.tobj.callEvent("onDrop",[l.slist(),l.tid,a.join(","),l.sobj,l.tobj,l.sExtra,l.tExtra])}l.tobj.dragContext=null,l.close()},dhtmlXGridObject.prototype._dragRoutine=function(t){if(t.sobj==t.tobj&&"grid"==t.source&&"move"==t.mode&&!this._fake){if(t.sobj._dndProblematic)return;var e=t.sobj.rowsAr[t.sid],i=t.sobj.rowsCol._dhx_find(e);if(t.sobj.rowsCol._dhx_removeAt(t.sobj.rowsCol._dhx_find(e)),t.sobj.rowsBuffer._dhx_removeAt(t.sobj.rowsBuffer._dhx_find(e)),t.sobj.rowsBuffer._dhx_insertAt(t.ind(),e),t.tobj._fake){t.tobj._fake.rowsCol._dhx_removeAt(i);var s=t.tobj._fake.rowsAr[t.sid];s.parentNode.removeChild(s)}return t.sobj._insertRowAt(e,t.ind()),t.nid=t.sid,void t.sobj.callEvent("onGridReconstructed",[])}var n;if(this._h2&&"undefined"!=typeof t.tid&&"sibling"==t.dropmode&&(this._sbmod||t.tid)?t.alfa&&this._sbmod&&this._h2.get[t.tid].childs.length?(this.openItem(t.tid),n=t.uid().tobj.addRowBefore(t.nid,t.data(),this._h2.get[t.tid].childs[0].id,t.img(),t.childs())):n=t.uid().tobj.addRowAfter(t.nid,t.data(),t.tid,t.img(),t.childs()):n=t.uid().tobj.addRow(t.nid,t.data(),t.ind(),t.pid(),t.img(),t.childs()),n._attrs=t.attrs(),"tree"==t.source){this.callEvent("onRowAdded",[t.nid]);var o=t.sobj._globalIdStorageFind(t.sid);if(o.childsCount){for(var l=t.copy().set("tid",t.nid).set("dropmode","grid"==t.target?"sibling":"child"),r=0;r<o.childsCount;r++)t.tobj._dragRoutine(l.set("sid",o.childNodes[r].id)),"move"==t.mode&&r--;l.close()}}else if(t.tobj._copyUserData(t),this.callEvent("onRowAdded",[t.nid]),"treeGrid"==t.source){t.sobj==t.tobj&&(n._xml=t.sobj.rowsAr[t.sid]._xml);var a=t.sobj._h2.get[t.sid];if(a&&a.childs.length){var l=t.copy().set("tid",t.nid);"grid"==t.target?l.set("dropmode","sibling"):(l.tobj.openItem(t.tid),l.set("dropmode","child"));for(var h=a.childs.length,r=0;h>r;r++)t.sobj.render_row_tree(null,a.childs[r].id),t.tobj._dragRoutine(l.set("sid",a.childs[r].id)),h!=a.childs.length&&(r--,h=a.childs.length);l.close()}}"move"==t.mode&&(t.sobj["tree"==t.source?"deleteItem":"deleteRow"](t.sid),t.sobj!=t.tobj||t.tobj.rowsAr[t.sid]||(t.tobj.changeRowId(t.nid,t.sid),t.nid=t.sid))},dhtmlXGridObject.prototype.gridToGrid=function(t,e){for(var i=new Array,s=0;s<e.hdr.rows[0].cells.length;s++)i[s]=e.cells(t,s).getValue();return i},dhtmlXGridObject.prototype.checkParentLine=function(t,e){return this._h2&&e&&t?t.id==e?!0:this.checkParentLine(t.parent,e):!1},dhtmlXGridObject.prototype._dragIn=function(t,e,i,s){if(!this.dADTempOff)return 0;var n=this.isTreeGrid(),o=e.parentNode.idd?e.parentNode:e.parentObject;if(this._drag_validate){if(t.parentNode==e.parentNode)return 0;if(n&&this==o.grid&&this.checkParentLine(this._h2.get[t.parentNode.idd],e.parentNode.idd))return 0}return this.callEvent("onDragIn",[o.idd||o.id,t.parentNode.idd,o.grid||o.treeNod,t.grid||t.parentNode.grid])?(this._setMove(t,i,s),n&&""!=t.parentNode.expand?(this._autoOpenTimer=window.setTimeout(new callerFunction(this._autoOpenItem,this),1e3),this._autoOpenId=t.parentNode.idd):this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer),t):this._setMove(t,i,s,!0)},dhtmlXGridObject.prototype._autoOpenItem=function(t,e){e.openItem(e._autoOpenId)},dhtmlXGridObject.prototype._dragOut=function(t){this._clearMove();var e=t.parentNode.parentObject?t.parentObject.id:t.parentNode.idd;this.callEvent("onDragOut",[e]),this._autoOpenTimer&&window.clearTimeout(this._autoOpenTimer)},dhtmlXGridObject.prototype._setMove=function(t,e,i,s){if(t.parentNode.idd){var n=getAbsoluteTop(t),o=getAbsoluteTop(this.objBox);if(n-o>parseInt(this.objBox.offsetHeight)-50&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)+20),n-o+parseInt(this.objBox.scrollTop)<parseInt(this.objBox.scrollTop)+30&&(this.objBox.scrollTop=parseInt(this.objBox.scrollTop)-20),s)return 0;if(2==this.dadmode){var l=i-n+(document.body.scrollTop||document.documentElement.scrollTop)-2-t.offsetHeight/2;Math.abs(l)-t.offsetHeight/6>0?(this.dadmodec=1,this.dadmodefix=0>l?-1:1):this.dadmodec=0}else this.dadmodec=this.dadmode;if(this.dadmodec)this._sdrgc||this._createSdrgc(),this._sdrgc.style.display="block",this._sdrgc.style.top=n-o+parseInt(this.objBox.scrollTop)+(this.dadmodefix>=0?t.offsetHeight:0)+"px";else if(this._llSelD=t,"TR"==t.parentNode.tagName)for(var r=0;r<t.parentNode.childNodes.length;r++){var l=t.parentNode.childNodes[r];l._bgCol=l.style.backgroundColor,l.style.backgroundColor="#FFCCCC"}}},dhtmlXGridObject.prototype._clearMove=function(){if(this._sdrgc&&(this._sdrgc.style.display="none"),this._llSelD&&"TR"==this._llSelD.parentNode.tagName)for(var t=this._llSelD.parentNode.childNodes,e=0;e<t.length;e++)t[e].style.backgroundColor=t[e]._bgCol;this._llSelD=null},dhtmlXGridObject.prototype.rowToDragElement=function(t){var e=this.cells(t,0).getValue();return e},dhtmlXGridObject.prototype._copyUserData=function(t){if(!t.tobj.UserData[t.nid]||t.tobj!=t.sobj){t.tobj.UserData[t.nid]=new Hashtable;var e=t.sobj.UserData[t.sid],i=t.tobj.UserData[t.nid];e&&(i.keys=i.keys.concat(e.keys),i.values=i.values.concat(e.values))}},dhtmlXGridObject.prototype.moveRow=function(t,e,i,s){switch(e){case"row_sibling":this.moveRowTo(t,i,"move","sibling",this,s);break;case"up":this.moveRowUp(t);break;case"down":this.moveRowDown(t)}},dhtmlXGridObject.prototype._nonTrivialNode=function(t,e,i,s,n){if(t.callEvent&&!n&&!t.callEvent("onDrag",[s.idd,e.id,i?i.id:null,this,t]))return!1;for(var o=s.idd,l=o;t._idpull[l];)l+=(new Date).getMilliseconds().toString();var r=this.isTreeGrid()?this.getItemImage(o):"";if(i){for(d=0;d<e.childsCount&&e.childNodes[d]!=i;d++);0!=d?i=e.childNodes[d-1]:(st="TOP",i="")}var a=t._attachChildNode(e,l,this.gridToTreeElement(t,l,o),"",r,r,r,"","",i);if(this._h2){var h=this._h2.get[o];if(h.childs.length)for(var d=0;d<h.childs.length;d++)this._nonTrivialNode(t,a,0,this.rowsAr[h.childs[d].id],1),this.dpcpy||d--}this.dpcpy||this.deleteRow(o),t.callEvent&&!n&&t.callEvent("onDrop",[l,e.id,i?i.id:null,this,t])},dhtmlXGridObject.prototype.gridToTreeElement=function(t,e,i){return this.cells(i,0).getValue()},dhtmlXGridObject.prototype.treeToGridElement=function(t,e){var i=new Array,s=this.cellType._dhx_find("tree");-1==s&&(s=0);for(var n=0;n<this.getColumnCount();n++)i[i.length]=n!=s?t.getUserData(e,this.getColumnId(n))||"":t.getItemText(e);return i},dhtmlXGridObject.prototype.moveRowTo=function(t,e,i,s,n,o){var l=new dragContext((n||this).isTreeGrid()?"treeGrid":"grid",(o||this).isTreeGrid()?"treeGrid":"grid",i,s||"sibling",t,e,n||this,o||this);return l.tobj._dragRoutine(l),l.close(),l.nid},dhtmlXGridObject.prototype.enableMercyDrag=function(t){this.dpcpy=convertStringToBoolean(t)},dhtmlXGridObject.prototype.toPDF=function(t,e,i,s,n,o){function l(t){for(var e=[],n=1;n<p.hdr.rows.length;n++){e[n]=[];for(var o=0;o<p._cCount;o++){var l=p.hdr.rows[n].childNodes[o];e[n][o]||(e[n][o]=[0,0]),l&&(e[n][l._cellIndexS]=[l.colSpan,l.rowSpan])}}var r="<rows profile='"+t+"'";i&&(r+=" header='"+i+"'"),s&&(r+=" footer='"+s+"'"),r+="><head>"+p._serialiseExportConfig(e).replace(/^<head/,"<columns").replace(/head>$/,"columns>");for(var n=2;n<p.hdr.rows.length;n++){for(var h=0,d=p.hdr.rows[n],c="",o=0;o<p._cCount;o++)if(p._srClmn&&!p._srClmn[o]||p._hrrar[o]&&(!p._fake||o>=p._fake.hdrLabels.length))h++;else{var u=e[n][o],_=u[0]&&u[0]>1?' colspan="'+u[0]+'" ':"";u[1]&&u[1]>1&&(_+=' rowspan="'+u[1]+'" ',h=-1);var f="",m=d;p._fake&&o<p._fake._cCount&&(m=p._fake.hdr.rows[n]);for(var g=0;g<m.cells.length;g++)if(m.cells[g]._cellIndexS==o){f=m.cells[g].getElementsByTagName("SELECT").length?"":_isIE?m.cells[g].innerText:m.cells[g].textContent,f=f.replace(/[ \n\r\t\xA0]+/," ");break}f&&" "!=f||h++,c+="<column"+_+"><![CDATA["+f+"]]></column>"}h!=p._cCount&&(r+="\n<columns>"+c+"</columns>")}return r+="</head>\n",r+=a()}function r(){var t=[];if(n)for(var e=0;e<n.length;e++)t.push(d(p.getRowIndex(n[e])));else for(var e=0;e<p.getRowsNum();e++)t.push(d(e));return t.join("\n")}function a(){var t=["<foot>"];if(!p.ftr)return"";for(var e=1;e<p.ftr.rows.length;e++){t.push("<columns>");for(var i=p.ftr.rows[e],s=0;s<p._cCount;s++)if(!(p._srClmn&&!p._srClmn[s]||p._hrrar[s]&&(!p._fake||s>=p._fake.hdrLabels.length))){for(var n=0;n<i.cells.length;n++){var o="",l="";if(i.cells[n]._cellIndexS==s){o=_isIE?i.cells[n].innerText:i.cells[n].textContent,o=o.replace(/[ \n\r\t\xA0]+/," "),i.cells[n].colSpan&&1!=i.cells[n].colSpan&&(l=" colspan='"+i.cells[n].colSpan+"' "),i.cells[n].rowSpan&&1!=i.cells[n].rowSpan&&(l=" rowspan='"+i.cells[n].rowSpan+"' ");break}}t.push("<column"+l+"><![CDATA["+o+"]]></column>")}t.push("</columns>")}return t.push("</foot>"),t.join("\n")}function h(t,e){return(window.getComputedStyle?window.getComputedStyle(t,null)[e]:t.currentStyle?t.currentStyle[e]:null)||""}function d(t){if(!p.rowsBuffer[t])return"";var e=p.render_row(t);if("none"==e.style.display)return"";for(var i=p.isTreeGrid()?' level="'+p.getLevel(e.idd)+'"':"",s="<row"+i+">",n=0;n<p._cCount;n++)if((!p._srClmn||p._srClmn[n])&&(!p._hrrar[n]||p._fake&&n<p._fake.hdrLabels.length)){var o=p.cells(e.idd,n);if(f){var l=h(o.cell,"color"),r=h(o.cell,"backgroundColor"),a=h(o.cell,"font-weight")||h(o.cell,"fontWeight"),d=h(o.cell,"font-style")||h(o.cell,"fontStyle"),c=h(o.cell,"text-align")||h(o.cell,"textAlign"),u=h(o.cell,"font-family")||h(o.cell,"fontFamily");("transparent"==r||"rgba(0, 0, 0, 0)"==r)&&(r="rgb(255,255,255)"),s+="<cell bgColor='"+r+"' textColor='"+l+"' bold='"+a+"' italic='"+d+"' align='"+c+"' font='"+u+"'>"}else s+="<cell>";s+="<![CDATA["+(o.getContent?o.getContent():o.getTitle())+"]]></cell>"}return s+"</row>"}function c(){var t="</rows>";return t}var u={row:this.getSelectedRowId(),col:this.getSelectedCellIndex()};if(null===u.row||-1===u.col)u=!1;else{var _=this.cells(u.row,u.col).cell;_.parentNode.className=_.parentNode.className.replace(" rowselected",""),_.className=_.className.replace(" cellselected",""),u.el=_}e=e||"color";var f="full_color"==e,p=this;p._asCDATA=!0,this.target="undefined"==typeof o?' target="_blank"':o,eXcell_ch.prototype.getContent=function(){return this.getValue()},eXcell_ra.prototype.getContent=function(){return this.getValue()};var m=document.createElement("div");m.style.display="none",document.body.appendChild(m);var g="form_"+p.uid();m.innerHTML='<form id="'+g+'" method="post" action="'+t+'" accept-charset="utf-8"  enctype="application/x-www-form-urlencoded"'+this.target+'><input type="hidden" name="grid_xml" id="grid_xml"/> </form>',document.getElementById(g).firstChild.value=encodeURIComponent(l(e).replace("","-")+r()+c()),document.getElementById(g).submit(),m.parentNode.removeChild(m),p=null,u&&(u.el.parentNode.className+=" rowselected",u.el.className+=" cellselected"),u=null},dhtmlXGridObject.prototype._serialiseExportConfig=function(t){function e(t){return"string"!=typeof t?t:(t=t.replace(/&/g,"&amp;"),t=t.replace(/"/g,"&quot;"),t=t.replace(/'/g,"&apos;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"))}for(var i="<head>",s=0;s<this.hdr.rows[0].cells.length;s++)if(!(this._srClmn&&!this._srClmn[s]||this._hrrar[s]&&(!this._fake||s>=this._fake.hdrLabels.length))){var n=this.fldSort[s];"cus"==n&&(n=this._customSorts[s].toString(),n=n.replace(/function[\ ]*/,"").replace(/\([^\f]*/,""));var o=t[1][s],l=(o[1]&&o[1]>1?' rowspan="'+o[1]+'" ':"")+(o[0]&&o[0]>1?' colspan="'+o[0]+'" ':"");i+="<column "+l+" width='"+this.getColWidth(s)+"' align='"+this.cellAlign[s]+"' type='"+this.cellType[s]+"' hidden='"+(this.isColumnHidden&&this.isColumnHidden(s)?"true":"false")+"' sort='"+(n||"na")+"' color='"+(this.columnColor[s]||"")+"'"+(this.columnIds[s]?" id='"+this.columnIds[s]+"'":"")+">",i+=this._asCDATA?"<![CDATA["+this.getHeaderCol(s)+"]]>":this.getHeaderCol(s);var r=this.combos[s]?this.getCombo(s):null;if(r)for(var a=0;a<r.keys.length;a++)i+="<option value='"+e(r.keys[a])+"'><![CDATA["+r.values[a]+"]]></option>";i+="</column>"}return i+="</head>"},window.eXcell_sub_row_grid&&(window.eXcell_sub_row_grid.prototype.getContent=function(){return""}),dhtmlXGridObject.prototype.toExcel=function(t,e,i,s,n){if(!document.getElementById("ifr")){var o=document.createElement("iframe");o.style.display="none",o.setAttribute("name","dhx_export_iframe"),o.setAttribute("src",""),o.setAttribute("id","dhx_export_iframe"),document.body.appendChild(o)}var l=' target="dhx_export_iframe"';this.toPDF(t,e,i,s,n,l)},dhtmlXGridObject.prototype.filterBy=function(t,e,i){if(this.isTreeGrid())return this.filterTreeBy(t,e,i);if(this._f_rowsBuffer?i||(this.rowsBuffer=dhtmlxArray([].concat(this._f_rowsBuffer)),this._fake&&(this._fake.rowsBuffer=this.rowsBuffer)):this._f_rowsBuffer=[].concat(this.rowsBuffer),this.rowsBuffer.length){if(this.dma(!0),"object"==typeof t)for(var s=0;s<e.length;s++)this._filterA(t[s],e[s]);else this._filterA(t,e);this.dma(!1),this.pagingOn&&this.rowsBuffer.length/this.rowsBufferOutSize<this.currentPage-1&&this.changePage(0),this._reset_view(),this.callEvent("onGridReconstructed",[])}},dhtmlXGridObject.prototype._filterA=function(t,e){if(""!=e){var i=!0;if("function"==typeof e?i=!1:e=(e||"").toString().toLowerCase(),this.rowsBuffer.length)for(var s=this.rowsBuffer.length-1;s>=0;s--)(i?-1!=this._get_cell_value(this.rowsBuffer[s],t).toString().toLowerCase().indexOf(e):e.call(this,this._get_cell_value(this.rowsBuffer[s],t),this.rowsBuffer[s].idd))||this.rowsBuffer.splice(s,1)}},dhtmlXGridObject.prototype.getFilterElement=function(t){if(this.filters){for(var e=0;e<this.filters.length;e++)if(this.filters[e][1]==t)return this.filters[e][0].combo||this.filters[e][0];return null}},dhtmlXGridObject.prototype.collectValues=function(t){var e=this.callEvent("onCollectValues",[t]);if(e!==!0)return e;if(this.isTreeGrid())return this.collectTreeValues(t);this.dma(!0),this._build_m_order(),t=this._m_order?this._m_order[t]:t;for(var i={},s=[],n=this._f_rowsBuffer||this.rowsBuffer,o=0;o<n.length;o++){var l=this._get_cell_value(n[o],t);!l||n[o]._childIndexes&&n[o]._childIndexes[t]==n[o]._childIndexes[t-1]||(i[l]=!0)}this.dma(!1);var r=this.combos[t]||(this._col_combos?this._col_combos[t]:!1);for(var a in i)i[a]===!0&&(r&&(r.get&&r.get(a)?a=r.get(a):r.getOption&&r.getOption(a)&&(a=r.getOption(a).text)),s.push(a));
return s.sort()},dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var t=0;t<this._c_order.length;t++)this._m_order[this._c_order[t]]=t}},dhtmlXGridObject.prototype.filterByAll=function(){var t=[],e=[];this._build_m_order();for(var i=0;i<this.filters.length;i++){var s=this._m_order?this._m_order[this.filters[i][1]]:this.filters[i][1];if(!(s>=this._cCount)){e.push(s);var n=this.filters[i][0].old_value=this.filters[i][0].value;this.filters[i][0]._filter&&(n=this.filters[i][0]._filter());var o;"function"!=typeof n&&(o=this.combos[s]||(this._col_combos?this._col_combos[s]:!1))&&(o.values?(s=o.values._dhx_find(n),n=-1==s?n:o.keys[s]):o.getOptionByLabel&&(n=o.getOptionByLabel(n)?o.getOptionByLabel(n).value:n)),t.push(n)}}this.callEvent("onFilterStart",[e,t])&&(this.filterBy(e,t),this._cssEven&&this._fixAlterCss(),this.callEvent("onFilterEnd",[this.filters]),this._f_rowsBuffer&&this.rowsBuffer.length==this._f_rowsBuffer.length&&(this._f_rowsBuffer=null))},dhtmlXGridObject.prototype.makeFilter=function(t,e){if(this.filters||(this.filters=[]),"object"!=typeof t&&(t=document.getElementById(t)),t){var i=this;if(t.style.width||(t.style.width="90%"),"SELECT"==t.tagName)this.filters.push([t,e]),this._loadSelectOptins(t,e),t.onchange=function(){i.filterByAll()},_isIE&&(t.style.marginTop="1px"),this.attachEvent("onEditCell",function(i,s,n){return this._build_m_order(),2==i&&this.filters&&(this._m_order?n==this._m_order[e]:n==e)&&this._loadSelectOptins(t,e),!0});else if("INPUT"==t.tagName)this.filters.push([t,e]),t.old_value=t.value="",t.onkeydown=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){t.value!=t.old_value&&(i.filterByAll(),t.old_value=t.value)},500)};else if("DIV"==t.tagName&&"combo"==t.className){this.filters.push([t,e]),t.style.padding="0px",t.style.margin="0px",window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL);var s=new dhtmlXCombo(t,"_filter","90%");s.filterSelfA=s.filterSelf,s.filterSelf=function(){0==this.getSelectedIndex()&&this.setComboText(""),this.filterSelfA.apply(this,arguments),this.optionsArr[0].hide(!1)},s.enableFilteringMode(!0),t.combo=s,t.value="",this._loadComboOptins(t,e),s.attachEvent("onChange",function(){t.value=s.getSelectedValue(),null===t.value&&(t.value=""),i.filterByAll()})}t.parentNode&&(t.parentNode.className+=" filter"),this._filters_ready()}},dhtmlXGridObject.prototype.findCell=function(t,e,i,s){var s=s||function(t,e){return-1!=e.toString().toLowerCase().indexOf(t)};s===!0&&(s=function(t,e){return e.toString().toLowerCase()==t});var n=new Array;if(t=t.toString().toLowerCase(),"number"!=typeof i&&(i=i?1:0),!this.rowsBuffer.length)return n;for(var o=e||0;o<this._cCount;o++){if(this._h2)this._h2.forEachChild(0,function(e){return i&&n.length==i?n:void(s(t,this._get_cell_value(e.buff,o))&&n.push([e.id,o]))},this);else for(var l=0;l<this.rowsBuffer.length;l++)if(s(t,this._get_cell_value(this.rowsBuffer[l],o))&&(n.push([this.rowsBuffer[l].idd,o]),i&&n.length==i))return n;if("undefined"!=typeof e)return n}return n},dhtmlXGridObject.prototype.makeSearch=function(t,e,i){if("object"!=typeof t&&(t=document.getElementById(t)),t){var s=this;"INPUT"==t.tagName&&(t.onkeypress=function(){this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){if(""!=t.value){var n=s.findCell(t.value,e,!0,i);n.length&&(s._h2&&s.openItem(n[0][0]),s.selectCell(s.getRowIndex(n[0][0]),e||0))}},500)}),t.parentNode&&(t.parentNode.className+=" filter")}},dhtmlXGridObject.prototype._loadSelectOptins=function(t,e){var i=this.collectValues(e),s=t.value;t.innerHTML="",t.options[0]=new Option("","");for(var n=this._filter_tr?this._filter_tr[e]:null,o=0;o<i.length;o++)t.options[t.options.length]=new Option(n?n(i[o]):i[o],i[o]);t.value=s},dhtmlXGridObject.prototype.setSelectFilterLabel=function(t,e){this._filter_tr||(this._filter_tr=[]),this._filter_tr[t]=e},dhtmlXGridObject.prototype._loadComboOptins=function(t,e){if(t.combo){var i=this.collectValues(e);t.combo.clearAll();for(var s=[["",""]],n=0;n<i.length;n++)s.push([i[n],i[n]]);t.combo.addOption(s)}},dhtmlXGridObject.prototype.refreshFilters=function(){if(this.filters)for(var t=0;t<this.filters.length;t++)switch(this.filters[t][0].tagName.toLowerCase()){case"input":break;case"select":this._loadSelectOptins.apply(this,this.filters[t]);break;case"div":this._loadComboOptins.apply(this,this.filters[t])}},dhtmlXGridObject.prototype._filters_ready=function(){this.attachEvent("onXLE",this.refreshFilters),this.attachEvent("onRowCreated",function(t,e){if(this._f_rowsBuffer)for(var i=0;i<this._f_rowsBuffer.length;i++)if(this._f_rowsBuffer[i].idd==t)return this._f_rowsBuffer[i]=e}),this.attachEvent("onClearAll",function(){this._f_rowsBuffer=null,this.hdr.rows.length||(this.filters=[])}),this.attachEvent("onSetSizes",this._filters_resize_combo),this.attachEvent("onResize",this._filters_resize_combo),this._filters_ready=function(){}},dhtmlXGridObject.prototype._filters_resize_combo=function(){if(this.filters){for(var t=0;t<this.filters.length;t++)null!=this.filters[t][0].combo&&this.filters[t][0].combo.setSize(Math.round(90*this.filters[t][0].offsetWidth/100));return!0}},dhtmlXGridObject.prototype._in_header_text_filter=function(t,e){t.innerHTML="<input type='text'>",t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},t.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_text_filter_inc=function(t,e){t.innerHTML="<input type='text'>",t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},t.onselectstart=function(){return event.cancelBubble=!0},this.makeFilter(t.firstChild,e),t.firstChild._filter=function(){return""==t.firstChild.value?"":function(e){return 0==e.toString().toLowerCase().indexOf(t.firstChild.value.toLowerCase())}},this._filters_ready()},dhtmlXGridObject.prototype._in_header_select_filter=function(t,e){t.innerHTML="<select></select>",t.onclick=function(t){return(t||event).cancelBubble=!0,!1},this.makeFilter(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_select_filter_strict=function(t,e){t.innerHTML="<select style='width:90%; font-size:8pt; font-family:Tahoma;'></select>",t.onclick=function(t){return(t||event).cancelBubble=!0,!1},this.makeFilter(t.firstChild,e);var i=this.combos;t.firstChild._filter=function(){var s=t.firstChild.value;return s?(i[e]&&(s=i[e].keys[i[e].values._dhx_find(s)]),s=s.toLowerCase(),function(t){return t.toString().toLowerCase()==s}):""},this._filters_ready()},dhtmlXGridObject.prototype._in_header_combo_filter=function(t,e){t.innerHTML="<div style='width:100%; padding-left:2px; overflow:hidden; ' class='combo'></div>",t.onselectstart=function(){return event.cancelBubble=!0},t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},this.makeFilter(t.firstChild,e)},dhtmlXGridObject.prototype._search_common=function(t){t.innerHTML="<input type='text' style='width:90%; '>",t.onclick=t.onmousedown=function(t){return(t||event).cancelBubble=!0,!0},t.onselectstart=function(){return event.cancelBubble=!0}},dhtmlXGridObject.prototype._in_header_text_search=function(t,e){this._search_common(t,e),this.makeSearch(t.firstChild,e)},dhtmlXGridObject.prototype._in_header_text_search_strict=function(t,e){this._search_common(t,e),this.makeSearch(t.firstChild,e,!0)},dhtmlXGridObject.prototype._in_header_numeric_filter=function(t,e){this._in_header_text_filter.call(this,t,e),t.firstChild._filter=function(){var t,e=this.value,i="==",s=parseFloat(e.replace("=","")),n=null;return e?-1!=e.indexOf("..")?(e=e.split(".."),s=parseFloat(e[0]),n=parseFloat(e[1]),function(t){return t>=s&&n>=t?!0:!1}):(t=e.match(/>=|<=|>|</),t&&(i=t[0],s=parseFloat(e.replace(i,""))),Function("v"," if (v "+i+" "+s+" ) return true; return false;")):""}},dhtmlXGridObject.prototype._in_header_master_checkbox=function(t,e,i){t.innerHTML=i[0]+"<input type='checkbox' />"+i[1];var s=this;t.getElementsByTagName("input")[0].onclick=function(t){s._build_m_order();var i=s._m_order?s._m_order[e]:e,n=this.checked?1:0;s.forEachRowA(function(t){var e=this.cells(t,i);e.isCheckbox()&&(e.setValue(n),e.cell.wasChanged=!0),this.callEvent("onEditCell",[1,t,i,n]),this.callEvent("onCheckbox",[t,i,n])}),(t||event).cancelBubble=!0}},dhtmlXGridObject.prototype._in_header_stat_total=function(t,e,i){var s=function(){var t=0;this._build_m_order();for(var i=this._m_order?this._m_order[e]:e,s=0;s<this.rowsBuffer.length;s++){var n=parseFloat(this._get_cell_value(this.rowsBuffer[s],i));t+=isNaN(n)?0:n}return this._maskArr[i]?this._aplNF(t,i):Math.round(100*t)/100};this._stat_in_header(t,s,e,i,i)},dhtmlXGridObject.prototype._in_header_stat_multi_total=function(t,e,i){var s=i[1].split(":");i[1]="";for(var n=0;n<s.length;n++)s[n]=parseInt(s[n]);for(var o=function(){for(var t=0,i=0;i<this.rowsBuffer.length;i++){for(var n=1,o=0;o<s.length;o++)n*=parseFloat(this._get_cell_value(this.rowsBuffer[i],s[o]));t+=isNaN(n)?0:n}return this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100},l=[],r=0;r<s.length;r++)l[s[r]]=!0;this._stat_in_header(t,o,l,i,i)},dhtmlXGridObject.prototype._in_header_stat_max=function(t,e,i){var s=function(){this._build_m_order();var t=this._m_order?this._m_order[e]:e,i=-999999999;if(0==this.getRowsNum())return"&nbsp;";for(var s=0;s<this.rowsBuffer.length;s++)i=Math.max(i,parseFloat(this._get_cell_value(this.rowsBuffer[s],t)));return this._maskArr[e]?this._aplNF(i,e):i};this._stat_in_header(t,s,e,i)},dhtmlXGridObject.prototype._in_header_stat_min=function(t,e,i){var s=function(){this._build_m_order();var t=this._m_order?this._m_order[e]:e,i=999999999;if(0==this.getRowsNum())return"&nbsp;";for(var s=0;s<this.rowsBuffer.length;s++)i=Math.min(i,parseFloat(this._get_cell_value(this.rowsBuffer[s],t)));return this._maskArr[e]?this._aplNF(i,e):i};this._stat_in_header(t,s,e,i)},dhtmlXGridObject.prototype._in_header_stat_average=function(t,e,i){var s=function(){this._build_m_order();var t=this._m_order?this._m_order[e]:e,i=0,s=0;if(0==this.getRowsNum())return"&nbsp;";for(var n=0;n<this.rowsBuffer.length;n++){var o=parseFloat(this._get_cell_value(this.rowsBuffer[n],t));i+=isNaN(o)?0:o,s++}return this._maskArr[e]?this._aplNF(i/s,e):Math.round(i/s*100)/100};this._stat_in_header(t,s,e,i)},dhtmlXGridObject.prototype._in_header_stat_count=function(t,e,i){var s=function(){return this.getRowsNum()};this._stat_in_header(t,s,e,i)},dhtmlXGridObject.prototype._stat_in_header=function(t,e,i,s){var n=function(){this.dma(!0),t.innerHTML=(s[0]?s[0]:"")+e.call(this)+(s[1]?s[1]:""),this.dma(!1),this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var t=0;t<this._stat_events.length;t++)for(var e=0;4>e;e++)this.detachEvent(this._stat_events[t][e]);this._stat_events=[]}})),this._stat_events.push([this.attachEvent("onGridReconstructed",n),this.attachEvent("onXLE",n),this.attachEvent("onFilterEnd",n),this.attachEvent("onEditCell",function(t,e,s){return 2==t&&(s==i||i&&i[s])&&n.call(this),!0})]),t.innerHTML=""},dhtmlXGridObject.prototype.loadCSVFile=function(t,e){this.load(t,e,"csv")},dhtmlXGridObject.prototype.enableCSVAutoID=function(t){this._csvAID=convertStringToBoolean(t)},dhtmlXGridObject.prototype.enableCSVHeader=function(t){this._csvHdr=convertStringToBoolean(t)},dhtmlXGridObject.prototype.setCSVDelimiter=function(t){this.csv.cell=t},dhtmlXGridObject.prototype._csvAID=!0,dhtmlXGridObject.prototype.loadCSVString=function(t){this.parse(t,"csv")},dhtmlXGridObject.prototype.serializeToCSV=function(t){this.editStop(),this._agetm=this._mathSerialization?"getMathValue":this._strictText||t?"getTitle":"getValue";var e=[];if(this._csvHdr)for(var i=1;i<this.hdr.rows.length;i++){for(var s=[],n=0;n<this._cCount;n++)(!this._srClmn||this._srClmn[n])&&s.push(this.getColumnLabel(n,i-1));e.push(this.csvParser.str(s,this.csv.cell,this.csv.row))}var n=0,o=this.rowsBuffer.length;for(n;o>n;n++){var l=this._serializeRowToCVS(null,n);""!=l&&e.push(l)}return this.csvParser.block(e,this.csv.row)},dhtmlXGridObject.prototype._serializeRowToCVS=function(t,e,i,s){var n=new Array;t||(t=this.render_row(e),this._fake&&!this._fake.rowsAr[t.idd]&&this._fake.render_row(e)),this._csvAID||(n[n.length]=t.idd),i=i||0,s=s||this._cCount;for(var o=!1,l=i;t.childNodes[i]._cellIndex>l&&i;)i--;for(var r=i;s>l&&t.childNodes[r];r++){var a=t.childNodes[r]._cellIndex;if(this._srClmn&&!this._srClmn[a]||this._serialize_visible&&this._hrrar[a])l++;else{for(var h=t.childNodes[r],d=this.cells(t.idd,a);l!=a&&(l++,n.push(""),!(l>=s)););if(l>=s)break;if(l++,zxVal=d.cell?d[this._agetm]():"",this._chAttr&&d.wasChanged()&&(o=!0),n[n.length]=null===zxVal?"":zxVal,this._ecspn&&h.colSpan&&h.colSpan>1){h=h.colSpan-1;for(var c=0;h>c;c++)n[n.length]="",l++}}}return this._onlChAttr&&!o?"":this.csvParser.str(n,this.csv.cell,this.csv.row)},dhtmlXGridObject.prototype.toClipBoard=function(t){window.clipboardData?window.clipboardData.setData("Text",t):(new Clipboard).copy(t)},dhtmlXGridObject.prototype.fromClipBoard=function(){return window.clipboardData?window.clipboardData.getData("Text"):(new Clipboard).paste()},dhtmlXGridObject.prototype.cellToClipboard=function(t,e){if(!t||!e){if(!this.selectedRows[0])return;t=this.selectedRows[0].idd,e=this.cell._cellIndex}var i=this.cells(t,e);this.toClipBoard(((i.getLabel?i.getLabel():i.getValue())||"").toString())},dhtmlXGridObject.prototype.updateCellFromClipboard=function(t,e){if(!t||!e){if(!this.selectedRows[0])return;t=this.selectedRows[0].idd,e=this.cell._cellIndex}var i=this.cells(t,e);i[i.setImage?"setLabel":"setValue"](this.fromClipBoard())},dhtmlXGridObject.prototype.rowToClipboard=function(t){var e="";if(this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue",this._serialize_visible=!0,t)e=this._serializeRowToCVS(this.getRowById(t));else for(var i=[],s=0;s<this.selectedRows.length;s++)i[i.length]=this._serializeRowToCVS(this.selectedRows[s]),e=this.csvParser.block(i,this.csv.row);this._serialize_visible=!1,this.toClipBoard(e)},dhtmlXGridObject.prototype.updateRowFromClipboard=function(t){var e=this.fromClipBoard();if(e){if(t)var i=this.getRowById(t);else var i=this.selectedRows[0];if(i){var s=this.csvParser;e=s.unblock(e,this.csv.cell,this.csv.row)[0],this._csvAID||e.splice(0,1);for(var n=0;n<e.length;n++){var o=this.cells3(i,n);o[o.setImage?"setLabel":"setValue"](e[n])}}}},dhtmlXGridObject.prototype.csvParser={block:function(t,e){return t.join(e)},unblock:function(t,e,i){for(var s=(t||"").split(i),n=0;n<s.length;n++)s[n]=(s[n]||"").split(e);var o=s.length-1;return 1==s[o].length&&""==s[o][0]&&s.splice(o,1),s},str:function(t,e){return t.join(e)}},dhtmlXGridObject.prototype.csvExtParser={_quote:RegExp('"',"g"),_quote_esc:RegExp('\\\\"',"g"),block:function(t,e){return t.join(e)},unblock:function(t,e,i){var s=[[]],n=0;if(!t)return s;for(var o=/^[ ]*"/,l=/"[ ]*$/,r=new RegExp(".*"+i+".*$"),a=t.split(e),h=0;h<a.length;h++)if(a[h].match(o)){for(var d=a[h].replace(o,"");!a[h].match(l);)h++,d+=a[h];s[n].push(d.replace(l,"").replace(this._quote_esc,'"'))}else if(a[h].match(r)){var c=a[h].indexOf(i);s[n].push(a[h].substr(0,c)),n++,s[n]=[],a[h]=a[h].substr(c+1),h--}else(a[h]||h!=a.length-1)&&s[n].push(a[h]);var u=s.length-1;return u>0&&!s[u].length&&s.splice(u,1),s},str:function(t,e){for(var i=0;i<t.length;i++)t[i]='"'+t[i].replace(this._quote,'\\"')+'"';return t.join(e)}},dhtmlXGridObject.prototype.addRowFromClipboard=function(){var t=this.fromClipBoard();if(t)for(var e=this.csvParser.unblock(t,this.csv.cell,this.csv.row),i=0;i<e.length;i++)if(e[i]){if(t=e[i],!t.length)continue;this._csvAID?this.addRow(this.getRowsNum()+2,t):(this.rowsAr[t[0]]&&(t[0]=this.uid()),this.addRow(t[0],t.slice(1)))}},dhtmlXGridObject.prototype.gridToClipboard=function(){this.toClipBoard(this.serializeToCSV())},dhtmlXGridObject.prototype.gridFromClipboard=function(){var t=this.fromClipBoard();t&&this.loadCSVString(t)},dhtmlXGridObject.prototype.getXLS=function(t){if(!this.xslform){this.xslform=document.createElement("FORM"),this.xslform.action=(t||"")+"xls.php",this.xslform.method="post",this.xslform.target=_isIE?"_blank":"",document.body.appendChild(this.xslform);var e=document.createElement("INPUT");e.type="hidden",e.name="csv",this.xslform.appendChild(e);var i=document.createElement("INPUT");i.type="hidden",i.name="csv_header",this.xslform.appendChild(i)}var s=this.serializeToCSV();this.xslform.childNodes[0].value=s;for(var n=[],o=this._cCount,l=0;o>l;l++)n.push(this.getHeaderCol(l));n=n.join(","),this.xslform.childNodes[1].value=n,this.xslform.submit()},dhtmlXGridObject.prototype.printView=function(t,e){var i="<style>TD { font-family:Arial; text-align:center; padding-left:2px;padding-right:2px; } \n td.filter input, td.filter select { display:none; }	\n  </style>",s=null;if(this._fake){s=[].concat(this._hrrar);for(var n=0;n<this._fake._cCount;n++)this._hrrar[n]=null}i+="<base  href='"+document.location.href+"'></base>",this.parentGrid||(i+=t||""),i+='<table width="100%" border="2px" cellpadding="0" cellspacing="0">';var o=Math.max(this.rowsBuffer.length,this.rowsCol.length),l=this._cCount,r=this._printWidth();i+='<tr class="header_row_1">';for(var n=0;l>n;n++)if(!this._hrrar||!this._hrrar[n]){for(var a=this.hdr.rows[1].cells[this.hdr.rows[1]._childIndexes?this.hdr.rows[1]._childIndexes[parseInt(n)]:n],h=a.colSpan||1,d=a.rowSpan||1,c=1;h>c;c++)r[n]+=r[c];i+='<td rowspan="'+d+'" width="'+r[n]+'%" style="background-color:lightgrey;" colspan="'+h+'">'+this.getHeaderCol(n)+"</td>",n+=h-1}i+="</tr>";for(var n=2;n<this.hdr.rows.length;n++)if(_isIE){i+="<tr style='background-color:lightgrey' class='header_row_"+n+"'>";for(var u=this.hdr.rows[n].childNodes,c=0;c<u.length;c++)this._hrrar&&this._hrrar[u[c]._cellIndex]||(i+=u[c].outerHTML);i+="</tr>"}else i+="<tr class='header_row_"+n+"' style='background-color:lightgrey'>"+(this._fake?this._fake.hdr.rows[n].innerHTML:"")+this.hdr.rows[n].innerHTML+"</tr>";for(var n=0;o>n;n++)if(i+="<tr>",this.rowsCol[n]&&this.rowsCol[n]._cntr)i+=this.rowsCol[n].innerHTML.replace(/<img[^>]*>/gi,"")+"</tr>";else if(!this.rowsCol[n]||"none"!=this.rowsCol[n].style.display){var _;if(this.rowsCol[n])_=this.rowsCol[n].idd;else{if(!this.rowsBuffer[n])continue;_=this.rowsBuffer[n].idd}for(var c=0;l>c;c++)if(!this._hrrar||!this._hrrar[c]){if(this.rowsAr[_]&&"TR"==this.rowsAr[_].tagName){var f=this.cells(_,c);if(f._setState)var p="";else if(f.getContent)p=f.getContent();else if(f.getImage||f.combo)var p=f.cell.innerHTML;else var p=f.getValue()}else var p=this._get_cell_value(this.rowsBuffer[n],c);var m=this.columnColor[c]?"background-color:"+this.columnColor[c]+";":"",g=this.cellAlign[c]?"text-align:"+this.cellAlign[c]+";":"",b=f.getAttribute("colspan");i+='<td style="'+m+g+'" '+(b?'colSpan="'+b+'"':"")+">"+(""===p?"&nbsp;":p)+"</td>",b&&(c+=b-1)}if(i+="</tr>",this.rowsCol[n]&&this.rowsCol[n]._expanded){var v=this.cells4(this.rowsCol[n]._expanded.ctrl);i+=v.getSubGrid?'<tr><td colspan="'+l+'">'+v.getSubGrid().printView()+"</td></tr>":'<tr><td colspan="'+l+'">'+this.rowsCol[n]._expanded.innerHTML+"</td></tr>"}}if(this.ftr)for(var n=1;n<this.ftr.childNodes[0].rows.length;n++)i+="<tr style='background-color:lightgrey'>"+(this._fake?this._fake.ftr.childNodes[0].rows[n].innerHTML:"")+this.ftr.childNodes[0].rows[n].innerHTML+"</tr>";if(i+="</table>",this.parentGrid)return i;i+=e||"";var y=window.open("","_blank");y.document.write(i),y.document.write("<script>window.onerror=function(){return true;}</script>"),y.document.close(),this._fake&&(this._hrrar=s)},dhtmlXGridObject.prototype._printWidth=function(){for(var t=[],e=0,i=0;i<this._cCount;i++){var s=this.getColWidth(i);t.push(s),e+=s}for(var n=[],o=0,i=0;i<t.length;i++){var l=Math.floor(t[i]/e*100);o+=l,n.push(l)}return n[n.length-1]+=100-o,n},window.clipboardData||(window.clipboardData={_make:function(){var t=Components.classes["@mozilla.org/widget/clipboard;1"].createInstance(Components.interfaces.nsIClipboard);if(!t)return null;var e=Components.classes["@mozilla.org/widget/transferable;1"].createInstance(Components.interfaces.nsITransferable);if(!e)return null;e.addDataFlavor("text/unicode");var i=Components.classes["@mozilla.org/supports-string;1"].createInstance(Components.interfaces.nsISupportsString);return this._p=[t,e,i],!0},setData:function(t,e){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(i){return dhtmlxError.throwError("Clipboard","Access to clipboard denied",[t,e]),""}if(!this._make())return!1;this._p[2].data=e,this._p[1].setTransferData("text/unicode",this._p[2],2*e.length);var s=Components.interfaces.nsIClipboard;this._p[0].setData(this._p[1],null,s.kGlobalClipboard)},getData:function(t){try{netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect")}catch(e){return dhtmlxError.throwError("Clipboard","Access to clipboard denied",[t]),""}if(!this._make())return!1;this._p[0].getData(this._p[1],this._p[0].kGlobalClipboard);var i=new Object,s=new Object;try{this._p[1].getTransferData("text/unicode",s,i)}catch(e){return""}return s&&(s=s.value.QueryInterface(Components.interfaces.nsISupportsString)),s?s.data.substring(0,i.value/2):""}}),dhtmlXGridObject.prototype.enableBlockSelection=function(t){if("undefined"==typeof this._bs_mode){var e=this;this.obj.onmousedown=function(t){return e._bs_mode&&e._OnSelectionStart(t||event,this),!0},this._CSVRowDelimiter=this.csv.row,this.attachEvent("onResize",function(){return e._HideSelection(),!0}),this.attachEvent("onGridReconstructed",function(){return e._HideSelection(),!0}),this.attachEvent("onFilterEnd",this._HideSelection)}if(t===!1)return this._bs_mode=!1,this._HideSelection();this._bs_mode=!0;var i=this._clip_area=document.createElement("textarea");i.style.cssText="position:absolute; width:1px; height:1px; overflow:hidden; color:transparent; background-color:transparent; bottom:1px; right:1px; border:none;",i.onkeydown=function(t){t=t||event,86==t.keyCode&&(t.ctrlKey||t.metaKey)&&e.pasteBlockFromClipboard()},document.body.insertBefore(this._clip_area,document.body.firstChild),dhtmlxEvent(this.entBox,"click",function(){e.editor||e._clip_area.select()})},dhtmlXGridObject.prototype.forceLabelSelection=function(t){this._strictText=convertStringToBoolean(t)},dhtmlXGridObject.prototype._OnSelectionStart=function(t){var e=this;if(2!=t.button){var i=t.srcElement||t.target;if(this.editor){if(i.tagName&&("INPUT"==i.tagName||"TEXTAREA"==i.tagName))return;this.editStop()}e.setActive(!0);var s=this.getPosition(this.obj),n=t.clientX-s[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),o=t.clientY-s[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(this._CreateSelection(n-4,o-4),i==this._selectionObj)this._HideSelection(),this._startSelectionCell=null;else{for(;i&&(!i.tagName||"td"!=i.tagName.toLowerCase());)i=i.parentNode;this._startSelectionCell=i}if(this._startSelectionCell&&!this.callEvent("onBeforeBlockSelected",[this._startSelectionCell.parentNode.idd,this._startSelectionCell._cellIndex]))return this._startSelectionCell=null;this.obj.onmousedown=null,this.obj[_isIE?"onmouseleave":"onmouseout"]=function(){e._blsTimer&&window.clearTimeout(e._blsTimer)},this.obj.onmmold=this.obj.onmousemove,this._init_pos=[n,o],this._selectionObj.onmousemove=this.obj.onmousemove=function(i){i=i||t,i.preventDefault?i.preventDefault():i.returnValue=!1,e._OnSelectionMove(i)},this._oldDMP=document.body.onmouseup,document.body.onmouseup=function(i){return i=i||t,e._OnSelectionStop(i,this),!0},this.callEvent("onBeforeBlockSelection",[]),document.body.onselectstart=function(){return!1}}},dhtmlXGridObject.prototype._getCellByPos=function(t,e){t=t,this._fake&&(t+=this._fake.objBox.scrollWidth),e=e;for(var i=0,s=0;s<this.obj.rows.length;s++)if(e-=this.obj.rows[s].offsetHeight,0>=e){i=this.obj.rows[s];break}if(!i||!i.idd)return null;for(var s=0;s<this._cCount;s++)if(t-=this.getColWidth(s),0>=t)for(;;){if(!i._childIndexes||i._childIndexes[s+1]!=i._childIndexes[s])return this.cells(i.idd,s).cell;i=i.previousSibling}return null},dhtmlXGridObject.prototype._OnSelectionMove=function(t){var e=this;this._ShowSelection();var i=this.getPosition(this.obj),s=t.clientX-i[0]+(document.body.scrollLeft||(document.documentElement?document.documentElement.scrollLeft:0)),n=t.clientY-i[1]+(document.body.scrollTop||(document.documentElement?document.documentElement.scrollTop:0));if(Math.abs(this._init_pos[0]-s)<5&&Math.abs(this._init_pos[1]-n)<5)return this._HideSelection();var o=this._endSelectionCell;if(null==this._startSelectionCell)this._endSelectionCell=this._startSelectionCell=this.getFirstParentOfType(t.srcElement||t.target,"TD");else if(t.srcElement||t.target)if("dhtmlxGrid_selection"==(t.srcElement||t.target).className)this._endSelectionCell=this._getCellByPos(s,n)||this._endSelectionCell;else{var l=this.getFirstParentOfType(t.srcElement||t.target,"TD");l.parentNode.idd&&(this._endSelectionCell=l)}this._endSelectionCell&&(this.callEvent("onBeforeBlockSelected",[this._endSelectionCell.parentNode.idd,this._endSelectionCell._cellIndex])||(this._endSelectionCell=o));var r=this.objBox.scrollLeft+this.objBox.clientWidth,a=this.objBox.scrollTop+this.objBox.clientHeight,h=this.objBox.scrollLeft,d=this.objBox.scrollTop,c=!1;if(this._blsTimer&&window.clearTimeout(this._blsTimer),s+20>=r?(this.objBox.scrollLeft=this.objBox.scrollLeft+20,c=!0):h>s-20&&(this.objBox.scrollLeft=this.objBox.scrollLeft-20,c=!0),n+20>=a&&!this._realfake?(this.objBox.scrollTop=this.objBox.scrollTop+20,c=!0):d>n-20&&!this._realfake&&(this.objBox.scrollTop=this.objBox.scrollTop-20,c=!0),this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._endSelectionCell),c){var u=t.clientX,_=t.clientY;this._blsTimer=window.setTimeout(function(){e._OnSelectionMove({clientX:u,clientY:_})},100)}},dhtmlXGridObject.prototype._OnSelectionStop=function(t){var e=this;if(this._blsTimer&&window.clearTimeout(this._blsTimer),this.obj.onmousedown=function(i){return e._bs_mode&&e._OnSelectionStart(i||t,this),!0},this.obj.onmousemove=this.obj.onmmold||null,this._selectionObj.onmousemove=null,document.body.onmouseup=this._oldDMP||null,parseInt(this._selectionObj.style.width)<2&&parseInt(this._selectionObj.style.height)<2)this._HideSelection();else{var i=this.getFirstParentOfType(t.srcElement||t.target,"TD");for(i&&i.parentNode.idd||(i=this._endSelectionCell);i&&(!i.tagName||"td"!=i.tagName.toLowerCase());)i=i.parentNode;if(!i)return this._HideSelection();this._stopSelectionCell=i,this._selectionArea=this._RedrawSelectionPos(this._startSelectionCell,this._stopSelectionCell),this.callEvent("onBlockSelected",[])}document.body.onselectstart=function(){}},dhtmlXGridObject.prototype._RedrawSelectionPos=function(t,e){var i={};i.LeftTopCol=t._cellIndex,i.LeftTopRow=this.getRowIndex(t.parentNode.idd),i.RightBottomCol=e._cellIndex,i.RightBottomRow=this.getRowIndex(e.parentNode.idd);var s=t.offsetWidth,n=t.offsetHeight;t=this.getPosition(t,this.obj);var o=e.offsetWidth,l=e.offsetHeight;if(e=this.getPosition(e,this.obj),t[0]<e[0])var r=t[0],a=e[0]+o;else{var h=i.RightBottomCol;i.RightBottomCol=i.LeftTopCol,i.LeftTopCol=h;var r=e[0],a=t[0]+s}if(t[1]<e[1])var d=t[1],c=e[1]+l;else{var h=i.RightBottomRow;i.RightBottomRow=i.LeftTopRow,i.LeftTopRow=h;var d=e[1],c=t[1]+n}var u=a-r,_=c-d;return this._selectionObj.style.left=r+"px",this._selectionObj.style.top=d+"px",this._selectionObj.style.width=u+"px",this._selectionObj.style.height=_+"px",i},dhtmlXGridObject.prototype._CreateSelection=function(t,e){if(null==this._selectionObj){var i=document.createElement("div");i.style.position="absolute",i.style.display="none",i.className="dhtmlxGrid_selection",this._selectionObj=i,this._selectionObj.onmousedown=function(t){return t=t||event,2==t.button||_isMacOS&&t.ctrlKey?this.parentNode.grid.callEvent("onBlockRightClick",["BLOCK",t]):void 0},this._selectionObj.oncontextmenu=function(t){return(t||event).cancelBubble=!0,!1},this.objBox.appendChild(this._selectionObj)}this._selectionObj.style.width="0px",this._selectionObj.style.height="0px",this._selectionObj.style.left=t+"px",this._selectionObj.style.top=e+"px",this._selectionObj.startX=t,this._selectionObj.startY=e},dhtmlXGridObject.prototype._ShowSelection=function(){this._selectionObj&&(this._selectionObj.style.display="")},dhtmlXGridObject.prototype._HideSelection=function(){this._selectionObj&&(this._selectionObj.style.display="none"),this._selectionArea=null,this._clip_area.value="",this._clip_area.blur()},dhtmlXGridObject.prototype.copyBlockToClipboard=function(){if(null!=this._selectionArea){var t=new Array;this._agetm=this._mathSerialization?"getMathValue":this._strictText?"getTitle":"getValue",this._serialize_visible=!0;for(var e=this._selectionArea.LeftTopRow;e<=this._selectionArea.RightBottomRow;e++){var i=this._serializeRowToCVS(this.rowsBuffer[e],null,this._selectionArea.LeftTopCol,this._selectionArea.RightBottomCol+1);t[t.length]=this._csvAID?i:i.substr(i.indexOf(this.csv.cell)+1)}t=t.join(this._CSVRowDelimiter),this._clip_area.value=t,this._clip_area.select(),this._serialize_visible=!1}},dhtmlXGridObject.prototype.pasteBlockFromClipboard=function(){this._clip_area.select();var t=this;window.setTimeout(function(){t._pasteBlockFromClipboard(),t=null},1)},dhtmlXGridObject.prototype._pasteBlockFromClipboard=function(){var t=this._clip_area.value;if(null!=this._selectionArea)var e=this._selectionArea.LeftTopRow,i=this._selectionArea.LeftTopCol;else{if(null==this.cell||this.editor)return!1;var e=this.getRowIndex(this.cell.parentNode.idd),i=this.cell._cellIndex}t=this.csvParser.unblock(t,this.csv.cell,this.csv.row);var s=e+t.length,n=i+t[0].length;n>this._cCount&&(n=this._cCount);for(var o=0,l=e;s>l;l++){var r=this.render_row(l);if(-1!=r){for(var a=0,h=i;n>h;h++)if(this._hrrar[h])n=Math.max(n+1,this._cCount);else{var d=this.cells3(r,h);if(d.isDisabled())a++;else{if(this._onEditUndoRedo&&this._onEditUndoRedo(2,r.idd,h,t[o][a],d.getValue()),d.combo){for(var c=d.combo.values,u=0;u<c.length;u++)if(t[o][a]==c[u]){d.setValue(d.combo.keys[u]),c=null;break}null!=c&&d.editable?d.setValue(t[o][a++]):a++}else d[d.setImage?"setLabel":"setValue"](t[o][a++]);d.cell.wasChanged=!0}}this.callEvent("onRowPaste",[r.idd]),o++}}},dhtmlXGridObject.prototype.getSelectedBlock=function(){return this._selectionArea?this._selectionArea:null!==this.getSelectedRowId()?{LeftTopRow:this.getSelectedRowId(),LeftTopCol:this.getSelectedCellIndex(),RightBottomRow:this.getSelectedRowId(),RightBottomCol:this.getSelectedCellIndex()}:null},dhtmlXGridObject.prototype.enableSmartRendering=function(t,e,i){arguments.length>2&&(e&&!this.rowsBuffer[e-1]&&(this.rowsBuffer[e-1]=0),e=i),this._srnd=convertStringToBoolean(t),this._srdh=this._srdh||20,this._dpref=e||0},dhtmlXGridObject.prototype.enablePreRendering=function(t){this._srnd_pr=parseInt(t||50)},dhtmlXGridObject.prototype.forceFullLoading=function(t,e){for(var i=0;i<this.rowsBuffer.length;i++)if(!this.rowsBuffer[i]){var s=t||this.rowsBuffer.length-i;if(this.callEvent("onDynXLS",[i,s])){var n=this;this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+i+"&count="+s,function(){window.setTimeout(function(){n.forceFullLoading(t,e)},100)},this._data_type)}return}e&&e.call(this)},dhtmlXGridObject.prototype.setAwaitedRowHeight=function(t){this._srdh=parseInt(t)},dhtmlXGridObject.prototype._get_view_size=function(){return Math.floor(parseInt(this.entBox.offsetHeight)/this._srdh)+2},dhtmlXGridObject.prototype._add_filler=function(t,e,i,s){if(!e)return null;var n="__filler__",o=this._prepareRow(n);o.firstChild.style.width="1px";for(var l=1;l<o.childNodes.length;l++)o.childNodes[l].style.display="none";return o.firstChild.style.height=e*this._srdh+"px",i=i||this.rowsCol[t],i&&i.nextSibling?i.parentNode.insertBefore(o,i.nextSibling):_isKHTML?this.obj.appendChild(o):this.obj.rows[0].parentNode.appendChild(o),this.callEvent("onAddFiller",[t,e,o,i,s]),[t,e,o]
},dhtmlXGridObject.prototype._update_srnd_view=function(){var t=Math.floor(this.objBox.scrollTop/this._srdh),e=t+this._get_view_size();if(this.multiLine){var i=this.objBox.scrollTop;for(t=0;i>0;)i-=this.rowsCol[t]?this.rowsCol[t].offsetHeight:this._srdh,t++;e=t+this._get_view_size(),t>0&&t--}e+=this._srnd_pr||0,e>this.rowsBuffer.length&&(e=this.rowsBuffer.length);for(var s=t;e>s;s++)if(!this.rowsCol[s]){var n=this._add_from_buffer(s);if(-1==n){if(this.xmlFileUrl){if(this._dpref&&this.rowsBuffer[e-1]){var o=(this._dpref?this._dpref:e-s,Math.max(0,Math.min(s,e-this._dpref)));this._current_load=[o,e-o]}else this._current_load=[s,this._dpref?this._dpref:e-s];this.callEvent("onDynXLS",this._current_load)&&this.load(this.xmlFileUrl+getUrlSymbol(this.xmlFileUrl)+"posStart="+this._current_load[0]+"&count="+this._current_load[1],this._data_type)}return}this._tgle&&(this._updateLine(this._h2.get[this.rowsBuffer[s].idd],this.rowsBuffer[s]),this._updateParentLine(this._h2.get[this.rowsBuffer[s].idd],this.rowsBuffer[s])),s&&s==(this._realfake?this._fake:this)._r_select&&this.selectCell(s,this.cell?this.cell._cellIndex:0,!0)}this._fake&&!this._realfake&&this.multiLine&&(this._fake.objBox.scrollTop=this.objBox.scrollTop)},dhtmlXGridObject.prototype._add_from_buffer=function(t){var e=this.render_row(t);if(-1==e)return-1;if((e._attrs.selected||e._attrs.select)&&(this.selectRow(e,!1,!0),e._attrs.selected=e._attrs.select=null),this._cssSP){if(this._h2){var i=this._h2.get[e.idd];e.className+=" "+(i.level%2?this._cssUnEven+" "+this._cssUnEven:this._cssEven+" "+this._cssEven)+"_"+i.level+(this.rowsAr[i.id]._css||"")}}else this._cssEven&&t%2==0?e.className=this._cssEven+(-1!=e.className.indexOf("rowselected")?" rowselected ":" ")+(e._css||""):this._cssUnEven&&t%2==1&&(e.className=this._cssUnEven+(-1!=e.className.indexOf("rowselected")?" rowselected ":" ")+(e._css||""));for(var s=0;s<this._fillers.length;s++){var n=this._fillers[s];if(n&&n[0]<=t&&n[0]+n[1]>t){var o=t-n[0];return void(0==o?(this._insert_before(t,e,n[2]),this._update_fillers(s,-1,1)):o==n[1]-1?(this._insert_after(t,e,n[2]),this._update_fillers(s,-1,0)):(this._fillers.push(this._add_filler(t+1,n[1]-o-1,n[2],1)),this._insert_after(t,e,n[2]),this._update_fillers(s,-n[1]+o,0)))}}},dhtmlXGridObject.prototype._update_fillers=function(t,e,i){var s=this._fillers[t];s[1]=s[1]+e,s[0]=s[0]+i,s[1]?(s[2].firstChild.style.height=parseFloat(s[2].firstChild.style.height)+e*this._srdh+"px",this.callEvent("onUpdateFiller",[s[2]])):(this.callEvent("onRemoveFiller",[s[2]]),s[2].parentNode.removeChild(s[2]),this._fillers.splice(t,1))},dhtmlXGridObject.prototype._insert_before=function(t,e,i){i.parentNode.insertBefore(e,i),this.rowsCol[t]=e,this.callEvent("onRowInserted",[e,null,i,"before"])},dhtmlXGridObject.prototype._insert_after=function(t,e,i){i.nextSibling?i.parentNode.insertBefore(e,i.nextSibling):i.parentNode.appendChild(e),this.rowsCol[t]=e,this.callEvent("onRowInserted",[e,null,i,"after"])},dhtmlxValidation=function(){},dhtmlxValidation.prototype={trackInput:function(t,e,i,s){dhtmlxEvent(t,"keyup",function(){dhtmlxValidation._timer&&(window.clearTimeout(dhtmlxValidation._timer),dhtmlxValidation._timer=null),dhtmlxValidation._timer=window.setTimeout(function(){dhtmlxValidation.checkInput(t,e)?(t.className=t.className.replace(/[ ]*dhtmlx_live_validation_error/g,""),s&&s(t,t.value,e)):(!i||i(t,t.value,e))&&(t.className+=" dhtmlx_live_validation_error")},250)})},checkInput:function(t,e){return this.checkValue(t.value,e)},checkValue:function(t,e){"string"==typeof e&&(e=e.split(","));for(var i=!0,s=0;s<e.length;s++)this["is"+e[s]]?i=i&&this["is"+e[s]](t):alert("Incorrect validation rule: "+e[s]);return i},isEmpty:function(t){return""==t},isNotEmpty:function(t){return t instanceof Array?t.length>0:""==!t},isValidBoolean:function(t){return!!t.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(t){return!!t.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(t){return!!t.toString().match(/(^-?\d+$)/)},isValidNumeric:function(t){return!!t.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(t){return!!t.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31&&e[4]<=59&&e[5]<=59&&e[6]<=59)||!1},isValidDate:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31)||!1},isValidTime:function(t){var e=t.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return e&&!!(e[1]<=24&&e[2]<=59&&e[3]<=59)||!1},isValidIPv4:function(t){var e=t.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return e&&!!(e[1]<=255&&e[2]<=255&&e[3]<=255&&e[4]<=255)||!1},isValidCurrency:function(t){return t.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&!0||!1},isValidSSN:function(t){return t.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(t){return t.toString().match(/^\d{9}$/)&&!0||!1}},dhtmlxValidation=new dhtmlxValidation,dhtmlXGridObject.prototype.enableValidation=function(t,e){t=convertStringToBoolean(t),this._validators=t?{data:[]}:!1,arguments.length>1&&(this._validators._live=e),this._validators._event||(this._validators._event=this.attachEvent("onEditCell",this.validationEvent))},dhtmlXGridObject.prototype.setColValidators=function(t){this._validators||this.enableValidation(!0),"string"==typeof t&&(t=t.split(this.delim)),this._validators.data=t},dhtmlXGridObject.prototype.validationEvent=function(t,e,i,s){var n=this._validators;if(!n)return!0;var o=n.data[i]||this.cells(e,i).getAttribute("validate")||"";if(1==t&&o){var l=this.editor||(this._fake||{}).editor;if(!l)return!0;if(l.cell.className=l.cell.className.replace(/[ ]*dhtmlx_validation_error/g,""),n._live){var r=this;dhtmlxValidation.trackInput(l.getInput(),o,function(t,s,n){return r.callEvent("onLiveValidationError",[e,i,s,t,n])},function(t,s,n){return r.callEvent("onLiveValidationCorrect",[e,i,s,t,n])})}}return 2==t&&this.validateCell(e,i,o,s),!0},dhtmlXGridObject.prototype.validateCell=function(t,e,i,s){if(i=i||this._validators.data[e]||this.cells(t,e).getAttribute("validate"),s=s||this.cells(t,e).getValue(),i){var n=this.cells(t,e).cell,o=!0;"string"==typeof i&&(i=i.split(this.delim));for(var l=0;l<i.length;l++)dhtmlxValidation.checkValue(s,i[l])||(this.callEvent("onValidationError",[t,e,s,i[l]])&&(n.className+=" dhtmlx_validation_error"),o=!1);return o&&(this.callEvent("onValidationCorrect",[t,e,s,i]),n.className=n.className.replace(/[ ]*dhtmlx_validation_error/g,"")),o}},eXcell_stree.prototype=new eXcell,dhtmlXGridObject.prototype.setSubTree=function(t,e){this._sub_trees||(this._sub_trees=[]),this._sub_trees[e]=[t],t.parentObject.style.display="none";var i=this;t.parentObject.onclick=function(t){return(t||window.event).cancelBubble=!0,!1},t.ev_onDblClick=null,t.attachEvent("onDblClick",function(t){return i._sub_id=t,i.editStop(),!0}),t._chRRS=!0},eXcell_link.prototype=new eXcell,eXcell_link.prototype.getTitle=function(){var t=this.cell.firstChild;return t&&t.tagName?t.getAttribute("href"):""},eXcell_link.prototype.getContent=function(){var t=this.cell.firstChild;return t&&t.tagName?t.innerHTML:""},eXcell_grid.prototype=new eXcell,dhtmlXGridObject.prototype.setSubGrid=function(t,e,i){this._sub_grids||(this._sub_grids=[]),this._sub_grids[e]=[t,i],t.entBox.style.display="none";var s=this;t.attachEvent("onRowSelect",function(){return s.editStop(),!0}),t._chRRS=!1},eXcell_dhxCalendar.prototype=new eXcell,eXcell_dhxCalendar.prototype.edit=function(){var t=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1),this.grid._grid_calendarA.setPosition(t[0],t[1]+this.cell.offsetHeight),this.grid._grid_calendarA._last_operation_calendar=!1,this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]),this.cell._cediton=!0,this.val=this.cell.val,this._val=this.cell.innerHTML;var e=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){},this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y"),this.grid._grid_calendarA.setDate(this.val||new Date),this.grid._grid_calendarA.draw=e},eXcell_dhxCalendar.prototype.getDate=function(){return this.cell.val?this.cell.val:null},eXcell_dhxCalendar.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()},eXcell_dhxCalendar.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){if(this.cell._cediton=!1,this.grid._grid_calendarA._last_operation_calendar){var t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),e=this.grid._grid_calendarA.getDate();this.cell.val=new Date(e),this.setCValue(t,e),this.cell._clearCell=!t;var i=this.val;return this.val=this._val,this.cell.val.valueOf()!=i}return!1}},eXcell_dhxCalendar.prototype.setValue=function(t){return t&&"object"==typeof t?(this.cell.val=t,this.cell._clearCell=!1,void this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",t).toString(),this.cell.val)):(t&&""!=t.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",t.toString(),null,!0)),this.grid._dtmask_inc&&(t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(t="&nbsp",this.cell._clearCell=!0,this.cell.val=""),void("NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell._clearCell=!0,this.cell.val=new Date,this.setCValue("&nbsp;",0)):this.setCValue((t||"").toString(),this.cell.val)))},eXcell_dhxCalendarA.prototype=new eXcell,eXcell_dhxCalendarA.prototype.edit=function(){var t=this.grid.getPosition(this.cell);this.grid._grid_calendarA._show(!1,!1),this.grid._grid_calendarA.setPosition(1*t[0]+this.cell.offsetWidth,1*t[1]),this.grid.callEvent("onCalendarShow",[this.grid._grid_calendarA,this.cell.parentNode.idd,this.cell._cellIndex]),this.grid._grid_calendarA._last_operation_calendar=!1,this.cell._cediton=!0,this.val=this.cell.val,this._val=this.cell.innerHTML;var e=this.grid._grid_calendarA.draw;this.grid._grid_calendarA.draw=function(){},this.grid._grid_calendarA.setDateFormat(this.grid._dtmask||"%d/%m/%Y"),this.grid._grid_calendarA.setDate(this.val),this.grid._grid_calendarA.draw=e,this.cell.atag=!this.grid.multiLine&&(_isKHTML||_isMacOS||_isFF)?"INPUT":"TEXTAREA",this.obj=document.createElement(this.cell.atag),this.obj.style.height=this.cell.offsetHeight-(_isIE?4:2)+"px",this.obj.className="dhx_combo_edit",this.obj.wrap="soft",this.obj.style.textAlign=this.cell.align,this.obj.onclick=function(t){(t||event).cancelBubble=!0},this.obj.onmousedown=function(t){(t||event).cancelBubble=!0},this.obj.value=this.getValue(),this.cell.innerHTML="",this.cell.appendChild(this.obj),window.dhx4.isIE&&(this.obj.style.overflow="visible",this.grid.multiLine&&this.obj.offsetHeight>=18&&this.obj.offsetHeight<40&&(this.obj.style.height="36px",this.obj.style.overflow="scroll")),this.obj.onselectstart=function(t){return t||(t=event),t.cancelBubble=!0,!0},this.obj.focus(),this.obj.focus()},eXcell_dhxCalendarA.prototype.getDate=function(){return this.cell.val?this.cell.val:null},eXcell_dhxCalendarA.prototype.getValue=function(){return this.cell._clearCell?"":this.grid._dtmask_inc&&this.cell.val?this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask_inc,this.cell.val).toString():this.cell.innerHTML.toString()._dhx_trim()},eXcell_dhxCalendarA.prototype.detach=function(){if(this.grid._grid_calendarA&&(this.grid._grid_calendarA.hide(),this.cell._cediton)){if(this.cell._cediton=!1,this.grid._grid_calendarA._last_operation_calendar){this.grid._grid_calendarA._last_operation_calendar=!1;var t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y"),e=this.grid._grid_calendarA.getDate();this.cell.val=new Date(e),this.setCValue(t,e),this.cell._clearCell=!t;var i=this.val;return this.val=this._val,this.cell.val.valueOf()!=(""|i).valueOf()}this.setValue(this.obj.value);var i=this.val;return this.val=this._val,this.cell.val.valueOf()!=(i||"").valueOf()}},eXcell_dhxCalendarA.prototype.setValue=function(t){return t&&"object"==typeof t?(this.cell.val=t,this.cell._clearCell=!1,void this.setCValue(this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",t).toString(),this.cell.val)):(t&&""!=t.toString()._dhx_trim()?(this.cell._clearCell=!1,this.cell.val=new Date(this.grid._grid_calendarA.setFormatedDate(this.grid._dtmask_inc||this.grid._dtmask||"%d/%m/%Y",t.toString(),null,!0)),this.grid._dtmask_inc&&(t=this.grid._grid_calendarA.getFormatedDate(this.grid._dtmask||"%d/%m/%Y",this.cell.val))):(t="&nbsp",this.cell._clearCell=!0,this.cell.val=""),void("NaN"==this.cell.val||"Invalid Date"==this.cell.val?(this.cell.val=new Date,this.cell._clearCell=!0,this.setCValue("&nbsp;",0)):this.setCValue((t||"").toString(),this.cell.val)))},dhtmlXGridObject.prototype.resetCounter=function(t){this._fake&&!this._realfake&&t<this._fake._cCount&&this._fake.resetCounter(t,this.currentPage);var e=arguments[0]||0;for(this.currentPage&&(e=(this.currentPage-1)*this.rowsBufferOutSize),e=0;e<this.rowsBuffer.length;e++)this.rowsBuffer[e]&&"TR"==this.rowsBuffer[e].tagName&&this.rowsAr[this.rowsBuffer[e].idd]&&(this.rowsAr[this.rowsBuffer[e].idd].childNodes[t].innerHTML=e+1)},eXcell_cntr.prototype=new eXcell,eXcell_acheck.prototype=new eXcell,eXcell_acheck.prototype.setValue=function(t){t=(t||"").toString(),-1!=t.indexOf("1")||-1!=t.indexOf("true")?(t="1",this.cell.chstate="1"):(t="0",this.cell.chstate="0");this.setCValue(this.drawCurrentState(),this.cell.chstate)},eXcell_context.prototype=new eXcell,dhtmlXGridObject.prototype.setSubContext=function(t,e,i){var s=this;t.attachEvent("onClick",function(e){return s._sub_id=e,s.editStop(),t.hideContextMenu(),!0}),this._sub_context||(this._sub_context=[]),this._sub_context[e]=[t,i],t.hideContextMenu()},dhtmlXGridObject.prototype._process_html=function(t){if(t.tagName&&"TABLE"==t.tagName)return this._process_inner_html(t,0);var e=document.createElement("DIV");e.innerHTML=t.xmlDoc.responseText;var i=e.getElementsByTagName("TABLE")[0];this._process_inner_html(i,0)},dhtmlXGridObject.prototype._process_inner_html=function(t,e){for(var i=t.rows.length,s=e;i>s;s++){var n=t.rows[s].getAttribute("id")||s;this.rowsBuffer.push({idd:n,data:t.rows[s],_parser:this._process_html_row,_locator:this._get_html_data})}this.render_dataset(),this.setSizes()},dhtmlXGridObject.prototype._process_html_row=function(t,e){var i=e.getElementsByTagName("TD"),s=[];t._attrs=this._xml_attrs(e);for(var n=0;n<i.length;n++){var o=i[n],l=o.getAttribute("type");if(t.childNodes[n]&&(l&&(t.childNodes[n]._cellType=l),t.childNodes[n]._attrs=this._xml_attrs(i[n])),s.push(o.firstChild?o.innerHTML:""),o.colSpan>1){t.childNodes[n]._attrs.colspan=o.colSpan;for(var r=1;r<o.colSpan;r++)s.push("")}}for(n<i.length;n<t.childNodes.length;n++)t.childNodes[n]._attrs={};return this._fillRow(t,this._c_order?this._swapColumns(s):s),t},dhtmlXGridObject.prototype._get_html_data=function(t,e){for(t=t.firstChild;;){if(!t)return"";if("TD"==t.tagName&&e--,0>e)break;t=t.nextSibling}return t.firstChild?t.firstChild.data:""},dhtmlxEvent(window,"load",function(){for(var t=document.getElementsByTagName("table"),e=0;e<t.length;e++)"dhtmlxGrid"==t[e].className&&dhtmlXGridFromTable(t[e])}),dhtmlXGridObject.prototype._process_xmlA=function(t){if(!t.doXPath){var e=new dtmlXMLLoaderObject(function(){});"string"==typeof t?e.loadXMLString(t):(e.xmlDoc=t.responseXML?t:{},e.xmlDoc.responseXML=t),t=e}this._parsing=!0;var i=t.getXMLTopNode(this.xml.top);this._parseHead(i);var s=t.doXPath(this.xml.row,i),n=parseInt(t.doXPath("//"+this.xml.top)[0].getAttribute("pos")||0),o=parseInt(t.doXPath("//"+this.xml.top)[0].getAttribute("total_count")||0);if(o&&!this.rowsBuffer[o-1]&&(this.rowsBuffer[o-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataA,this._process_xml_row=this._process_xml_rowA,this._process_tree_xml(t);for(var l=0;l<s.length;l++)if(!this.rowsBuffer[l+n]){var r=s[l].getAttribute("id")||this.uid();this.rowsBuffer[l+n]={idd:r,data:s[l],_parser:this._process_xml_rowA,_locator:this._get_xml_dataA},this.rowsAr[r]=s[l]}return this.render_dataset(),this._parsing=!1,t.xmlDoc.responseXML?t.xmlDoc.responseXML:t.xmlDoc},dhtmlXGridObject.prototype._process_xmlB=function(t){if(!t.doXPath){var e=new dtmlXMLLoaderObject(function(){});"string"==typeof t?e.loadXMLString(t):(e.xmlDoc=t.responseXML?t:{},e.xmlDoc.responseXML=t),t=e}this._parsing=!0;var i=t.getXMLTopNode(this.xml.top);this._parseHead(i);var s=t.doXPath(this.xml.row,i),n=parseInt(t.doXPath("//"+this.xml.top)[0].getAttribute("pos")||0),o=parseInt(t.doXPath("//"+this.xml.top)[0].getAttribute("total_count")||0);if(o&&!this.rowsBuffer[o-1]&&(this.rowsBuffer[o-1]=null),this.isTreeGrid())return this._get_xml_data=this._get_xml_dataB,this._process_xml_row=this._process_xml_rowB,this._process_tree_xml(t);for(var l=0;l<s.length;l++)if(!this.rowsBuffer[l+n]){var r=s[l].getAttribute("id")||this.uid();this.rowsBuffer[l+n]={idd:r,data:s[l],_parser:this._process_xml_rowB,_locator:this._get_xml_dataB},this.rowsAr[r]=s[l]}return this.render_dataset(),this._parsing=!1,t.xmlDoc.responseXML?t.xmlDoc.responseXML:t.xmlDoc},dhtmlXGridObject.prototype._process_xml_rowA=function(t,e){var i=[];t._attrs=this._xml_attrs(e);for(var s=0;s<this.columnIds.length;s++){var n=this.columnIds[s],o=t._attrs[n]||"";t.childNodes[s]&&(t.childNodes[s]._attrs={}),i.push(o)}return this._fillRow(t,this._c_order?this._swapColumns(i):i),t},dhtmlXGridObject.prototype._get_xml_dataA=function(t,e){return t.getAttribute(this.getColumnId(e))},dhtmlXGridObject.prototype._process_xml_rowB=function(t,e){var i=[];if(t._attrs=this._xml_attrs(e),this._ud_enabled)for(var s=this.xmlLoader.doXPath("./userdata",e),n=s.length-1;n>=0;n--)this.setUserData(s[n].getAttribute("name"),s[n].firstChild?s[n].firstChild.data:"");for(var o=0;o<e.childNodes.length;o++){var l=e.childNodes[o];if(l.tagName){var r=this.getColIndexById(l.tagName);if(!isNaN(r)){var a=l.getAttribute("type");a&&(t.childNodes[r]._cellType=a),t.childNodes[r]._attrs=this._xml_attrs(l),l.getAttribute("xmlcontent")||(l=l.firstChild?l.firstChild.data:""),i[r]=l}}}for(var n=0;n<t.childNodes.length;n++)t.childNodes[n]._attrs||(t.childNodes[n]._attrs={});return this._fillRow(t,this._c_order?this._swapColumns(i):i),t},dhtmlXGridObject.prototype._get_xml_dataB=function(t,e){var i=this.getColumnId(e);for(t=t.firstChild;;){if(!t)return"";if(t.tagName==i)return t.firstChild?t.firstChild.data:"";t=t.nextSibling}return""},dhtmlXGridObject.prototype.startFastOperations=function(){this._disF=["setSizes","callEvent","_fixAlterCss","cells4","forEachRow","_correctMonolite"],this._disA=[];for(var t=this._disF.length-1;t>=0;t--)this._disA[t]=this[this._disF[t]],this[this._disF[t]]=function(){return!0};this._cellCache=[],this.cells4=function(t){var e=this._cellCache[t._cellIndex];return e||(e=this._cellCache[t._cellIndex]=this._disA[3].apply(this,[t]),e.destructor=function(){return!0},e.setCValue=function(t){e.cell.innerHTML=t}),e.cell=t,e.combo=t._combo||this.combos[t._cellIndex],e}},dhtmlXGridObject.prototype.stopFastOperations=function(){if(this._disF){for(var t=this._disF.length-1;t>=0;t--)this[this._disF[t]]=this._disA[t];this._correctMonolite&&this._correctMonolite(),this.setSizes(),this.callEvent("onGridReconstructed",[])}},dhtmlXGridObject.prototype._in_header_number_filter=function(t,e){this._in_header_text_filter.call(this,t,e);var i=this;t.firstChild._filter=function(){var t=i._get_filters(this.value,"num");return function(e){for(var i=t.length>0?!1:!0,s=0;s<t.length;s++)i=i||t[s](e);return i}}},dhtmlXGridObject.prototype._in_header_string_filter=function(t,e){this._in_header_text_filter.call(this,t,e);var i=this;t.firstChild._filter=function(){var t=i._get_filters(this.value,"str");return function(e){for(var i=t.length>0?!1:!0,s=0;s<t.length;s++)i=i||t[s](e);return i}}},dhtmlXGridObject.prototype._get_filters=function(t,e){for(var i=t.split(","),s=[],n=0;n<i.length;n++)if(""!=i[n]){var o=this["_get_"+e+"_filter"](i[n]);s.push(o)}return s},dhtmlXGridObject.prototype._get_str_filter=function(t){if("null"==t||"empty"==t)return new Function("value",'if (value == null || value == "") return true; return false;');if("!null"==t||"!empty"==t)return new Function("value",'if (value == null || value == "") return false; return true;');if("!"===t.substr(0,1)){var e=t.substr(1);return new Function("value",'if (value !== "'+e+'") return true; return false;')}if("~"===t.substr(0,1)){var e=t.substr(1);return new Function("value",'if (value.indexOf("'+e+'") !== -1) return true; return false;')}if("^"===t.substr(0,1)&&"&"===t.substr(t.length-1,1)&&(t="="+t.substr(1,t.length-2)),"^"===t.substr(0,1)){var e=t.substr(1);return new Function("value","if (value.substr(0, "+e.length+') === "'+e+'") return true; return false;')}if("&"===t.substr(t.length-1,1)){var e=t.substr(0,t.length-1);return new Function("value","if (value.substr(value.length - "+e.length+') === "'+e+'") return true; return false;')}if("="===t.substr(0,1))var e=t.substr(1);else var e=t;return new Function("value",'if (value === "'+e+'") return true; return false;')},dhtmlXGridObject.prototype._get_num_filter=function(t){if("null"==t||"empty"==t)return new Function("value",'if (value == null || value == "") return true; return false;');if("!null"==t||"!empty"==t)return new Function("value",'if (value == null || value == "") return false; return true;');var e=t.split("..");if(2==e.length){var i=parseFloat(e[0]),s=parseFloat(e[1]);return new Function("value","if (value >= "+i+" && value <= "+s+") return true; return false;")}var n=t.match(/<>|>=|<=|>|<|=/);if(n)var o=n[0],l=parseFloat(t.replace(o,""));else{var o="==";l=parseFloat(t)}return"<>"==o&&(o="!="),"="==o&&(o="=="),new Function("value"," if (value "+o+" "+l+" ) return true; return false;")},dhtmlXGridObject.prototype.attachHeaderA=dhtmlXGridObject.prototype.attachHeader,dhtmlXGridObject.prototype.attachHeader=function(){if(this.attachHeaderA.apply(this,arguments),this._realfake)return!0;this.formAutoSubmit(),"undefined"==typeof this.FormSubmitOnlyChanged&&this.submitOnlyChanged(!0),"undefined"==typeof this._submitAR&&this.submitAddedRows(!0);var t=this;this._added_rows=[],this._deleted_rows=[],this.attachEvent("onRowAdded",function(e){return t._added_rows.push(e),t.forEachCell(e,function(t){t.cell.wasChanged=!0}),!0}),this.attachEvent("onBeforeRowDeleted",function(e){return t._deleted_rows.push(e),!0}),this.attachHeader=this.attachHeaderA},dhtmlXGridObject.prototype.formAutoSubmit=function(){if(this.parentForm=this.detectParentFormPresent(),this.parentForm===!1)return!1;if(!this.formEventAttached){this.formInputs=new Array;var t=this;dhtmlxEvent(this.parentForm,"submit",function(){t.entBox&&t.parentFormOnSubmit()}),this.formEventAttached=!0}},dhtmlXGridObject.prototype.parentFormOnSubmit=function(){return this.formCreateInputCollection(),this.callEvent("onBeforeFormSubmit",[])?void 0:!1},dhtmlXGridObject.prototype.submitOnlyChanged=function(t){this.FormSubmitOnlyChanged=convertStringToBoolean(t)},dhtmlXGridObject.prototype.submitColumns=function(t){"string"==typeof t&&(t=t.split(this.delim)),this._submit_cols=t},dhtmlXGridObject.prototype.setFieldName=function(t){t=t.replace(/\{GRID_ID\}/g,"'+a1+'"),t=t.replace(/\{ROW_ID\}/g,"'+a2+'"),t=t.replace(/\{ROW_INDEX\}/g,"'+this.getRowIndex(a2)+'"),t=t.replace(/\{COLUMN_INDEX\}/g,"'+a3+'"),t=t.replace(/\{COLUMN_ID\}/g,"'+this.getColumnId(a3)+'"),this._input_mask=Function("a1","a2","a3","return '"+t+"';")},dhtmlXGridObject.prototype.submitSerialization=function(t){this.FormSubmitSerialization=convertStringToBoolean(t)},dhtmlXGridObject.prototype.submitAddedRows=function(t){this._submitAR=convertStringToBoolean(t)},dhtmlXGridObject.prototype.submitOnlySelected=function(t){this.FormSubmitOnlySelected=convertStringToBoolean(t)},dhtmlXGridObject.prototype.submitOnlyRowID=function(t){this.FormSubmitOnlyRowID=convertStringToBoolean(t)},dhtmlXGridObject.prototype.createFormInput=function(t,e){var i=document.createElement("input");i.type="hidden",i.name=this._input_mask&&"string"!=typeof t?this._input_mask.apply(this,t):((this.globalBox||this.entBox).id||"dhtmlXGrid")+"_"+t,i.value=e,this.parentForm.appendChild(i),this.formInputs.push(i)},dhtmlXGridObject.prototype.createFormInputRow=function(t){for(var e=(this.globalBox||this.entBox).id,i=0;i<this._cCount;i++){var s=this.cells3(t,i);this.FormSubmitOnlyChanged&&!s.wasChanged()||this._submit_cols&&!this._submit_cols[i]||this.createFormInput(this._input_mask?[e,t.idd,i]:t.idd+"_"+i,s.getValue())}},dhtmlXGridObject.prototype.formCreateInputCollection=function(){if(0==this.parentForm)return!1;for(var t=0;t<this.formInputs.length;t++)this.parentForm.removeChild(this.formInputs[t]);if(this.formInputs=new Array,this.FormSubmitSerialization)this.createFormInput("serialized",this.serialize());else if(this.FormSubmitOnlySelected)if(this.FormSubmitOnlyRowID)this.createFormInput("selected",this.getSelectedId());else for(var t=0;t<this.selectedRows.length;t++)this.createFormInputRow(this.selectedRows[t]);else this._submitAR&&(this._added_rows.length&&this.createFormInput("rowsadded",this._added_rows.join(",")),this._deleted_rows.length&&this.createFormInput("rowsdeleted",this._deleted_rows.join(","))),this.forEachRow(function(t){this.getRowById(t),this.createFormInputRow(this.rowsAr[t])})},dhtmlXGridObject.prototype.detectParentFormPresent=function(){for(var t=!1,e=this.entBox;e&&e.tagName&&e!=document.body;){if("form"==e.tagName.toLowerCase()){t=e;break}e=e.parentNode}return t},dhtmlXGridObject.prototype.unGroup=function(){this._groups&&(this._dndProblematic=!1,delete this._groups,delete this._gIndex,this._fake&&this._mirror_rowsCol(),this.forEachRow(function(t){this.rowsAr[t].style.display=""}),this._reset_view(),this.callEvent("onGridReconstructed",[]),this.callEvent("onUnGroup",[]))},dhtmlXGridObject.prototype._mirror_rowsCol=function(){this._fake._groups=this._groups,this._fake._gIndex=this._gIndex,this.rowsBuffer=dhtmlxArray();for(var t=0;t<this.rowsCol.length;t++)this.rowsCol[t]._cntr||this.rowsBuffer.push(this.rowsCol[t]);this._fake.rowsBuffer=dhtmlxArray();for(var t=0;t<this._fake.rowsCol.length;t++)this._fake.rowsCol[t]._cntr||this._fake.rowsBuffer.push(this._fake.rowsCol[t])},dhtmlXGridObject.prototype.groupBy=function(t,e){if(this._groups&&this.unGroup(),this._dndProblematic=!0,this._groups={},!e){e=["#title"];for(var i=1;i<this._cCount;i++)e.push("#cspan")}this._gmask=document.createElement("TR"),this._gmask.origin=e;for(var s,n=0,i=0;i<e.length;i++)"#cspan"==e[i]?s.colSpan=(parseInt(s.colSpan)||1)+1:(s=document.createElement("TD"),s._cellIndex=i,this._hrrar[i]&&(s.style.display="none"),s.className="group_row",s.innerHTML="&nbsp;","#title"==e[i]?this._gmask._title=n:s.align=this.cellAlign[i]||"left",this._gmask.appendChild(s),0==e[i].indexOf("#stat")&&(this._gmask._math=!0,s._counter=[this["_g_"+e[i].replace("#","")],i,n]),n++);for(var o in this._groups)this._groups[o]=this.undefined;if(this._gIndex=t,this._fake&&!this._realfake&&(this._fake._groups=[],this._fake._gIndex=this._gIndex),this._nextRow=function(t,e){var i=this.rowsCol[t+e];return i&&("none"==i.style.display||i._cntr)?this._nextRow(t+e,e):i},this.__sortRowsBG||(this._key_events=dhtmlXHeir({},this._key_events),this._key_events.k38_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftPrev();else{var t=this.row.rowIndex;if(!t)return;var e=this._nextRow(t-1,-1);e&&this.selectCell(e,this.cell._cellIndex,!0)}},this._key_events.k13_1_0=this._key_events.k13_0_1=function(){},this._key_events.k40_0_0=function(){if(this.editor&&this.editor.combo)this.editor.shiftNext();else{var t=this.row.rowIndex;if(!t)return;var e=this._nextRow(t-1,1);e&&this.selectCell(e,this.cell._cellIndex,!0)}},this.attachEvent("onFilterStart",function(){return this._groups&&(this._groups=this.undefined),!0}),this.attachEvent("onFilterEnd",function(){"undefined"!=typeof this._gIndex&&this.groupBy(this._gIndex,this._gmask.origin)}),this.sortRows_bg=this.sortRows,this.sortRows=function(t,e,i){return"undefined"==typeof this._groups?this.sortRows_bg.apply(this,arguments):void this.callEvent("onBeforeSorting",[t,e||"str",i||"asc"])},this.attachEvent("onBeforeSorting",function(t,e,i){return"undefined"==typeof this._groups?!0:(t==this._gIndex?this._sortByGroup(t,e,i):this._sortInGroup(t,e,i),this.setSortImgState(!0,t,i),this._fake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view()),this.setSortImgState(!0,t,i),this.callEvent("onAfterSorting",[t,e,i]),!1)}),this.attachEvent("onClearAll",function(){this.unGroup()}),this.attachEvent("onBeforeRowDeleted",function(t){if(!this._groups)return!0;if(!this.rowsAr[t])return!0;var e=this.cells(t,this._gIndex).getValue();""===e&&(e=" ");var i=this._groups[e];return this._dec_group(i),!0}),this.attachEvent("onAfterRowDeleted",function(){this.updateGroups()}),this.attachEvent("onCheckbox",function(t,e,i){this.callEvent("onEditCell",[2,t,e,i?1:0,i?0:1])}),this.attachEvent("onXLE",this.updateGroups),this.attachEvent("onColumnHidden",this.hideGroupColumn),this.attachEvent("onEditCell",function(t,e,i,s,n){if(!this._groups)return!0;if(2==t&&s!=n&&i==this._gIndex){""===n&&(n=" "),this._dec_group(this._groups[n]);var o=this.rowsAr[e],l=this.rowsCol._dhx_find(o),r=this._inc_group(s),a=this.rowsCol[r];o==a&&(a=a.nextSibling);{var h=o.parentNode;o.rowIndex}h.removeChild(o),a?h.insertBefore(o,a):h.appendChild(o),this.rowsCol._dhx_insertAt(r,o),l>r&&l++,this.rowsCol._dhx_removeAt(l,o),this._fixAlterCss()}else 2==t&&s!=n&&(this.updateGroups(),this._updateGroupView(this._groups[this.cells(e,this._gIndex).getValue()||" "]));return!0}),this.__sortRowsBG=!0),this._groupExisting(),this._hrrar)for(var i=0;i<this._hrrar.length;i++)this._hrrar[i]&&this.hideGroupColumn(i,!0);this.callEvent("onGroup",[]),(this._ahgr||this._awdth)&&this.setSizes()},dhtmlXGridObject.prototype._sortInGroup=function(t,e,i){var s=this._groups_get();s.reverse();for(var n=0;n<s.length;n++){for(var o=s[n]._cntr._childs,l={},r=0;r<o.length;r++){var a=this.cells3(o[r],t);l[o[r].idd]=a.getDate?a.getDate():a.getValue()}this._sortCore(t,e,i,l,o)}this._groups_put(s),this.setSizes(),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._sortByGroup=function(t,e,i){for(var s=this._groups_get(),n=[],o=0;o<s.length;o++)s[o].idd="_sort_"+o,n["_sort_"+o]=s[o]._cntr.text;this._sortCore(t,e,i,n,s),this._groups_put(s),this.callEvent("onGridReconstructed",[]),this.setSizes()},dhtmlXGridObject.prototype._inc_group=function(t,e,i){""===t&&(t=" "),this._groups[t]||(this._groups[t]={text:t,row:this._addPseudoRow(),count:0,state:e?"plus":"minus"});var s=this._groups[t];s.row._cntr=s;var n=this.rowsCol._dhx_find(s.row)+s.count+1;return s.count++,i||(this._updateGroupView(s),this.updateGroups()),n},dhtmlXGridObject.prototype._dec_group=function(t){return t?(t.count--,0==t.count?(t.row.parentNode.removeChild(t.row),this.rowsCol._dhx_removeAt(this.rowsCol._dhx_find(t.row)),delete this._groups[t.text]):this._updateGroupView(t),this._fake&&!this._realfake&&this._fake._dec_group(this._fake._groups[t.text]),this.updateGroups(),!0):void 0},dhtmlXGridObject.prototype._insertRowAt_gA=dhtmlXGridObject.prototype._insertRowAt,dhtmlXGridObject.prototype._insertRowAt=function(t,e,i){if("undefined"!=typeof this._groups){if(this._realfake)var s=this._fake._bfs_cells(t.idd,this._gIndex).getValue();else if(this._bfs_cells3)var s=this._bfs_cells3(t,this._gIndex).getValue();else var s=this.cells3(t,this._gIndex).getValue();
s||(s=" "),e=this._inc_group(s,"none"==t.style.display)}var n=this._insertRowAt_gA(t,e,i);return"undefined"!=typeof this._groups&&(this.expandGroup(s),this._updateGroupView(this._groups[s]),this.updateGroups()),n},dhtmlXGridObject.prototype._updateGroupView=function(t){if(this._fake&&!this._realfake)return t.row.firstChild.innerHTML="&nbsp;";var e=this._gmask||this._fake._gmask,i="<img style='margin-bottom:-4px' src='"+this.imgURL+t.state+".gif'> ";i+=this.customGroupFormat?this.customGroupFormat(t.text,t.count):t.text+" ( "+t.count+" ) ",t.row.childNodes[e._title].innerHTML=i},dhtmlXGridObject.prototype._addPseudoRow=function(t){for(var e=this._gmask||this._fake._gmask,i=e.cloneNode(!0),s=0;s<i.childNodes.length;s++)i.childNodes[s]._cellIndex=e.childNodes[s]._cellIndex,this._realfake&&(i.childNodes[s].style.display="");var n=this;return i.onclick=function(t){n.callEvent("onGroupClick",[this._cntr.text])&&(n._fake&&n._realfake?n._fake._switchGroupState(n._fake._groups[this._cntr.text].row):n._switchGroupState(this),(t||event).cancelBubble="true")},i.ondblclick=function(t){(t||event).cancelBubble="true"},t||(_isKHTML?this.obj.appendChild(i):this.obj.firstChild.appendChild(i),this.rowsCol.push(i)),i},dhtmlXGridObject.prototype._groups_get=function(){var t=[];this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj);for(var e=[],i=this.rowsCol.length-1;i>=0;i--)this.rowsCol[i]._cntr?(this.rowsCol[i]._cntr._childs=e,e=[],t.push(this.rowsCol[i])):e.push(this.rowsCol[i]),this.rowsCol[i].parentNode.removeChild(this.rowsCol[i]);return t},dhtmlXGridObject.prototype._groups_put=function(t){var e=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray(0),this.rowsCol.stablesort=e;for(var i=0;i<t.length;i++){var s=t[i]._cntr;this.obj.firstChild.appendChild(s.row),this.rowsCol.push(s.row),s.row.idd=null;for(var n=0;n<s._childs.length;n++)this.obj.firstChild.appendChild(s._childs[n]),this.rowsCol.push(s._childs[n]);delete s._childs}this._temp_par.appendChild(this.obj)},dhtmlXGridObject.prototype._groupExisting=function(t){if(this.getRowsNum()){var t=[];this._temp_par=this.obj.parentNode,this._temp_par.removeChild(this.obj);for(var e=this.rowsCol.length,i=0;e>i;i++){var s=this.cells4(this.rowsCol[i].childNodes[this._gIndex]).getValue();if(this.rowsCol[i].style.display="",s||(s=" "),!this._groups[s]){this._groups[s]={text:s,row:this._addPseudoRow(!0),count:0,state:"minus"};var n=this._groups[s];n.row._cntr=n,this._groups[s]._childs=[],t.push(n.row)}this._groups[s].count++,this._groups[s]._childs.push(this.rowsCol[i]),this.rowsCol[i].parentNode.removeChild(this.rowsCol[i])}for(var i=0;i<t.length;i++)this._updateGroupView(t[i]._cntr);this._groups_put(t),this._fake&&!this._realfake&&(this._mirror_rowsCol(),this._fake._groups=[],this._fake._reset_view()),this.callEvent("onGridReconstructed",[]),this.updateGroups()}},dhtmlXGridObject.prototype._switchGroupState=function(t){var e=t._cntr;this._fake&&!this._realfake&&(e.state=this._fake._groups[t._cntr.text].row._cntr.state,this._fake._switchGroupState(this._fake._groups[t._cntr.text].row));var i=this.rowsCol._dhx_find(e.row)+1;e.state="minus"==e.state?"plus":"minus";for(var s="plus"==e.state?"none":"";this.rowsCol[i]&&!this.rowsCol[i]._cntr;)this.rowsCol[i].style.display=s,i++;this._updateGroupView(e),this.callEvent("onGroupStateChanged",[e.text,"minus"==e.state]),this.setSizes()},dhtmlXGridObject.prototype.expandGroup=function(t){"plus"==this._groups[t].state&&this._switchGroupState(this._groups[t].row)},dhtmlXGridObject.prototype.collapseGroup=function(t){"minus"==this._groups[t].state&&this._switchGroupState(this._groups[t].row)},dhtmlXGridObject.prototype.expandAllGroups=function(){for(var t in this._groups)this._groups[t]&&"plus"==this._groups[t].state&&this._switchGroupState(this._groups[t].row)},dhtmlXGridObject.prototype.collapseAllGroups=function(){for(var t in this._groups)this._groups[t]&&"minus"==this._groups[t].state&&this._switchGroupState(this._groups[t].row)},dhtmlXGridObject.prototype.hideGroupColumn=function(t,e){if(!this._fake){for(var i=-1,s=this._gmask.childNodes,n=0;n<s.length;n++)if(s[n]._cellIndex==t){i=n;break}if(-1!=i)for(var o in this._groups)this._groups[o].row.childNodes[i].style.display=e?"none":""}},dhtmlXGridObject.prototype.groupStat=function(t,e,i){i=this["_g_"+(i||"stat_total")];var s=0,n=0;return this.forEachRowInGroup(t,function(t){s=i(s,1*this.cells(t,e).getValue(),n),n++}),s},dhtmlXGridObject.prototype.forEachRowInGroup=function(t,e){var i=this._groups[t].row.nextSibling;if(i)for(;i&&!i._cntr;)e.call(this,i.idd),i=i.nextSibling;else{var s=this._groups[t]._childs;if(s)for(var n=0;n<s.length;n++)e.call(this,s[n].idd)}},dhtmlXGridObject.prototype.updateGroups=function(){if(this._gmask&&this._gmask._math&&!this._parsing)for(var t=this._gmask.childNodes,e=0;e<t.length;e++)t[e]._counter&&this._b_processing.apply(this,t[e]._counter)},dhtmlXGridObject.prototype._b_processing=function(t,e,i){var s=0,n=0;this._ecache[this.cellType[e]]||this.cells5({parentNode:{grid:this}},this.cellType[e]);for(var o=this.rowsCol.length-1;o>=0;o--)this.rowsCol[o]._cntr?(this.cells5(this.rowsCol[o].childNodes[i],this.cellType[e]).setValue(s),n=s=0):(s=t(s,1*this.cells3(this.rowsCol[o],e).getValue(),n),n++)},dhtmlXGridObject.prototype._g_stat_total=function(t,e){return t+e},dhtmlXGridObject.prototype._g_stat_min=function(t,e,i){return i||(t=1/0),Math.min(t,e)},dhtmlXGridObject.prototype._g_stat_max=function(t,e,i){return i||(t=-1/0),Math.max(t,e)},dhtmlXGridObject.prototype._g_stat_average=function(t,e,i){return(t*i+e)/(i+1)},dhtmlXGridObject.prototype._g_stat_count=function(t){return t++},dhtmlXGridObject.prototype._in_header_collapse=function(t,e,i){var s="TD"==t.tagName?t:t.parentNode;e=s._cellIndexS,this._column_groups||(this._column_groups=[]);var n=i[1].split(":"),n=i[1].split(":");n=[n.shift(),n.join(":")];var o=parseInt(n[0]);t.innerHTML=i[0]+"<img src='"+this.imgURL+"minus.gif' style='padding-right:10px;height:16px'/><span style='position:relative; top:-6px;'>"+(n[1]||"")+"<span>",t.style.paddingBottom="0px";var l=this;this._column_groups[e]=t.getElementsByTagName("IMG")[0],this._column_groups[e].onclick=function(t){(t||event).cancelBubble=!0,this._cstate=!this._cstate;for(var i=e+1;e+o>i;i++)l.setColumnHidden(i,this._cstate);if(this._cstate){if(s.colSpan&&s.colSpan>0){s._exp_colspan=s.colSpan;var n=Math.max(1,s.colSpan-o);if(!_isFF)for(var r=0;r<s.colSpan-n;r++){var a=document.createElement("TD");s.nextSibling?s.parentNode.insertBefore(a,s.nextSibling):s.parentNode.appendChild(a)}s.colSpan=n}l.callEvent("onColumnCollapse",[e,this._cstate])}else if(s._exp_colspan){if(s.colSpan=s._exp_colspan,!_isFF)for(var r=1;r<s._exp_colspan;r++)s.parentNode.removeChild(s.nextSibling);l.callEvent("onColumnCollapse",[e,this._cstate])}this.src=l.imgURL+(this._cstate?"plus.gif":"minus.gif"),"none"!=l.sortImg.style.display&&l.setSortImgPos()}},dhtmlXGridObject.prototype.collapseColumns=function(t){this._column_groups[t]&&!this._column_groups[t]._cstate&&this._column_groups[t].onclick({})},dhtmlXGridObject.prototype.expandColumns=function(t){this._column_groups[t]&&this._column_groups[t]._cstate&&this._column_groups[t].onclick({})},dhtmlXGridObject.prototype.enableHeaderMenu=function(t){"string"==typeof t&&(t=t.split(",")),this._hm_config=t;var e=this;this.attachEvent("onInit",function(){this.hdr.oncontextmenu=function(t){return e._doHContClick(t||window.event)},this.startColResizeA=this.startColResize,this.startColResize=function(t){return 2==t.button||_isMacOS&&t.ctrlKey?this._doHContClick(t):this.startColResizeA(t)},this._chm_ooc=this.obj.onclick,this._chm_hoc=this.hdr.onclick,this.hdr.onclick=function(t){return t&&(2==t.button||_isMacOS&&t.ctrlKey)?!1:(e._showHContext(!1),e._chm_hoc.apply(this,arguments))},this.obj.onclick=function(){return e._showHContext(!1),e._chm_ooc.apply(this,arguments)}}),dhtmlxEvent(document.body,"click",function(){e._hContext&&e._showHContext(!1)}),this.hdr.rows.length&&this.callEvent("onInit",[]),this.enableHeaderMenu=function(){}},dhtmlXGridObject.prototype._doHContClick=function(t){function e(t){if(t.pageX||t.pageY)return{x:t.pageX,y:t.pageY};var e=_isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:t.clientX+e.scrollLeft-e.clientLeft,y:t.clientY+e.scrollTop-e.clientTop}}this._createHContext();var i=e(t);return this._showHContext(!0,i.x,i.y),t[_isIE?"srcElement":"target"].oncontextmenu=function(t){return(t||event).cancelBubble=!0,!1},t.cancelBubble=!0,t.preventDefault&&t.preventDefault(),!1},dhtmlXGridObject.prototype._createHContext=function(){if(this._hContext)return this._hContext;var t=document.createElement("DIV");t.oncontextmenu=function(t){return(t||event).cancelBubble=!0,!1},t.onclick=function(t){return(t||event).cancelBubble=!0,!0},t.className="dhx_header_cmenu",t.style.width=t.style.height="5px",t.style.display="none";var e=[],i=0;this._fake&&(i=this._fake._cCount);for(var i,s=i;i<this.hdr.rows[1].cells.length;i++){var n=this.hdr.rows[1].cells[i];if(!this._hm_config||this._hm_config[i]&&"false"!=this._hm_config[i]){if(n.firstChild&&"DIV"==n.firstChild.tagName)var o=n.firstChild.innerHTML;else var o=n.innerHTML;o=o.replace(/<[^>]*>/gi,""),e.push("<div class='dhx_header_cmenu_item'><input type='checkbox' column='"+s+"' len='"+(n.colSpan||1)+"' checked='true' />"+o+"</div>")}s+=n.colSpan||1}t.innerHTML=e.join("");for(var l=this,r=function(){var t=this.getAttribute("column");if(!this.checked&&!l._checkLast(t))return this.checked=!0;l._realfake&&(l=l._fake);for(var e=0;e<this.getAttribute("len");e++)l.setColumnHidden(1*t+1*e,!this.checked);this.checked&&0==l.getColWidth(t)&&l.adjustColumnSize(t)},i=0;i<t.childNodes.length;i++)t.childNodes[i].firstChild.onclick=r;document.body.insertBefore(t,document.body.firstChild),this._hContext=t,t.style.position="absolute",t.style.zIndex=999,t.style.width="auto",t.style.height="auto",t.style.display="block"},dhtmlXGridObject.prototype._checkLast=function(t){for(var e=0;e<this._cCount;e++)if(!(this._hrrar&&this._hrrar[e]||e==t))return!0;return!1},dhtmlXGridObject.prototype._updateHContext=function(){for(var t=0;t<this._hContext.childNodes.length;t++){var e=this._hContext.childNodes[t].firstChild,i=e.getAttribute("column");(this.isColumnHidden(i)||0==this.getColWidth(i))&&(e.checked=!1)}},dhtmlXGridObject.prototype._showHContext=function(t,e,i){t&&this.enableColumnMove&&(this._hContext.parentNode.removeChild(this._hContext),this._hContext=null),this._createHContext(),this._hContext.style.display=t?"block":"none",t&&(this._updateHContext(!0),this._hContext.style.left=e+"px",this._hContext.style.top=i+"px")},dhtmlXGridObject.prototype._process_json_row=function(t,e){t._attrs=e;for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};if(e.userdata)for(var s in e.userdata)this.setUserData(t.idd,s,e.userdata[s]);e=this._c_order?this._swapColumns(e.data):e.data;for(var n=0;n<e.length;n++)"object"==typeof e[n]&&null!=e[n]&&(t.childNodes[n]._attrs=e[n],e[n].type&&(t.childNodes[n]._cellType=e[n].type),e[n]=e[n].value);return this._fillRow(t,e),t},dhtmlXGridObject.prototype._process_js_row=function(t,e){t._attrs=e;for(var i=0;i<t.childNodes.length;i++)t.childNodes[i]._attrs={};if(e.userdata)for(var s in e.userdata)this.setUserData(t.idd,s,e.userdata[s]);for(var n=[],o=0;o<this.columnIds.length;o++)n[o]=e[this.columnIds[o]],"object"==typeof n[o]&&null!=n[o]&&(t.childNodes[o]._attrs=n[o],n[o].type&&(t.childNodes[o]._cellType=n[o].type),n[o]=n[o].value),n[o]||0===n[o]||(n[o]="");return this._fillRow(t,n),t},dhtmlXGridObject.prototype.updateFromJSON=function(t,e,i,s){"undefined"==typeof e&&(e=!0),this._refresh_mode=[!0,e,i],this.load(t,s,"json")},dhtmlXGridObject.prototype._refreshFromJSON=function(t){this._f_rowsBuffer&&this.filterBy(0,""),reset=!1,window.eXcell_tree&&(eXcell_tree.prototype.setValueX=eXcell_tree.prototype.setValue,eXcell_tree.prototype.setValue=function(t){var e=this.grid._h2.get[this.cell.parentNode.idd];e&&this.cell.parentNode.valTag?this.setLabel(t):this.setValueX(t)});var e=this.cellType._dhx_find("tree"),i=t.parent||0,s={};this._refresh_mode[2]&&(-1!=e?this._h2.forEachChild(i,function(t){s[t.id]=!0},this):this.forEachRow(function(t){s[t]=!0}));for(var n=t.rows,o=0;o<n.length;o++){var l=n[o],r=l.id;if(s[r]=!1,this.rowsAr[r]&&"TR"!=this.rowsAr[r].tagName)this._h2?this._h2.get[r].buff.data=l:this.rowsBuffer[this.getRowIndex(r)].data=l,this.rowsAr[r]=l;else if(this.rowsAr[r])this._process_json_row(this.rowsAr[r],l,-1),this._postRowProcessing(this.rowsAr[r],!0);else if(this._refresh_mode[1]){var a={idd:r,data:l,_parser:this._process_json_row,_locator:this._get_json_data},h=this.rowsBuffer.length;"top"==this._refresh_mode[1]?(this.rowsBuffer.unshift(a),h=0):this.rowsBuffer.push(a),this._h2&&(reset=!0,this._h2.add(r,i).buff=this.rowsBuffer[this.rowsBuffer.length-1]),this.rowsAr[r]=l,l=this.render_row(h),this._insertRowAt(l,h?-1:0)}}if(this._refresh_mode[2])for(r in s)s[r]&&this.rowsAr[r]&&this.deleteRow(r);this._refresh_mode=null,window.eXcell_tree&&(eXcell_tree.prototype.setValue=eXcell_tree.prototype.setValueX),reset&&this._renderSort(),this._f_rowsBuffer&&(this._f_rowsBuffer=null,this.filterByAll())},dhtmlXGridObject.prototype._process_js=function(t){return this._process_json(t,"js")},dhtmlXGridObject.prototype._process_json=function(data,mode){this._parsing=!0;try{data&&data.xmlDoc?(eval("dhtmlx.temp="+data.xmlDoc.responseText+";"),data=dhtmlx.temp):"string"==typeof data&&(eval("dhtmlx.temp="+data+";"),data=dhtmlx.temp)}catch(e){dhtmlxError.throwError("LoadXML","Incorrect JSON",[data.xmlDoc||data,this]),data={rows:[]}}if(this._refresh_mode)return this._refreshFromJSON(data);var cr=parseInt(data.pos||0),total=parseInt(data.total_count||0),reset=!1;total&&(this.rowsBuffer[total-1]||(this.rowsBuffer.length&&(reset=!0),this.rowsBuffer[total-1]=null),total<this.rowsBuffer.length&&(this.rowsBuffer.splice(total,this.rowsBuffer.length-total),reset=!0));for(var key in data)"rows"!=key&&this.setUserData("",key,data[key]);if("js"==mode&&data.collections)for(var colkey in data.collections){var index=this.getColIndexById(colkey),colrecs=data.collections[colkey];if(index!==window.undefined)if("clist"==this.cellType[index]){colplaindata=[];for(var j=0;j<colrecs.length;j++)colplaindata.push(colrecs[j].label);this.registerCList(index,colplaindata)}else for(var combo=this.getCombo(index),j=0;j<colrecs.length;j++)combo.put(colrecs[j].value,colrecs[j].label)}if(this.isTreeGrid())return this._process_tree_json(data,null,null,mode);if("js"==mode){data.data&&(data=data.data);for(var i=0;i<data.length;i++)if(!this.rowsBuffer[i+cr]){var row=data[i],id=row.id||i+1;this.rowsBuffer[i+cr]={idd:id,data:row,_parser:this._process_js_row,_locator:this._get_js_data},this.rowsAr[id]=data[i]}}else for(var i=0;i<data.rows.length;i++)if(!this.rowsBuffer[i+cr]){var id=data.rows[i].id;this.rowsBuffer[i+cr]={idd:id,data:data.rows[i],_parser:this._process_json_row,_locator:this._get_json_data},this.rowsAr[id]=data.rows[i]}if(reset&&this._srnd){var h=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=h}else this.render_dataset();this._parsing=!1},dhtmlXGridObject.prototype._get_json_data=function(t,e){return"object"==typeof t.data[e]?t.data[e].value:t.data[e]},dhtmlXGridObject.prototype._process_tree_json=function(t,e,i,s){this._parsing=!0;var n=!1;if(e||(this.render_row=this.render_row_tree,n=!0,e=t,i=e.parent||0,"0"==i&&(i=0),this._h2||(this._h2=new dhtmlxHierarchy),this._fake&&(this._fake._h2=this._h2)),"js"==s){e.data&&!i&&(t=e.data),e.rows&&(e=e.rows);for(var o=0;o<e.length;o++){var l=e[o].id,r=this._h2.add(l,i);r.buff={idd:l,data:e[o],_parser:this._process_js_row,_locator:this._get_js_data},e[o].open&&(r.state="minus"),this.rowsAr[l]=r.buff,this._process_tree_json(e[o],e[o],l,s)}}else if(e.rows)for(var o=0;o<e.rows.length;o++){var l=e.rows[o].id,r=this._h2.add(l,i);r.buff={idd:l,data:e.rows[o],_parser:this._process_json_row,_locator:this._get_json_data},e.rows[o].open&&(r.state="minus"),this.rowsAr[l]=r.buff,this._process_tree_json(e.rows[o],e.rows[o],l,s)}n&&(0!=i&&this._h2.change(i,"state","minus"),this._updateTGRState(this._h2.get[i]),this._h2_to_buff(),0!=i&&(this._srnd||this.pagingOn)?this._renderSort():this.render_dataset(),this._slowParse===!1&&this.forEachRow(function(t){this.render_row_tree(0,t)}),this._parsing=!1,0==i||this._srnd||this.callEvent("onOpenEnd",[i,1]))},dhtmlXGridObject.prototype.enableMarkedCells=function(t){this.markedRowsArr=new dhtmlxArray(0),this.markedCellsArr=new Array(0),this.lastMarkedRow=null,this.lastMarkedColumn=null,this.markedCells=!0,this.lastMarkMethod=0,arguments.length>0&&(convertStringToBoolean(t)||(this.markedCells=!1))},dhtmlXGridObject.prototype.doMark=function(t,e){var i=t.parentNode.idd;if(this.setActive(!0),i){this.editStop(),this.cell=t,this.row=t.parentNode;var s=t._cellIndex;if(e||(e=0),0==e)this.unmarkAll();else if(1==e){if(this.lastMarkedRow)for(var n=Math.min(this.getRowIndex(i),this.getRowIndex(this.lastMarkedRow)),o=Math.max(this.getRowIndex(i),this.getRowIndex(this.lastMarkedRow)),l=Math.min(s,this.lastMarkedColumn),r=Math.max(s,this.lastMarkedColumn),a=n;o+1>a;a++)for(var h=l;r+1>h;h++)this.mark(this.getRowId(a),h,!0)}else if(2==e&&-1!=this.markedRowsArr._dhx_find(i))for(var d=0;d<this.markedCellsArr[i].length;d++)if(this.markedCellsArr[i][d]==s)return this.mark(i,s,!1),!0;this.markedCellsArr[i]||(this.markedCellsArr[i]=new dhtmlxArray(0)),1!=e&&this.mark(i,s),this.moveToVisible(this.cells(i,s).cell),this.lastMarkedRow=i,this.lastMarkedColumn=s,this.lastMarkMethod=e}},dhtmlXGridObject.prototype.mark=function(t,e,i){if(arguments.length>2&&!convertStringToBoolean(i)){if(this.cells(t,e).cell.className=this.cells(t,e).cell.className.replace(/cellselected/g,""),-1!=this.markedRowsArr._dhx_find(t)){var s=this.markedCellsArr[t]._dhx_find(e);-1!=s&&(this.markedCellsArr[t]._dhx_removeAt(s),0==this.markedCellsArr[t].length&&this.markedRowsArr._dhx_removeAt(this.markedRowsArr._dhx_find(t)),this.callEvent("onCellUnMarked",[t,e]))}return!0}this.cells(t,e).cell.className+=" cellselected",-1==this.markedRowsArr._dhx_find(t)&&(this.markedRowsArr[this.markedRowsArr.length]=t),this.markedCellsArr[t]||(this.markedCellsArr[t]=new dhtmlxArray(0)),-1==this.markedCellsArr[t]._dhx_find(e)&&(this.markedCellsArr[t][this.markedCellsArr[t].length]=e,this.callEvent("onCellMarked",[t,e]))},dhtmlXGridObject.prototype.unmarkAll=function(){if(this.markedRowsArr){for(var t=0;t<this.markedRowsArr.length;t++){var e=this.markedRowsArr[t];if(this.rowsAr[e])for(var i=0;i<this.markedCellsArr[e].length;i++)this.callEvent("onCellUnMarked",[e,this.markedCellsArr[e][i]]),this.cells(e,this.markedCellsArr[e][i]).cell.className=this.cells(e,this.markedCellsArr[e][i]).cell.className.replace(/cellselected/g,"")}this.markedRowsArr=new dhtmlxArray(0),this.markedCellsArr=new Array(0)}return!0},dhtmlXGridObject.prototype.getMarked=function(){var t=new Array;if(this.markedRowsArr)for(var e=0;e<this.markedRowsArr.length;e++)for(var i=this.markedRowsArr[e],s=0;s<this.markedCellsArr[i].length;s++)t[t.length]=[i,this.markedCellsArr[i][s]];return t},eXcell_math.prototype=new eXcell,dhtmlXGridObject.prototype._init_point_bm=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){this._mat_links={},this._aggregators=[],this.attachEvent("onClearAll",function(){this._mat_links={},this._aggregators=[]}),this.attachEvent("onCellChanged",function(t,e){if(this._mat_links[t]){var i=this._mat_links[t][e];if(i)for(var s=0;s<i.length;s++)i[s].parentNode&&this.cells5(i[s]).setValue(this._calcSCL(i[s]))}if(!this._parsing&&this._aggregators[e]){var n=this._h2.get[t].parent.id;if(0!=n){var o=this.cells(n,e);o.setValue(this._calcSCL(o.cell))}}}),this.attachEvent("onAfterRowDeleted",function(t,e){if(0!=e&&!this._parsing&&this._aggregators.length)for(var i=0;i<this._aggregators.length;i++)if(this._aggregators[i]){var s=this.cells(e,i);s.setValue(this._calcSCL(s.cell))}return!0}),this.attachEvent("onXLE",function(){for(var t=0;t<this._aggregators.length;t++)this._aggregators[t]&&this._h2.forEachChild(0,function(e){if(0!=e.childs.length){var i=this.cells(e.id,t);i.setValue(this._calcSCL(i.cell))}},this)}),this._init_point=this._init_point_bm,this._init_point&&this._init_point()},dhtmlXGridObject.prototype.enableMathSerialization=function(t){this._mathSerialization=convertStringToBoolean(t)},dhtmlXGridObject.prototype.setMathRound=function(t){this._roundDl=t,this._roundD=Math.pow(10,t)},dhtmlXGridObject.prototype.enableMathEditing=function(t){this._mathEdit=convertStringToBoolean(t)},dhtmlXGridObject.prototype._calcSCL=function(cell){if(!cell._code)return this.cells5(cell).getValue();try{dhtmlx.agrid=this;var z=eval(cell._code)}catch(e){return"#SCL"}if(this._roundD){var pre=Math.abs(z)<1?"0":"";if(0>z&&(pre="-"+pre),z=Math.round(Math.abs(z)*this._roundD).toString(),0==z)return 0;if(this._roundDl>0){var n=z.length-this._roundDl;return 0>n&&(z=("000000000"+z).substring(9+n),n=0),pre+z.substring(0,n)+"."+z.substring(n,z.length)}return pre+z}return z},dhtmlXGridObject.prototype._countTotal=function(t,e){for(var i=0,s=this._h2.get[t],n=0;n<s.childs.length;n++){if(!s.childs[n].buff)return i;if(s.childs[n].buff._parser)return this._h2.forEachChild(t,function(t){if(0==t.childs.length){var s=parseFloat(this._get_cell_value(t.buff,e),10);s&&(i+=s)}},this),i;var o=parseFloat(this._get_cell_value(s.childs[n].buff,e),10);o&&(i+=o)}return i},dhtmlXGridObject.prototype._compileSCL=function(t,e,i){if(null===t||t===window.undefined)return t;if(t=t.toString(),0!=t.indexOf("=")||!e.parentNode)return this._reLink([],e),i&&(e._code=e.original=null),t;e.original=t;var s=null;if(t=t.replace("=",""),-1!=t.indexOf("sum"))return t=t.replace("sum","(dhtmlx.agrid._countTotal('"+e.parentNode.idd+"',"+e._cellIndex+"))"),this._aggregators||(this._aggregators=[]),this._aggregators[e._cellIndex]="sum",e._code=t,this._parsing?"":this._calcSCL(e);if(-1!=t.indexOf("[[")){var n=/(\[\[([^\,]*)\,([^\]]*)]\])/g;dhtmlx.agrid=this,s=s||new Array,t=t.replace(n,function(t,i,n,o){return"-"==n&&(n=e.parentNode.idd),0==n.indexOf("#")&&(n=dhtmlx.agrid.getRowId(n.replace("#",""))),s[s.length]=[n,o],'(parseFloat(dhtmlx.agrid.cells("'+n+'",'+o+").getValue(),10))"})}if(-1!=t.indexOf(":")){var n=/:(\w+)/g;dhtmlx.agrid=this;var o=e.parentNode.idd;s=s||new Array,t=t.replace(n,function(t,e){return s[s.length]=[o,dhtmlx.agrid.getColIndexById(e)],'(parseFloat(dhtmlx.agrid.cells("'+o+'",dhtmlx.agrid.getColIndexById("'+e+'")).getValue(),10))'})}else{var n=/c([0-9]+)/g;dhtmlx.agrid=this;var o=e.parentNode.idd;s=s||new Array,t=t.replace(n,function(t,e){return s[s.length]=[o,e],'(parseFloat(dhtmlx.agrid.cells("'+o+'",'+e+").getValue(),10))"})}return this._reLink(s,e),e._code=t,this._calcSCL(e)},dhtmlXGridObject.prototype._reLink=function(t,e){if(t.length)for(var i=0;i<t.length;i++){this._mat_links[t[i][0]]||(this._mat_links[t[i][0]]={});var s=this._mat_links[t[i][0]];s[t[i][1]]||(s[t[i][1]]=[]),s[t[i][1]].push(e)}},_isKHTML&&!function(){var t=String.prototype.replace;String.prototype.replace=function(e,i){if("function"!=typeof i)return t.apply(this,arguments);var s=""+this,n=i;if(!(e instanceof RegExp)){var o=s.indexOf(e);return-1==o?s:t.apply(s,[e,n(e,o,s)])}for(var l,r=e,a=[],h=r.lastIndex;null!=(l=r.exec(s));){var o=l.index,d=l.concat(o,s);if(a.push(s.slice(h,o),n.apply(null,d).toString()),!r.global){h+=RegExp.lastMatch.length;break}h=r.lastIndex}return a.push(s.slice(h)),a.join("")}}(),dhtmlXGridObject.prototype.insertColumn=function(t,e,i,s,n,o,l,r,a){if(t=parseInt(t),t>this._cCount&&(t=this._cCount),this._cMod||(this._cMod=this._cCount),this._processAllArrays(this._cCount,t-1,[e||"&nbsp;",s||100,i||"ed",o||"left",l||"",n||"na",a||"","",this._cMod,s||100]),this._processAllRows("_addColInRow",t),"object"==typeof e)for(var h=1;h<this.hdr.rows.length;h++)if("#rspan"==e[h-1]){for(var d=h-1,c=!1,u=null;!c;){for(var u=this.hdr.rows[d],_=0;_<u.cells.length;_++)if(u.cells[_]._cellIndex==t){c=_;break}d--}this.hdr.rows[d+1].cells[_].rowSpan=(this.hdr.rows[d].cells[_].rowSpan||1)+1}else this.setHeaderCol(t,e[h-1]||"&nbsp;",h);else this.setHeaderCol(t,e||"&nbsp;");this.hdr.rows[0].cells[t],this._cCount++,this._cMod++,this._master_row=null,this.setSizes()},dhtmlXGridObject.prototype.deleteColumn=function(t){t=parseInt(t),0!=this._cCount&&(this._cMod||(this._cMod=this._cCount),t>=this._cCount||(this._processAllArrays(t,this._cCount-1,[null,null,null,null,null,null,null,null,null,null,null]),this._processAllRows("_deleteColInRow",t),this._cCount--,this._master_row=null,this.setSizes()))},dhtmlXGridObject.prototype._processAllRows=function(t,e,i){this[t](this.obj.rows[0],e,i,0);for(var s=this.hdr.rows.length,n=0;s>n;n++)this[t](this.hdr.rows[n],e,i,n);if(this.ftr)for(var s=this.ftr.firstChild.rows.length,n=0;s>n;n++)this[t](this.ftr.firstChild.rows[n],e,i,n);this.forEachRow(function(s){this.rowsAr[s]&&"TR"==this.rowsAr[s].tagName&&this[t](this.rowsAr[s],e,i,-1)})},dhtmlXGridObject.prototype._processAllArrays=function(t,e,i){var s=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor","_hrrar","_c_order"];this.cellWidthPX.length&&s.push("cellWidthPX"),this.cellWidthPC.length&&s.push("cellWidthPC"),this._col_combos&&s.push("_col_combos"),this._mCols&&(s[s.length]="_mCols"),this.columnIds&&(s[s.length]="columnIds"),this._maskArr&&s.push("_maskArr"),this._drsclmW&&s.push("_drsclmW"),this._RaSeCol&&s.push("_RaSeCol"),this._hm_config&&s.push("_hm_config"),this._drsclmn&&s.push("_drsclmn"),this.clists&&s.push("clists"),this._validators&&this._validators.data&&s.push(this._validators.data),s.push("combos"),this._customSorts&&s.push("_customSorts"),this._aggregators&&s.push("_aggregators");var n=e>=t;if(!this._c_order){this._c_order=new Array;for(var o=this._cCount,l=0;o>l;l++)this._c_order[l]=l}for(var l=0;l<s.length;l++){var r=this[s[l]]||s[l];if(r){if(n){for(var a=r[t],h=t;e>h;h++)r[h]=r[h+1];r[e]=a}else{for(var a=r[t],h=t;h>e+1;h--)r[h]=r[h-1];r[e+1]=a}i&&(r[e+(n?0:1)]=i[l])}}},dhtmlXGridObject.prototype.moveColumn=function(t,e){if(e--,t=parseInt(t),e=parseInt(e),t>e)var i=e+1;else var i=e;return this.callEvent("onBeforeCMove",[t,i])?void(t!=i&&(this.editStop(),this._processAllRows("_moveColInRow",t,e),this._processAllArrays(t,e),this.fldSorted&&this.setSortImgPos(this.fldSorted._cellIndex),this.callEvent("onAfterCMove",[t,i]))):!1},dhtmlXGridObject.prototype._swapColumns=function(t){for(var e=new Array,i=0;i<this._cCount;i++){var s=t[this._c_order[i]];"undefined"==typeof s&&(s=""),e[i]=s}return e},dhtmlXGridObject.prototype._moveColInRow=function(t,e,i){var s=t.childNodes[e],n=t.childNodes[i+1];if(s){n?t.insertBefore(s,n):t.appendChild(s);for(var o=0;o<t.childNodes.length;o++)t.childNodes[o]._cellIndex=t.childNodes[o]._cellIndexS=o}},dhtmlXGridObject.prototype._addColInRow=function(t,e,i,s){var n=e;if(t._childIndexes){if(t._childIndexes[e-1]!=t._childIndexes[e]&&t.childNodes[t._childIndexes[e-1]])for(var o=t._childIndexes.length;o>=e;o--)t._childIndexes[o]=o?t._childIndexes[o-1]+1:0;else{for(var o=t._childIndexes.length;o>=e;o--)t._childIndexes[o]=o?t._childIndexes[o-1]+1:0;t._childIndexes[e]--}var n=t._childIndexes[e]}var l=t.childNodes[n],r=document.createElement(s?"TD":"TH");s?r._attrs={}:r.style.width=(parseInt(this.cellWidthPX[e])||"100")+"px",l?t.insertBefore(r,l):t.appendChild(r),this.dragAndDropOff&&t.idd&&this.dragger.addDraggableItem(t.childNodes[n],this);for(var o=n+1;o<t.childNodes.length;o++)t.childNodes[o]._cellIndex=t.childNodes[o]._cellIndexS=t.childNodes[o]._cellIndex+1;t.childNodes[n]&&(t.childNodes[n]._cellIndex=t.childNodes[n]._cellIndexS=e),t.idd||"undefined"!=typeof t.idd?(this.cells3(t,e).setValue(""),r.align=this.cellAlign[e],r.style.verticalAlign=this.cellVAlign[e],r.bgColor=this.columnColor[e]):"TD"==r.tagName&&(r.innerHTML=!t.idd&&this.forceDivInHeader?"<div class='hdrcell'>&nbsp;</div>":"&nbsp;")},dhtmlXGridObject.prototype._deleteColInRow=function(t,e){var i=e;t._childIndexes&&(e=t._childIndexes[e]);var s=t.childNodes[e];if(s){if(s.colSpan&&s.colSpan>1&&s.parentNode.idd){var n=s.colSpan-1,o=this.cells4(s).getValue();if(this.setColspan(s.parentNode.idd,s._cellIndex,1),n>1){var l=1*s._cellIndex;this.setColspan(s.parentNode.idd,l+1,n),this.cells(s.parentNode.idd,1*s._cellIndex+1).setValue(o),t._childIndexes.splice(l,1);for(var r=l;r<t._childIndexes.length;r++)t._childIndexes[r]-=1}}else if(t._childIndexes){t._childIndexes.splice(i,1);for(var r=i;r<t._childIndexes.length;r++)t._childIndexes[r]--}s&&t.removeChild(s);for(var r=e;r<t.childNodes.length;r++)t.childNodes[r]._cellIndex=t.childNodes[r]._cellIndexS=t.childNodes[r]._cellIndex-1}},dhtmlXGridObject.prototype.enableColumnMove=function(t,e){this._mCol=convertStringToBoolean(t),"undefined"!=typeof e&&(this._mCols=e.split(",")),this._mmevTrue||(dhtmlxEvent(this.hdr,"mousedown",this._startColumnMove),dhtmlxEvent(document.body,"mousemove",this._onColumnMove),dhtmlxEvent(document.body,"mouseup",this._stopColumnMove),this._mmevTrue=!0)},dhtmlXGridObject.prototype._startColumnMove=function(t){t=t||event;for(var e=t.target||t.srcElement,i=e;"TABLE"!=i.tagName;)i=i.parentNode;var s=i.grid;return s&&(s.setActive(),s._mCol&&2!=t.button)?(e=s.getFirstParentOfType(e,"TD"),"default"!=e.style.cursor?!0:(s&&!s._colInMove&&(s.resized=null,s._mCols&&"true"!=s._mCols[e._cellIndex]||(s._colInMove=e._cellIndex+1)),!0)):void 0},dhtmlXGridObject.prototype._onColumnMove=function(t){t=t||event;var e=window.globalActiveDHTMLGridObject;if(e&&e._colInMove){if(e._showHContext&&e._showHContext(!1),"object"!=typeof e._colInMove){var i=document.createElement("DIV");i._aIndex=e._colInMove-1,i._bIndex=null,i.innerHTML=e.getHeaderCol(i._aIndex),i.className="dhx_dragColDiv",i.style.position="absolute",document.body.appendChild(i),e._colInMove=i}var s=[];s[0]=document.body.scrollLeft||document.documentElement.scrollLeft,s[1]=document.body.scrollTop||document.documentElement.scrollTop,e._colInMove.style.left=t.clientX+s[0]+8+"px",e._colInMove.style.top=t.clientY+s[1]+8+"px";for(var n=t.target||t.srcElement;n&&"undefined"==typeof n._cellIndexS;)n=n.parentNode;if(e._colInMove._oldHe&&(e._colInMove._oldHe.className=e._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,""),e._colInMove._oldHe=null,e._colInMove._bIndex=null),n){if(e.hdr.rows[1]._childIndexes)var o=e.hdr.rows[1].cells[e.hdr.rows[1]._childIndexes[n._cellIndexS]];else var o=e.hdr.rows[1].cells[n._cellIndexS];var i=t.clientX-(getAbsoluteLeft(o)-e.hdrBox.scrollLeft);i/o.offsetWidth>.5?(o.className+=" columnTargetR",e._colInMove._bIndex=n._cellIndexS):(o.className+=" columnTargetL",e._colInMove._bIndex=n._cellIndexS-1),o.offsetLeft<e.objBox.scrollLeft+20&&(e.objBox.scrollLeft=Math.max(0,o.offsetLeft-20)),o.offsetLeft+o.offsetWidth-e.objBox.scrollLeft>e.objBox.offsetWidth-20&&(e.objBox.scrollLeft=Math.min(e.objBox.scrollLeft+o.offsetWidth+20,e.objBox.scrollWidth-e.objBox.offsetWidth)),e._colInMove._oldHe=o}return t.cancelBubble=!0,!1}return!0},dhtmlXGridObject.prototype._stopColumnMove=function(t){t=t||event;var e=window.globalActiveDHTMLGridObject;return e&&e._colInMove&&("object"==typeof e._colInMove&&(e._colInMove.parentNode.removeChild(e._colInMove),null!=e._colInMove._bIndex&&e.moveColumn(e._colInMove._aIndex,e._colInMove._bIndex+1),e._colInMove._oldHe&&(e._colInMove._oldHe.className=e._colInMove._oldHe.className.replace(/columnTarget(L|R)/g,"")),e._colInMove._oldHe=null,e._colInMove.grid=null,e.resized=!0),e._colInMove=0),!0},dhtmlXGridObject.prototype.mouseOverHeader=function(t){var e=this;dhtmlxEvent(this.hdr,"mousemove",function(i){i=i||window.event;var s=i.target||i.srcElement;"TD"!=s.tagName&&(s=e.getFirstParentOfType(s,"TD")),s&&"undefined"!=typeof s._cellIndex&&t(s.parentNode.rowIndex,s._cellIndex)})},dhtmlXGridObject.prototype.mouseOver=function(t){var e=this;dhtmlxEvent(this.obj,"mousemove",function(i){i=i||window.event;var s=i.target||i.srcElement;"TD"!=s.tagName&&(s=e.getFirstParentOfType(s,"TD")),s&&"undefined"!=typeof s._cellIndex&&t(s.parentNode.rowIndex,s._cellIndex)
})},dhtmlXGridObject.prototype.enablePaging=function(t,e,i,s,n,o){this._pgn_parentObj="string"==typeof s?document.getElementById(s):s,this._pgn_recInfoParentObj="string"==typeof o?document.getElementById(o):o,this.pagingOn=t,this.showRecInfo=n,this.rowsBufferOutSize=parseInt(e),this.currentPage=1,this.pagesInGroup=parseInt(i),this._init_pgn_events(),this.setPagingSkin("default")},dhtmlXGridObject.prototype.setXMLAutoLoading=function(t,e){this.xmlFileUrl=t,this._dpref=e},dhtmlXGridObject.prototype.changePageRelative=function(t){this.changePage(this.currentPage+t)},dhtmlXGridObject.prototype.changePage=function(t){0==arguments.length&&(t=this.currentPage||0),t=parseInt(t),t=Math.max(1,Math.min(t,Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))),this.callEvent("onBeforePageChanged",[this.currentPage,t])&&(this.currentPage=parseInt(t),this._reset_view(),this._fixAlterCss(),this.callEvent("onPageChanged",this.getStateOfView()))},dhtmlXGridObject.prototype.setPagingSkin=function(t){this._pgn_skin=this["_pgn_"+t],"toolbar"==t&&(this._pgn_skin_tlb=arguments[1])},dhtmlXGridObject.prototype.setPagingTemplates=function(t,e){this._pgn_templateA=this._pgn_template_compile(t),this._pgn_templateB=this._pgn_template_compile(e),this._page_skin_update()},dhtmlXGridObject.prototype._page_skin_update=function(){this.pagesInGroup||(this.pagesInGroup=Math.ceil(Math.min(5,this.rowsBuffer.length/this.rowsBufferOutSize)));var t=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);return t&&t<this.currentPage?this.changePage(t):void(this.pagingOn&&this._pgn_skin&&this._pgn_skin.apply(this,this.getStateOfView()))},dhtmlXGridObject.prototype._init_pgn_events=function(){this.attachEvent("onXLE",this._page_skin_update),this.attachEvent("onClearAll",this._page_skin_update),this.attachEvent("onPageChanged",this._page_skin_update),this.attachEvent("onGridReconstructed",this._page_skin_update),this._init_pgn_events=function(){}},dhtmlXGridObject.prototype._pgn_default=function(){if(!this.pagingBlock){if(this.pagingBlock=document.createElement("DIV"),this.pagingBlock.className="pagingBlock",this.recordInfoBlock=document.createElement("SPAN"),this.recordInfoBlock.className="recordsInfoBlock",!this._pgn_parentObj)return;this._pgn_parentObj.appendChild(this.pagingBlock),this._pgn_recInfoParentObj&&this.showRecInfo&&this._pgn_recInfoParentObj.appendChild(this.recordInfoBlock),this._pgn_templateA||(this._pgn_templateA=this._pgn_template_compile("[prevpages:&lt;:&nbsp;] [currentpages:,&nbsp;] [nextpages:&gt;:&nbsp;]"),this._pgn_templateB=this._pgn_template_compile("Results <b>[from]-[to]</b> of <b>[total]</b>"))}var t=this.getStateOfView();this.pagingBlock.innerHTML=this._pgn_templateA.apply(this,t),this.recordInfoBlock.innerHTML=this._pgn_templateB.apply(this,t),this._pgn_template_active(this.pagingBlock),this._pgn_template_active(this.recordInfoBlock),this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_block=function(t){for(var e=Math.floor((this.currentPage-1)/this.pagesInGroup)*this.pagesInGroup,i=Math.min(Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize),e+this.pagesInGroup),s=[],n=e+1;i>=n;n++)s.push(n==this.currentPage?"<a class='dhx_not_active'><b>"+n+"</b></a>":"<a onclick='this.grid.changePage("+n+"); return false;'>"+n+"</a>");return s.join(t)},dhtmlXGridObject.prototype._pgn_link=function(t,e,i){if("prevpages"==t||"prev"==t)return 1==this.currentPage?i:"<a onclick='this.grid.changePageRelative(-1*"+("prev"==t?"1":"this.grid.pagesInGroup")+"); return false;'>"+e+"</a>";if("nextpages"==t||"next"==t)return this.rowsBuffer.length/this.rowsBufferOutSize<=this.currentPage?i:this.rowsBuffer.length/(this.rowsBufferOutSize*("next"==t?"1":this.pagesInGroup))<=1?i:"<a onclick='this.grid.changePageRelative("+("next"==t?"1":"this.grid.pagesInGroup")+"); return false;'>"+e+"</a>";if("current"==t){var s=this.currentPage+(e?parseInt(e):0);return 1>s||Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)<s?i:"<a "+(s==this.currentPage?"class='dhx_active_page_link' ":"")+"onclick='this.grid.changePage("+s+"); return false;'>"+s+"</a>"}return e},dhtmlXGridObject.prototype._pgn_template_active=function(t){var e=t.getElementsByTagName("A");if(e)for(var i=0;i<e.length;i++)e[i].grid=this},dhtmlXGridObject.prototype._pgn_template_compile=function(t){return t=t.replace(/\[([^\]]*)\]/g,function(t,e){switch(e=e.split(":"),e[0]){case"from":return'"+(arguments[1]*1+(arguments[2]*1?1:0))+"';case"total":return'"+arguments[3]+"';case"to":return'"+arguments[2]+"';case"current":case"prev":case"next":case"prevpages":case"nextpages":return"\"+this._pgn_link('"+e[0]+"','"+e[1]+"','"+e[2]+"')+\"";case"currentpages":return"\"+this._pgn_block('"+e[1]+"')+\""}}),new Function('return "'+t+'";')},dhtmlXGridObject.prototype.i18n.paging={results:"Results",records:"Records from ",to:" to ",page:"Page ",perpage:"rows per page",first:"To first Page",previous:"Previous Page",found:"Found records",next:"Next Page",last:"To last Page",of:" of ",notfound:"No Records Found"},dhtmlXGridObject.prototype.setPagingWTMode=function(t,e,i,s){this._WTDef=[t,e,i,s]},dhtmlXGridObject.prototype._pgn_bricks=function(t,e,i){var s=(this.skin_name||"").split("_")[1],n="";("light"==s||"modern"==s||"skyblue"==s)&&(n="_"+s),this.pagerElAr=new Array,this.pagerElAr.pagerCont=document.createElement("DIV"),this.pagerElAr.pagerBord=document.createElement("DIV"),this.pagerElAr.pagerLine=document.createElement("DIV"),this.pagerElAr.pagerBox=document.createElement("DIV"),this.pagerElAr.pagerInfo=document.createElement("DIV"),this.pagerElAr.pagerInfoBox=document.createElement("DIV");var o=this.globalBox||this.objBox;if(this.pagerElAr.pagerCont.style.width=o.clientWidth+"px",this.pagerElAr.pagerCont.style.overflow="hidden",this.pagerElAr.pagerCont.style.clear="both",this.pagerElAr.pagerBord.className="dhx_pbox"+n,this.pagerElAr.pagerLine.className="dhx_pline"+n,this.pagerElAr.pagerBox.style.clear="both",this.pagerElAr.pagerInfo.className="dhx_pager_info"+n,this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerBord),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerCont.appendChild(this.pagerElAr.pagerInfo),this.pagerElAr.pagerLine.appendChild(this.pagerElAr.pagerBox),this.pagerElAr.pagerInfo.appendChild(this.pagerElAr.pagerInfoBox),this._pgn_parentObj.innerHTML="",this._pgn_parentObj.appendChild(this.pagerElAr.pagerCont),this.rowsBuffer.length>0){var l=20,r=22;if(t>this.pagesInGroup){var a=document.createElement("DIV"),h=document.createElement("DIV");a.className="dhx_page"+n,h.innerHTML="&larr;",a.appendChild(h),this.pagerElAr.pagerBox.appendChild(a);var d=this;a.pgnum=(Math.ceil(t/this.pagesInGroup)-1)*this.pagesInGroup,a.onclick=function(){d.changePage(this.pgnum)},l+=r}for(var c=1;c<=this.pagesInGroup;c++){var a=document.createElement("DIV"),h=document.createElement("DIV");if(a.className="dhx_page"+n,pageNumber=(Math.ceil(t/this.pagesInGroup)-1)*this.pagesInGroup+c,pageNumber>Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize))break;if(h.innerHTML=pageNumber,a.appendChild(h),t==pageNumber)a.className+=" dhx_page_active"+n,h.className="dhx_page_active"+n;else{var d=this;a.pgnum=pageNumber,a.onclick=function(){d.changePage(this.pgnum)}}l+=parseInt(r/3)*pageNumber.toString().length+15,h.style.width=parseInt(r/3)*pageNumber.toString().length+8+"px",this.pagerElAr.pagerBox.appendChild(a)}if(Math.ceil(t/this.pagesInGroup)*this.pagesInGroup<Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize)){var a=document.createElement("DIV"),h=document.createElement("DIV");a.className="dhx_page"+n,h.innerHTML="&rarr;",a.appendChild(h),this.pagerElAr.pagerBox.appendChild(a);var d=this;a.pgnum=Math.ceil(t/this.pagesInGroup)*this.pagesInGroup+1,a.onclick=function(){d.changePage(this.pgnum)},l+=r}this.pagerElAr.pagerLine.style.width=l+"px"}this.rowsBuffer.length>0&&this.showRecInfo?this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.records+(e+1)+this.i18n.paging.to+i+this.i18n.paging.of+this.rowsBuffer.length:0==this.rowsBuffer.length&&(this.pagerElAr.pagerLine.parentNode.removeChild(this.pagerElAr.pagerLine),this.pagerElAr.pagerInfoBox.innerHTML=this.i18n.paging.notfound),this.pagerElAr.pagerBox.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.pagerElAr.pagerBord.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.pagerElAr.pagerCont.appendChild(document.createElement("SPAN")).innerHTML="&nbsp;",this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_toolbar=function(t,e,i){this.aToolBar||(this.aToolBar=this._pgn_createToolBar());var s=Math.ceil(this.rowsBuffer.length/this.rowsBufferOutSize);if(this._WTDef[0]&&(this.aToolBar.enableItem("right"),this.aToolBar.enableItem("rightabs"),this.aToolBar.enableItem("left"),this.aToolBar.enableItem("leftabs"),this.currentPage>=s&&(this.aToolBar.disableItem("right"),this.aToolBar.disableItem("rightabs")),1==this.currentPage&&(this.aToolBar.disableItem("left"),this.aToolBar.disableItem("leftabs"))),this._WTDef[2]){var n=this;this.aToolBar.forEachListOption("pages",function(t){n.aToolBar.removeListOption("pages",t)});for(var o={dhx_skyblue:4,dhx_web:0,dhx_terrace:14}[this.aToolBar.conf.skin],l=0;s>l;l++)this.aToolBar.addListOption("pages","pages_"+(l+1),0/0,"button","<span style='padding: 0px "+o+"px 0px 0px;'>"+this.i18n.paging.page+(l+1)+"</span>","paging_page.gif");this.aToolBar.setItemText("pages",this.i18n.paging.page+t)}this._WTDef[1]&&(this.getRowsNum()?this.aToolBar.setItemText("results","<div style='width:100%; text-align:center'>"+this.i18n.paging.records+(e+1)+this.i18n.paging.to+i+"</div>"):this.aToolBar.setItemText("results",this.i18n.paging.notfound)),this._WTDef[3]&&this.aToolBar.setItemText("perpagenum",this.rowsBufferOutSize.toString()+" "+this.i18n.paging.perpage),this.callEvent("onPaging",[])},dhtmlXGridObject.prototype._pgn_createToolBar=function(){this.aToolBar=new dhtmlXToolbarObject({parent:this._pgn_parentObj,skin:this._pgn_skin_tlb||this.skin_name,icons_path:this.imgURL}),this._WTDef||this.setPagingWTMode(!0,!0,!0,!0);var t=this;this.aToolBar.attachEvent("onClick",function(e){switch(e=e.split("_"),e[0]){case"leftabs":t.changePage(1);break;case"left":t.changePage(t.currentPage-1);break;case"rightabs":t.changePage(99999);break;case"right":t.changePage(t.currentPage+1);break;case"perpagenum":if(e[1]===this.undefined)return;t.rowsBufferOutSize=parseInt(e[1]),t.changePage(),t.aToolBar.setItemText("perpagenum",e[1]+" "+t.i18n.paging.perpage);break;case"pages":if(e[1]===this.undefined)return;t.changePage(e[1]),t.aToolBar.setItemText("pages",t.i18n.paging.page+e[1])}}),this._WTDef[0]&&(this.aToolBar.addButton("leftabs",0/0,null,"ar_left_abs.gif","ar_left_abs_dis.gif"),this.aToolBar.addButton("left",0/0,null,"ar_left.gif","ar_left_dis.gif")),this._WTDef[1]&&(this.aToolBar.addText("results",0/0,this.i18n.paging.results),this.aToolBar.setWidth("results","150"),this.aToolBar.disableItem("results")),this._WTDef[0]&&(this.aToolBar.addButton("right",0/0,null,"ar_right.gif","ar_right_dis.gif"),this.aToolBar.addButton("rightabs",0/0,null,"ar_right_abs.gif","ar_right_abs_dis.gif")),this._WTDef[2]&&("dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("pages",0/0,"select page",[],"paging_pages.gif",null,!1,!0));var e;if(e=this._WTDef[3]){"dhx_terrace"==this.aToolBar.conf.skin&&this.aToolBar.addSeparator(),this.aToolBar.addButtonSelect("perpagenum",0/0,"select size",[],"paging_rows.gif",null,!1,!0),"object"!=typeof e&&(e=[5,10,15,20,25,30]);for(var i={dhx_skyblue:4,dhx_web:0,dhx_terrace:18}[this.aToolBar.conf.skin],s=0;s<e.length;s++)this.aToolBar.addListOption("perpagenum","perpagenum_"+e[s],0/0,"button","<span style='padding: 0px "+i+"px 0px 0px;'>"+e[s]+" "+this.i18n.paging.perpage+"</span>","paging_page.gif")}return this.aToolBar},dhtmlXGridObject.prototype.post=function(t,e,i,s){this.callEvent("onXLS",[this]),3==arguments.length&&"function"!=typeof i&&(s=i,i=null),s=s||"xml",e=e||"",this.xmlFileUrl||(this.xmlFileUrl=t),this._data_type=s,this.xmlLoader.onloadAction=function(t,e,n,o,l){l=t["_process_"+s](l),t._contextCallTimer||t.callEvent("onXLE",[t,0,0,l]),i&&(i(),i=null)},this.xmlLoader.loadXML(t,!0,e)},dhtmlXGridObject.prototype.setRowspan=function(t,e,i){var s=this[this._bfs_cells?"_bfs_cells":"cells"](t,e).cell,n=this.rowsAr[t];if(s.rowSpan&&1!=s.rowSpan)for(var o=n.nextSibling,l=1;l<s.rowSpan;l++){var r=o.childNodes[o._childIndexes[s._cellIndex+1]],a=document.createElement("TD");a.innerHTML="&nbsp;",a._cellIndex=s._cellIndex,a._clearCell=!0,r?r.parentNode.insertBefore(a,r):o.parentNode.appendChild(a),this._shiftIndexes(o,s._cellIndex,-1),o=o.nextSibling}s.rowSpan=i,n=this._h2?this.rowsAr[this._h2.get[n.idd].parent.childs[this._h2.get[n.idd].index+1].id]:n.nextSibling||this.rowsCol[this.rowsCol._dhx_find(n)+1];for(var h=[],l=1;i>l;l++){var d=null;if(d=this._fake&&!this._realfake?this._bfs_cells3(n,e).cell:this.cells3(n,e).cell,this._shiftIndexes(n,s._cellIndex,1),d&&d.parentNode.removeChild(d),h.push(n),this._h2){var n=this._h2.get[n.idd].parent.childs[this._h2.get[n.idd].index+1];n&&(n=this.rowsAr[n.id])}else n=n.nextSibling||this.rowsCol[this.rowsCol._dhx_find(n)+1]}this.rowsAr[t]._rowSpan=this.rowsAr[t]._rowSpan||{},this.rowsAr[t]._rowSpan[e]=h,this._fake&&!this._realfake&&e<this._fake._cCount&&this._fake.setRowspan(t,e,i)},dhtmlXGridObject.prototype._shiftIndexes=function(t,e,i){if(!t._childIndexes){t._childIndexes=new Array;for(var s=0;s<t.childNodes.length;s++)t._childIndexes[s]=s}for(var s=0;s<t._childIndexes.length;s++)s>e&&(t._childIndexes[s]=t._childIndexes[s]-i)},dhtmlXGridObject.prototype.enableRowspan=function(){this._erspan=!0,this.enableRowspan=function(){},this.attachEvent("onAfterSorting",function(){if(!this._dload){for(var t=1;t<this.obj.rows.length;t++)if(this.obj.rows[t]._rowSpan){var e=this.obj.rows[t];for(var i in e._rowSpan)for(var s=e,n=s._rowSpan[i],o=0;o<n.length;o++){if(s.nextSibling?s.parentNode.insertBefore(n[o],s.nextSibling):s.parentNode.appendChild(n[o]),this._fake){var l=this._fake.rowsAr[s.idd],r=this._fake.rowsAr[n[o].idd];l.nextSibling?l.parentNode.insertBefore(r,l.nextSibling):l.parentNode.appendChild(r),this._correctRowHeight(s.idd)}s=s.nextSibling}}var a=this.rowsCol.stablesort;this.rowsCol=new dhtmlxArray,this.rowsCol.stablesort=a;for(var t=1;t<this.obj.rows.length;t++)this.rowsCol.push(this.obj.rows[t])}}),this.attachEvent("onXLE",function(){for(var t=0;t<this.rowsBuffer.length;t++)for(var e=this.render_row(t),i=e.childNodes,s=0;s<i.length;s++)i[s]._attrs.rowspan&&this.setRowspan(e.idd,s,i[s]._attrs.rowspan)})},dhtmlXGridObject.prototype._init_point_bspl=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){this._split_later&&this.splitAt(this._split_later),this._init_point=this._init_point_bspl,this._init_point&&this._init_point()},dhtmlXGridObject.prototype.splitAt=function(t){function e(t){var e=t.wheelDelta/-40;t.wheelDelta===window.undefined&&(e=t.detail);var i=p.objBox;i.scrollTop+=40*e,t.preventDefault&&t.preventDefault()}function i(t,e){e.style.whiteSpace="";var i=e.nextSibling,s=e.parentNode;t.parentNode.insertBefore(e,t),i?s.insertBefore(t,i):s.appendChild(t);var n=t.style.display;t.style.display=e.style.display,e.style.display=n}function s(e,s,n,o){var l=new Array(t).join(this.delim),r=[];if(2==e)for(var a=0;t>a;a++){var h=s[e-1].cells[s[e-1]._childIndexes?s[e-1]._childIndexes[a]:a];h.rowSpan&&h.rowSpan>1&&(r[h._cellIndex]=h.rowSpan-1,o[e-1].cells[o[e-1]._childIndexes?o[e-1]._childIndexes[a]:a].rowSpan=h.rowSpan,h.rowSpan=1)}for(e;e<s.length;e++){this._fake.attachHeader(l,null,n),o=o||this._fake.ftr.childNodes[0].rows;for(var d=t,c=0,u=0;d>u;u++)if(r[u]){if(r[u]=r[u]-1,_isIE||_isFF&&_FFrv>=1.9||_isOpera){var _=document.createElement("TD");_isFF&&(_.style.display="none"),s[e].insertBefore(_,s[e].cells[0])}c++}else{var f=o[e].cells[u-c],p=s[e].cells[u-(_isIE?0:c)],m=p.rowSpan;if(i(f,p),m>1&&(r[u]=m-1,p.rowSpan=m),o[e].cells[u].colSpan>1){s[e].cells[u].colSpan=o[e].cells[u].colSpan,d-=o[e].cells[u].colSpan-1;for(var a=1;a<o[e].cells[u].colSpan;a++)o[e].removeChild(o[e].cells[u+1])}}}}if(!this.obj.rows[0])return this._split_later=t;t=parseInt(t);var n=document.createElement("DIV");this.entBox.appendChild(n);var o=document.createElement("DIV");this.entBox.appendChild(o);for(var l=this.entBox.childNodes.length-3;l>=0;l--)o.insertBefore(this.entBox.childNodes[l],o.firstChild);if(this.entBox.style.position="relative",this.globalBox=this.entBox,this.entBox=o,o.grid=this,n.style.cssText+="border:0px solid red !important;",o.style.cssText+="border:0px solid red !important;",o.style.top="0px",o.style.position="absolute",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.zIndex=11,o.style.height=n.style.height=this.globalBox.clientHeight,this._fake=new dhtmlXGridObject(n),this.globalBox=this._fake.globalBox=this.globalBox,this._fake._fake=this,this._fake._realfake=!0,this._treeC=this.cellType._dhx_find("tree"),this._fake.delim=this.delim,this._fake.customGroupFormat=this.customGroupFormat,this._fake.setImagesPath(this._imgURL),this._fake.iconURL=this.iconURL,this._fake._customSorts=this._customSorts,this._fake.noHeader=this.noHeader,this._fake._enbTts=this._enbTts,this._fake._htkebl=this._htkebl,this._fake.clists=this.clists,this._fake.fldSort=new Array,this._fake.selMultiRows=this.selMultiRows,this._fake.multiLine=this.multiLine,this.multiLine||this._erspan){this.attachEvent("onCellChanged",this._correctRowHeight),this.attachEvent("onRowAdded",this._correctRowHeight);var r=function(){this.forEachRow(function(t){this._correctRowHeight(t)})};this.attachEvent("onPageChanged",r),this.attachEvent("onXLE",r),this.attachEvent("onResizeEnd",r),this._ads_count||this.attachEvent("onAfterSorting",r),this._srnd&&this.attachEvent("onFilterEnd",r),this.attachEvent("onDistributedEnd",r)}this.attachEvent("onGridReconstructed",function(){this._fake.objBox.scrollTop=this.objBox.scrollTop}),this._fake.loadedKidsHash=this.loadedKidsHash,this._h2&&(this._fake._h2=this._h2),this._fake._dInc=this._dInc;var a=[[],[],[],[],[],[],[]],h=["hdrLabels","initCellWidth","cellType","cellAlign","cellVAlign","fldSort","columnColor"],d=["setHeader","setInitWidths","setColTypes","setColAlign","setColVAlign","setColSorting","setColumnColor"];this._fake.callEvent=function(){var t=!0;this._fake._split_event=!0;var e="onScroll"==arguments[0];return("onGridReconstructed"==arguments[0]||e)&&this._fake.callEvent.apply(this,arguments),e||(t=this._fake.callEvent.apply(this._fake,arguments)),this._fake._split_event=!1,t},this._elmn&&this._fake.enableLightMouseNavigation(!0),(this.__cssEven||this._cssUnEven)&&this._fake.attachEvent("onGridReconstructed",function(){this._fixAlterCss()}),this._fake._cssEven=this._cssEven,this._fake._cssUnEven=this._cssUnEven,this._fake._cssSP=this._cssSP,this._fake.isEditable=this.isEditable,this._fake._edtc=this._edtc,this._sst&&this._fake.enableStableSorting(!0),this._fake._sclE=this._sclE,this._fake._dclE=this._dclE,this._fake._f2kE=this._f2kE,this._fake._maskArr=this._maskArr,this._fake._dtmask=this._dtmask,this._fake.combos=this.combos;for(var c=0,u=this.globalBox.offsetWidth,l=0;t>l;l++){for(var _=0;_<h.length;_++)this[h[_]]&&(a[_][l]=this[h[_]][l]),"string"==typeof a[_][l]&&(a[_][l]=a[_][l].replace(new RegExp("\\"+this.delim,"g"),"\\"+this.delim));_isFF&&(a[1][l]=1*a[1][l]),"%"==this.cellWidthType?(a[1][l]=Math.round(parseInt(this[h[1]][l])*u/100),c+=a[1][l]):c+=parseInt(this[h[1]][l]),this.setColumnHidden(l,!0)}for(var _=0;_<h.length;_++){var f=a[_].join(this.delim);"setHeader"!=d[_]?""!=f&&this._fake[d[_]](f):this._fake[d[_]](f,null,this._hstyles)}this._fake._strangeParams=this._strangeParams,this._fake._drsclmn=this._drsclmn,c=Math.min(this.globalBox.offsetWidth,c),o.style.left=c+"px",n.style.width=c+"px",o.style.width=Math.max(this.globalBox.offsetWidth-c,0),this._ecspn&&(this._fake._ecspn=!0),this._fake.init(),this.dragAndDropOff&&this.dragger.addDragLanding(this._fake.entBox,this),this._fake.objBox.style.overflow="hidden",dhtmlx.$customScroll?this._fake.objBox._custom_scroll_mode="":this._fake.objBox.style.overflowX="scroll",this._fake._srdh=this._srdh||20,this._fake._srnd=this._srnd;var p=this;dhtmlxEvent(this._fake.objBox,"mousewheel",e),dhtmlxEvent(this._fake.objBox,"DOMMouseScroll",e),this.hdr.rows.length>2&&s.call(this,2,this.hdr.rows,"_aHead",this._fake.hdr.rows),this.ftr&&(s.call(this,1,this.ftr.childNodes[0].rows,"_aFoot"),this._fake.ftr.parentNode.style.bottom=(_isFF?2:1)+"px"),this.saveSizeToCookie&&(this.saveSizeToCookie=function(e,i){if(this._realfake)return this._fake.saveSizeToCookie.apply(this._fake,arguments);e||(e=this.entBox.id);for(var s=new Array,n="cellWidthPX",o=0;o<this[n].length;o++)s[o]=t>o?this._fake[n][o]:this[n][o];s=s.join(","),this.setCookie(e,i,0,s);var s=(this.initCellWidth||new Array).join(",");return this.setCookie(e,i,1,s),!0},this.loadSizeFromCookie=function(e){e||(e=this.entBox.id);var i=this._getCookie(e,1);if(i){this.initCellWidth=i.split(",");var i=this._getCookie(e,0),s="cellWidthPX";this.cellWidthType="px";var n=0;if(i&&i.length){i=i.split(",");for(var o=0;o<i.length;o++)t>o?(this._fake[s][o]=i[o],n+=1*i[o]):this[s][o]=i[o]}this._fake.entBox.style.width=n+"px",this._fake.objBox.style.width=n+"px";var l=this.globalBox.childNodes[1];return l.style.left=n-(_isFF?0:0)+"px",this.ftr&&(this.ftr.style.left=n-(_isFF?0:0)+"px"),l.style.width=this.globalBox.offsetWidth-n+"px",this.setSizes(),!0}},this._fake.onRSE=this.onRSE),this.setCellTextStyleA=this.setCellTextStyle,this.setCellTextStyle=function(e,i,s){t>i&&this._fake.setCellTextStyle(e,i,s),this.setCellTextStyleA(e,i,s)},this.setRowTextBoldA=this.setRowTextBold,this.setRowTextBold=function(t){this.setRowTextBoldA(t),this._fake.setRowTextBold(t)},this.setRowColorA=this.setRowColor,this.setRowColor=function(t,e){this.setRowColorA(t,e),this._fake.setRowColor(t,e)},this.setRowHiddenA=this.setRowHidden,this.setRowHidden=function(t,e){this.setRowHiddenA(t,e),this._fake.setRowHidden(t,e)},this.setRowTextNormalA=this.setRowTextNormal,this.setRowTextNormal=function(t){this.setRowTextNormalA(t),this._fake.setRowTextNormal(t)},this.getChangedRows=function(t){function e(t){for(var e=0;e<t.childNodes.length;e++)if(t.childNodes[e].wasChanged)return i[i.length]=t.idd}var i=new Array;return this.forEachRow(function(s){var n=this.rowsAr[s],o=this._fake.rowsAr[s];"TR"==n.tagName&&o&&"TR"==o.tagName&&(t&&n._added?i[i.length]=n.idd:e(n)||e(o))}),i.join(this.delim)},this.setRowTextStyleA=this.setRowTextStyle,this.setRowTextStyle=function(t,e){this.setRowTextStyleA(t,e),this._fake.rowsAr[t]&&this._fake.setRowTextStyle(t,e)},this.lockRowA=this.lockRow,this.lockRow=function(t,e){this.lockRowA(t,e),this._fake.lockRow(t,e)},this.getColWidth=function(e){return parseInt(t>e?this._fake.cellWidthPX[e]:this.cellWidthPX[e])},this.getColumnLabel=function(e){return this._fake.getColumnLabel.apply(t>e?this._fake:this,arguments)},this.setColWidthA=this._fake.setColWidthA=this.setColWidth,this.setColWidth=function(e,i){e=1*e,t>e?this._fake.setColWidthA(e,i):this.setColWidthA(e,i),t>=e+1&&this._fake._correctSplit(Math.min(this._fake.objBox.offsetWidth,this._fake.obj.offsetWidth))},this.adjustColumnSizeA=this.adjustColumnSize,this.setColumnLabelA=this.setColumnLabel,this.setColumnLabel=function(e,i,s,n){var o=this;return t>e&&(o=this._fake),this.setColumnLabelA.apply(o,[e,i,s,n])},this.adjustColumnSize=function(e,i){return t>e?(_isIE&&(this._fake.obj.style.tableLayout=""),this._fake.adjustColumnSize(e,i),_isIE&&(this._fake.obj.style.tableLayout="fixed"),this._fake._correctSplit(),void 0):this.adjustColumnSizeA(e,i)};var m="cells";this._bfs_cells=this[m],this[m]=function(){return arguments[1]<t?this._fake.cells.apply(this._fake,arguments):this._bfs_cells.apply(this,arguments)},this._bfs_isColumnHidden=this.isColumnHidden,this.isColumnHidden=function(){return parseInt(arguments[0])<t?this._fake.isColumnHidden.apply(this._fake,arguments):this._bfs_isColumnHidden.apply(this,arguments)},this._bfs_setColumnHidden=this.setColumnHidden,this.setColumnHidden=function(){return parseInt(arguments[0])<t?(this._fake.setColumnHidden.apply(this._fake,arguments),this._fake._correctSplit()):this._bfs_setColumnHidden.apply(this,arguments)};var m="cells2";this._bfs_cells2=this[m],this[m]=function(){return arguments[1]<t?this._fake.cells2.apply(this._fake,arguments):this._bfs_cells2.apply(this,arguments)};var m="cells3";this._bfs_cells3=this[m],this[m]=function(e){return arguments[1]<t&&this._fake.rowsAr[arguments[0].idd]?this._fake.rowsAr[e.idd]&&0==this._fake.rowsAr[e.idd].childNodes.length?this._bfs_cells3.apply(this,arguments):(arguments[0]=arguments[0].idd,this._fake.cells.apply(this._fake,arguments)):this._bfs_cells3.apply(this,arguments)};var m="changeRowId";this._bfs_changeRowId=this[m],this[m]=function(){this._bfs_changeRowId.apply(this,arguments),this._fake.rowsAr[arguments[0]]&&this._fake.changeRowId.apply(this._fake,arguments)},this._fake.getRowById=function(t){var e=this.rowsAr[t];if(!e&&this._fake.rowsAr[t]&&(e=this._fake.getRowById(t)),e){if("TR"!=e.tagName){for(var i=0;i<this.rowsBuffer.length;i++)if(this.rowsBuffer[i]&&this.rowsBuffer[i].idd==t)return this.render_row(i);if(this._h2)return this.render_row(null,e.idd)}return e}return null},this.collapseKids&&(this._fake._bfs_collapseKids=this.collapseKids,this._fake.collapseKids=function(){return this._fake.collapseKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]])},this._bfs_collapseKids=this.collapseKids,this.collapseKids=function(){this._bfs_collapseKids.apply(this,arguments);this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._fake._bfs_expandKids=this.expandKids,this._fake.expandKids=function(){this._fake.expandKids.apply(this._fake,[this._fake.rowsAr[arguments[0].idd]]),this._cssSP||this._fake._fixAlterCss()},this._bfs_expandAll=this.expandAll,this.expandAll=function(){this._bfs_expandAll(),this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._bfs_collapseAll=this.collapseAll,this.collapseAll=function(){this._bfs_collapseAll(),this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._bfs_expandKids=this.expandKids,this.expandKids=function(){this._bfs_expandKids.apply(this,arguments);this._fake._h2syncModel(),this._cssSP||this._fake._fixAlterCss()},this._fake._h2syncModel=function(){this._fake.pagingOn?this._fake._renderSort():this._renderSort()},this._updateTGRState=function(t){return this._fake._updateTGRState(t)}),this._elmnh&&(this._setRowHoverA=this._fake._setRowHoverA=this._setRowHover,this._unsetRowHoverA=this._fake._unsetRowHoverA=this._unsetRowHover,this._setRowHover=this._fake._setRowHover=function(){var t=this.grid;t._setRowHoverA.apply(this,arguments);var e=_isIE?event.srcElement:arguments[0].target;e=t._fake.rowsAr[t.getFirstParentOfType(e,"TD").parentNode.idd],e&&t._fake._setRowHoverA.apply(t._fake.obj,[{target:e.childNodes[0]},arguments[1]])},this._unsetRowHover=this._fake._unsetRowHover=function(){if(arguments[1])var t=this;else var t=this.grid;t._unsetRowHoverA.apply(this,arguments),t._fake._unsetRowHoverA.apply(t._fake.obj,arguments)},this._fake.enableRowsHover(!0,this._hvrCss),this.enableRowsHover(!1),this.enableRowsHover(!0,this._fake._hvrCss)),this._updateTGRState=function(t){t.update&&0!=t.id&&(this.rowsAr[t.id].imgTag&&(this.rowsAr[t.id].imgTag.src=this.iconTree+t.state+".gif"),this._fake.rowsAr[t.id]&&this._fake.rowsAr[t.id].imgTag&&(this._fake.rowsAr[t.id].imgTag.src=this.iconTree+t.state+".gif"),t.update=!1)},this.copy_row=function(e){var i=e.cloneNode(!0);i._skipInsert=e._skipInsert;var s=t;if(i._attrs={},i._css=e._css,this._ecspn){s=0;for(var n=0;s<i.childNodes.length&&t>n;n+=i.childNodes[s].colSpan||1)s++}for(;i.childNodes.length>s;)i.removeChild(i.childNodes[i.childNodes.length-1]);for(var o=s,n=0;o>n;n++)this.dragAndDropOff&&this.dragger.addDraggableItem(i.childNodes[n],this),i.childNodes[n].style.display=this._fake._hrrar&&this._fake._hrrar[n]?"none":"",i.childNodes[n]._cellIndex=n,i.childNodes[n].combo_value=arguments[0].childNodes[n].combo_value,i.childNodes[n]._clearCell=arguments[0].childNodes[n]._clearCell,i.childNodes[n]._cellType=arguments[0].childNodes[n]._cellType,i.childNodes[n]._brval=arguments[0].childNodes[n]._brval,i.childNodes[n].val=arguments[0].childNodes[n].val,i.childNodes[n]._attrs=arguments[0].childNodes[n]._attrs,i.childNodes[n].chstate=arguments[0].childNodes[n].chstate,e._attrs.style&&(i.childNodes[n].style.cssText+=";"+e._attrs.style),i.childNodes[n].colSpan>1&&(this._childIndexes=this._fake._childIndexes);if(this._h2&&this._treeC<t){var l=this._h2.get[arguments[0].idd];i.imgTag=i.childNodes[this._treeC].childNodes[0].childNodes[l.level],i.valTag=i.childNodes[this._treeC].childNodes[0].childNodes[l.level+2]}return i.idd=e.idd,i.grid=this._fake,i};var m="_insertRowAt";this._bfs_insertRowAt=this[m],this[m]=function(){var t=this._bfs_insertRowAt.apply(this,arguments);arguments[0]=this.copy_row(arguments[0]);var e=this._fake._insertRowAt.apply(this._fake,arguments);return t._fhd&&(e.parentNode.removeChild(e),this._fake.rowsCol._dhx_removeAt(this._fake.rowsCol._dhx_find(e)),t._fhd=!1),t},this._bfs_setSizes=this.setSizes,this.setSizes=function(){if(!this._notresize){this._bfs_setSizes(this,arguments),this.sync_headers(),this.sync_scroll()&&this._ahgr&&this.setSizes();var t=this.dontSetSizes?this.entBox.offsetHeight+"px":this.entBox.style.height;this._fake.entBox.style.height=t,this._fake.objBox.style.height=this.objBox.style.height,this._fake.hdrBox.style.height=this.hdrBox.style.height,this._fake.objBox.scrollTop=this.objBox.scrollTop,this._fake.setColumnSizes(this._fake.entBox.clientWidth),this.globalBox.style.width=parseInt(this.entBox.style.width)+parseInt(this._fake.entBox.style.width),this.dontSetSizes||(this.globalBox.style.height=t)}},this.sync_scroll=this._fake.sync_scroll=function(t){var e=this.objBox.style.overflowX;if(this.obj.offsetWidth<=this.objBox.offsetWidth){if(!t)return this._fake.sync_scroll(!0);this.objBox.style.overflowX="hidden",this._fake.objBox.style.overflowX="hidden"}else dhtmlx.$customScroll||(this.objBox.style.overflowX="scroll",this._fake.objBox.style.overflowX="scroll");return e!=this.objBox.style.overflowX},this.sync_headers=this._fake.sync_headers=function(){if(!this.noHeader&&this._fake.hdr.scrollHeight!=this.hdr.offsetHeight){for(var e=1;e<this.hdr.rows.length;e++){for(var i=t;!this.hdr.rows[e].childNodes[i];)i--;var s=Math.min(this.hdr.rows[e].childNodes[i].scrollHeight+2,this.hdr.rows[e].scrollHeight),n=this._fake.hdr.rows[e].scrollHeight;s!=n&&(this._fake.hdr.rows[e].style.height=this.hdr.rows[e].style.height=Math.max(s,n)+"px"),window._KHTMLrv&&(this._fake.hdr.rows[e].childNodes[0].style.height=this.hdr.rows[e].childNodes[i].style.height=Math.max(s,n)+"px")}this._fake.sync_headers}},this._fake._bfs_setSizes=this._fake.setSizes,this._fake.setSizes=function(){this._fake._notresize||this._fake.setSizes()};var m="_doOnScroll";this._bfs__doOnScroll=this[m],this[m]=function(){this._bfs__doOnScroll.apply(this,arguments),this._fake.objBox.scrollTop=this.objBox.scrollTop,this._fake._doOnScroll.apply(this._fake,arguments)};var m="selectAll";this._bfs__selectAll=this[m],this[m]=function(){this._bfs__selectAll.apply(this,arguments),this._bfs__selectAll.apply(this._fake,arguments)};var m="doClick";this._bfs_doClick=this[m],this[m]=function(){if(this._bfs_doClick.apply(this,arguments),"TD"==arguments[0].tagName){var e=arguments[0]._cellIndex>=t;if(!arguments[0].parentNode.idd)return;e||(arguments[0].className=arguments[0].className.replace(/cellselected/g,"")),this._fake.rowsAr[arguments[0].parentNode.idd]||this._fake.render_row(this.getRowIndex(arguments[0].parentNode.idd)),arguments[0]=this._fake.cells(arguments[0].parentNode.idd,e?0:arguments[0]._cellIndex).cell,e&&(this._fake.cell=null),this._fake._bfs_doClick.apply(this._fake,arguments),e?this._fake.cell=this.cell:this.cell=this._fake.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),e?(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell):this.objBox.scrollTop=this._fake.objBox.scrollTop
}},this._fake._bfs_doClick=this._fake[m],this._fake[m]=function(){if(this._bfs_doClick.apply(this,arguments),"TD"==arguments[0].tagName){var e=arguments[0]._cellIndex<t;if(!arguments[0].parentNode.idd)return;arguments[0]=this._fake._bfs_cells(arguments[0].parentNode.idd,e?t:arguments[0]._cellIndex).cell,this._fake.cell=null,this._fake._bfs_doClick.apply(this._fake,arguments),this._fake.cell=this.cell,this._fake.onRowSelectTime&&clearTimeout(this._fake.onRowSelectTime),e&&(arguments[0].className=arguments[0].className.replace(/cellselected/g,""),globalActiveDHTMLGridObject=this,this._fake.cell=this.cell,this._fake.objBox.scrollTop=this.objBox.scrollTop)}},this.clearSelectionA=this.clearSelection,this.clearSelection=function(t){t&&this._fake.clearSelection(),this.clearSelectionA()},this.moveRowUpA=this.moveRowUp,this.moveRowUp=function(t){this._h2||this._fake.moveRowUp(t),this.moveRowUpA(t),this._h2&&this._fake._h2syncModel()},this.moveRowDownA=this.moveRowDown,this.moveRowDown=function(t){this._h2||this._fake.moveRowDown(t),this.moveRowDownA(t),this._h2&&this._fake._h2syncModel()},this._fake.getUserData=function(){return this._fake.getUserData.apply(this._fake,arguments)},this._fake.setUserData=function(){return this._fake.setUserData.apply(this._fake,arguments)},this.getSortingStateA=this.getSortingState,this.getSortingState=function(){var t=this.getSortingStateA();return 0!=t.length?t:this._fake.getSortingState()},this.setSortImgStateA=this._fake.setSortImgStateA=this.setSortImgState,this.setSortImgState=function(e,i,s,n){this.setSortImgStateA(e,i,s,n),t>1*i?(this._fake.setSortImgStateA(e,i,s,n),this.setSortImgStateA(!1)):this._fake.setSortImgStateA(!1)},this._fake.doColResizeA=this._fake.doColResize,this._fake.doColResize=function(e,i,s,n){var o=-1,l=0;return arguments[1]._cellIndex==t-1?(o=this._initalSplR+(e.clientX-n),this._initalSplF||(this._initalSplF=arguments[3]+this.objBox.scrollWidth-this.objBox.offsetWidth),this.objBox.scrollWidth==this.objBox.offsetWidth&&(this._fake.alter_split_resize||e.clientX-n>0)?(arguments[3]=this._initalSplF||arguments[3],l=this.doColResizeA.apply(this,arguments)):l=this.doColResizeA.apply(this,arguments)):(this.obj.offsetWidth<this.entBox.offsetWidth&&(o=this.obj.offsetWidth),l=this.doColResizeA.apply(this,arguments)),this._correctSplit(o),this.resized=this._fake.resized=1,l},this._fake.changeCursorState=function(t){var e=t.target||t.srcElement;if("TD"!=e.tagName&&(e=this.getFirstParentOfType(e,"TD")),"TD"!=e.tagName||!this._drsclmn||this._drsclmn[e._cellIndex]){var i=(t.layerX||0)+(_isIE||"DIV"!=t.target.tagName?0:e.offsetLeft),s=parseInt(this.getPosition(e,this.hdrBox));e.style.cursor=e.offsetWidth-(t.offsetX||-1*(s-i))<(_isOpera?20:10)||this.entBox.offsetWidth-(t.offsetX?t.offsetX+e.offsetLeft:i)+this.objBox.scrollLeft-0<(_isOpera?20:10)?"E-resize":"default",_isOpera&&(this.hdrBox.scrollLeft=this.objBox.scrollLeft)}},this._fake.startColResizeA=this._fake.startColResize,this._fake.startColResize=function(t){var e=this.startColResizeA(t);if(this._initalSplR=this.entBox.offsetWidth,this._initalSplF=null,this.entBox.onmousemove){var i=this.entBox.parentNode;if(i._aggrid)return e;i._aggrid=i.grid,i.grid=this,this.entBox.parentNode.onmousemove=this.entBox.onmousemove,this.entBox.onmousemove=null}return e},this._fake.stopColResizeA=this._fake.stopColResize,this._fake.stopColResize=function(t){if(this.entBox.parentNode.onmousemove){var e=this.entBox.parentNode;e.grid=e._aggrid,e._aggrid=null,this.entBox.onmousemove=this.entBox.parentNode.onmousemove,this.entBox.parentNode.onmousemove=null,this.obj.offsetWidth<this.entBox.offsetWidth&&this._correctSplit(this.obj.offsetWidth)}return this.stopColResizeA(t)},this.doKeyA=this.doKey,this._fake.doKeyA=this._fake.doKey,this._fake.doKey=this.doKey=function(e){if(!e)return!0;if(this._htkebl)return!0;if((e.target||e.srcElement).value!==window.undefined){var i=e.target||e.srcElement;if(!i.parentNode||-1==i.parentNode.className.indexOf("editable"))return!0}switch(e.keyCode){case 9:if(e.shiftKey){if(this._realfake){if(this.cell&&0==this.cell._cellIndex){e.preventDefault&&e.preventDefault();var s=this._fake.rowsBuffer[this._fake.getRowIndex(this.cell.parentNode.idd)-1];if(s){this._fake.showRow(s.idd);for(var n=this._fake._cCount-1;"none"==s.childNodes[n].style.display;)n--;this._fake.selectCell(this._fake.getRowIndex(s.idd),n,!1,!1,!0)}return!1}return this.doKeyA(e)}return this.cell&&this.cell._cellIndex==t?(e.preventDefault&&e.preventDefault(),this._fake.selectCell(this.getRowIndex(this.cell.parentNode.idd),t-1,!1,!1,!0),!1):this.doKeyA(e)}if(this._realfake){if(this.cell&&this.cell._cellIndex==t-1){e.preventDefault&&e.preventDefault();for(var n=t;this._fake._hrrar&&this._fake._hrrar[n];)n++;return this._fake.selectCell(this._fake.getRowIndex(this.cell.parentNode.idd),n,!1,!1,!0),!1}var s=this.doKeyA(e);return globalActiveDHTMLGridObject=this,s}if(this.cell){for(var n=this.cell._cellIndex+1;this.rowsCol[0].childNodes[n]&&"none"==this.rowsCol[0].childNodes[n].style.display;)n++;if(n==this.rowsCol[0].childNodes.length){e.preventDefault&&e.preventDefault();var s=this.rowsBuffer[this.getRowIndex(this.cell.parentNode.idd)+1];if(s)return this.showRow(s.idd),this._fake.selectCell(this._fake.getRowIndex(s.idd),0,!1,!1,!0),!1}}return this.doKeyA(e)}return this.doKeyA(e)},this.editCellA=this.editCell,this.editCell=function(){return this.cell&&this.cell.parentNode.grid!=this?this._fake.editCell():this.editCellA()},this.deleteRowA=this.deleteRow,this.deleteRow=function(t,e){return this.deleteRowA(t,e)===!1?!1:void(this._fake.rowsAr[t]&&this._fake.deleteRow(t))},this.clearAllA=this.clearAll,this.clearAll=function(){this.clearAllA(),this._fake.clearAll()},this.editStopA=this.editStop,this.editStop=function(t){this._fake.editor?this._fake.editStop(t):this.editStopA(t)},this.attachEvent("onAfterSorting",function(e){e>=t&&this._fake.setSortImgState(!1)}),this._fake.sortField=function(t,e){if(this._fake.sortField.call(this._fake,t,e,this._fake.hdr.rows[0].cells[t]),"na"!=this.fldSort[t]&&this._fake.fldSorted){var i=this._fake.getSortingState()[1];this._fake.setSortImgState(!1),this.setSortImgState(!0,arguments[0],i)}},this.sortTreeRowsA=this.sortTreeRows,this._fake.sortTreeRowsA=this._fake.sortTreeRows,this.sortTreeRows=this._fake.sortTreeRows=function(t,e,i,s){return this._realfake?this._fake.sortTreeRows(t,e,i,s):(this.sortTreeRowsA(t,e,i,s),this._fake._h2syncModel(),this._fake.setSortImgStateA(!1),void(this._fake.fldSorted=null))},this._fake._fillers=[],this._fake.rowsBuffer=this.rowsBuffer,this.attachEvent("onClearAll",function(){this._fake.rowsBuffer=this.rowsBuffer}),this._add_filler_s=this._add_filler,this._add_filler=function(t,e,i,s){if(this._fake._fillers||(this._fake._fillers=[]),this._realfake||!s){var n;(i||!this._fake._fillers.length)&&(i&&i.idd?n=this._fake.rowsAr[i.idd]:i&&i.nextSibling&&(n={},n.nextSibling=this._fake.rowsAr[i.nextSibling.idd],n.parentNode=n.nextSibling.parentNode),this._fake._fillers.push(this._fake._add_filler(t,e,n)))}return this._add_filler_s.apply(this,arguments)},this._add_from_buffer_s=this._add_from_buffer,this._add_from_buffer=function(){var t=this._add_from_buffer_s.apply(this,arguments);return-1!=t&&(this._fake._add_from_buffer.apply(this._fake,arguments),this.multiLine&&this._correctRowHeight(this.rowsBuffer[arguments[0]].idd)),t},this._fake.render_row=function(t){var e=this._fake.render_row(t);return-1==e?-1:e?this.rowsAr[e.idd]=this.rowsAr[e.idd]||this._fake.copy_row(e):null},this._reset_view_s=this._reset_view,this._reset_view=function(){this._fake._reset_view(!0),this._fake._fillers=[],this._reset_view_s()},this.moveColumn_s=this.moveColumn,this.moveColumn=function(e,i){return i>=t?this.moveColumn_s(e,i):void 0},this.attachEvent("onCellChanged",function(e,i,s){if(this._split_event&&t>i&&this.rowsAr[e]){var n=this._fake.rowsAr[e];if(!n)return;n=n._childIndexes?n.childNodes[n._childIndexes[i]]:n.childNodes[i];var o=this.rowsAr[e].childNodes[i];o._treeCell&&o.firstChild.lastChild?o.firstChild.lastChild.innerHTML=s:o.innerHTML=n.innerHTML,o._clearCell=!1,o.combo_value=n.combo_value,o.chstate=n.chstate}}),this._fake.combos=this.combos,this.setSizes(),this.rowsBuffer[0]&&this._reset_view(),this.attachEvent("onXLE",function(){this._fake._correctSplit()}),this._fake._correctSplit()},dhtmlXGridObject.prototype._correctSplit=function(t){if(t=t||this.obj.scrollWidth-this.objBox.scrollLeft,t=Math.min(this.globalBox.offsetWidth,t),t>-1){this.entBox.style.width=t+"px",this.objBox.style.width=t+"px";var e=(this.globalBox.offsetWidth-this.globalBox.clientWidth)/2;if(this._fake.entBox.style.left=t+"px",this._fake.entBox.style.width=Math.max(0,this.globalBox.offsetWidth-t-(this.quirks?0:2)*e)+"px",this._fake.ftr&&(this._fake.ftr.parentNode.style.width=this._fake.entBox.style.width),_isIE){var i=_isIE&&!window.xmlHttpRequest,e=this.globalBox.offsetWidth-this.globalBox.clientWidth;this._fake.hdrBox.style.width=this._fake.objBox.style.width=Math.max(0,this.globalBox.offsetWidth-(i?e:0)-t)+"px"}}},dhtmlXGridObject.prototype._correctRowHeight=function(t){if(this.rowsAr[t]&&this._fake.rowsAr[t]){var e=this.rowsAr[t].offsetHeight,i=this._fake.rowsAr[t].offsetHeight,s=Math.max(e,i);if(s&&(this.rowsAr[t].style.height=this._fake.rowsAr[t].style.height=s+"px",window._KHTMLrv)){for(var n,o=this._fake._cCount;!n&&o>=0;)n=this.rowsAr[t].childNodes[o],o-=1;var l=this._fake.rowsAr[t].firstChild;n&&l&&(n.style.height=l.style.height=s+"px")}}},dhtmlXGridObject.prototype.enableAutoSizeSaving=function(t,e){this.attachEvent("onResizeEnd",function(){this.saveSizeToCookie(t,e)})},dhtmlXGridObject.prototype.saveOpenStates=function(t,e){t||(t=this.entBox.id);var i=[];this._h2.forEachChild(0,function(t){"minus"==t.state&&i.push(t.id)});var s="gridOpen"+(t||"")+"="+i.join("|")+(e?"; "+e:"");document.cookie=s},dhtmlXGridObject.prototype.loadOpenStates=function(t){var e=this.getCookie(t,"gridOpen");if(e){e=e.split("|");for(var i=0;i<e.length;i++){var s=this.getParentId(e[i]);this.getOpenState(s)&&this.openItem(e[i])}}},dhtmlXGridObject.prototype.enableAutoHiddenColumnsSaving=function(t,e){this.attachEvent("onColumnHidden",function(){this.saveHiddenColumnsToCookie(t,e)})},dhtmlXGridObject.prototype.enableSortingSaving=function(t,e){this.attachEvent("onBeforeSorting",function(){var i=this;return window.setTimeout(function(){i.saveSortingToCookie(t,e)},1),!0})},dhtmlXGridObject.prototype.enableOrderSaving=function(t,e){this.attachEvent("onAfterCMove",function(){this.saveOrderToCookie(t,e),this.saveSizeToCookie(t,e)})},dhtmlXGridObject.prototype.enableAutoSaving=function(t,e){this.enableOrderSaving(t,e),this.enableAutoSizeSaving(t,e),this.enableSortingSaving(t,e)},dhtmlXGridObject.prototype.saveSizeToCookie=function(t,e){if("px"==this.cellWidthType)var i=this.cellWidthPX.join(",");else var i=this.cellWidthPC.join(",");var s=(this.initCellWidth||new Array).join(",");this.setCookie(t,e,0,i),this.setCookie(t,e,1,s)},dhtmlXGridObject.prototype.saveHiddenColumnsToCookie=function(t,e){var i=[].concat(this._hrrar||[]);if(this._fake&&this._fake._hrrar)for(var s=0;s<this._fake._cCount;s++)i[s]=this._fake._hrrar[s]?"1":"";this.setCookie(t,e,4,i.join(",").replace(/display:none;/g,"1"))},dhtmlXGridObject.prototype.loadHiddenColumnsFromCookie=function(t){for(var e=this._getCookie(t,4),i=(e||"").split(","),s=0;s<this._cCount;s++)this.setColumnHidden(s,i[s]?!0:!1)},dhtmlXGridObject.prototype.saveSortingToCookie=function(t,e){this.setCookie(t,e,2,(this.getSortingState()||[]).join(","))},dhtmlXGridObject.prototype.loadSortingFromCookie=function(t){var e=this._getCookie(t,2);e=(e||"").split(","),e.length>1&&e[0]<this._cCount&&(this.sortRows(e[0],null,e[1]),this.setSortImgState(!0,e[0],e[1]))},dhtmlXGridObject.prototype.saveOrderToCookie=function(t,e){if(!this._c_order){this._c_order=[];for(var i=this._cCount,s=0;i>s;s++)this._c_order[s]=s}this.setCookie(t,e,3,(this._c_order||[]).slice(0,this._cCount).join(",")),this.saveSortingToCookie()},dhtmlXGridObject.prototype.loadOrderFromCookie=function(t){var e=this._getCookie(t,3);if(e=(e||"").split(","),e.length>1&&e.length<=this._cCount)for(var i=0;i<e.length;i++)if(!this._c_order&&e[i]!=i||this._c_order&&e[i]!=this._c_order[i]){var s=e[i];if(this._c_order)for(var n=0;n<this._c_order.length;n++)if(this._c_order[n]==e[i]){s=n;break}this.moveColumn(1*s,i)}},dhtmlXGridObject.prototype.loadSizeFromCookie=function(t){var e=this._getCookie(t,1);e&&(this.initCellWidth=e.split(","));var e=this._getCookie(t,0);if(e&&e.length){if(!this._fake&&this._hrrar)for(var i=0;i<e.length;i++)this._hrrar[i]&&(e[i]=0);"px"==this.cellWidthType?this.cellWidthPX=e.split(","):this.cellWidthPC=e.split(",")}return this.setSizes(),!0},dhtmlXGridObject.prototype.clearConfigCookie=function(t){t||(t=this.entBox.id);var e="gridSettings"+t+"=||||";document.cookie=e},dhtmlXGridObject.prototype.clearSizeCookie=dhtmlXGridObject.prototype.clearConfigCookie,dhtmlXGridObject.prototype.setCookie=function(t,e,i,s){t||(t=this.entBox.id);var n=this.getCookie(t);n=(n||"||||").split("|"),n[i]=s;var o="gridSettings"+t+"="+n.join("|").replace(/,/g,"-")+(e?"; "+e:"");document.cookie=o},dhtmlXGridObject.prototype.getCookie=function(t,e){t||(t=this.entBox.id),t=(e||"gridSettings")+t;var i=t+"=";if(document.cookie.length>0){var s=document.cookie.indexOf(i);if(-1!=s){s+=i.length;var n=document.cookie.indexOf(";",s);return-1==n&&(n=document.cookie.length),document.cookie.substring(s,n)}}},dhtmlXGridObject.prototype._getCookie=function(t,e){return(this.getCookie(t)||"||||").replace(/-/g,",").split("|")[e]},dhtmlXGridObject.prototype.enableUndoRedo=function(){var t=this,e=function(){return t._onEditUndoRedo.apply(t,arguments)};this.attachEvent("onEditCell",e);var i=function(e,i,s){return t._onEditUndoRedo.apply(t,[2,e,i,s?1:0,s?0:1])};this.attachEvent("onCheckbox",i),this._IsUndoRedoEnabled=!0,this._UndoRedoData=[],this._UndoRedoPos=-1},dhtmlXGridObject.prototype.disableUndoRedo=function(){this._IsUndoRedoEnabled=!1,this._UndoRedoData=[],this._UndoRedoPos=-1},dhtmlXGridObject.prototype._onEditUndoRedo=function(t,e,i,s,n){if(this._IsUndoRedoEnabled&&2==t&&n!=s){-1!==this._UndoRedoPos&&this._UndoRedoPos!=this._UndoRedoData.length-1?this._UndoRedoData=this._UndoRedoData.slice(0,this._UndoRedoPos+1):-1===this._UndoRedoPos&&this._UndoRedoData.length>0&&(this._UndoRedoData=[]);var o={old_value:n,new_value:s,row_id:e,cell_index:i};this._UndoRedoData.push(o),this._UndoRedoPos++}return!0},dhtmlXGridObject.prototype.doUndo=function(){if(-1===this._UndoRedoPos)return!1;var t=this._UndoRedoData[this._UndoRedoPos--],e=this.cells(t.row_id,t.cell_index);"tree"==this.getColType(t.cell_index)?e.setLabel(t.old_value):e.setValue(t.old_value),this.callEvent("onUndo",[t.row_id])},dhtmlXGridObject.prototype.doRedo=function(){if(this._UndoRedoPos==this._UndoRedoData.length-1)return!1;var t=this._UndoRedoData[++this._UndoRedoPos];this.cells(t.row_id,t.cell_index).setValue(t.new_value),this.callEvent("onUndo",[t.row_id])},dhtmlXGridObject.prototype.getRedo=function(){return this._UndoRedoPos==this._UndoRedoData.length-1?[]:this._UndoRedoData.slice(this._UndoRedoPos+1)},dhtmlXGridObject.prototype.getUndo=function(){return-1==this._UndoRedoPos?[]:this._UndoRedoData.slice(0,this._UndoRedoPos+1)},eXcell_time.prototype=new eXcell_ed,eXcell_sub_row.prototype=new eXcell,eXcell_sub_row_ajax.prototype=new eXcell_sub_row,eXcell_sub_row_grid.prototype=new eXcell_sub_row,dhtmlXGridObject.prototype._expandMonolite=function(t,e,i){var s=this.parentNode,n=s.parentNode,o=n.grid;(t||window.event)&&(i||n._expanded||o.editStop(),(t||event).cancelBubble=!0);var l=o.getUserData(n.idd,"__sub_row");if(o._sub_row_editor||(o._sub_row_editor=new eXcell_sub_row(s)),l){if(n._expanded&&!e){o._sub_row_editor._setState("plus.gif",s),s._previous_content=n._expanded,o.objBox.removeChild(n._expanded),n._expanded=!1,n.style.height=(n.oldHeight||20)+"px",s.style.height=(n.oldHeight||20)+"px",o._fake&&(o._fake.rowsAr[n.idd].style.height=(n.oldHeight||20)+"px");for(var r=0;r<n.cells.length;r++)n.cells[r].style.verticalAlign="middle",n.cells[r].style.paddingTop="0px";delete o._flow[n.idd],o._correctMonolite(),n._expanded.ctrl=null}else if(!n._expanded&&!i){if(o._sub_row_editor._setState("minus.gif",s),n.oldHeight=s.offsetHeight,s._previous_content){var a=s._previous_content;a.ctrl=s,o.objBox.appendChild(a),o._detectHeight(a,s,parseInt(a.style.height))}else{var a=document.createElement("DIV");a.ctrl=s,s._sub_row_type?o._sub_row_render[s._sub_row_type](o,a,s,l):a.innerHTML=l,a.style.cssText="position:absolute; left:0px; top:0px; overflow:auto; font-family:Tahoma; font-size:8pt; margin-top:2px; margin-left:4px;",a.className="dhx_sub_row",o.objBox.appendChild(a),o._detectHeight(a,s)}o._flow||(o.attachEvent("onGridReconstructed",function(){this.pagingOn&&!this.parentGrid||this._srnd?this._collapsMonolite():this._correctMonolite()}),o.attachEvent("onResizeEnd",function(){this._correctMonolite(!0)}),o.attachEvent("onAfterCMove",function(){this._correctMonolite(!0)}),o.attachEvent("onDrop",function(){this._correctMonolite(!0)}),o.attachEvent("onBeforePageChanged",function(){return this._collapsMonolite(),!0}),o.attachEvent("onGroupStateChanged",function(){return this._correctMonolite(),!0}),o.attachEvent("onFilterEnd",function(){this._collapsMonolite()}),o.attachEvent("onUnGroup",function(){this._collapsMonolite()}),o.attachEvent("onPageChanged",function(){this._collapsMonolite()}),o.attachEvent("onXLE",function(){this._collapsMonolite()}),o.attachEvent("onClearAll",function(){for(var t in this._flow)this._flow[t]&&this._flow[t].parentNode&&this._flow[t].parentNode.removeChild(this._flow[t]);this._flow=[]}),o.attachEvent("onEditCell",function(t,e,i){return 2!==t&&this._flow[e]&&"ch"!=this.cellType[i]&&"ra"!=this.cellType[i]&&this._expandMonolite.apply(this._flow[e].ctrl.firstChild,[0,!1,!0]),!0}),o.attachEvent("onCellChanged",function(t,e){if(this._flow[t]){var i=this.cells(t,e).cell;i.style.verticalAlign="top",i.style.paddingTop="3px"}}),o._flow=[]),o._flow[n.idd]=a,o._correctMonolite();var h=o._srdh>30?11:3;o.multiLine&&(h=0);for(var r=0;r<n.cells.length;r++)n.cells[r].style.verticalAlign="top",n.cells[r].style.paddingTop=h+"px";if(o._fake)for(var d=o._fake.rowsAr[n.idd],r=0;r<d.cells.length;r++)d.cells[r].style.verticalAlign="top",d.cells[r].style.paddingTop=h+"px";s.style.paddingTop=h-1+"px",n._expanded=a}o._ahgr&&o.setSizes(),o.parentGrid&&o.callEvent("onGridReconstructed",[]),o.callEvent("onSubRowOpen",[n.idd,!!n._expanded])}},dhtmlXGridObject.prototype._sub_row_render={ajax:function(that,d,td,c){d.innerHTML="Loading...";var xml=new dtmlXMLLoaderObject(function(){d.innerHTML=xml.xmlDoc.responseText;var z=xml.xmlDoc.responseText.match(/<script[^>]*>([^\f]+?)<\/script>/g);if(z)for(var i=0;i<z.length;i++)eval(z[i].replace(/<([\/]{0,1})s[^>]*>/g,""));that._detectHeight(d,td),that._correctMonolite(),that.setUserData(td.parentNode.idd,"__sub_row",xml.xmlDoc.responseText),td._sub_row_type=null,that._ahgr&&that.setSizes(),that.callEvent("onSubAjaxLoad",[td.parentNode.idd,xml.xmlDoc.responseText])},this,!0,!0);xml.loadXML(c)},grid:function(t,e,i,s){i._sub_grid=new dhtmlXGridObject(e),t.skin_name&&i._sub_grid.setSkin(t.skin_name),i._sub_grid.parentGrid=t,i._sub_grid.imgURL=t.imgURL,i._sub_grid.iconURL=t.iconURL,i._sub_grid.enableAutoHeight(!0),i._sub_grid._delta_x=i._sub_grid._delta_y=null,i._sub_grid.attachEvent("onGridReconstructed",function(){t._detectHeight(e,i,i._sub_grid.objBox.scrollHeight+i._sub_grid.hdr.offsetHeight+(this.ftr?this.ftr.offsetHeight:0)),t._correctMonolite(),this.setSizes(),t.parentGrid&&t.callEvent("onGridReconstructed",[])}),t.callEvent("onSubGridCreated",[i._sub_grid,i.parentNode.idd,i._cellIndex,s])?i._sub_grid.loadXML(s,function(){t._detectHeight(e,i,i._sub_grid.objBox.scrollHeight+i._sub_grid.hdr.offsetHeight+(i._sub_grid.ftr?i._sub_grid.ftr.offsetHeight:0)),i._sub_grid.objBox.style.overflow="hidden",t._correctMonolite(),i._sub_row_type=null,t.callEvent("onSubGridLoaded",[i._sub_grid,i.parentNode.idd,i._cellIndex,s])&&t._ahgr&&t.setSizes()}):(i._sub_grid.objBox.style.overflow="hidden",i._sub_row_type=null)}},dhtmlXGridObject.prototype._detectHeight=function(t,e,i){var s=e.offsetLeft+e.offsetWidth;t.style.left=s+"px",t.style.width=Math.max(0,e.parentNode.offsetWidth-s-4)+"px";var i=i||t.scrollHeight;t.style.overflow="hidden",t.style.height=i+"px";var n=e.parentNode;if(e.parentNode.style.height=(n.oldHeight||20)+3+1*i+"px",e.style.height=(n.oldHeight||20)+3+1*i+"px",this._fake){var o=this._fake.rowsAr[e.parentNode.idd];o.style.height=(n.oldHeight||20)+3+1*i+"px"}},dhtmlXGridObject.prototype._correctMonolite=function(t){if(!this._in_correction){this._in_correction=!0;for(var e in this._flow)if(this._flow[e]&&"DIV"==this._flow[e].tagName)if(this.rowsAr[e]){if("none"==this.rowsAr[e].style.display){this.cells4(this._flow[e].ctrl).close();continue}if(this._flow[e].style.top=this.rowsAr[e].offsetTop+(this.rowsAr[e].oldHeight||20)+"px",t){var i=this._flow[e].ctrl.offsetLeft+this._flow[e].ctrl.offsetWidth;this._flow[e].style.left=i+"px",this._flow[e].style.width=this.rowsAr[e].offsetWidth-i-4+"px"}}else this._flow[e].ctrl=null,this.objBox.removeChild(this._flow[e]),delete this._flow[e];this._in_correction=!1}},dhtmlXGridObject.prototype._collapsMonolite=function(){for(var t in this._flow)this._flow[t]&&"DIV"==this._flow[t].tagName&&this.rowsAr[t]&&this.cells4(this._flow[t].ctrl).close()},eXcell_ra_str.prototype=new eXcell_ch,eXcell_ra_str.prototype.setValue=function(t){if(this.cell.style.verticalAlign="middle",t&&(t=t.toString()._dhx_trim(),("false"==t||"0"==t)&&(t="")),t){if(this.grid.rowsAr[this.cell.parentNode.idd])for(var e=0;e<this.grid._cCount;e++)if(e!==this.cell._cellIndex){var i=this.grid.cells(this.cell.parentNode.idd,e);if("ra_str"!=(i.cell._cellType||this.grid.cellType[i.cell._cellIndex]))continue;i.getValue()&&i.setValue("0")}t="1",this.cell.chstate="1"}else t="0",this.cell.chstate="0";this.setCValue("<img src='"+this.grid.imgURL+"radio_chk"+t+".gif' onclick='new eXcell_ra_str(this.parentNode).changeState()'>",this.cell.chstate)},dhtmlXGridObject.prototype._init_point_bcg=dhtmlXGridObject.prototype._init_point,dhtmlXGridObject.prototype._init_point=function(){window.dhx_globalImgPath||(window.dhx_globalImgPath=this.imgURL),this._col_combos=[];for(var t=0;t<this._cCount;t++)0==this.cellType[t].indexOf("combo")&&(this._col_combos[t]=eXcell_combo.prototype.initCombo.call({grid:this},t));this._loading_handler_set||(this._loading_handler_set=this.attachEvent("onXLE",function(t,e,i,s){eXcell_combo.prototype.fillColumnCombos(this,s),this.detachEvent(this._loading_handler_set),this._loading_handler_set=null})),this._init_point_bcg&&this._init_point_bcg()},eXcell_combo.prototype=new eXcell,eXcell_combo_v=function(t){var e=new eXcell_combo(t);return e._combo_pre="<img src='"+(window.dhx_globalImgPath?window.dhx_globalImgPath:this.grid.imgURL)+"combo_select"+(dhtmlx.skin?"_"+dhtmlx.skin:"")+".gif' class='dhxgrid_combo_icon'/>",e},eXcell_combo.prototype.initCombo=function(t){var e=document.createElement("DIV"),i=this.grid.defVal[arguments.length?t:this.cell._cellIndex],s=new dhtmlXCombo(e,"combo",0,i);this.grid.defVal[arguments.length?t:this.cell._cellIndex]="",s.DOMelem.className+=" dhxcombo_in_grid";var n=this.grid;return s.DOMelem.onselectstart=function(){return event.cancelBubble=!0,!0},s.attachEvent("onKeyPressed",function(t){(13==t||27==t)&&(n.editStop(),n._fake&&n._fake.editStop())}),dhtmlxEvent(s.DOMlist,"click",function(){n.editStop(),n._fake&&n._fake.editStop()}),s},eXcell_combo.prototype.fillColumnCombos=function(t,e){if(e){t.combo_columns=t.combo_columns||[],columns=t.xmlLoader.doXPath("//column",e);for(var i=0;i<columns.length;i++)0==(columns[i].getAttribute("type")||"").indexOf("combo")&&(t.combo_columns[t.combo_columns.length]=i,this.setComboOptions(t._col_combos[i],columns[i],t,i))}},eXcell_combo.prototype.setComboCValue=function(t,e){if(""!=this._combo_pre){{this.cell.offsetHeight?this.cell.offsetHeight+"px":0}t="<div style='width:100%;position:relative;height:100%;overflow:hidden;'>"+this._combo_pre+"<span>"+t+"</span></div>"}arguments.length>1?this.setCValue(t,e):this.setCValue(t)},eXcell_combo.prototype.setComboOptions=function(t,e,i,s,n){if(window.dhx4.s2b(e.getAttribute("xmlcontent"))&&!e.getAttribute("source")){options=e.childNodes;for(var o=[],l=0;l<options.length;l++)if("option"==options[l].tagName){var r=options[l].firstChild?options[l].firstChild.data:"";o[o.length]=[options[l].getAttribute("value"),r]}if(t.addOption(o),4==arguments.length)i.forEachRowA(function(e){var n=i.cells(e,s);n.cell._brval||n.cell._cellType||n.cell._cellIndex!=s||(""==n.cell.combo_value?n.setComboCValue("&nbsp;",""):n.setComboCValue(t.getOption(n.cell.combo_value)?t.getOption(n.cell.combo_value).text:n.cell.combo_value))});else{var a=this.cell?this:i.cells(n,s);e.getAttribute("text")?""==e.getAttribute("text")._dhx_trim()?a.setComboCValue("&nbsp;",""):a.setComboCValue(e.getAttribute("text")):a.cell.combo_value&&""!=a.cell.combo_value._dhx_trim()?a.setComboCValue(t.getOption(a.cell.combo_value)?t.getOption(a.cell.combo_value).text:a.cell.combo_value):a.setComboCValue("&nbsp;","")}}if(e.getAttribute("source"))if(e.getAttribute("auto")&&window.dhx4.s2b(e.getAttribute("auto"))){if(e.getAttribute("xmlcontent")){var a=this.cell?this:i.cells(n,s);e.getAttribute("text")&&a.setComboCValue(e.getAttribute("text"))}else i.forEachRowA(function(t){var e=i.cells(t,s);if(!e.cell._brval&&!e.cell._cellType){var n=e.cell.combo_value.toString();if(-1!=n.indexOf("^")){var o=n.split("^");e.cell.combo_value=o[0],e.setComboCValue(o[1])}}});t.enableFilteringMode(!0,e.getAttribute("source"),window.dhx4.s2b(e.getAttribute("cache")||!0),window.dhx4.s2b(e.getAttribute("sub")||!1))}else{var h=arguments.length;t.load(e.getAttribute("source"),function(){if(4==h)i.forEachRow(function(e){var n=i.cells(e,s);n.cell._brval||n.cell._cellType||(t.getOption(n.cell.combo_value)?n.setComboCValue(t.getOption(n.cell.combo_value).text):""==(n.cell.combo_value||"").toString()._dhx_trim()?(n.setComboCValue("&nbsp;",""),n.cell._clearCell=!0):n.setComboCValue(n.cell.combo_value))});else{var e=i.cells(n,s);e.setComboCValue(t.getOption(e.cell.combo_value)?t.getOption(e.cell.combo_value).text:e.cell.combo_value)}})}e.getAttribute("auto")&&window.dhx4.s2b(e.getAttribute("auto"))||(e.getAttribute("editable")&&!window.dhx4.s2b(e.getAttribute("editable"))&&t.readonly(!0),e.getAttribute("filter")&&window.dhx4.s2b(e.getAttribute("filter"))&&t.enableFilteringMode(!0))},eXcell_combo.prototype.getCellCombo=function(){return this.cell._brval?this.cell._brval:(this.cell._brval=this.initCombo(),this.cell._brval)},eXcell_combo.prototype.refreshCell=function(){this.setValue(this.getValue())},dhtmlXGridObject.prototype.getColumnCombo=function(t){return this._col_combos&&this._col_combos[t]?this._col_combos[t]:(this._col_combos||(this._col_combos=[]),this._col_combos[t]=eXcell_combo.prototype.initCombo.call({grid:this},t),this._col_combos[t])},dhtmlXGridObject.prototype.refreshComboColumn=function(t){this.forEachRow(function(e){this.cells(e,t).refreshCell&&this.cells(e,t).refreshCell()})},eXcell_clist.prototype=new eXcell,eXcell_clist.prototype.setValue=function(t){if("object"==typeof t){var e=this.grid.xmlLoader.doXPath("./option",t);e.length&&(this.cell._combo=[]);for(var i=0;i<e.length;i++)this.cell._combo.push(e[i].firstChild?e[i].firstChild.data:"");t=t.firstChild.data}""===t||t===this.undefined?(this.setCTxtValue(" ",t),this.cell._clearCell=!0):(this.setCTxtValue(t),this.cell._clearCell=!1)},dhtmlXGridObject.prototype.registerCList=function(t,e){this.clists||(this.clists=new Array),"object"!=typeof e&&(e=e.split(",")),this.clists[t]=e},eXcell_calck.prototype=new eXcell,eXcell_calck.prototype.setValue=function(t){t&&""!=t.toString()._dhx_trim()||(t="0"),this.setCValue(this.grid._aplNF(t,this.cell._cellIndex),t)},dhtmlXGridObject.prototype._updateTGRState=function(t){t.update&&0!=t.id&&(this.rowsAr[t.id].imgTag&&(this.rowsAr[t.id].imgTag.src=this.iconTree+t.state+".gif"),t.update=!1)},dhtmlXGridObject.prototype.doExpand=function(t){this.editStop();var e=t.parentNode.parentNode.parentNode,i=this._h2.get[e.idd];this.callEvent("onOpen",[e.idd,"plus"==i.state?-1:1])&&("plus"==i.state?this.expandKids(e):"minus"!=i.state||i._closeable||this.collapseKids(e))},dhtmlXGridObject.prototype._getOpenLenght=function(t,e){var i=this._h2.get[t].childs;e+=i.length;for(var s=0;s<i.length;s++)i[s].childs.length&&"minus"==i[s].state&&(e+=this._getOpenLenght(i[s].id,0));return e},dhtmlXGridObject.prototype.collapseKids=function(t){var e=this._h2.get[t.idd];if("minus"==e.state&&this.callEvent("onOpenStart",[t.idd,1])){var i=t.rowIndex;if(0>i&&(i=this.rowsCol._dhx_find(t)+1),this._h2.change(e.id,"state","plus"),this._updateTGRState(e),this._srnd||this.pagingOn)this._h2_to_buff(),this._renderSort();else{for(var s=this._getOpenLenght(this.rowsCol[i-1].idd,0),n=0;s>n;n++)this.rowsCol[i+n].parentNode.removeChild(this.rowsCol[i+n]);this.rowsCol.splice(i,s)}this.callEvent("onGridReconstructed",[]),this.setSizes(),this._h2_to_buff(),this.callEvent("onOpenEnd",[t.idd,-1])}},dhtmlXGridObject.prototype._massInsert=function(t,e,i){var s=[],n=_isKHTML?this.obj:this.obj.rows[0].parentNode;if(this._h2_to_buff(),this._srnd||this.pagingOn)return this._renderSort();for(var o=this._getOpenLenght(t.id,0),l=0;o>l;l++){var r=this.render_row(i+l);e?e.parentNode.insertBefore(r,e):n.appendChild(r),s.push(r)}return this.rowsCol=dhtmlxArray(this.rowsCol.slice(0,i).concat(s).concat(this.rowsCol.slice(i))),t.childs.length+s.length},dhtmlXGridObject.prototype.expandKids=function(t,e){var i=this._h2.get[t.idd];if((i.childs.length||i._xml_await)&&"plus"==i.state&&(i._loading||e||this.callEvent("onOpenStart",[i.id,-1]))){var s=this.getRowIndex(i.id)+1;if(i.childs.length){i._loading=!1,this._h2.change(i.id,"state","minus"),this._updateTGRState(i);{this._massInsert(i,this.rowsCol[s],s)}this.callEvent("onGridReconstructed",[])}else i._xml_await&&(i._loading=!0,this.callEvent("onDynXLS",[i.id])&&this.load(this.kidsXmlFile+""+(-1!=this.kidsXmlFile.indexOf("?")?"&":"?")+"id="+encodeURIComponent(i.id),this._data_type));this.setSizes(),i._loading||this.callEvent("onOpenEnd",[i.id,1]),this._fixAlterCss()}},dhtmlXGridObject.prototype.kidsXmlFile="",dhtmlXGridObject.prototype.sortTreeRows=function(t,e,i){var s="getValue";this.cells5({parentNode:{grid:this}},this.getColType(t)).getDate&&(s="getDate",e="str"),this.forEachRow(function(i){var n=this._h2.get[i];if(n){var o=this._get_cell_value(n.buff,t,s);"int"==e?(n._sort=parseFloat(o),n._sort=isNaN(n._sort)?-99999999999999:n._sort):n._sort=o}});var n=this,o=1,l=-1;"des"==i&&(o=-1,l=1);var r=null;"function"==typeof e?r=function(t,s){return e(t._sort,s._sort,i,t.id,s.id)}:("cus"==e&&(r=function(e,s){return n._customSorts[t](e._sort,s._sort,i,e.id,s.id)}),"str"==e&&(r=function(t,e){return t._sort<e._sort?l:t._sort==e._sort?0:o}),"int"==e&&(r=function(t,e){return t._sort<e._sort?l:t._sort==e._sort?0:o}),"date"==e&&(r=function(t,e){return(Date.parse(new Date(t._sort||"01/01/1900"))-Date.parse(new Date(e._sort||"01/01/1900")))*o})),this._sortTreeRows(r,0),this._renderSort(0,!0),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._sortTreeRows=function(t,e){var i=this._h2.get[e].childs;this.rowsCol.stablesort?this.rowsCol.stablesort.call(i,t):i.sort(t);for(var s=0;s<i.length;s++)i[s].childs.length&&this._sortTreeRows(t,i[s].id),i[s].index=s},dhtmlXGridObject.prototype._renderSort=function(){this._h2_to_buff();var t=this.objBox.scrollTop;this._reset_view(),this.objBox.scrollTop=t},dhtmlXGridObject.prototype._fixAlterCssTGR=function(){this._realfake||this._h2.forEachChild(0,function(t){if("TR"==t.buff.tagName){var e=(this._cssSP?t.level%2:t.index%2)?this._cssUnEven:this._cssEven;this.rowsAr[t.id].className=e+(this._cssSU?" "+e+"_"+t.level:"")+" "+(this.rowsAr[t.id]._css||"")+(-1!=this.rowsAr[t.id].className.indexOf("rowselected")?" rowselected":"")
}},this)},dhtmlXGridObject.prototype.moveRowUDTG=function(t,e){var i=this._h2.get[t],s=i.parent.childs[i.index+e];if(s&&s.parent==i.parent){var n=[i.state,s.state];this.collapseKids(this.rowsAr[i.id]),this.collapseKids(this.rowsAr[s.id]);var o=this.rowsCol._dhx_find(this.rowsAr[t]),l=this.rowsBuffer._dhx_find(this.rowsAr[t]),r=this.obj.rows[0].parentNode.removeChild(this.rowsCol[o]),a=this.rowsCol[o+(1==e?2:e)];a?a.parentNode.insertBefore(r,a):this.obj.rows[0].parentNode.appendChild(r),this.rowsCol._dhx_swapItems(o,o+e),this.rowsBuffer._dhx_swapItems(l,l+e),this._h2.swap(s,i),"minus"==n[0]&&this.expandKids(this.rowsAr[i.id]),"minus"==n[1]&&this.expandKids(this.rowsAr[s.id]),this._fixAlterCss(Math.min(o,o+e))}},eXcell_tree.prototype=new eXcell,eXcell_tree.prototype.setValueA=function(t){this.cell.parentNode.valTag.innerHTML=t,this.grid.callEvent("onCellChanged",[this.cell.parentNode.idd,this.cell._cellIndex,t])},eXcell_tree.prototype.setValue=function(t){if(this.cell.parentNode.imgTag)return this.setLabel(t);if(null==this.grid._tgc.iconTree||this.grid._tgc.iconTree!=this.grid.iconTree){var e={};e.spacer="<img src='"+this.grid.iconTree+"blank.gif'  align='top' class='space'>",e.imst="<img style='margin-top:-2px;' src='"+this.grid.iconTree,e.imsti="<img style='padding-top:2px;'  src='"+(this.grid.iconURL||this.grid.iconTree),e.imact="' align='top' onclick='this."+(_isKHTML?"":"parentNode.")+"parentNode.parentNode.parentNode.parentNode.grid.doExpand(this);event.cancelBubble=true;'>",e.plus=e.imst+"plus.gif"+e.imact,e.minus=e.imst+"minus.gif"+e.imact,e.blank=e.imst+"blank.gif"+e.imact,e.start="<div class='treegrid_cell' style='overflow:hidden; white-space : nowrap; line-height:23px; height:"+(_isIE?21:23)+"px;'>",e.itemim="' align='top' "+(this.grid._img_height?' height="'+this.grid._img_height+'"':"")+(this.grid._img_width?' width="'+this.grid._img_width+'"':"")+" ><span id='nodeval'>",e.close="</span></div>",this.grid._tgc=e}var e=(this.grid._h2,this.grid._tgc),i=this.cell.parentNode.idd,s=this.grid._h2.get[i];(this.grid.kidsXmlFile||this.grid._slowParse)&&(s.has_kids=s.has_kids||this.cell.parentNode._attrs.xmlkids&&"minus"!=s.state,s._xml_await=!!s.has_kids),s.image=s.image||this.cell._attrs.image||"leaf.gif",s.label=t;for(var n=[e.start],o=0;o<s.level;o++)n.push(e.spacer);s.has_kids?(n.push(e.plus),s.state="plus"):n.push(e.imst+s.state+".gif"+e.imact),n.push(e.imsti),n.push(s.image),n.push(e.itemim),n.push(s.label),n.push(e.close),this.cell.innerHTML=n.join(""),this.cell._treeCell=!0,this.cell.parentNode.imgTag=this.cell.childNodes[0].childNodes[s.level],this.cell.parentNode.valTag=this.cell.childNodes[0].childNodes[s.level+2],_isKHTML&&(this.cell.vAlign="top"),0!=s.parent.id&&"plus"==s.parent.state&&(this.grid._updateTGRState(s.parent,!1),this.cell.parentNode._skipInsert=!0),this.grid.callEvent("onCellChanged",[i,this.cell._cellIndex,t])},dhtmlXGridObject.prototype._process_tree_xml=function(t,e,i){this._parsing=!0;var s=!1;e||(this.render_row=this.render_row_tree,s=!0,e=t.getXMLTopNode(this.xml.top),i=e.getAttribute("parent")||0,"0"==i&&(i=0),this._h2||(this._h2=new dhtmlxHierarchy),this._fake&&(this._fake._h2=this._h2));var n=t.doXPath(this.xml.row,e);this._open=this._open||[];for(var o=0;o<n.length;o++){var l=n[o].getAttribute("id");l||(l=this.uid(),n[o].setAttribute("id",l));var r=this._h2.add(l,i);r.buff={idd:l,data:n[o],_parser:this._process_xml_row,_locator:this._get_xml_data},n[o].getAttribute("open")&&(r.state="minus",this._open.push(l)),this.rowsAr[l]=r.buff,this._process_tree_xml(t,n[o],l)}if(s){n.length?0==i||this._srnd||this._h2.change(i,"state","minus"):this._h2.change(i,"state",dhtmlXGridObject._emptyLineImg);for(var o=0;o<this._open.length;o++){var a=this._h2.get[this._open[o]];a.childs.length||(a.state=dhtmlXGridObject._emptyLineImg)}if(this._updateTGRState(this._h2.get[i]),this._h2_to_buff(),0!=i&&this._srnd?this.openItem(i):this.pagingOn?this._renderSort():this.render_dataset(),this.kidsXmlFile)for(var o=0;o<this._open.length;o++){var a=this._h2.get[this._open[o]];a._xml_await&&this.expandKids({idd:a.id})}this._open=[],this._slowParse===!1&&this.forEachRow(function(t){this.render_row_tree(0,t)}),this._parsing=!1,0==i||this._srnd||this.callEvent("onOpenEnd",[i,1])}return t.xmlDoc.responseXML?t.xmlDoc.responseXML:t.xmlDoc},dhtmlXGridObject.prototype._h2_to_buff=function(t){t||(t=this._h2.get[0],this.rowsBuffer=new dhtmlxArray,this._fake&&!this._realfake&&(this._fake.rowsBuffer=this.rowsBuffer));for(var e=0;e<t.childs.length;e++)this.rowsBuffer.push(t.childs[e].buff),"minus"==t.childs[e].state&&this._h2_to_buff(t.childs[e])},dhtmlXGridObject.prototype.render_row_tree=function(t,e){if(e){var i=this._h2.get[e];i=i?i.buff:i}else var i=this.rowsBuffer[t];if(!i)return-1;if(i._parser){if(this.rowsAr[i.idd]&&"TR"==this.rowsAr[i.idd].tagName)return this._h2.get[i.idd].buff=this.rowsBuffer[t]=this.rowsAr[i.idd];var s=this._prepareRow(i.idd);return this.rowsAr[i.idd]=s,e||(this.rowsBuffer[t]=s),this._h2.get[i.idd].buff=s,i._parser.call(this,s,i.data),this._postRowProcessing(s),s}return i},dhtmlXGridObject.prototype._removeTrGrRow=function(t,e){if(e)return void this._h2.forEachChild(e.id,function(t){this._removeTrGrRow(null,t),delete this.rowsAr[t.id]},this);var i=this.getRowIndex(t.idd),e=this._h2.get[t.idd];if(-1!=i&&i!==this.undefined){var s=1;e&&"minus"==e.state&&(s+=this._getOpenLenght(e.id,0));for(var n=0;s>n;n++)this.rowsCol[n+i]&&this.rowsCol[n+i].parentNode.removeChild(this.rowsCol[n+i]);if(this._fake){for(var n=0;s>n;n++)this._fake.rowsCol[n+i]&&this._fake.rowsCol[n+i].parentNode.removeChild(this._fake.rowsCol[n+i]);s>1&&this._fake.rowsCol.splice(i+1,s-1)}this.rowsCol.splice(i,s),this.rowsBuffer.splice(i,s)}e&&(this._removeTrGrRow(null,e),delete this.rowsAr[e.id],1==e.parent.childs.length&&(this._h2.change(e.parent.id,"state",dhtmlXGridObject._emptyLineImg),this._updateTGRState(e.parent)),this._h2.remove(e.id))},dhtmlXGridObject.prototype.openItem=function(t){var e=this._h2.get[t||0],i=this.getRowById(t||0);i&&(e.parent&&0!=e.parent.id&&this.openItem(e.parent.id),this.expandKids(i))},dhtmlXGridObject.prototype._addRowClassic=dhtmlXGridObject.prototype.addRow,dhtmlXGridObject.prototype.addRow=function(t,e,i,s,n,o){if(!this._h2)return this._addRowClassic(t,e,i);s=s||0;this.cellType._dhx_find("tree");"string"==typeof e&&(e=e.split(this.delim));var l=this._h2.get[t];return l||(0==s?i=this.rowsBuffer.length:(i=this.getRowIndex(s)+1,"minus"==this._h2.get[s].state?i+=this._getOpenLenght(s,0):this._skipInsert=!0)),l=l||this._h2.add(t,s),l.image=n,l.has_kids=o,l.buff=this._addRowClassic(t,e,i)},dhtmlXGridObject.prototype.addRowBefore=function(t,e,i,s,n){var o=this.rowsAr[i];if(o){if(!this._h2)return this.addRow(t,e,this.getRowIndex(i));var l=this._h2.get[i].parent.id,r=this.getRowIndex(i);return-1==r&&(this._skipInsert=!0),this._h2.addBefore(t,l,i),this.addRow(t,e,r,this._h2.get[i].parent.id,s,n)}},dhtmlXGridObject.prototype.addRowAfter=function(t,e,i,s,n){var o=this.rowsAr[i];if(o){if(!this._h2)return this.addRow(t,e,this.getRowIndex(i)+1);var l=this._h2.get[i].parent.id,r=this.getRowIndex(i);return-1==r&&(this._skipInsert=!0),"minus"==this._h2.get[i].state?r+=this._getOpenLenght(i,0)+1:r++,this._h2.addAfter(t,l,i),this.addRow(t,e,r,l,s,n)}},dhtmlXGridObject.prototype.enableSmartXMLParsing=function(t){this._slowParse=convertStringToBoolean(t)},dhtmlXGridObject.prototype._copyTreeGridRowContent=function(t,e,s){var n=this.cellType._dhx_find("tree");for(i=0;i<t.cells.length;i++)i!=n?this.cells(s,i).setValue(this.cells(e,i).getValue()):this.cells(s,i).setValueA(this.cells(e,i).getValue())},dhtmlXGridObject.prototype.closeItem=function(t){var e=this.getRowById(t);e&&this.collapseKids(e)},dhtmlXGridObject.prototype.deleteChildItems=function(t){var e=this._h2.get[t];if(e)for(;e.childs.length;)this.deleteRow(e.childs[0].id)},dhtmlXGridObject.prototype.getAllSubItems=function(t){var e=[],i=this._h2.get[t||0];if(i)for(var s=0;s<i.childs.length;s++)e.push(i.childs[s].id),i.childs[s].childs.length&&(e=e.concat(this.getAllSubItems(i.childs[s].id).split(this.delim)));return e.join(this.delim)},dhtmlXGridObject.prototype.getChildItemIdByIndex=function(t,e){var i=this._h2.get[t||0];return i&&i.childs[e]?i.childs[e].id:null},dhtmlXGridObject.prototype.getItemText=function(t){return this.cells(t,this.cellType._dhx_find("tree")).getLabel()},dhtmlXGridObject.prototype.getOpenState=function(t){var e=this._h2.get[t||0];if(e)return"minus"==e.state?!0:!1},dhtmlXGridObject.prototype.getParentId=function(t){var e=this._h2.get[t||0];return e&&e.parent?e.parent.id:null},dhtmlXGridObject.prototype.getSubItems=function(t){var e=[],i=this._h2.get[t||0];if(i)for(var s=0;s<i.childs.length;s++)e.push(i.childs[s].id);return e.join(this.delim)},dhtmlXGridObject.prototype.expandAll=function(t){this._renderAllExpand(t||0),this._h2_to_buff(),this._reset_view(),this.setSizes(),this.callEvent("onGridReconstructed",[]),this._redrawLines&&this._redrawLines()},dhtmlXGridObject.prototype._renderAllExpand=function(t){for(var e=this._h2.get[t].childs,i=0;i<e.length;i++)e[i].childs.length&&(this._h2.change(e[i].id,"state","minus"),this._updateTGRState(e[i]),this._renderAllExpand(e[i].id))},dhtmlXGridObject.prototype.collapseAll=function(t){this._h2.forEachChild(t||0,function(t){t&&"minus"==t.state&&(t.state="plus",t.update=!0,this._updateTGRState(t))},this),this._h2_to_buff(),this._reset_view(),this.setSizes(),this.callEvent("onGridReconstructed",[]),this._redrawLines&&this._redrawLines()},dhtmlXGridObject.prototype.hasChildren=function(t){var e=this._h2.get[t];return e&&e.childs.length?e.childs.length:e._xml_await?-1:0},dhtmlXGridObject.prototype.setItemCloseable=function(t,e){var i=this._h2.get[t];i&&(i._closeable=!convertStringToBoolean(e))},dhtmlXGridObject.prototype.setItemText=function(t,e){return this.cells(t,this.cellType._dhx_find("tree")).setLabel(e)},dhtmlXGridObject.prototype.setItemImage=function(t,e){this._h2.get[t].image=e,this.rowsAr[t].imgTag.nextSibling.src=(this.iconURL||"")+e},dhtmlXGridObject.prototype.getItemImage=function(t){return this.getRowById(t),this._h2.get[t].image},dhtmlXGridObject.prototype.setImageSize=function(t,e){this._img_width=t,this._img_height=e},dhtmlXGridObject.prototype._getRowImage=function(t){return this._h2.get[t.idd].image},dhtmlXGridObject.prototype.setOnOpenStartHandler=function(t){this.attachEvent("onOpenStart",t)},dhtmlXGridObject.prototype.setOnOpenEndHandler=function(t){this.attachEvent("onOpenEnd",t)},dhtmlXGridObject.prototype.enableTreeCellEdit=function(t){this._edtc=!convertStringToBoolean(t)},dhtmlXGridObject.prototype.getLevel=function(t){var e=this._h2.get[t||0];return e?e.level:-1},dhtmlXGridObject.prototype._fixHiddenRowsAllTG=function(t,e){for(i in this.rowsAr)this.rowsAr[i]&&this.rowsAr[i].childNodes&&(this.rowsAr[i].childNodes[t].style.display=e)},dhtmlXGridObject._emptyLineImg="blank",dhtmlXGridObject.prototype._updateLine=function(t,e){if(e=e||this.rowsAr[t.id]){var i=e.imgTag;if(i){if("blank"==t.state)return i.src=this.iconTree+"blank.gif";var s=1;s=0==t.index&&0==t.level?t.parent.childs.length-1>t.index?3:1:t.parent.childs.length-1>t.index?3:2,i.src=this.iconTree+t.state+s+".gif"}}},dhtmlXGridObject.prototype._updateParentLine=function(t,e){if(e=e||this.rowsAr[t.id]){var i=e.imgTag;if(i)for(var s=t.level;s>0&&0!=t.id;s--)i=i.previousSibling,t=t.parent,i.src=t.parent.childs.length-1>t.index?this.iconTree+"line1.gif":this.iconTree+"blank.gif"}},dhtmlXGridObject.prototype._renderSortA=dhtmlXGridObject.prototype._renderSort,dhtmlXGridObject.prototype._renderSort=function(){this._renderSortA.apply(this,arguments),this._redrawLines(0)},dhtmlXGridObject.prototype._redrawLines=function(t){this._tgle&&this._h2.forEachChild(t||0,function(t){this._updateLine(t),this._updateParentLine(t)},this)},dhtmlXGridObject.prototype.enableTreeGridLines=function(){dhtmlXGridObject._emptyLineImg="line",this._updateTGRState=function(t,e){!e&&t.update&&0!=t.id&&(this._tgle&&this._updateLine(t,this.rowsAr[t.id]),t.update=!1)},this._tgle=!0,this.attachEvent("onXLE",function(t,e,i){this._redrawLines(i)}),this.attachEvent("onOpenEnd",function(t){this._redrawLines(t)}),this.attachEvent("onRowAdded",function(t){var e=this._h2.get[t];this._updateLine(e),this._updateParentLine(e),e.index<e.parent.childs.length-1?(e=e.parent.childs[e.index+1],this._updateLine(e),this._updateParentLine(e)):0!=e.index&&(e=e.parent.childs[e.index-1],this._updateLine(e),this._updateParentLine(e),e.childs.length&&this._h2.forEachChild(e.id,function(t){this._updateParentLine(t)},this))}),this.attachEvent("onOpen",function(t,e){if(e)for(var i=this._h2.get[t],s=0;s<i.childs.length;s++)this._updateParentLine(i.childs[s]);return!0}),this.attachEvent("onBeforeRowDeleted",function(t){var e=this,i=this._h2.get[t],s=null;return 0!=i.index&&(s=i.parent.childs[i.index-1]),i=i.parent,window.setTimeout(function(){i=e._h2.get[i.id],i&&(e._updateLine(i),e._updateParentLine(i),s&&(e._updateLine(s),"minus"==s.state&&e._h2.forEachChild(s.id,function(t){e._updateParentLine(t)},e)))},1),!0})},dhtmlXGridObject.prototype.setFiltrationLevel=function(t,e,i){this._tr_strfltr=t,this._tr_fltr_c=e,this._tr_fltr_d=i,this.refreshFilters()},dhtmlXGridObject.prototype.filterTreeBy=function(t,e,i){var s=this._h2;"undefined"==typeof this._tr_strfltr&&(this._tr_strfltr=-1),this._f_rowsBuffer?i||(this._h2=this._f_rowsBuffer,this._fake&&(this._fake._h2=this._h2)):this._f_rowsBuffer=this._h2;if(this.dma(!0),this._fbf={},"object"==typeof t)for(var n=0;n<e.length;n++)this._filterTreeA(t[n],e[n]);else this._filterTreeA(t,e);this._fbf=null,this.dma(!1),this._fix_filtered_images(this._h2,s),this._renderSort(),this.callEvent("onGridReconstructed",[])},dhtmlXGridObject.prototype._filterTreeA=function(t,e){if(""!=e){var i=!0;"function"==typeof e?i=!1:e=(e||"").toString().toLowerCase();var s,n=function(t,e,i){var s=i.get[t.parent.id];s||(s=n(t.parent,e,i));var i=l.get[t.id];return i||(i={id:t.id,childs:[],level:t.level,parent:s,index:s.childs.length,image:t.image,state:t.state,buff:t.buff,has_kids:t.has_kids,_xml_await:t._xml_await},s.childs.push(i),l.get[i.id]=i),i},o=this._fbf,l=new dhtmlxHierarchy,r=this._tr_strfltr,a=this,h=function(t){for(var e=0;e<t.childs.length;e++)a.temp(t.childs[e])};switch(r.toString()){case"-2":s=function(t){return o[t.id]?!1:(h(t),!0)};break;case"-1":s=function(t){return!t.childs.length};break;default:s=function(t){return r==t.level}}this.temp=function(a){return 0!=a.id&&s(a)?(i?-1!=this._get_cell_value(a.buff,t).toString().toLowerCase().indexOf(e):e(this._get_cell_value(a.buff,t),a.id))?(n(a,this._h2,l),a.childs&&-2!=r&&this._h2.forEachChild(a.id,function(t){n(t,this._h2,l)},this),!0):(o[a.id]=!0,this._tr_fltr_c&&n(a.parent,this._h2,l),!1):(this._tr_fltr_d&&this._tr_strfltr>a.level&&0!=a.id&&n(a,this._h2,l),void h(a))},this.temp(this._h2.get[0]),this._h2=l,this._fake&&(this._fake._h2=this._h2)}},dhtmlXGridObject.prototype._fix_filtered_images=function(t,e){t.forEachChild(0,function(t){if(t.childs.length||t.has_kids){if("TR"==t.buff.tagName){var i=e.get[t.id];i&&i.state!=dhtmlXGridObject._emptyLineImg&&(t.state=i.state),t.update=!0,this._updateTGRState(t)}}else t.state!=dhtmlXGridObject._emptyLineImg&&(t.state=dhtmlXGridObject._emptyLineImg,t.update=!0,this._updateTGRState(t))},this)},dhtmlXGridObject.prototype.collectTreeValues=function(t){"undefined"==typeof this._tr_strfltr&&(this._tr_strfltr=-1),this.dma(!0),this._build_m_order(),t=this._m_order?this._m_order[t]:t;var e={},i=[],s=this._f_rowsBuffer||this._h2;s.forEachChild(0,function(i){if(-2==this._tr_strfltr||-1==this._tr_strfltr&&!i.childs.length||this._tr_strfltr==i.level){var s=this._get_cell_value(i.buff,t);s&&(e[s]=!0)}},this),this.dma(!1);var n=this.combos[t];for(var o in e)e[o]===!0&&i.push(n?n.get(o)||o:o);return i.sort()},dhtmlXGridObject.prototype._in_header_stat_tree_total=function(t,e,i){var s=function(){var t=0;this._build_m_order();var i=this._m_order?this._m_order[e]:e;return this._h2.forEachChild(0,function(e){var s=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],i));t+=isNaN(s)?0:s},this),this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100};this._stat_in_header(t,s,e,i,i)},dhtmlXGridObject.prototype._in_header_stat_tree_total_leaf=function(t,e,i){var s=function(){var t=0;this._build_m_order();var i=this._m_order?this._m_order[e]:e;return this._h2.forEachChild(0,function(e){if(!e.childs.length){var s=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],i));t+=isNaN(s)?0:s}},this),this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100};this._stat_in_header(t,s,e,i,i)},dhtmlXGridObject.prototype._in_header_stat_tree_multi_total=function(t,e,i){var s=i[1].split(":");i[1]="";var n=function(){var t=0;return this._h2.forEachChild(0,function(e){var i=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],s[0]))*parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],s[1]));t+=isNaN(i)?0:i},this),this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100};this._stat_in_header(t,n,e,i,i)},dhtmlXGridObject.prototype._in_header_stat_tree_multi_total_leaf=function(t,e,i){var s=i[1].split(":");i[1]="";var n=function(){var t=0;return this._h2.forEachChild(0,function(e){if(!e.childs.length){var i=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],s[0]))*parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],s[1]));t+=isNaN(i)?0:i}},this),this._maskArr[e]?this._aplNF(t,e):Math.round(100*t)/100};this._stat_in_header(t,n,e,i,i)},dhtmlXGridObject.prototype._in_header_stat_tree_max=function(t,e,i){var s=function(){var t=-999999999;this._build_m_order();var i=this._m_order?this._m_order[e]:e;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(e){var s=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],i));isNaN(s)||(t=Math.max(t,s))},this),this._maskArr[e]?this._aplNF(t,e):t)};this._stat_in_header(t,s,e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_min=function(t,e,i){var s=function(){var t=999999999;this._build_m_order();var i=this._m_order?this._m_order[e]:e;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(e){var s=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],i));isNaN(s)||(t=Math.min(t,s))},this),this._maskArr[e]?this._aplNF(t,e):t)};this._stat_in_header(t,s,e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_average=function(t,e,i){var s=function(){var t=0,i=0;this._build_m_order();var s=this._m_order?this._m_order[e]:e;return this._h2.forEachChild(0,function(e){var n=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],s));t+=isNaN(n)?0:n,i++},this),this._maskArr[e]?this._aplNF(t,e):Math.round(t/i*100)/100};this._stat_in_header(t,s,e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_max_leaf=function(t,e,i){var s=function(){var t=-999999999;this._build_m_order();var i=this._m_order?this._m_order[e]:e;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(e){if(!e.childs.length){var s=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],i));isNaN(s)||(t=Math.max(t,s))}},this),this._maskArr[e]?this._aplNF(t,e):t)};this._stat_in_header(t,s,e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_min_leaf=function(t,e,i){var s=function(){var t=999999999;this._build_m_order();var i=this._m_order?this._m_order[e]:e;return 0==this.getRowsNum()?"":(this._h2.forEachChild(0,function(e){if(!e.childs.length){var s=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],i));isNaN(s)||(t=Math.min(t,s))}},this),this._maskArr[e]?this._aplNF(t,e):t)};this._stat_in_header(t,s,e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_average_leaf=function(t,e,i){var s=function(){var t=0,i=0;this._build_m_order();var s=this._m_order?this._m_order[e]:e;return this._h2.forEachChild(0,function(e){if(!e.childs.length){var n=parseFloat(this._get_cell_value(e.buff||this.rowsAr[e.id],s));t+=isNaN(n)?0:n,i++}},this),this._maskArr[e]?this._aplNF(t,e):Math.round(t/i*100)/100};this._stat_in_header(t,s,e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_count=function(t,e,i){var s=function(){var t=0;return this._h2.forEachChild(0,function(){t++},this),t};this._stat_in_header(t,s,e,i)},dhtmlXGridObject.prototype._in_header_stat_tree_count_leaf=function(t,e,i){var s=function(){var t=0;return this._h2.forEachChild(0,function(e){e.childs.length||t++},this),t};this._stat_in_header(t,s,e,i)},dhtmlXGridObject.prototype._stat_in_header=function(t,e,i,s){var n=function(){this.dma(!0),t.innerHTML=(s[0]?s[0]:"")+e.call(this)+(s[1]?s[1]:""),this.dma(!1),this.callEvent("onStatReady",[])};this._stat_events||(this._stat_events=[],this.attachEvent("onClearAll",function(){if(!this.hdr.rows[1]){for(var t=0;t<this._stat_events.length;t++)for(var e=0;4>e;e++)this.detachEvent(this._stat_events[t][e]);this._stat_events=[]}})),this._stat_events.push([this.attachEvent("onGridReconstructed",n),this.attachEvent("onXLE",n),this.attachEvent("onFilterEnd",n),this.attachEvent("onEditCell",function(t,e,s){return 2==t&&s==i&&n.call(this),!0})]),t.innerHTML=""},dhtmlXGridObject.prototype._build_m_order=function(){if(this._c_order){this._m_order=[];for(var t=0;t<this._c_order.length;t++)this._m_order[this._c_order[t]]=t}},dhtmlXForm.prototype.getInput=function(t){return this.doWithItem(t,"getInput")},dhtmlXForm.prototype.getSelect=function(t){return this.doWithItem(t,"getSelect")},dhtmlXForm.prototype.items={},dhtmlXForm.prototype.items.checkbox={render:function(t,e){t._type="ch",t._enabled=!0,t._checked=!1,t._value="undefined"==typeof e.value?null:String(e.value),t._ro=1==e.readonly,e._autoInputWidth!==!1&&(e.inputWidth=14),this.doAddLabel(t,e),this.doAddInput(t,e,"INPUT","TEXT",!0,!0,"dhxform_textarea"),t.childNodes[t._ll?1:0].className+=" dhxform_img_node";var i=document.createElement("DIV");return i.className="dhxform_img chbx0",t.appendChild(i),isNaN(e.inputLeft)||(t.childNodes[t._ll?1:0].style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(t.childNodes[t._ll?1:0].style.top=parseInt(e.inputTop)+"px"),t.childNodes[t._ll?1:0].appendChild(i),t.childNodes[t._ll?1:0].firstChild.value=String(e.value),t._updateImgNode=function(t,e){var i=t.childNodes[t._ll?1:0].lastChild;i.className=(e?"dhxform_actv_c":"dhxform_img")+" "+(t._checked?"chbx1":"chbx0"),t=i=null},t._doOnFocus=function(t){t.getForm().callEvent("onFocus",[t._idd])},t._doOnBlur=function(t){t.getForm().callEvent("onBlur",[t._idd])},t._doOnKeyUpDown=function(t,e){this.callEvent(t,[this.childNodes[this._ll?0:1].childNodes[0],e,this._idd])},1==e.checked&&this.check(t),1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),this.doAttachEvents(t),this},destruct:function(t){t._doOnFocus=t._doOnBlur=t._updateImgNode=null,this.doUnloadNestedLists(t),this.doDestruct(t)},doAddLabel:function(t,e){var i=document.createElement("DIV");i.className="dhxform_label "+e.labelAlign,1==e.wrap&&(i.style.whiteSpace="normal"),t._ll?t.insertBefore(i,t.firstChild):t.appendChild(i),"undefined"!=typeof e.tooltip&&(i.title=e.tooltip),i.innerHTML="<div class='dhxform_label_nav_link' onfocus='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,true);this.parentNode.parentNode._doOnFocus(this.parentNode.parentNode);' onblur='if(this.parentNode.parentNode._updateImgNode)this.parentNode.parentNode._updateImgNode(this.parentNode.parentNode,false);this.parentNode.parentNode._doOnBlur(this.parentNode.parentNode);' onkeypress='var e=event||window.arguments[0];if(e.keyCode==32||e.charCode==32){e.cancelBubble=true;if(e.preventDefault)e.preventDefault();else e.returnValue=false;_dhxForm_doClick(this,\"mousedown\");return false;}' onkeyup='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyUp\",e);' onkeydown='var e=event||window.arguments[0];this.parentNode.parentNode._doOnKeyUpDown(\"onKeyDown\",e);' "+(window.dhx4.isIPad?"ontouchstart='var e=event;e.preventDefault();_dhxForm_doClick(this,\"mousedown\");' ":"")+"role='link' tabindex='0'>"+e.label+(e.info?"<span class='dhxform_info'>[?]</span>":"")+(t._required?"<span class='dhxform_item_required'>*</span>":"")+"</div>",isNaN(e.labelWidth)||(i.firstChild.style.width=parseInt(e.labelWidth)+"px"),isNaN(e.labelHeight)||(i.firstChild.style.height=parseInt(e.labelHeight)+"px"),isNaN(e.labelLeft)||(i.style.left=parseInt(e.labelLeft)+"px"),isNaN(e.labelTop)||(i.style.top=parseInt(e.labelTop)+"px")},doAddInput:function(t,e,i,s,n,o,l){var r=document.createElement("DIV");r.className="dhxform_control",t._ll?t.appendChild(r):t.insertBefore(r,t.firstChild);var a=document.createElement(i);a.className=l,a.name=t._idd,a._idd=t._idd,a.id=e.uid,"string"==typeof s&&(a.type=s),("INPUT"==i||"TEXTAREA"==i)&&(a.onkeyup=function(e){e=e||event,t.callEvent("onKeyUp",[this,e,this._idd])},a.onkeydown=function(e){e=e||event,t.callEvent("onKeyDown",[this,e,this._idd])}),r.appendChild(a),e.readonly&&this.setReadonly(t,!0),1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),n&&(isNaN(e.inputLeft)||(r.style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(r.style.top=parseInt(e.inputTop)+"px"));var h="",d=!1;if(o&&(isNaN(e.inputWidth)||(h+="width:"+parseInt(e.inputWidth)+"px;",d=!0),isNaN(e.inputHeight)||(h+="height:"+parseInt(e.inputHeight)+"px;")),"string"==typeof e.style&&(h+=e.style),a.style.cssText=h,e.maxLength&&a.setAttribute("maxLength",e.maxLength),e.connector&&a.setAttribute("connector",e.connector),d&&{input:1,password:1,select:1,calendar:1,colorpicker:1}[this.t]){if(null==dhtmlXForm.prototype.items[this.t]._dim){var c=parseInt(a.style.width),u=dhx4.isFF||dhx4.isIE?a.offsetWidth:a.clientWidth;dhtmlXForm.prototype.items[this.t]._dim=u-c}a.style.width=parseInt(a.style.width)-dhtmlXForm.prototype.items[this.t]._dim+"px"}if("object"==typeof e.note){var _=document.createElement("DIV");_.className="dhxform_note",_.style.width=(isNaN(e.note.width)?a.offsetWidth:parseInt(e.note.width))+"px",_._w=e.note.width,_.innerHTML=e.note.text,r.appendChild(_),_=null}},doUnloadNestedLists:function(t){if(t._list){for(var e=0;e<t._list.length;e++)t._list[e].unload(),t._list[e]=null,t._listObj[e]=null,t._listBase[e].parentNode.removeChild(t._listBase[e]),t._listBase[e]=null;t._list=null,t._listObj=null,t._listBase=null}},doDestruct:function(t){for(t.callEvent=null,t.checkEvent=null,t.getForm=null,t._autoCheck=null,t._checked=null,t._enabled=null,t._idd=null,t._type=null,t._value=null,t._group=null,t.onselectstart=null,t.childNodes[t._ll?1:0].onmousedown=null,t.childNodes[t._ll?1:0].ontouchstart=null,t.childNodes[t._ll?0:1].onmousedown=null,t.childNodes[t._ll?0:1].ontouchstart=null,t.childNodes[t._ll?0:1].childNodes[0].onfocus=null,t.childNodes[t._ll?0:1].childNodes[0].onblur=null,t.childNodes[t._ll?0:1].childNodes[0].onkeypress=null,t.childNodes[t._ll?0:1].childNodes[0].onkeyup=null,t.childNodes[t._ll?0:1].childNodes[0].onkeydown=null,t.childNodes[t._ll?0:1].childNodes[0].onmousedown=null,t.childNodes[t._ll?0:1].childNodes[0].ontouchstart=null,t.childNodes[t._ll?0:1].removeChild(t.childNodes[t._ll?0:1].childNodes[0]);t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t.parentNode.removeChild(t),t=null},doAttachEvents:function(t){var e=this;t.childNodes[t._ll?1:0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(t){t=t||event,t.preventDefault&&t.preventDefault();var i=t.target||t.srcElement;return!this.parentNode._enabled||this.parentNode._ro||"undefined"!=typeof i.className&&"dhxform_note"==i.className?(t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1):void e.doClick(this.parentNode)},t.childNodes[t._ll?0:1].childNodes[0][window.dhx4.isIPad?"ontouchstart":"onmousedown"]=function(t){if(t=t||event,t.preventDefault&&t.preventDefault(),!this.parentNode.parentNode._enabled)return t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1;var i=t.target||t.srcElement;return"undefined"!=typeof i.className&&"dhxform_info"==i.className?(this.parentNode.parentNode.callEvent("onInfo",[this.parentNode.parentNode._idd,t]),t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1):void e.doClick(this.parentNode.parentNode)}},doClick:function(t){t.childNodes[t._ll?0:1].childNodes[0].focus(),t._enabled&&!t._ro&&(t.checkEvent("onBeforeChange")&&t.callEvent("onBeforeChange",[t._idd,t._value,t._checked])!==!0||(this.setChecked(t,!t._checked),t._autoCheck(),t.callEvent("onChange",[t._idd,t._value,t._checked])))},doCheckValue:function(t){t._checked&&t._enabled?(t.childNodes[t._ll?1:0].firstChild.name=String(t._idd),t.childNodes[t._ll?1:0].firstChild.value=this.getValue(t)):(t.childNodes[t._ll?1:0].firstChild.name="",t.childNodes[t._ll?1:0].firstChild.value="")},setChecked:function(t,e){t._checked=e===!0?!0:!1,t.childNodes[t._ll?1:0].lastChild.className=t.childNodes[t._ll?1:0].lastChild.className.replace(/chbx[0-1]{1}/gi,"")+(t._checked?" chbx1":" chbx0"),this.doCheckValue(t)},check:function(t){this.setChecked(t,!0)},unCheck:function(t){this.setChecked(t,!1)},isChecked:function(t){return t._checked},enable:function(t){String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._enabled=!0,t.childNodes[t._ll?0:1].childNodes[0].tabIndex=0,t.childNodes[t._ll?0:1].childNodes[0].removeAttribute("disabled"),this.doCheckValue(t)},disable:function(t){String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._enabled=!1,t.childNodes[t._ll?0:1].childNodes[0].tabIndex=-1,t.childNodes[t._ll?0:1].childNodes[0].setAttribute("disabled","true"),this.doCheckValue(t)},isEnabled:function(t){return t._enabled},setText:function(t,e){t.childNodes[t._ll?0:1].childNodes[0].innerHTML=e+(t._required?"<span class='dhxform_item_required'>*</span>":"")},getText:function(t){return t.childNodes[t._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},setValue:function(t,e){this.setChecked(t,e===!0||1==parseInt(e)||"true"==e||t._value===e)},getValue:function(t,e){return"realvalue"==e?t._value:"undefined"==typeof t._value||null==t._value?t._checked?1:0:t._value},setReadonly:function(t,e){t._ro=e===!0},isReadonly:function(t){return t._ro},setFocus:function(t){t.childNodes[t._ll?0:1].childNodes[0].focus()}},dhtmlXForm.prototype.items.radio={input:{},r:{},firstValue:{},render:function(t,e,i){t._type="ra",t._enabled=!0,t._checked=!1,t._group=e.name,t._value=e.value,t._uid=i,t._ro=1==e.readonly,t._rName=t._rId+t._group,this.r[t._idd]=t,e.inputWidth=14,this.doAddLabel(t,e),this.doAddInput(t,e,"INPUT","TEXT",!0,!0,"dhxform_textarea"),t.childNodes[t._ll?1:0].className+=" dhxform_img_node";var s=document.createElement("DIV");if(s.className="dhxform_img rdbt0",t.appendChild(s),isNaN(e.inputLeft)||(t.childNodes[t._ll?1:0].style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(t.childNodes[t._ll?1:0].style.top=parseInt(e.inputTop)+"px"),t.childNodes[t._ll?1:0].appendChild(s),t.childNodes[t._ll?1:0].firstChild.name="",t.childNodes[t._ll?1:0].firstChild.value="",t._updateImgNode=function(t,e){var i=t.childNodes[t._ll?1:0].lastChild;i.className=(e?"dhxform_actv_r":"dhxform_img")+" "+(t._checked?"rdbt1":"rdbt0"),t=i=null},t._doOnFocus=function(t){t.getForm().callEvent("onFocus",[t._group,t._value])},t._doOnBlur=function(t){t.getForm().callEvent("onBlur",[t._group,t._value])},t._doOnKeyUpDown=function(t,e){this.callEvent(t,[this.childNodes[this._ll?0:1].childNodes[0],e,this._group,this._value])},null==this.input[t._rName]){var n=document.createElement("INPUT");n.type="HIDDEN",n.name=e.name,n.firstValue=t._value,t.appendChild(n),this.input[t._rName]=n}return this.firstValue[t._rName]||(this.firstValue[t._rName]=e.value),1==e.checked&&this.check(t),1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),this.doAttachEvents(t),this},destruct:function(t){if(t.lastChild==this.input[t._rName]){var e=!1;for(var i in this.r)e||this.r[i]._group!=t._group||this.r[i]._idd==t._idd||(this.r[i].appendChild(this.input[t._rName]),e=!0);e||(this.input[t._rName].parentNode.removeChild(this.input[t._rName]),this.input[t._rName]=null,this.firstValue[t._rName]=null)
}var s=t._idd;return t._doOnFocus=t._doOnBlur=t._updateImgNode=null,this.doUnloadNestedLists(t),this.doDestruct(t),s},doClick:function(t){if(t.childNodes[t._ll?0:1].childNodes[0].focus(),t._enabled&&!t._checked&&!t._ro){var e=[t._group,t._value,!0];t.checkEvent("onBeforeChange")&&t.callEvent("onBeforeChange",e)!==!0||(this.setChecked(t,!0),t.getForm()._autoCheck(),t.callEvent("onChange",e))}},doCheckValue:function(t){var e=null;for(var i in this.r)this.r[i]._checked&&this.r[i]._group==t._group&&this.r[i]._rId==t._rId&&(e=this.r[i]._value);null!=e&&this.r[i]._enabled?(this.input[t._rName].name=String(t._group),this.input[t._rName].value=e):(this.input[t._rName].name="",this.input[t._rName].value=""),this.input[t._rName]._value=e},setChecked:function(t,e){e=e===!0;for(var i in this.r)if(this.r[i]._group==t._group&&this.r[i]._rId==t._rId){var s=!1;if(this.r[i]._idd==t._idd?this.r[i]._checked!=e&&(this.r[i]._checked=e,s=!0):this.r[i]._checked&&(this.r[i]._checked=!1,s=!0),s){var n=this.r[i].childNodes[this.r[i]._ll?1:0].childNodes[1];n.className=n.className.replace(/rdbt[0-1]{1}/gi,"")+(this.r[i]._checked?" rdbt1":" rdbt0"),n=null}}this.doCheckValue(t)},getChecked:function(t){return this.input[t._rName]._value},_getFirstValue:function(t){return this.firstValue[t._rName]},_getId:function(t){return t._idd},setValue:function(){}},function(){for(var t in{doAddLabel:1,doAddInput:1,doDestruct:1,doUnloadNestedLists:1,doAttachEvents:1,check:1,unCheck:1,isChecked:1,enable:1,disable:1,isEnabled:1,setText:1,getText:1,getValue:1,setReadonly:1,isReadonly:1,setFocus:1})dhtmlXForm.prototype.items.radio[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.items.select={render:function(t,e){return t._type="se",t._enabled=!0,t._value=null,t._newValue=null,(window.dhx4.isFF||window.dhx4.isIE&&"number"==typeof e.inputWidth)&&(e.inputWidth=Number(e.inputWidth)),this.doAddLabel(t,e),this.doAddInput(t,e,"SELECT",null,!0,!0,"dhxform_select"),this.doAttachEvents(t),this.doLoadOpts(t,e),null!=e.connector&&this.doLoadOptsConnector(t,e.connector),"undefined"!=typeof e.value&&null!=e.value&&this.setValue(t,e.value),this},destruct:function(t){for(this.doUnloadNestedLists(t),t.callEvent=null,t.checkEvent=null,t.getForm=null,t._autoCheck=null,t._enabled=null,t._idd=null,t._type=null,t._value=null,t._newValue=null,t.onselectstart=null,t.childNodes[t._ll?1:0].childNodes[0].onclick=null,t.childNodes[t._ll?1:0].childNodes[0].onkeydown=null,t.childNodes[t._ll?1:0].childNodes[0].onchange=null,t.childNodes[t._ll?1:0].childNodes[0].onfocus=null,t.childNodes[t._ll?1:0].childNodes[0].onblur=null,t.childNodes[t._ll?1:0].childNodes[0].onkeyup=null,t.childNodes[t._ll?1:0].removeChild(t.childNodes[t._ll?1:0].childNodes[0]);t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t.parentNode.removeChild(t),t=null},doAddLabel:function(t,e){var i=document.createElement("DIV");i.className="dhxform_label "+e.labelAlign,i.innerHTML="<label for='"+e.uid+"'>"+e.label+(e.info?"<span class='dhxform_info'>[?]</span>":"")+(t._required?"<span class='dhxform_item_required'>*</span>":"")+"</label>",1==e.wrap&&(i.style.whiteSpace="normal"),"undefined"!=typeof e.tooltip&&(i.title=e.tooltip),t.appendChild(i),("undefined"==typeof e.label||null==e.label||0==e.label.length)&&(i.style.display="none"),isNaN(e.labelWidth)||(i.style.width=parseInt(e.labelWidth)+"px"),isNaN(e.labelHeight)||(i.style.height=parseInt(e.labelHeight)+"px"),isNaN(e.labelLeft)||(i.style.left=parseInt(e.labelLeft)+"px"),isNaN(e.labelTop)||(i.style.top=parseInt(e.labelTop)+"px"),e.info&&(i.onclick=function(t){t=t||event;var e=t.target||t.srcElement;return"undefined"!=typeof e.className&&"dhxform_info"==e.className?(this.parentNode.callEvent("onInfo",[this.parentNode._idd,t]),t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1):void 0})},doAttachEvents:function(t){var e=t.childNodes[t._ll?1:0].childNodes[0],i=this;e.onclick=function(){i.doOnChange(this)},e.onkeydown=function(t){t=t||event,i.doOnChange(this),this.parentNode.parentNode.callEvent("onKeyDown",[this,t,this.parentNode.parentNode._idd])},e.onchange=function(){i.doOnChange(this)},e.onkeyup=function(t){t=t||event,this.parentNode.parentNode.callEvent("onKeyUp",[this,t,this.parentNode.parentNode._idd])},e=null,this.doAttachChangeLS(t)},doAttachChangeLS:function(t){var e=t.childNodes[t._ll?1:0].childNodes[0];e.onfocus=function(){var t=this.parentNode.parentNode;t.getForm()._ccActivate(t._idd,this,t.getForm().getItemValue(t._idd,!0)),t.getForm().callEvent("onFocus",[t._idd]),t=null},e.onblur=function(){var t=this.parentNode.parentNode;t.getForm()._ccDeactivate(t._idd),t.getForm().callEvent("onBlur",[t._idd]),t=null},e=null},doValidate:function(t){t.getForm().live_validate&&this._validate(t)},doLoadOpts:function(t,e,i){for(var s=t.childNodes[t._ll?1:0].childNodes[0],n=e.options,o=!1,l=0;l<n.length;l++){var r=n[l].text||n[l].label;r&&"undefined"!=typeof r||(r="");var a=new Option(r,n[l].value);"string"==typeof n[l].img_src&&a.setAttribute("img_src",n[l].img_src),s.options.add(a),"undefined"!=typeof n[l].selected&&1==window.dhx4.s2b(n[l].selected)&&(a.selected=!0,t._value=n[l].value,o=!0),"undefined"!=typeof n[l].checked&&1==window.dhx4.s2b(n[l].checked)&&a.setAttribute("checked","1"),"undefined"!=typeof n[l].img&&a.setAttribute("img",n[l].img),"undefined"!=typeof n[l].img_dis&&a.setAttribute("img_dis",n[l].img_dis)}!o&&s.selectedIndex>=0&&(t._value=s.options[s.selectedIndex].value),i===!0&&t.callEvent("onOptionsLoaded",[t._idd]),this._checkNoteWidth(t)},doLoadOptsConnector:function(t,e){var i=this;t._connector_working=!0,window.dhx4.ajax.get(e,function(e){if(e=e.xmlDoc.responseXML,null!=e){var s=e.getElementsByTagName("data");if(null!=s&&null!=s[0]){s=s[0];for(var n=[],o=0;o<s.childNodes.length;o++)if("undefined"!=typeof s.childNodes[o].tagName&&"item"==String(s.childNodes[o].tagName).toLowerCase()){var l=s.childNodes[o];n.push({label:l.getAttribute("label"),value:l.getAttribute("value"),selected:null!=l.getAttribute("selected")}),l=null}i.doLoadOpts(t,{options:n},!0),t._connector_working=!1,null!=t._connector_value&&(i.setValue(t,t._connector_value),t._connector_value=null),i=t=null}}})},doOnChange:function(t){var e=t.parentNode.parentNode;if(e._newValue=t.selectedIndex>=0?t.options[t.selectedIndex].value:null,e._newValue!=e._value){if(e.checkEvent("onBeforeChange")&&e.callEvent("onBeforeChange",[e._idd,e._value,e._newValue])!==!0){for(var i=0;i<t.options.length;i++)t.options[i].value==e._value&&(t.options[i].selected=!0);return}e._value=e._newValue,e.callEvent("onChange",[e._idd,e._value]),"se"==e._type&&e.getForm().live_validate&&this._validate(e)}e._autoCheck()},setText:function(t,e){e||(e=""),t.childNodes[t._ll?0:1].childNodes[0].innerHTML=e+(t._required?"<span class='dhxform_item_required'>*</span>":""),t.childNodes[t._ll?0:1].style.display=0==e.length||null==e?"none":""},getText:function(t){return t.childNodes[t._ll?0:1].childNodes[0].innerHTML.replace(/<span class=\"dhxform_item_required\">[^<]*<\/span>/g,"")},enable:function(t){String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._enabled=!0,t.childNodes[t._ll?1:0].childNodes[0].removeAttribute("disabled")},disable:function(t){String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._enabled=!1,t.childNodes[t._ll?1:0].childNodes[0].setAttribute("disabled",!0)},getOptions:function(t){return t.childNodes[t._ll?1:0].childNodes[0].options},setValue:function(t,e){if(t._connector_working)return void(t._connector_value=e);for(var i=this.getOptions(t),s=0;s<i.length;s++)i[s].value==e&&(i[s].selected=!0,t._value=i[s].value);null!=t._list&&t._list.length>0&&t.getForm()._autoCheck(),t.getForm()._ccReload(t._idd,t._value)},getValue:function(t){for(var e=-1,i=this.getOptions(t),s=0;s<i.length;s++)i[s].selected&&(e=i[s].value);return e},setWidth:function(t,e){t.childNodes[t._ll?1:0].childNodes[0].style.width=e+"px"},getSelect:function(t){return t.childNodes[t._ll?1:0].childNodes[0]},setFocus:function(t){t.childNodes[t._ll?1:0].childNodes[0].focus()},_checkNoteWidth:function(t){var e;null!=t.childNodes[t._ll?1:0].childNodes[1]&&(e=t.childNodes[t._ll?1:0].childNodes[1],null!=e.className&&e.className.search(/dhxform_note/gi)>=0&&"auto"==e._w&&(e.style.width=t.childNodes[t._ll?1:0].childNodes[0].offsetWidth+"px")),e=null}},function(){for(var t in{doAddInput:1,doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.select[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.items.multiselect={doLoadOpts:function(t,e,i){var s=t.childNodes[t._ll?1:0].childNodes[0];s.multiple=!0,isNaN(e.size)||(s.size=Number(e.size)),t._value=[],t._newValue=[];for(var n=e.options,o=0;o<n.length;o++){var l=new Option(n[o].text||n[o].label,n[o].value);s.options.add(l),(1==n[o].selected||"true"==n[o].selected)&&(l.selected=!0,t._value.push(n[o].value))}i===!0&&t.callEvent("onOptionsLoaded",[t._idd]),this._checkNoteWidth(t)},doAttachEvents:function(t){var e=t.childNodes[t._ll?1:0].childNodes[0],i=this;e.onfocus=function(){i.doOnChange(this);var t=this.parentNode.parentNode;t.getForm().callEvent("onFocus",[t._idd]),t=null},e.onblur=function(){i.doOnChange(this);var t=this.parentNode.parentNode;t.getForm().callEvent("onBlur",[t._idd]),t=null},e.onclick=function(){i.doOnChange(this);var t=this.parentNode.parentNode;t._autoCheck(),t=null}},doOnChange:function(t){var e=t.parentNode.parentNode;e._newValue=[];for(var i=0;i<t.options.length;i++)t.options[i].selected&&e._newValue.push(t.options[i].value);if(e._value.sort().toString()!=e._newValue.sort().toString()){if(e.checkEvent("onBeforeChange")&&e.callEvent("onBeforeChange",[e._idd,e._value,e._newValue])!==!0){for(var s={},i=0;i<e._value.length;i++)s[e._value[i]]=!0;for(var i=0;i<t.options.length;i++)t.options[i].selected=1==s[t.options[i].value];return void(s=null)}e._value=[];for(var i=0;i<e._newValue.length;i++)e._value.push(e._newValue[i]);e.callEvent("onChange",[e._idd,e._value])}e._autoCheck()},setValue:function(t,e){var i={};"string"==typeof e&&(e=e.split(",")),"object"!=typeof e&&(e=[e]);for(var s=0;s<e.length;s++)i[e[s]]=!0;for(var n=this.getOptions(t),s=0;s<n.length;s++)n[s].selected=1==i[n[s].value];t._autoCheck()},getValue:function(t){for(var e=[],i=this.getOptions(t),s=0;s<i.length;s++)i[s].selected&&e.push(i[s].value);return e}},function(){for(var t in dhtmlXForm.prototype.items.select)dhtmlXForm.prototype.items.multiselect[t]||(dhtmlXForm.prototype.items.multiselect[t]=dhtmlXForm.prototype.items.select[t])}(),dhtmlXForm.prototype.items.input={render:function(t,e){var i=!isNaN(e.rows);if(t._type="ta",t._enabled=!0,this.doAddLabel(t,e),this.doAddInput(t,e,i?"TEXTAREA":"INPUT",i?null:"TEXT",!0,!0,"dhxform_textarea"),this.doAttachEvents(t),i&&(t.childNodes[t._ll?1:0].childNodes[0].rows=Number(e.rows)+(window.dhx4.isIE6?1:0)),"undefined"!=typeof e.numberFormat){var s,n=null,o=null;"string"!=typeof e.numberFormat?(s=e.numberFormat[0],n=e.numberFormat[1]||null,o=e.numberFormat[2]||null):(s=e.numberFormat,"string"==typeof e.groupSep&&(n=e.groupSep),"string"==typeof e.decSep&&(o=e.decSep)),this.setNumberFormat(t,s,n,o,!1)}return this.setValue(t,e.value),this},doAttachEvents:function(t){var e=this;("ta"==t._type||"se"==t._type||"pw"==t._type)&&(t.childNodes[t._ll?1:0].childNodes[0].onfocus=function(){var t=this.parentNode.parentNode;null!=t._df&&(this.value=t._value||""),t.getForm()._ccActivate(t._idd,this,this.value),t.getForm().callEvent("onFocus",[t._idd]),t=null}),t.childNodes[t._ll?1:0].childNodes[0].onblur=function(){var t=this.parentNode.parentNode;t.getForm()._ccDeactivate(t._idd),e.updateValue(t,!0),t.getForm().live_validate&&e._validate(t),t.getForm().callEvent("onBlur",[t._idd]),t=null}},updateValue:function(t,e){var i=t.childNodes[t._ll?1:0].childNodes[0].value;if(e||null==t._df||i!=this._getFmtValue(t,i)){var s=this;return t._value!=i?t.checkEvent("onBeforeChange")&&t.callEvent("onBeforeChange",[t._idd,t._value,i])!==!0?void(null!=t._df?s.setValue(t,t._value):t.childNodes[t._ll?1:0].childNodes[0].value=t._value):(null!=t._df?s.setValue(t,i):t._value=i,void t.callEvent("onChange",[t._idd,i])):void(null!=t._df&&this.setValue(t,t._value))}},setValue:function(t,e){t._value="undefined"!=typeof e&&null!=e?e:"";var i=String(t._value)||"",s=t.childNodes[t._ll?1:0].childNodes[0];null!=t._df&&"function"==typeof this._getFmtValue&&(i=this._getFmtValue(t,i)),s.value!=i&&(s.value=i,t.getForm()._ccReload(t._idd,i)),s=null},getValue:function(t){var e=t.getForm();return e._formLS&&null!=e._formLS[t._idd]&&this.updateValue(t),e=null,"undefined"!=typeof t._value&&null!=t._value?t._value:""},setReadonly:function(t,e){t._ro=e===!0,t._ro?t.childNodes[t._ll?1:0].childNodes[0].setAttribute("readOnly","true"):t.childNodes[t._ll?1:0].childNodes[0].removeAttribute("readOnly")},isReadonly:function(t){return t._ro||(t._ro=!1),t._ro},getInput:function(t){return t.childNodes[t._ll?1:0].childNodes[0]},setNumberFormat:function(t,e,i,s,n){if("boolean"!=typeof n&&(n=!0),""==e)return t._df=null,n&&this.setValue(t,t._value),!0;if("string"==typeof e){var o=e.match(/^([^\.\,0-9]*)([0\.\,]*)([^\.\,0-9]*)/);if(null==o||4!=o.length)return!1;t._df={i_len:!1,i_sep:"string"==typeof i?i:",",d_len:!1,d_sep:"string"==typeof s?s:".",s_bef:"string"==typeof o[1]?o[1]:"",s_aft:"string"==typeof o[3]?o[3]:""};var l=o[2].split(".");null!=l[1]&&(t._df.d_len=l[1].length);var r=l[0].split(",");return r.length>1&&(t._df.i_len=r[r.length-1].length),n&&this.setValue(t,t._value),!0}},_getFmtValue:function(item,v){var r=v.match(/^(-)?([0-9]{1,})(\.([0-9]{1,}))?$/);if(null!=r&&5==r.length){var v0="";if(null!=r[1]&&(v0+=r[1]),v0+=item._df.s_bef,item._df.i_len!==!1){for(var i=0,v1="",q=r[2].length-1;q>=0;q--)v1=""+r[2].charAt(q)+v1,++i==item._df.i_len&&q>0&&(v1=item._df.i_sep+v1,i=0);v0+=v1}else v0+=r[2];if(item._df.d_len!==!1){for(null==r[4]&&(r[4]="");r[4].length<item._df.d_len;)r[4]+="0";eval("dhx4.temp = new RegExp(/\\d{"+item._df.d_len+"}/);");var t1=r[4].match(dhx4.temp);null!=t1&&(v0+=item._df.d_sep+t1),dhx4.temp=t1=null}return v0+=item._df.s_aft}return v}},function(){for(var t in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setFocus:1})dhtmlXForm.prototype.items.input[t]=dhtmlXForm.prototype.items.select[t]}(),dhtmlXForm.prototype.items.password={render:function(t,e){return t._type="pw",t._enabled=!0,this.doAddLabel(t,e),this.doAddInput(t,e,"INPUT","PASSWORD",!0,!0,"dhxform_textarea"),this.doAttachEvents(t),this.setValue(t,e.value),this}},function(){for(var t in{doAddLabel:1,doAddInput:1,doAttachEvents:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,setValue:1,getValue:1,updateValue:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.password[t]=dhtmlXForm.prototype.items.input[t]}(),dhtmlXForm.prototype.items.file={render:function(t,e){t._type="fl",t._enabled=!0,this.doAddLabel(t,e),this.doAddInput(t,e,"INPUT","FILE",!0,!1,"dhxform_textarea");var i=t.childNodes[t._ll?1:0].childNodes[0],s=this;return i.onfocus=function(){var t=this.parentNode.parentNode;t.getForm().callEvent("onFocus",[t._idd]),t=null},i.onblur=function(){var t=this.parentNode.parentNode;t.getForm().live_validate&&s._validate(t),t.getForm().callEvent("onBlur",[t._idd]),t=null},i=null,t.childNodes[t._ll?1:0].childNodes[0].onchange=function(){t.callEvent("onChange",[t._idd,this.value])},this},setValue:function(){},getValue:function(t){return t.childNodes[t._ll?1:0].childNodes[0].value}},function(){for(var t in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.file[t]=dhtmlXForm.prototype.items.input[t]}(),dhtmlXForm.prototype.items.label={_index:!1,render:function(t,e){t._type="lb",t._enabled=!0,t._checked=!0;var i=document.createElement("DIV");return i.className="dhxform_txt_label2"+(e._isTopmost?" topmost":""),i.innerHTML=e.label,t.appendChild(i),1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),isNaN(e.labelWidth)||(i.style.width=parseInt(e.labelWidth)+"px"),isNaN(e.labelHeight)||(i.style.height=parseInt(e.labelHeight)+"px"),isNaN(e.labelLeft)||(i.style.left=parseInt(e.labelLeft)+"px"),isNaN(e.labelTop)||(i.style.top=parseInt(e.labelTop)+"px"),this},destruct:function(t){this.doUnloadNestedLists(t),t._autoCheck=null,t._enabled=null,t._type=null,t.callEvent=null,t.checkEvent=null,t.getForm=null,t.onselectstart=null,t.parentNode.removeChild(t),t=null},enable:function(t){String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._enabled=!0},disable:function(t){String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._enabled=!1},setText:function(t,e){t.firstChild.innerHTML=e},getText:function(t){return t.firstChild.innerHTML}},function(){for(var t in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.label[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.items.button={render:function(t,i){if(t._type="bt",t._enabled=!0,t._name=i.name,t.className=String(t.className).replace("item_label_top","item_label_left").replace("item_label_right","item_label_left"),!isNaN(i.width))var s=Math.max(i.width,10);var n="undefined"!=typeof s;return t._doOnKeyUpDown=function(t,e){this.callEvent(t,[this.childNodes[0].childNodes[0],e,this._idd])},t.innerHTML='<div class="dhxform_btn" role="link" tabindex="0" dir="ltr"><div class="dhxform_btn_txt" '+(n?' style="width:'+s+'px;"':"")+">"+i.value+"</div></div>",isNaN(i.inputLeft)||(t.childNodes[0].style.left=parseInt(i.inputLeft)+"px"),isNaN(i.inputTop)||(t.childNodes[0].style.top=parseInt(i.inputTop)+"px"),1==i.hidden&&this.hide(t),1==i.disabled&&this.userDisable(t),"undefined"!=typeof i.tooltip&&(t.firstChild.title=i.tooltip),t.onselectstart=function(t){return t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},t.firstChild.onselectstart=function(t){return t=t||event,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},t.firstChild.onkeypress=function(t){return t=t||event,32!=t.keyCode&&32!=t.charCode&&13!=t.keyCode&&13!=t.charCode||this.parentNode._busy?void 0:(this.parentNode._busy=!0,t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1,_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]),!1)},t.firstChild.ontouchstart=function(){e=e||event,e.preventDefault(),this.parentNode._busy||(this.parentNode._busy=!0,_dhxForm_doClick(this.childNodes[0],["mousedown","mouseup"]))},t.firstChild.onfocus=function(){this.parentNode._doOnFocus(this.parentNode)},t.firstChild.onblur=function(){_dhxForm_doClick(this.childNodes[0],"mouseout"),this.parentNode._doOnBlur(this.parentNode)},t.firstChild.onkeyup=function(t){this.parentNode._doOnKeyUpDown("onKeyUp",t||event)},t.firstChild.onkeydown=function(t){this.parentNode._doOnKeyUpDown("onKeyDown",t||event)},t.firstChild.onmouseover=function(){var t=this.parentNode;t._enabled&&(this._isOver=!0,this.className="dhxform_btn dhxform_btn_over",t=null)},t.firstChild.onmouseout=function(){var t=this.parentNode;t._enabled&&(this.className="dhxform_btn",this._allowClick=!1,this._pressed=!1,this._isOver=!1,t=null)},t.firstChild.onmousedown=function(t){if(t=t||event,!(t.button>=2||this._pressed)){var e=this.parentNode;e._enabled&&(this.className="dhxform_btn dhxform_btn_pressed",this._allowClick=!0,this._pressed=!0,e=null)}},t.firstChild.onmouseup=function(t){if(t=t||event,!(t.button>=2)&&this._pressed){var e=this.parentNode;e._enabled&&(e._busy=!1,this.className="dhxform_btn"+(this._isOver?" dhxform_btn_over":""),this._pressed&&this._allowClick&&e.callEvent("_onButtonClick",[e._name,e._cmd]),this._allowClick=!1,this._pressed=!1,e=null)}},t._doOnFocus=function(t){t.getForm().callEvent("onFocus",[t._idd])},t._doOnBlur=function(t){t.getForm().callEvent("onBlur",[t._idd])},this},destruct:function(t){for(this.doUnloadNestedLists(t),t.callEvent=null,t.checkEvent=null,t.getForm=null,t._autoCheck=null,t._type=null,t._enabled=null,t._cmd=null,t._name=null,t._doOnFocus=null,t._doOnBlur=null,t._doOnKeyUpDown=null,t.onselectstart=null,t.firstChild.onselectstart=null,t.firstChild.onkeypress=null,t.firstChild.ontouchstart=null,t.firstChild.onfocus=null,t.firstChild.onblur=null,t.firstChild.onkeyup=null,t.firstChild.onkeydown=null,t.firstChild.onmouseover=null,t.firstChild.onmouseout=null,t.firstChild.onmousedown=null,t.firstChild.onmouseup=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t.parentNode.removeChild(t),t=null},enable:function(t){String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._enabled=!0,t.childNodes[0].removeAttribute("disabled"),t.childNodes[0].setAttribute("role","link"),t.childNodes[0].setAttribute("tabIndex","0")},disable:function(t){String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._enabled=!1,t.childNodes[0].setAttribute("disabled","true"),t.childNodes[0].removeAttribute("role"),t.childNodes[0].removeAttribute("tabIndex")},setText:function(t,e){t.childNodes[0].childNodes[0].innerHTML=e},getText:function(t){return t.childNodes[0].childNodes[0].innerHTML},setFocus:function(t){t.childNodes[0].focus()}},function(){for(var t in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.button[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.items.hidden={_index:!1,render:function(t,e){t.style.display="none",t._name=e.name,t._type="hd",t._enabled=!0;var i=document.createElement("INPUT");return i.type="HIDDEN",i.name=e.name,i.value=e.value||"",t.appendChild(i),this},destruct:function(t){for(this.doUnloadNestedLists(t);t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t._autoCheck=null,t._name=null,t._type=null,t._enabled=null,t.onselectstart=null,t.callEvent=null,t.checkEvent=null,t.getForm=null,t.parentNode.removeChild(t),t=null},enable:function(t){t._enabled=!0,t.childNodes[0].setAttribute("name",t._name)},disable:function(t){t._enabled=!1,t.childNodes[0].removeAttribute("name")},show:function(){},hide:function(){},isHidden:function(){return!0},setValue:function(t,e){t.childNodes[0].value=e},getValue:function(t){return t.childNodes[0].value},getInput:function(t){return t.childNodes[0]}},function(){for(var t in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.hidden[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.items.list={_index:!1,render:function(t,e){return t._type="list",t._enabled=!0,t._isNestedForm=!0,t.style.paddingLeft=t._ofsNested+"px",t.className="dhxform_base_nested"+(t._custom_css||""),[this,new dhtmlXForm(t,null,e)]},destruct:function(){}},dhtmlXForm.prototype.items.fieldset={_index:!1,render:function(t,e){t._type="fs","number"==typeof parseInt(e.inputWidth),t._width=e.width,t._enabled=!0,t._checked=!0,t.className="fs_"+e.position+("string"==typeof e.className?" "+e.className:"");var i=document.createElement("FIELDSET");i.className="dhxform_fs";var s=String(e.labelAlign).replace("align_","");if(i.innerHTML="<legend class='fs_legend' align='"+s+"' style='text-align:"+s+"'>"+e.label+"</legend>",t.appendChild(i),isNaN(e.inputLeft)||(i.style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(i.style.top=parseInt(e.inputTop)+"px"),"auto"!=e.inputWidth&&!isNaN(e.inputWidth)){i.style.width=parseInt(e.inputWidth)+"px";var n=parseInt(i.style.width);i.offsetWidth>n&&(i.style.width=n+(n-i.offsetWidth)+"px")}return t._addSubListNode=function(){var t=document.createElement("DIV");return t._custom_css=" dhxform_fs_nested",this.childNodes[0].appendChild(t),t},1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),this},destruct:function(t){for(this.doUnloadNestedLists(t),t._checked=null,t._enabled=null,t._idd=null,t._type=null,t._width=null,t.onselectstart=null,t._addSubListNode=null,t._autoCheck=null,t.callEvent=null,t.checkEvent=null,t.getForm=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t.parentNode.removeChild(t),t=null},setText:function(t,e){t.childNodes[0].childNodes[0].innerHTML=e},getText:function(t){return t.childNodes[0].childNodes[0].innerHTML},enable:function(t){t._enabled=!0,String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,""))},disable:function(t){t._enabled=!1,String(t.className).search("disabled")<0&&(t.className+=" disabled")},setWidth:function(t,e){t.childNodes[0].style.width=e+"px",t._width=e},getWidth:function(t){return t._width}},function(){for(var t in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.fieldset[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.items.block={_index:!1,render:function(t,e){t._type="bl",t._width=e.width,t._enabled=!0,t._checked=!0,t.className="block_"+e.position+("string"==typeof e.className?" "+e.className:"");var i=document.createElement("DIV");return i.className="dhxform_obj_"+t.getForm().skin+" dhxform_block",i.style.fontSize=t.getForm().cont.style.fontSize,e.style&&(i.style.cssText=e.style),"undefined"!=typeof e.id&&(i.id=e.id),t.appendChild(i),isNaN(e.inputLeft)||(i.style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(i.style.top=parseInt(e.inputTop)+"px"),"auto"!=e.inputWidth&&(isNaN(e.inputWidth)||(i.style.width=parseInt(e.inputWidth)+"px")),isNaN(e.blockOffset)||(t._ofsNested=e.blockOffset),t._addSubListNode=function(){var t=document.createElement("DIV");return t._inBlcok=!0,"undefined"!=typeof this._ofsNested&&(t._ofsNested=this._ofsNested),this.childNodes[0].appendChild(t),t},1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),this},_setCss:function(t,e,i){t.firstChild.className="dhxform_obj_"+e+" dhxform_block",t.firstChild.style.fontSize=i}},function(){for(var t in{enable:1,disable:1,isEnabled:1,setWidth:1,getWidth:1,doUnloadNestedLists:1,destruct:1})dhtmlXForm.prototype.items.block[t]=dhtmlXForm.prototype.items.fieldset[t]}(),dhtmlXForm.prototype.items.newcolumn={_index:!1},dhtmlXForm.prototype.items.template={render:function(t,e){!isNaN(e.rows);return t._type="tp",t._enabled=!0,e.format&&("function"==typeof e.format&&(t.format=e.format),"function"==typeof window[e.format]&&(t.format=window[e.format])),t.format||(t.format=function(t,e){return e}),this.doAddLabel(t,e),this.doAddInput(t,e,"DIV",null,!0,!0,"dhxform_item_template"),t._value=e.value||"",t.childNodes[1].childNodes[0].innerHTML=t.format(t._idd,t._value),this},setValue:function(t,e){t._value=e,t.childNodes[1].childNodes[0].innerHTML=t.format(t._idd,t._value)},getValue:function(t){return t._value},enable:function(t){String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._enabled=!0},disable:function(t){String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._enabled=!1}},function(){for(var t in{doAddLabel:1,doAddInput:1,destruct:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,setWidth:1})dhtmlXForm.prototype.items.template[t]=dhtmlXForm.prototype.items.select[t]}(),dhtmlXForm.prototype._ulToObject=function(t,e){for(var i=[],s=0;s<t.childNodes.length;s++){if("li"==String(t.childNodes[s].tagName||"").toLowerCase()){for(var n={},o=t.childNodes[s],l=0;l<e.length;l++)null!=o.getAttribute(e[l])&&(n[String(e[l]).replace("ftype","type")]=o.getAttribute(e[l]));if(!n.label)try{n.label=o.firstChild.nodeValue}catch(r){}var a=o.getElementsByTagName("UL");null!=a[0]&&(n["select"==n.type?"options":"list"]=dhtmlXForm.prototype._ulToObject(a[0],e));for(var l=0;l<o.childNodes.length;l++)"userdata"==String(o.childNodes[l].tagName||"").toLowerCase()&&(n.userdata||(n.userdata={}),n.userdata[o.childNodes[l].getAttribute("name")]=o.childNodes[l].firstChild.nodeValue);i[i.length]=n}if("div"==String(t.childNodes[s].tagName||"").toLowerCase()){var n={};n.type="label";try{n.label=t.childNodes[s].firstChild.nodeValue}catch(r){}i[i.length]=n}}return i},dhtmlXForm.prototype.setUserData=function(t,e,i,s){if("undefined"!=typeof s){var n=this.doWithItem([t,e],"_getId");null!=n&&(t=n,e=i,i=s)}this._userdata||(this._userdata={}),this._userdata[t]=this._userdata[t]||{},this._userdata[t][e]=i},dhtmlXForm.prototype.getUserData=function(t,e,i){if("undefined"!=typeof i){var s=this.doWithItem([t,e],"_getId");null!=s&&(t=s,e=i)}return null!=this._userdata&&"undefined"!=typeof this._userdata[t]&&"undefined"!=typeof this._userdata[t][e]?this._userdata[t][e]:""},dhtmlXForm.prototype.setRTL=function(t){this._rtl=t===!0?!0:!1,this._rtl?String(this.cont).search(/dhxform_rtl/gi)<0&&(this.cont.className+=" dhxform_rtl"):String(this.cont).search(/dhxform_rtl/gi)>=0&&(this.cont.className=String(this.cont.className).replace(/dhxform_rtl/gi,""))},_dhxForm_doClick=function(t,e){if("object"==typeof e){var i=e[1];e=e[0]}if(document.createEvent){var s=document.createEvent("MouseEvents");s.initEvent(e,!0,!1),t.dispatchEvent(s)}else if(document.createEventObject){var s=document.createEventObject();s.button=1,t.fireEvent("on"+e,s)}i&&window.setTimeout(function(){_dhxForm_doClick(t,i)},100)},dhtmlXForm.prototype.setFormData=function(t){for(var e in t){var i=this.getItemType(e);switch(i){case"checkbox":this[1==t[e]||1==parseInt(t[e])||"true"==t[e]||t[e]==this.getItemValue(e,"realvalue")?"checkItem":"uncheckItem"](e);break;case"radio":this.checkItem(e,t[e]);break;case"input":case"textarea":case"password":case"select":case"multiselect":case"hidden":case"template":case"combo":case"calendar":case"colorpicker":case"editor":this.setItemValue(e,t[e]);break;default:this["setFormData_"+i]?this["setFormData_"+i](e,t[e]):(this.hId||(this.hId=this._genStr(12)),this.setUserData(this.hId,e,t[e]))}}},dhtmlXForm.prototype.getFormData=function(t,e){var i={};for(var s in this.itemPull){var n=this.itemPull[s]._idd,o=this.itemPull[s]._type;if("ch"==o&&(i[n]=this.isItemChecked(n)?this.getItemValue(n):0),"ra"!=o||i[this.itemPull[s]._group]||(i[this.itemPull[s]._group]=this.getCheckedValue(this.itemPull[s]._group)),o in{se:1,ta:1,pw:1,hd:1,tp:1,fl:1,calendar:1,combo:1,editor:1,colorpicker:1}&&(i[n]=this.getItemValue(n,t)),this["getFormData_"+o]&&(i[n]=this["getFormData_"+o](n)),"up"==o){var l=this.getItemValue(n);for(var r in l)i[r]=l[r]}if(this.itemPull[s]._list)for(var a=0;a<this.itemPull[s]._list.length;a++){var h=this.itemPull[s]._list[a].getFormData(t,e);for(var d in h)i[d]=h[d]}}if(!e&&this.hId&&this._userdata[this.hId])for(var s in this._userdata[this.hId])i[s]||(i[s]=this._userdata[this.hId][s]);return i},dhtmlXForm.prototype.adjustParentSize=function(){for(var t=0,e=-1,i=0;i<this.base.length;i++)t+=this.base[i].firstChild.offsetWidth,this.base[i].offsetHeight>e&&(e=this.base[i].offsetHeight);var s=!1;try{if(s=1==this.cont.parentNode.parentNode.parentNode.parentNode._isCell)var n=this.cont.parentNode.parentNode.parentNode.parentNode}catch(o){}if(s&&"undefined"!=typeof n)return t>0&&n.setWidth(t+10),e>0&&n.setHeight(e+n.firstChild.firstChild.offsetHeight+5),void(s=n=null);var l=!1;try{if(l=1==this.cont.parentNode.parentNode.parentNode._isWindow){var r=this.cont.parentNode.parentNode;"function"==typeof r.callEvent&&(this.cont.style.display="none",r.callEvent("_setCellSize",[t+15,e+15]),this.cont.style.display="")}}catch(o){}},dhtmlXForm.prototype.reset=function(){this.callEvent("onBeforeReset",[this.formId,this.getFormData()])&&(this._last_load_data&&this.setFormData(this._last_load_data),this.callEvent("onAfterReset",[this.formId]))},dhtmlXForm.prototype.send=function(t,e,i,s){if("function"==typeof e?(i=e,e="post"):e="get"==e?"get":"post",s===!0||this.validate()){var n=this.getFormData(!0),o=[];for(var l in n)o.push(l+"="+encodeURIComponent(n[l]));var r=function(t){i&&i.call(this,t,t.xmlDoc.responseText)};"get"==e?window.dhx4.ajax.get(t+(-1==t.indexOf("?")?"?":"&")+o.join("&"),r):window.dhx4.ajax.post(t,o.join("&"),r)}},dhtmlXForm.prototype.save=function(){},dhtmlXForm.prototype.dummy=function(){},dhtmlXForm.prototype._changeFormId=function(t,e){this.formId=e},dhtmlXForm.prototype._dp_init=function(t){t._methods=["dummy","dummy","_changeFormId","dummy"],t._getRowData=function(t){var e=this.obj.getFormData(!0);
return e[this.action_param]=this.obj.getUserData(t,this.action_param),e},t._clearUpdateFlag=function(){},t.attachEvent("onAfterUpdate",function(t,e,i,s){return("inserted"==e||"updated"==e)&&(this.obj.resetDataProcessor("updated"),this.obj._last_load_data=this.obj.getFormData(!0)),this.obj.callEvent("onAfterSave",[this.obj.formId,s]),!0}),t.autoUpdate=!1,t.setTransactionMode("POST",!0),this.dp=t,this.formId=(new Date).valueOf(),this.resetDataProcessor("inserted"),this.save=function(){this.callEvent("onBeforeSave",[this.formId,this.getFormData()])&&this.validate()&&t.sendData()}},dhtmlXForm.prototype.resetDataProcessor=function(t){this.dp&&(this.dp.updatedRows=[],this.dp._in_progress=[],this.dp.setUpdated(this.formId,!0,t))},dhtmlXForm.prototype._ccActivate=function(t,e,i){this._formLS||(this._formLS={}),this._formLS[t]||(this._formLS[t]={input:e,value:i}),this._ccActive||(this._ccActive=!0,this._ccDo()),e=null},dhtmlXForm.prototype._ccDeactivate=function(t){this._ccTm&&window.clearTimeout(this._ccTm),this._ccActive=!1,null!=this._formLS&&null!=this._formLS[t]&&(this._formLS[t].input=null,this._formLS[t]=null,delete this._formLS[t])},dhtmlXForm.prototype._ccDo=function(){this._ccTm&&window.clearTimeout(this._ccTm);for(var t in this._formLS){var e=this._formLS[t].input;if("select"==String(e.tagName).toLowerCase()){var i="";e.selectedIndex>=0&&e.selectedIndex<e.options.length&&(i=e.options[e.selectedIndex].value)}else var i=e.value;i!=this._formLS[t].value&&(this._formLS[t].value=i,this.callEvent("onInputChange",[e._idd,i,this])),e=null}if(this._ccActive){var s=this;this._ccTm=window.setTimeout(function(){s._ccDo(),s=null},100)}},dhtmlXForm.prototype._ccReload=function(t,e){this._formLS&&this._formLS[t]&&(this._formLS[t].value=e)},dhtmlXForm.prototype._autoload=function(){for(var t=["ftype","name","value","label","check","checked","disabled","text","rows","select","selected","width","style","className","labelWidth","labelHeight","labelLeft","labelTop","inputWidth","inputHeight","inputLeft","inputTop","position","size"],e=document.getElementsByTagName("UL"),i=[],s=0;s<e.length;s++)if("dhtmlxForm"==e[s].className){var n=document.createElement("DIV");i[i.length]={nodeUL:e[s],nodeForm:n,data:dhtmlXForm.prototype._ulToObject(e[s],t),name:e[s].getAttribute("name")||null}}for(var s=0;s<i.length;s++){i[s].nodeUL.parentNode.insertBefore(i[s].nodeForm,i[s].nodeUL);var o=new dhtmlXForm(i[s].nodeForm,i[s].data);null!==i[s].name&&(window[i[s].name]=o);var l=i[s].nodeUL.getAttribute("oninit")||null;i[s].nodeUL.parentNode.removeChild(i[s].nodeUL),i[s].nodeUL=null,i[s].nodeForm=null,i[s].data=null,i[s]=null,l&&("function"==typeof l?l():"function"==typeof window[l]&&window[l]())}"function"==typeof window.addEventListener?window.removeEventListener("load",dhtmlXForm.prototype._autoload,!1):window.detachEvent("onload",dhtmlXForm.prototype._autoload)},"function"==typeof window.addEventListener?window.addEventListener("load",dhtmlXForm.prototype._autoload,!1):window.attachEvent("onload",dhtmlXForm.prototype._autoload),window.dhtmlxValidation||(dhtmlxValidation=function(){},dhtmlxValidation.prototype={isEmpty:function(t){return""==t},isNotEmpty:function(t){return t instanceof Array?t.length>0:""==!t},isValidBoolean:function(t){return!!t.toString().match(/^(0|1|true|false)$/)},isValidEmail:function(t){return!!t.toString().match(/(^[a-z0-9]([0-9a-z\-_\.]*)@([0-9a-z_\-\.]*)([.][a-z]{3})$)|(^[a-z]([0-9a-z_\.\-]*)@([0-9a-z_\-\.]*)(\.[a-z]{2,4})$)/i)},isValidInteger:function(t){return!!t.toString().match(/(^-?\d+$)/)},isValidNumeric:function(t){return!!t.toString().match(/(^-?\d\d*[\.|,]\d*$)|(^-?\d\d*$)|(^-?[\.|,]\d\d*$)/)},isValidAplhaNumeric:function(t){return!!t.toString().match(/^[_\-a-z0-9]+$/gi)},isValidDatetime:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})\s(\d{2}):(\d{2}):(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31&&e[4]<=59&&e[5]<=59&&e[6]<=59)||!1},isValidDate:function(t){var e=t.toString().match(/^(\d{4})-(\d{2})-(\d{2})$/);return e&&!!(e[1]<=9999&&e[2]<=12&&e[3]<=31)||!1},isValidTime:function(t){var e=t.toString().match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);return e&&!!(e[1]<=24&&e[2]<=59&&e[3]<=59)||!1},isValidIPv4:function(t){var e=t.toString().match(/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/);return e&&!!(e[1]<=255&&e[2]<=255&&e[3]<=255&&e[4]<=255)||!1},isValidCurrency:function(t){return t.toString().match(/^\$?\s?\d+?([\.,\,]?\d+)?\s?\$?$/)&&!0||!1},isValidSSN:function(t){return t.toString().match(/^\d{3}\-?\d{2}\-?\d{4}$/)&&!0||!1},isValidSIN:function(t){return t.toString().match(/^\d{9}$/)&&!0||!1}},dhtmlxValidation=new dhtmlxValidation),dhtmlXForm.prototype.addItem=function(t,e,i,s){var n=null;t instanceof Array&&(n=t[1],t=t[0]);var o=null;if(null!=t){var o=this._getParentForm(t,n);if(null!=o)return null==o.item._list?(e.listParent||(e.listParent=o.item._idd),o.form._addItem("list",o.item._idd,[e],null,o.item._idd,i,s)):o.item._list[0].addItem(null,e,i,s),o.form=o.item=null,o=null,void this._autoCheck()}this._prepareItem(e,i,s),this._autoCheck()},dhtmlXForm.prototype.removeItem=function(t,e){this._removeItem(t,e)},dhtmlXForm.prototype.removeColumn=function(t,e,i,s){var n=null;if(t instanceof Array&&(n=t[1],t=t[0]),null!=t){var o=this._getParentForm(t,n);return void(null!=o&&(null!=o.item._list&&null!=o.item._list[0]&&o.item._list[0].removeColumn(null,e,i,s),o.form=o.item=null,o=null))}if(e=Math.min(Math.max(e,0),this.cont.childNodes.length-1),1==this.cont.childNodes.length)1==i&&this._removeItemsInColumn(this.cont.childNodes[e]);else{if(1==i)this._removeItemsInColumn(this.cont.childNodes[e]);else{if(s){var l=e+1;l>this.cont.childNodes.length-1&&(l=e-1)}else{var l=e-1;0>l&&(l=e+1)}for(;this.cont.childNodes[e].childNodes.length>0;)this.cont.childNodes[l].appendChild(this.cont.childNodes[e].childNodes[0])}for(var r=[],a=0;a<this.base.length;a++)this.cont.childNodes[e]!=this.base[a]&&r.push(this.base[a]);this.base=r,this.cont.removeChild(this.cont.childNodes[e]),this.b_index--,r=null}},dhtmlXForm.prototype.getColumnNode=function(t,e){var i=null,s=null;if(t instanceof Array&&(s=t[1],t=t[0]),null!=t){var n=this._getParentForm(t,s);return null!=n&&(null!=n.item._list&&null!=n.item._list[0]&&null==i&&(i=n.item._list[0].getColumnNode(null,e)),n.form=n.item=null,n=null),i}return 0>e||e>this.cont.childNodes.length-1?null:this.cont.childNodes[e]},dhtmlXForm.prototype._removeItemsInColumn=function(t){for(var e=[],i=0;i<t.childNodes.length;i++){var s=t.childNodes[i];null!=s._idd&&null!=s._type&&e.push([s._idd,"ra"==s._type?s._value:null]),s=null}for(var i=0;i<e.length;i++)this.removeItem(e[i][0],e[i][1])},dhtmlXForm.prototype._getParentForm=function(t,e){if(null!=this.itemPull[this.idPrefix+t])return{form:this,item:this.itemPull[this.idPrefix+t]};for(var i in this.itemPull)if("ra"==this.itemPull[i]._type&&this.itemPull[i]._group==t&&this.itemPull[i]._value==e)return{form:this,item:this.itemPull[i]};var s=null;for(var i in this.itemPull)if(!s&&null!=this.itemPull[i]._list)for(var n=0;n<this.itemPull[i]._list.length;n++)s||(s=this.itemPull[i]._list[n]._getParentForm(t,e));return s},function(){for(var t in dhtmlXForm.prototype.items)dhtmlXForm.prototype.items[t]._getItemNode||(dhtmlXForm.prototype.items[t]._getItemNode=function(t){return t})}(),dhtmlXForm.prototype._getItemNode=function(t,e){return null!=e&&(t=[t,e]),this.doWithItem(t,"_getItemNode")},dhtmlXForm.prototype.setRequired=function(t,e,i){"undefined"==typeof i?i=e:t=[t,e];var s=this._getItemNode(t);if(s){if(i=window.dhx4.s2b(i),s._required=1==i,s._required){s._validate||(s._validate=[]);for(var n=!1,o=0;o<s._validate.length;o++)n="NotEmpty"==s._validate[o]||n;n||s._validate.push("NotEmpty");var l=s.childNodes[s._ll?0:1].childNodes[0];if(!(l.lastChild&&l.lastChild.className&&l.lastChild.className.search(/required/)>=0)){var r=document.createElement("SPAN");r.className="dhxform_item_required",r.innerHTML="*",l.appendChild(r),r=l=null}}else{if(null!=s._validate){var n=s._validate;s._validate=[];for(var o=0;o<n.length;o++)"NotEmpty"!=n[o]&&s._validate.push(n[o]);0==s._validate.length&&(s._validate=null)}var l=s.childNodes[s._ll?0:1].childNodes[0];l.lastChild&&l.lastChild.className&&l.lastChild.className.search(/required/)>=0&&(l.removeChild(l.lastChild),l=null)}this._resetValidateCss(s),s=null}},dhtmlXForm.prototype.setNote=function(t,e,i){"undefined"==typeof i?i=e:t=[t,e];var s=this._getItemNode(t);if(s){var n=this._getNoteNode(s);n||(i.width||(i.width=s.childNodes[s._ll?1:0].childNodes[0].offsetWidth),n=document.createElement("DIV"),n.className="dhxform_note",{ch:1,ra:1}[s._type]?s.childNodes[s._ll?1:0].insertBefore(n,s.childNodes[s._ll?1:0].lastChild):s.childNodes[s._ll?1:0].appendChild(n)),n.innerHTML=i.text,null!=i.width&&(n.style.width=i.width+"px",n._w=i.width),n=null}},dhtmlXForm.prototype.clearNote=function(t,e){"undefined"!=typeof e&&(t=[t,e]);var i=this._getItemNode(t);if(i){var s=this._getNoteNode(i);null!=s&&(s.parentNode.removeChild(s),s=null)}},dhtmlXForm.prototype._getNoteNode=function(t){for(var e=null,i=0;i<t.childNodes[t._ll?1:0].childNodes.length;i++)String(t.childNodes[t._ll?1:0].childNodes[i].className).search(/dhxform_note/)>=0&&(e=t.childNodes[t._ll?1:0].childNodes[i]);return t=null,e},dhtmlXForm.prototype.setValidation=function(t,e,i){"undefined"==typeof note?i=e:t=[t,e];var s=this._getItemNode(t);if(s){if(null!=s._validate)for(var n=0;n<s._validate.length;n++)s._validate[n]=null;if(s._validate=[],s._validate="function"==typeof i||"function"==typeof window[i]?[i]:String(i).split(this.separator),s._required){for(var o=!1,n=0;n<s._validate.length;n++)o="NotEmpty"==s._validate[n]||o;o||s._validate.push("NotEmpty")}s=null}},dhtmlXForm.prototype.clearValidation=function(t,e){"undefined"!=typeof e&&(t=[t,e]);var i=this._getItemNode(t);if(i){if(null!=i._validate)for(var s=0;s<i._validate.length;s++)i._validate[s]=null;i._validate=i._required?["NotEmpty"]:null,i=null}},dhtmlXForm.prototype.reloadOptions=function(t,e){var i=this.getItemType(t);if({select:1,multiselect:1,combo:1}[i]){if("select"==i||"multiselect"==i){for(var s=this.getOptions(t);s.length>0;)s.remove(0);s.length=0,s=null,"string"==typeof e?this.doWithItem(t,"doLoadOptsConnector",e):e instanceof Array&&this.doWithItem(t,"doLoadOpts",{options:e})}if("combo"==i){var n=this.getCombo(t);if(n.clearAll(),n.setComboValue(""),"string"==typeof e)this.doWithItem(t,"doLoadOptsConnector",e);else if(e instanceof Array){for(var o=null,l=0;l<e.length;l++)window.dhx4.s2b(e[l].selected)&&(o=e[l].value);n.addOption(e),null!=o&&this.setItemValue(t,o),n=null}}}},dhtmlXForm.prototype.setTooltip=function(t,e,i){"undefined"==typeof i?i=e:t=[t,e];var s=this._getItemNode(t);if(s){var n=null;if(1==s.childNodes.length)n=s.childNodes[0];else for(var o=0;o<s.childNodes.length;o++)null!=s.childNodes[o].className&&s.childNodes[o].className.search("dhxform_label")>=0&&(n=s.childNodes[o]);null!=n&&(null==i||0==i.length?n.removeAttribute("title"):n.title=i),n=null}},dhtmlXForm.prototype.saveBackup=function(){return this._backup||(this._backup={},this._backupId=(new Date).getTime()),this._backup[++this._backupId]=this.getFormData(),this._backupId},dhtmlXForm.prototype.restoreBackup=function(t){null!=this._backup&&null!=this._backup[t]&&this.setFormData(this._backup[t])},dhtmlXForm.prototype.clearBackup=function(t){null!=this._backup&&null!=this._backup[t]&&(this._backup[t]=null,delete this._backup[t])},dhtmlXForm.prototype.items.combo={render:function(t,e){t._type="combo",t._enabled=!0,t._value=null,t._newValue=null,this.doAddLabel(t,e),this.doAddInput(t,e,"SELECT",null,!0,!0,"dhxform_select"),this.doAttachEvents(t),this.doLoadOpts(t,e),t.onselectstart=function(){return!0},t.childNodes[t._ll?1:0].childNodes[0].setAttribute("mode",e.comboType||""),e.comboImagePath&&t.childNodes[t._ll?1:0].childNodes[0].setAttribute("imagePath",e.comboImagePath),e.comboDefaultImage&&t.childNodes[t._ll?1:0].childNodes[0].setAttribute("defaultImage",e.comboDefaultImage),e.comboDefaultImageDis&&t.childNodes[t._ll?1:0].childNodes[0].setAttribute("defaultImageDis",e.comboDefaultImageDis),t._combo=new dhtmlXComboFromSelect(t.childNodes[t._ll?1:0].childNodes[0]),t._combo.setSkin(t.getForm().skin),t._combo._currentComboValue=t._combo.getSelectedValue(),t._combo.getInput().id=e.uid;var i=this;return t._combo.attachEvent("onChange",function(){i.doOnChange(this)}),e.connector&&this.doLoadOptsConnector(t,e.connector),e.filtering?t._combo.enableFilteringMode(!0):e.serverFiltering&&t._combo.enableFilteringMode(!0,e.serverFiltering,e.filterCache,e.filterSubLoad),1==e.readonly&&this.setReadonly(t,!0),e.style&&(t._combo.DOMelem_input.style.cssText+=e.style),t._combo.attachEvent("onFocus",function(){var t=this.cont.parentNode.parentNode,e=t.getForm();"dhx_terrace"==e.skin&&this.cont.className.search(/combo_in_focus/)<0&&(this.cont.className+=" combo_in_focus"),e.callEvent("onFocus",[t._idd]),e=t=null}),t._combo.attachEvent("onBlur",function(){var t=this.cont.parentNode.parentNode,e=t.getForm();"dhx_terrace"==e.skin&&this.cont.className.search(/combo_in_focus/)>=0&&(this.cont.className=this.cont.className.replace(/\s{0,}combo_in_focus/gi,"")),e.callEvent("onBlur",[t._idd]),e=t=null}),this},destruct:function(t){t.childNodes[t._ll?1:0].childNodes[0].onchange=null,t._combo._currentComboValue=null,t._combo.unload(),t._combo=null,t._apiChange=null,this.d2(t),t=null},doAttachEvents:function(t){var e=this;t.childNodes[t._ll?1:0].childNodes[0].onchange=function(){e.doOnChange(this),e.doValidate(this.DOMParent.parentNode.parentNode)}},doValidate:function(t){t.getForm().hot_validate&&this._validate(t)},doOnChange:function(t){var e=t.base.parentNode.parentNode.parentNode;if(!e._apiChange){if(t._newComboValue=t.getSelectedValue(),t._newComboValue!=t._currentComboValue){if(e.checkEvent("onBeforeChange")&&e.callEvent("onBeforeChange",[e._idd,t._currentComboValue,t._newComboValue])!==!0)return window.setTimeout(function(){t.setComboValue(t._currentComboValue)},1),!1;t._currentComboValue=t._newComboValue,e.callEvent("onChange",[e._idd,t._currentComboValue])}e._autoCheck(e._enabled)}},doLoadOptsConnector:function(t,e){var i=this,s=t;t._connector_working=!0,t._apiChange=!0,t._combo.load(e,function(){s.callEvent("onOptionsLoaded",[s._idd]),s._connector_working=!1,null!=s._connector_value&&(i.setValue(s,s._connector_value),s._connector_value=null),s._apiChange=!1,i=s=null})},enable:function(t){String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._enabled=!0,t._combo.enable()},disable:function(t){String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._enabled=!1,t._combo.disable()},getCombo:function(t){return t._combo},setValue:function(t,e){return t._connector_working?void(t._connector_value=e):(t._apiChange=!0,t._combo.setComboValue(e),t._combo._currentComboValue=t._combo.getActualValue(),void(t._apiChange=!1))},getValue:function(t){return t._combo.getActualValue()},setWidth:function(t,e){t.childNodes[t._ll?1:0].childNodes[0].style.width=e+"px"},setReadonly:function(t,e){t._combo&&(t._combo_ro=e,t._combo.readonly(t._combo_ro))},isReadonly:function(t){return t._combo_ro||!1},setFocus:function(t){t._enabled&&t._combo.setFocus()},_setCss:function(t,e,i){t._combo.setFontSize(i,i)}},function(){for(var t in{doAddLabel:1,doAddInput:1,doLoadOpts:1,doUnloadNestedLists:1,setText:1,getText:1,isEnabled:1,_checkNoteWidth:1})dhtmlXForm.prototype.items.combo[t]=dhtmlXForm.prototype.items.select[t]}(),dhtmlXForm.prototype.items.combo.d2=dhtmlXForm.prototype.items.select.destruct,dhtmlXForm.prototype.getCombo=function(t){return this.doWithItem(t,"getCombo")},dhtmlXForm.prototype.items.calendar={render:function(t,e){var i=this;t._type="calendar",t._enabled=!0;var s=navigator.userAgent,n=s.indexOf("MSIE 6.0")>=0||s.indexOf("MSIE 7.0")>=0||s.indexOf("MSIE 8.0")>=0;this.doAddLabel(t,e),this.doAddInput(t,e,"INPUT","TEXT",!0,!0,"dhxform_textarea calendar"),this.doAttachChangeLS(t),n&&(t.childNodes[t._ll?1:0].childNodes[0].onfocus2=t.childNodes[t._ll?1:0].childNodes[0].onfocus,t.childNodes[t._ll?1:0].childNodes[0].onfocus=function(){return 1==this._skipOnFocus?void(this._skipOnFocus=!1):void this.onfocus2.apply(this,arguments)}),t.childNodes[t._ll?1:0].childNodes[0]._idd=t._idd,t.childNodes[t._ll?1:0].childNodes[0].onblur=function(){var t=this.parentNode.parentNode;if(t._c.base._formMouseDown)return t._c.base._formMouseDown=!1,this._skipOnFocus=!0,this.focus(),this.value=this.value,t=null,!0;var e=t.getForm();e._ccDeactivate(t._idd),i.checkEnteredValue(this.parentNode.parentNode),e.live_validate&&i._validate(t),e.callEvent("onBlur",[t._idd]),e=t=null},t._f=e.dateFormat||null,t._f0=e.serverDateFormat||t._f;var o=t.getForm();return t._c=new dhtmlXCalendarObject(t.childNodes[t._ll?1:0].childNodes[0],e.skin||o.skin||"dhx_skyblue"),t._c._nullInInput=!0,t._c.enableListener(t.childNodes[t._ll?1:0].childNodes[0]),null!=t._f&&t._c.setDateFormat(t._f),window.dhx4.s2b(e.enableTime)||t._c.hideTime(),window.dhx4.s2b(e.showWeekNumbers)&&t._c.showWeekNumbers(),isNaN(e.weekStart)||t._c.setWeekStartDay(e.weekStart),"undefined"!=typeof e.calendarPosition&&t._c.setPosition(e.calendarPosition),null!=e.minutesInterval&&t._c.setMinutesInterval(e.minutesInterval),t._c._itemIdd=t._idd,t._c.attachEvent("onBeforeChange",function(e){if(t._value!=e){if(t.checkEvent("onBeforeChange")&&t.callEvent("onBeforeChange",[t._idd,t._value,e])!==!0)return!1;t._tempValue=t._value=e,i.setValue(t,e,!1),t.callEvent("onChange",[this._itemIdd,t._value])}return!0}),t._c.attachEvent("onClick",function(){t._tempValue=null}),n&&(t._c.base.onmousedown=function(){return this._formMouseDown=!0,!1}),this.setValue(t,e.value),o=null,this},getCalendar:function(t){return t._c},setSkin:function(t,e){t._c.setSkin(e)},setValue:function(t,e,i){e&&null!=e&&"undefined"!=typeof e&&""!=e?(t._value=e instanceof Date?e:t._c._strToDate(e,t._f0||t._c._dateFormat),t.childNodes[t._ll?1:0].childNodes[0].value=t._c._dateToStr(t._value,t._f||t._c._dateFormat)):(t._value=null,t.childNodes[t._ll?1:0].childNodes[0].value=""),i!==!1&&t._c.setDate(t._value)},getValue:function(t,e){var i=t._tempValue||t._c.getDate();return e===!0&&null==i?"":e===!0?t._c._dateToStr(i,t._f0||t._c._dateFormat):i},setDateFormat:function(t,e,i){t._f=e,t._f0=i||t._f,t._c.setDateFormat(t._f),this.setValue(t,this.getValue(t))},destruct:function(t){t._c.disableListener(t.childNodes[t._ll?1:0].childNodes[0]),t._c.unload(),t._c=null;try{delete t._c}catch(e){}t._f=null;try{delete t._f}catch(e){}t._f0=null;try{delete t._f0}catch(e){}t.childNodes[t._ll?1:0].childNodes[0]._idd=null,t.childNodes[t._ll?1:0].childNodes[0].onblur=null,this.d2(t),t=null},checkEnteredValue:function(t){this.setValue(t,t._c.getDate())}},function(){for(var t in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.calendar[t]=dhtmlXForm.prototype.items.input[t]}(),dhtmlXForm.prototype.items.calendar.doAttachChangeLS=dhtmlXForm.prototype.items.select.doAttachChangeLS,dhtmlXForm.prototype.items.calendar.d2=dhtmlXForm.prototype.items.input.destruct,dhtmlXForm.prototype.getCalendar=function(t){return this.doWithItem(t,"getCalendar")},dhtmlXForm.prototype.setCalendarDateFormat=function(t,e,i){this.doWithItem(t,"setDateFormat",e,i)},dhtmlXForm.prototype.items.btn2state={setChecked:function(t,e){t._checked=e===!0?!0:!1,t.childNodes[t._ll?1:0].lastChild.className="dhxform_img "+t._cssName+"_"+(t._checked?"1":"0"),this.doCheckValue(t)}},function(){for(var t in dhtmlXForm.prototype.items.checkbox)dhtmlXForm.prototype.items.btn2state[t]||(dhtmlXForm.prototype.items.btn2state[t]=dhtmlXForm.prototype.items.checkbox[t])}(),dhtmlXForm.prototype.items.btn2state.render2=dhtmlXForm.prototype.items.btn2state.render,dhtmlXForm.prototype.items.btn2state.render=function(t,e){return e._autoInputWidth=!1,this.render2(t,e),t._type="btn2state",t._cssName="undefined"==typeof e.cssName?"btn2state":e.cssName,t._updateImgNode=function(){},t._doOnFocus=function(){t.getForm().callEvent("onFocus",[t._idd])},t._doOnBlur=function(){t.getForm().callEvent("onBlur",[t._idd])},t._doOnKeyUpDown=function(t,e){this.callEvent(t,[this.childNodes[this._ll?0:1].childNodes[0],e,this._idd])},this.setChecked(t,t._checked),this},dhtmlXForm.prototype.setFormData_btn2state=function(t,e){this[1==e||1==parseInt(e)||"true"==e||e==this.getItemValue(t)?"checkItem":"uncheckItem"](t)},dhtmlXForm.prototype.getFormData_btn2state=function(t){return this.isItemChecked(t)?this.getItemValue(t):0},dhtmlXForm.prototype.items.colorpicker={colorpicker:{},render:function(t,e){var i=this;t._type="colorpicker",t._enabled=!0,this.doAddLabel(t,e),this.doAddInput(t,e,"INPUT","TEXT",!0,!0,"dhxform_textarea"),t._value=e.value||"",t.childNodes[t._ll?1:0].childNodes[0].value=t._value;var s={input:t.childNodes[t._ll?1:0].childNodes[0],custom_colors:1==window.dhx4.s2b(e.enableCustomColors),skin:t.getForm().skin};return this.colorpicker[t._idd]=new dhtmlXColorPicker(s),this.colorpicker[t._idd]._nodes[0].valueColor=null,this.colorpicker[t._idd].base.className+=" dhtmlxcp_in_form","undefined"!=typeof e.customColors&&this.colorpicker[t._idd].setCustomColors(e.customColors),this.colorpicker[t._idd].attachEvent("onSelect",function(e){if(t._value!=e){if(t.checkEvent("onBeforeChange")&&t.callEvent("onBeforeChange",[t._idd,t._value,e])!==!0)return void(t.childNodes[t._ll?1:0].childNodes[0].value=t._value);t._value=e,i.setValue(t,e),t.callEvent("onChange",[t._idd,t._value])}}),this.colorpicker[t._idd].attachEvent("onHide",function(){var e=t.childNodes[t._ll?1:0].childNodes[0];e.value!=t._value&&(e.value=t._value),e=null}),t.childNodes[t._ll?1:0].childNodes[0]._idd=t._idd,this},getColorPicker:function(t){return this.colorpicker[t._idd]},destruct:function(t){this.colorpicker[t._idd].unload&&this.colorpicker[t._idd].unload(),this.colorpicker[t._idd]=null;try{delete this.colorpicker[t._idd]}catch(e){}t.childNodes[t._ll?1:0].childNodes[0]._idd=null,this.d2(t),t=null},setSkin:function(t,e){this.colorpicker[t._idd].setSkin(e)}},function(){for(var t in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,enable:1,disable:1,isEnabled:1,setWidth:1,setReadonly:1,isReadonly:1,setValue:1,getValue:1,updateValue:1,setFocus:1,getInput:1})dhtmlXForm.prototype.items.colorpicker[t]=dhtmlXForm.prototype.items.input[t]}(),dhtmlXForm.prototype.items.colorpicker.d2=dhtmlXForm.prototype.items.input.destruct,dhtmlXForm.prototype.getColorPicker=function(t){return this.doWithItem(t,"getColorPicker")},dhtmlXForm.prototype.items.container={render:function(t,e){return t._type="container",t._enabled=!0,this.doAddLabel(t,e),this.doAddInput(t,e,"DIV",null,!0,!0,"dhxform_container"),this},getContainer:function(t){return t.childNodes[t._ll?1:0].childNodes[0]},enable:function(t){t._enabled=!0,String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t.callEvent("onEnable",[t._idd])},disable:function(t){t._enabled=!1,String(t.className).search("disabled")<0&&(t.className+=" disabled"),t.callEvent("onDisable",[t._idd])},doAttachEvents:function(){},setValue:function(){},getValue:function(){return null}},dhtmlXForm.prototype.getContainer=function(t){return this.doWithItem(t,"getContainer")},function(){for(var t in dhtmlXForm.prototype.items.input)dhtmlXForm.prototype.items.container[t]||(dhtmlXForm.prototype.items.container[t]=dhtmlXForm.prototype.items.input[t])}(),dhtmlXForm.prototype.items.editor={editor:{},render:function(t,e){!isNaN(e.rows);t._type="editor",t._enabled=!0,this.doAddLabel(t,e),this.doAddInput(t,e,"DIV",null,!0,!0,"dhxform_item_template"),t._value=e.value||"";var i=this;return this.editor[t._idd]=new dhtmlXEditor({parent:t.childNodes[t._ll?1:0].childNodes[0],content:t._value}),this.editor[t._idd].attachEvent("onAccess",function(e,s){if(t.callEvent("_onBeforeEditorAccess",[]),_dhxForm_doClick(document.body,"click"),"blur"==e){if(i.doOnBlur(t,this),t.callEvent("onBlur",[t._idd]),"dhx_terrace"==t.getForm().skin){var n=t.childNodes[t._ll?1:0].className;n.indexOf("dhxeditor_focus")>=0&&(t.childNodes[t._ll?1:0].className=n.replace(/\s{0,}dhxeditor_focus/gi,""))}}else if(t.callEvent("onEditorAccess",[t._idd,e,s,this,t.getForm()]),t.callEvent("onFocus",[t._idd]),"dhx_terrace"==t.getForm().skin){var n=t.childNodes[t._ll?1:0].className;-1==n.indexOf("dhxeditor_focus")&&(t.childNodes[t._ll?1:0].className+=" dhxeditor_focus")}}),this.editor[t._idd].attachEvent("onToolbarClick",function(e){t.callEvent("onEditorToolbarClick",[t._idd,e,this,t.getForm()])}),e.readonly&&this.setReadonly(t,!0),t.childNodes[t._ll?0:1].childNodes[0].removeAttribute("for"),t.childNodes[t._ll?0:1].childNodes[0].onclick=function(){i.editor[t._idd]._focus()},this},doOnBlur:function(t,e){var i=e.getContent();if(t._value!=i){if(t.checkEvent("onBeforeChange")&&t.callEvent("onBeforeChange",[t._idd,t._value,i])!==!0)return void e.setContent(t._value);t._value=i,t.callEvent("onChange",[t._idd,i])}},setValue:function(t,e){t._value!=e&&(t._value=e,this.editor[t._idd].setContent(t._value))},getValue:function(t){return t._value=this.editor[t._idd].getContent(),t._value},enable:function(t){this.editor[t._idd].setReadonly(!1),this.doEn(t)},disable:function(t){this.editor[t._idd].setReadonly(!0),this.doDis(t)},setReadonly:function(t,e){this.editor[t._idd].setReadonly(e)},getEditor:function(t){return this.editor[t._idd]||null},destruct:function(t){t.childNodes[t._ll?0:1].childNodes[0].onclick=null,this.editor[t._idd].unload(),this.editor[t._idd]=null,this.d2(t),t=null},setFocus:function(t){this.editor[t._idd]._focus()}},function(){for(var t in{doAddLabel:1,doAddInput:1,doUnloadNestedLists:1,setText:1,getText:1,setWidth:1,isEnabled:1})dhtmlXForm.prototype.items.editor[t]=dhtmlXForm.prototype.items.template[t]}(),dhtmlXForm.prototype.items.editor.d2=dhtmlXForm.prototype.items.select.destruct,dhtmlXForm.prototype.items.editor.doEn=dhtmlXForm.prototype.items.select.enable,dhtmlXForm.prototype.items.editor.doDis=dhtmlXForm.prototype.items.select.disable,dhtmlXForm.prototype.getEditor=function(t){return this.doWithItem(t,"getEditor")},dhtmlXForm.prototype.items.upload={render:function(t,e){t._type="up",t._enabled=!0,t._checked=!0,t.className=e.position+("string"==typeof e.className?" "+e.className:"");var i=document.createElement("DIV");return t.appendChild(i),isNaN(e.inputLeft)||(t.style.left=parseInt(e.inputLeft)+"px"),isNaN(e.inputTop)||(t.style.top=parseInt(e.inputTop)+"px"),"auto"!=e.inputWidth&&(isNaN(e.inputWidth)||(i.style.width=parseInt(e.inputWidth)+"px")),t._uploader=new dhtmlXFileUploader(i,e.swfPath||"",e.swfUrl||"",e.mode||null,e.swfLogs,e.slXap||"",e.slUrl||"",e.slLogs||"",e.multiple),t._uploader.setURL(e.url||""),t._uploader.callEvent=t.callEvent,"undefined"!=typeof e.autoStart&&t._uploader.setAutoStart(e.autoStart),"undefined"!=typeof e.autoRemove&&t._uploader.setAutoRemove(e.autoRemove),"undefined"!=typeof e.titleScreen&&t._uploader.enableTitleScreen(e.titleScreen),"undefined"!=typeof e.titleText&&t._uploader.setTitleText(e.titleText),1==e.hidden&&this.hide(t),1==e.disabled&&this.userDisable(t),"auto"!=e.inputHeight&&0/0!=parseInt(e.inputHeight)&&(t._uploader.p_files.style.height=parseInt(e.inputHeight)+"px"),this},destruct:function(t){for(this.doUnloadNestedLists(t),t._uploader.callEvent=null,t._uploader.unload(),t._uploader=null,t._checked=null,t._enabled=null,t._idd=null,t._type=null,t.onselectstart=null,t._autoCheck=null,t.callEvent=null,t.checkEvent=null,t.getForm=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);t.parentNode.removeChild(t),t=null},setText:function(){},getText:function(){},enable:function(t){t._enabled=!0,String(t.className).search("disabled")>=0&&(t.className=String(t.className).replace(/disabled/gi,"")),t._uploader.enable()},disable:function(t){t._enabled=!1,String(t.className).search("disabled")<0&&(t.className+=" disabled"),t._uploader.disable()},setWidth:function(t,e){t.childNodes[0].style.width=e+"px",t._width=e},getWidth:function(t){return t._width||parseInt(t.childNodes[0].style.width)},setValue:function(t){t._uploader.clear()},getValue:function(t){var e=t._uploader.getData(),i={},s=0;for(var n in e)i[t._idd+"_r_"+s]=e[n].realName,i[t._idd+"_s_"+s]=e[n].serverName,s++;return i[t._idd+"_count"]=s,i},getUploader:function(t){return t._uploader},getStatus:function(t){return t._uploader.getStatus()}},function(){for(var t in{doUnloadNestedLists:1,isEnabled:1})dhtmlXForm.prototype.items.upload[t]=dhtmlXForm.prototype.items.checkbox[t]}(),dhtmlXForm.prototype.setFormData_upload=function(t){this.doWithItem(t,"setValue")},dhtmlXForm.prototype.getUploader=function(t){return this.doWithItem(t,"getUploader")},dhtmlXForm.prototype.getUploaderStatus=function(t){return this.doWithItem(t,"getStatus")},dhtmlXFileUploader.prototype.html5=function(){},dhtmlXFileUploader.prototype.html5.prototype={_initEngine:function(){var t=this;this.buttons.browse.onclick=function(){t._enabled&&t.f.click()},this._progress_type="percentage";var e=window.navigator.userAgent;null!=e.match(/Windows/gi)&&null!=e.match(/AppleWebKit/gi)&&null!=e.match(/Safari/gi)&&(e.match(/Version\/5\.1\.5/gi)&&(this._upload_mp=!1),e.match(/Version\/5\.1[^\.\d{1,}]/gi)&&(this._upload_dnd=!1),e.match(/Version\/5\.1\.1/gi)&&(this._upload_mp=!1,this._upload_dnd=!1),e.match(/Version\/5\.1\.2/gi)&&(this._upload_dnd=!1),e.match(/Version\/5\.1\.7/gi)&&(this._upload_mp=!1)),this._addFileInput(),this._upload_dnd?(this.p.ondragenter=function(t){t.dataTransfer&&(t.stopPropagation(),t.preventDefault())},this.p.ondragover=function(t){t.dataTransfer&&(t.stopPropagation(),t.preventDefault())},this.p.ondrop=function(e){e.dataTransfer&&(e.stopPropagation(),e.preventDefault(),t._enabled&&t._parseFilesInInput(e.dataTransfer.files))},this._titleText="Drag-n-Drop files here or<br>click to select files for upload."):this._titleText="Click to select files for upload."},_addFileInput:function(){null!=this.f&&(this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null);var t=this;this.f=document.createElement("INPUT"),this.f.type="file",this._upload_mp&&(this.f.multiple="1"),this.f.className="dhx_uploader_input",this.p_controls.appendChild(this.f),this.f.onchange=function(){t._parseFilesInInput(this.files),window.dhx4.isOpera?t._addFileInput():this.value=""}},_doUploadFile:function(id){var that=this;this._loader||(this._loader=new XMLHttpRequest,this._loader.upload.onprogress=function(t){"uploading"==that._files[this._idd].state&&that._updateFileInList(this._idd,"uploading",Math.round(100*t.loaded/t.total))},this._loader.onload=function(e){dhx4.temp=null;try{eval("dhx4.temp="+this.responseText)}catch(e){}var r=dhx4.temp;dhx4.temp=null,"object"==typeof r&&null!=r&&"undefined"!=typeof r.state&&1==r.state?(that._onUploadSuccess(this.upload._idd,r.name,null,r.extra),r=null):that._onUploadFail(this.upload._idd,null!=r&&null!=r.extra?r.extra:null)},this._loader.onerror=function(){that._onUploadFail(this.upload._idd)},this._loader.onabort=function(){that._onUploadAbort(this.upload._idd)}),this._loader.upload._idd=id;var form=new FormData;form.append("file",this._files[id].file),this._loader.open("POST",this._url+(String(this._url).indexOf("?")<0?"?":"&")+"mode=html5&dhxr"+(new Date).getTime(),!0),this._loader.setRequestHeader("X-Requested-With","XMLHttpRequest"),this._loader.send(form)},_uploadStop:function(){this._uploading&&this._loader&&this._loader.abort()},_parseFilesInInput:function(t){for(var e=0;e<t.length;e++)this._addFileToQueue(t[e])},_addFileToQueue:function(t){if(this._beforeAddFileToList(t.name,t.size)){var e=t._idd||window.dhx4.newId();this._files[e]={file:t,name:t.name,size:t.size,state:"added"},this._addFileToList(e,t.name,t.size,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)}},_removeFileFromQueue:function(t){if(this._files[t]){var e=this._files[t].name,i=null!=this._data&&null!=this._data[t]?this._data[t].serverName:null;
if(this.callEvent("onBeforeFileRemove",[e,i])===!0){var s=!1;this._uploading&&t==this._loader.upload._idd&&"uploading"==this._files[t].state&&(this._uploadStop(),s=!0),this._files[t].file=null,this._files[t].name=null,this._files[t].size=null,this._files[t].state=null,this._files[t]=null,delete this._files[t],this._removeFileFromList(t),this.callEvent("onFileRemove",[e,i]),s&&this._uploadStart()}}},_unloadEngine:function(){this.buttons.browse.onclick=null,this.f.onchange=null,this.f.parentNode.removeChild(this.f),this.f=null,this.p.ondragenter=null,this.p.ondragover=null,this.p.ondrop=null,this._loader&&(this._loader.upload.onprogress=null,this._loader.onload=null,this._loader.onerror=null,this._loader.onabort=null,this._loader.upload._idd=null,this._loader=null),this._initEngine=null,this._doUploadFile=null,this._uploadStop=null,this._parseFilesInInput=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.html4=function(){},dhtmlXFileUploader.prototype.html4.prototype={_initEngine:function(){this._addForm(),this._progress_type="loader",this._titleText="Click button<br>to select files for upload."},_addForm:function(){var t=this,e=window.dhx4.newId();this.k||(this.k=document.createElement("DIV"),this.k.className="dhx_file_form_cont",this.buttons.browse.appendChild(this.k),this.fr_name="dhx_file_"+window.dhx4.newId(),this.k.innerHTML='<iframe name="'+this.fr_name+'" style="height:0px;width:0px;" frameBorder="0"></iframe>',this.fr=this.k.firstChild,window.navigator.userAgent.indexOf("MSIE")>=0?this.fr.onreadystatechange=function(){"complete"==this.readyState&&t._onLoad()}:this.fr.onload=function(){t._onLoad()});var i=document.createElement("DIV");i.innerHTML="<form method='POST' enctype='multipart/form-data' target='"+this.fr_name+"' class='dhx_file_form' name='dhx_file_form_"+window.dhx4.newId()+"'><input type='hidden' name='mode' value='html4'><input type='hidden' name='uid' value='"+e+"'><input type='file' name='file' class='dhx_file_input'></form>",this.k.appendChild(i),i.firstChild.lastChild._idd=e,i.firstChild.lastChild.onchange=function(){t._beforeAddFileToList(this.value,null)&&(t._addFileToQueue(this),this.onchange=null,this.parentNode.parentNode.style.display="none",t._addForm())},i=null},_onLoad:function(){if(this._uploading){dhx4.temp=null;try{eval("dhx4.temp="+this.fr.contentWindow.document.body.innerHTML)}catch(e){}var r=dhx4.temp;if(dhx4.temp=null,"object"==typeof r&&null!=r&&"undefined"!=typeof r.state){if("cancelled"==r.state)return this._onUploadAbort(this.fr._idd),void(r=null);if(1==r.state)return"undefined"==typeof r.size||isNaN(r.size)||(this._files[this.fr._idd].size=r.size),this._onUploadSuccess(this.fr._idd,r.name,null,r.extra),void(r=null)}this._onUploadFail(this.fr._idd,null!=r&&null!=r.extra?r.extra:null)}},_addFileToQueue:function(t){var e=t.value.match(/[^\\\/]*$/g);e=null!=e[0]?e[0]:t.value,this._files[t._idd]={name:e,form:t.parentNode,node:t.parentNode.parentNode,input:t,state:"added"},this._addFileToList(t._idd,t.value,!1,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(t){var e=this._files[t].name,i=null!=this._data&&null!=this._data[t]?this._data[t].serverName:null;this.callEvent("onBeforeFileRemove",[e,i])===!0&&(this._files[t].input.onchange=null,this._files[t].form.removeChild(this._files[t].input),this._files[t].node.removeChild(this._files[t].form),this._files[t].node.parentNode.removeChild(this._files[t].node),this._files[t].input=null,this._files[t].name=null,this._files[t].form=null,this._files[t].node=null,this._files[t].size=null,this._files[t].state=null,this._files[t]=null,delete this._files[t],this._removeFileFromList(t),this.callEvent("onFileRemove",[e,i]))},_doUploadFile:function(t){this.fr._idd=t,this._files[t].form.action=this._url,this._files[t].form.submit()},_uploadStop:function(){this._uploading&&(this.fr.contentWindow.location.href=this._url+(this._url.indexOf("?")<0?"?":"&")+"mode=html4&action=cancel&dhxr"+(new Date).getTime())},_unloadEngine:function(){this.k&&(this.fr_name=null,this.fr.onreadystatechange=null,this.fr.onload=null,this.fr.parentNode.removeChild(this.fr),this.fr=null,this.k.firstChild.firstChild.lastChild.onchange=null,this.k.parentNode.removeChild(this.k),this.k=null),this._initEngine=null,this._addForm=null,this._onLoad=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._doUploadFile=null,this._uploadStop=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.flash=function(){},dhtmlXFileUploader.prototype.flash.prototype={_initEngine:function(){window.dhtmlXFileUploaderSWFObjects||(window.dhtmlXFileUploaderSWFObjects={items:{},callEvent:function(t,e,i){return window.dhtmlXFileUploaderSWFObjects.items[t].uploader[e].apply(window.dhtmlXFileUploaderSWFObjects.items[t].uploader,i)}});this._swf_obj_id="dhtmlXFileUploaderSWFObject_"+window.dhx4.newId(),this._swf_file_url=this._swf_file_url+(this._swf_file_url.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime(),this.buttons.browse.innerHTML="<div id='"+this._swf_obj_id+"' style='width:100%;height:100%;'></div>",swfobject.embedSWF(this._swf_file_url,this._swf_obj_id,"100%","100%","9",null,{ID:this._swf_obj_id,enableLogs:this._swf_logs},{wmode:"transparent"});var t=swfobject.getFlashPlayerVersion();this._titleText="Engine successfuly inited<br>Flash Player: "+t.major+"."+t.minor+"."+t.release,this._progress_type="percentage",window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]={id:this._swf_obj_id,uploader:this}},_beforeAddFileToQueue:function(t,e){return this.callEvent("onBeforeFileAdd",[t,e])===!0},_addFileToQueue:function(t,e,i){if(window.dhx4.isIE){var s=document.createElement("INPUT");s.type="TEXT",s.style.position="absolute",s.style.left="0px",s.style.top=window.dhx4.absTop(this.buttons.browse)+"px",s.style.width="10px",document.body.appendChild(s),s.focus(),document.body.removeChild(s),s=null}this._files[t]={name:e,size:i,state:"added"},this._addFileToList(t,e,i,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(t){if(this._files[t]){var e=this._files[t].name,i=null!=this._data&&null!=this._data[t]?this._data[t].serverName:null;if(this.callEvent("onBeforeFileRemove",[e,i])===!0){var s=!1;this._uploading&&"uploading"==this._files[t].state&&(this._uploadStop(),s=!0),swfobject.getObjectById(this._swf_obj_id).removeFileById(t),this._files[t].name=null,this._files[t].size=null,this._files[t].state=null,this._files[t]=null,delete this._files[t],this._removeFileFromList(t),this.callEvent("onFileRemove",[e,i]),s&&this._uploadStart()}}},_doUploadFile:function(t){swfobject.getObjectById(this._swf_obj_id).upload(t,this._swf_upolad_url)},_uploadStop:function(){for(var t in this._files)"uploading"==this._files[t].state&&swfobject.getObjectById(this._swf_obj_id).uploadStop(t)},_unloadEngine:function(){window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]&&(window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].id=null,window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id].uploader=null,window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]=null,delete window.dhtmlXFileUploaderSWFObjects.items[this._swf_obj_id]),this._swf_obj_id=null,this._initEngine=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._doUploadFile=null,this._uploadStop=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.sl=function(){},dhtmlXFileUploader.prototype.sl.prototype={_initEngine:function(){"undefined"==typeof this._sl_v&&(this._sl_v=this.getSLVersion()),window.dhtmlXFileUploaderSLObjects||(window.dhtmlXFileUploaderSLObjects={items:{},callEvent:function(t,e,i){window.dhtmlXFileUploaderSLObjects.items[t].uploader[e].apply(window.dhtmlXFileUploaderSLObjects.items[t].uploader,i)}}),this._sl_obj_id="dhtmlXFileUploaderSLObject_"+window.dhx4.newId(),0!=this._sl_v?(this._titleText="Engine successfuly inited<br>Silverlight version: "+this._sl_v[0]+"."+this._sl_v[1],this.buttons.browse.innerHTML='<div style="width:100%;height:100%;"><object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="100%" height="100%" id="'+this._sl_obj_id+'"><param name="source" value="'+this._sl_xap+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="initParams" value="SLID='+this._sl_obj_id+",LOGS="+this._sl_logs+'"/><param name="minRuntimeVersion" value="5.0"/></object></div>'):(this._titleText="Silverlight plugin not found<br>or version less than 4.0",this.buttons.browse.style.cursor="wait",this.buttons.browse.title=""),this._progress_type="percentage",window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]={id:this._sl_obj_id,uploader:this}},_addFileToQueue:function(t,e,i){this._files[t]={name:e,size:i,state:"added"},this._addFileToList(t,e,i,"added",0),this._autoStart&&!this._uploading&&this._uploadStart(!0)},_removeFileFromQueue:function(t){if(this._files[t]){var e=!1;this._uploading&&"uploading"==this._files[t].state&&(this._uploadStop(),e=!0),document.getElementById([this._sl_obj_id]).Content.a.removeFileById(t),this._files[t].name=null,this._files[t].size=null,this._files[t].state=null,this._files[t]=null,delete this._files[t],this._removeFileFromList(t),e&&this._uploadStart()}},_doUploadFile:function(t){document.getElementById(this._sl_obj_id).Content.a.upload(t,this._sl_upload_url,"&mode=sl&dhxr"+(new Date).getTime())},_uploadStop:function(){this._uploading=!1;for(var t in this._files)"uploading"==this._files[t].state&&document.getElementById(this._sl_obj_id).Content.a.uploadStop(t)},_unloadEngine:function(){window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]&&(window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].id=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id].uploader=null,window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]=null,delete window.dhtmlXFileUploaderSLObjects.items[this._sl_obj_id]),this._sl_obj_id=null,this._initEngine=null,this._addFileToQueue=null,this._removeFileFromQueue=null,this._doUploadFile=null,this._uploadStop=null,this._unloadEngine=null}},dhtmlXFileUploader.prototype.setSLURL=function(t){this._sl_upload_url=t},dhtmlXFileUploader.prototype.getSLVersion=function(){var t=!1;if(window.dhx4.isIE)try{var e=new ActiveXObject("AgControl.AgControl");if(null!=e)for(var i=4,s=0;e.isVersionSupported([i,s].join("."));)t=[i,s],++s>9&&(i++,s=0);e=null}catch(n){}else null!=navigator.plugins["Silverlight Plug-In"]&&(t=navigator.plugins["Silverlight Plug-In"].description.split("."));return t},dhtmlXAccordionCell.prototype=new dhtmlXCellObject,dhtmlXAccordionCell.prototype._initHeader=function(){var t=document.createElement("DIV");t.className="dhx_cell_hdr",t.innerHTML="<div class='dhx_cell_hdr_text'></div><div class='dhx_cell_hdr_arrow'></div>",this.cell.insertBefore(t,this.cell.childNodes[this.conf.idx.cont]),t=null,this.conf.ofs_nodes.t._getHdrHeight="func",this.conf.hdr={visible:!0},this.conf.idx_data.hdr="dhx_cell_hdr",this._updateIdx()},dhtmlXAccordionCell.prototype._getHdrHeight=function(){return this.cell.childNodes[this.conf.idx.hdr].offsetHeight},dhtmlXAccordionCell.prototype.setText=function(t){this.conf.text=t,this.cell.childNodes[this.conf.idx.hdr].firstChild.innerHTML="<span>"+t+"</span>"},dhtmlXAccordionCell.prototype.getText=function(){return this.conf.text},dhtmlXAccordionCell.prototype.setIcon=function(t){var e=this.cell.childNodes[this.conf.idx.hdr];if("dhx_cell_hdr_icon"!=e.firstChild.className){e.firstChild.className+=" dhx_cell_hdr_icon";var i=document.createElement("IMG");i.className="dhx_cell_hdr_icon",e.insertBefore(i,e.firstChild),i=null}e.firstChild.src=this.acc.conf.icons_path+t,e=null},dhtmlXAccordionCell.prototype.clearIcon=function(){var t=this.cell.childNodes[this.conf.idx.hdr];"dhx_cell_hdr_icon"==t.firstChild.className&&(t.removeChild(t.firstChild),t.firstChild.className=String(t.firstChild.className).replace(/\s{1,}dhx_cell_hdr_icon/gi,"")),t=null},dhtmlXAccordionCell.prototype._open=function(t){var e={};if(this.acc.conf.multi_mode){var i={};i[this._idd]=!0,e=this.acc._getDynData(i),this.acc._openId=this._idd,this.acc._openCache={},this.acc._openMode="open"}else e[this._idd]=this.conf.size.h;for(var s in e){null!=this.acc._openCache&&(this.acc._openCache[s]=!0);var n=this.acc.t[s].cell;n.cell.className=String(n.cell.className).replace(/\s{1,}dhx_cell_closed/gi,""),n.conf.opened=!0,n._trInitEv("open",t),n.conf.size.h=e[s],n.cell.style.height=n.conf.size.h+"px",n=null}0==this.conf.tr.prop&&(this.acc._openId=this.acc._openCache=this.acc._openMode=null,this._onActiveCall(!0))},dhtmlXAccordionCell.prototype._close=function(t){var e={};if(this.acc.conf.multi_mode){var i={};i[this._idd]=!0,e=this.acc._getDynData(null,i),this.acc._openId=this._idd,this.acc._openCache={},this.acc._openMode="close"}else e[this._idd]=this._getHdrHeight();for(var s in e){var n=this.acc.t[s].cell;null!=this.acc._openCache&&(this.acc._openCache[s]=!0),s==this._idd?(n.cell.className+=" dhx_cell_closed",n.conf.opened=!1,n._trInitEv("close",t)):(n.conf.size.h=e[s],n._adjustCell(),n._trInitEv("open",t)),n.cell.style.height=e[s]+"px",n=null}0==this.conf.tr.prop&&(this.acc._openId=this.acc._openCache=this.acc._openMode=null,this._onActiveCall(!1))},dhtmlXAccordionCell.prototype.isOpened=function(){return 1==this.conf.opened},dhtmlXAccordionCell.prototype._trInitEv=function(t,e){0!=this.conf.tr.prop&&(this._trAttachEv(),this.cell._accObj||(this.cell._accObj=this.acc),e&&(this.cell.style[this.conf.tr.prop]=this.conf.tr["height_"+t]),this._cellSetOpacity(t,e))},dhtmlXAccordionCell.prototype._trAttachEv=function(){this.conf.tr.ev_attached||(this.cell._trProp=this.conf.tr.prop,this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,!1),this.conf.tr.ev_attached=!0)},dhtmlXAccordionCell.prototype._trDetachEv=function(){this.conf.tr.ev_attached&&(this.cell.addEventListener(this.conf.tr.ev,this._trOnEnd,!1),this.conf.tr.ev_attached=!1)},dhtmlXAccordionCell.prototype._trOnEnd=function(t){t.stopPropagation&&t.stopPropagation(),"height"==t.propertyName&&(this.style[this._trProp]="",this._accObj.conf.multi_mode&&(null!=this._accObj._openCache&&(this._accObj._openCache[this._accId]=!1),this._accObj._adjustOpened()),1==this._accObj.conf.on_active_click&&(this._accObj.conf.multi_mode?(this._accObj._callMainEvent("onActive",[this._accId,this._accObj.t[this._accId].cell.conf.opened]),this._accObj.conf.on_active_click=!1):(this._accObj._callMainEvent("onActive",[this._accObj.conf.on_active_id,!0]),this._accObj.conf.on_active_id=null,this._accObj.conf.on_active_click=!1)),this._accObj=null)},dhtmlXAccordionCell.prototype._cellSetOpacity=function(t,e){for(var i in this.conf.idx)1!={hdr:!0,pr1:!0,pr2:!0}[i]&&(e&&(this.cell.childNodes[this.conf.idx[i]].style[this.conf.tr.prop]=this.conf.tr["op_"+t]),this.cell.childNodes[this.conf.idx[i]].style.opacity=this.conf.tr["op_v_"+t])},dhtmlXAccordionCell.prototype._onActiveCall=function(t){0!=this.acc.conf.on_active_click&&(1==this.acc.conf.multi_mode?(this.acc._callMainEvent("onActive",[this._idd,this.conf.opened]),this.acc.conf.on_active_click=!1):1==t&&(this.acc._callMainEvent("onActive",[this._idd,!0]),this.acc.conf.on_active_click=!1))},dhtmlXAccordionCell.prototype.show=function(){if(!this.conf.visible){if(0==this.conf.docked)return void this.dock();this.cell.style.display="",this.conf.visible=!0,this.acc.conf.multi_mode||(this.acc.conf.hiden_count--,this.acc._updateCellsHeight(),this.acc._updateCellsMargin()),this.acc.conf.size_changed?(this.acc.setSizes(),this.acc.conf.size_changed=!1):this.acc._adjustOpened()}},dhtmlXAccordionCell.prototype.hide=function(){this.conf.visible&&(!this.acc.conf.multi_mode&&this.conf.opened&&(this._close(!1),this.acc.conf.last_opened=null),this.cell.style.display="none",this.conf.visible=!1,this.acc.conf.multi_mode||(this.acc.conf.hiden_count++,this.acc._updateCellsHeight(),this.acc._updateCellsMargin()),this.acc._adjustOpened())},dhtmlXAccordionCell.prototype.isVisible=function(){return 1==this.conf.visible},dhtmlXAccordionCell.prototype.setHeight=function(t){this.acc.conf.multi_mode&&("*"==t?this.conf.h_auto=!0:(this.conf.h_auto=!1,this.conf.size.h=t),this.conf.opened&&("*"!=t&&(this.cell.style.height=t+"px"),this.acc._adjustOpened()))},dhtmlXAccordionCell.prototype.moveOnTop=function(){this.cell.parentNode.firstChild!=this.cell&&(this.cell.parentNode.insertBefore(this.cell,this.cell.parentNode.firstChild),this.acc._updateCellsMargin())},dhtmlXAccordionCell.prototype._initDocking=function(){var t=this;this.dock=function(){if(null!=this.acc.dhxWins&&1!=this.conf.docked){var t=this.acc.dhxWins.window(this._idd);t.close(),this._attachFromCell(t),this.conf.docked=!0,this.show(),this.conf.dock_opened&&this.open(),t=null,this.acc._callMainEvent("onDock",[this._idd])}},this.undock=function(t,e,i,s){if(null!=this.acc.dhxWins&&0!=this.conf.docked){if(this.conf.dock_opened=this.conf.opened,null!=this.acc.dhxWins.window(this._idd)){var n=this.acc.dhxWins.window(this._idd);n.show()}else{null==t&&(t=20),null==e&&(e=20),null==i&&(i=320),null==s&&(s=200);var n=this.acc.dhxWins.createWindow(this._idd,t,e,i,s);n.button("close").hide(),n.addUserButton("dock",99,"Dock"),n.button("dock").show(),n.button("dock").attachEvent("onClick",this._doOnDockClick),n.setText(this.getText()),n.attachEvent("onClose",this._doOnDockWinClose)}this.conf.docked=!1,this.hide(),n._attachFromCell(this),n=null,this.acc._callMainEvent("onUnDock",[this._idd])}},this._doOnDockClick=function(){t.dock()},this._doOnDockWinClose=function(t){return t.hide(),!1},this._unloadDocking=function(){t=null}},dhtmlXAccordion.prototype.enableDND=function(){if(0!=this.conf.multi_mode&&null==this._dnd){var t=this;this._dnd={tr_count:0,tr_items:{}},this._dndAttachEvent=function(t){var e=this.t[t].cell;1!=e.conf.dnd_inited&&("function"==typeof window.addEventListener?e.cell.childNodes[e.conf.idx.hdr].addEventListener("mousedown",this._dndOnMouseDown,!1):e.cell.childNodes[e.conf.idx.hdr].attachEvent("onmousedown",this._dndOnMouseDown),e.conf.dnd_inited=!0),e=null},this._dndDetachEvent=function(t){var e=this.t[t].cell;1==e.conf.dnd_inited&&("function"==typeof window.addEventListener?e.cell.childNodes[e.conf.idx.hdr].removeEventListener("mousedown",this._dndOnMouseDown,!1):e.cell.childNodes[e.conf.idx.hdr].detachEvent("onmousedown",this._dndOnMouseDown),e.conf.dnd_inited=!1),e=null},this._dndOnMouseDown=function(e){e=e||event,e.preventDefault&&e.preventDefault();for(var i=e.target||e.srcElement;null!=i&&i.parentNode!=t.base;)i=i.parentNode;null!=i&&t._dndDragStart(e,i),i=null},this._dndDragStart=function(t,e){if(1!=this._dnd.tr_waiting){this._dnd.dragObj=e,this._dnd.dy=t.clientY;for(var i=0,s=0;s<this._dnd.dragObj.parentNode.childNodes.length;s++)this._dnd.dragObj.parentNode.childNodes[s]._ind=s,this._dnd.dragObj.parentNode.childNodes[s]==this._dnd.dragObj?(this._dnd.dragObj._k0=i,s>0&&(this._dnd.dragObj._k0+=this.ofs.m.between-this.ofs.m.first),i=0):i+=this._dnd.dragObj.parentNode.childNodes[s].offsetHeight+parseInt(this._dnd.dragObj.parentNode.childNodes[s].style.marginTop);this._dnd.dragObj._k1=i,this._dnd.h=this._dnd.dragObj.offsetHeight,this._dnd.ofs=!1}},this._dndDoDrag=function(t){if(this._dnd.dragObj&&1!=this._dnd.tr_waiting){var e=t.clientY-this._dnd.dy;0==this._dnd.ofs&&Math.abs(e)>5&&(this._dnd.dragObj.className+=" acc_cell_dragged",this._dnd.ofs=!0),0>e?e<-this._dnd.dragObj._k0&&(e=-this._dnd.dragObj._k0):e>this._dnd.dragObj._k1&&(e=this._dnd.dragObj._k1),this._dnd.dragObj.style.top=e+"px";for(var i=t.clientY-this._dnd.dy,s=0,n=0,o=this._dnd.dragObj._ind+1;o<=this._dnd.dragObj.parentNode.lastChild._ind;o++){var l=this._dnd.dragObj.parentNode.childNodes[o].offsetHeight;i>s+2*l/3&&n++,s+=l}for(var r=this._dnd.dragObj.nextSibling,o=0;null!=r;)++o<=n&&null!=r?r._ontop||(r._tm&&window.clearTimeout(r._tm),this._dndAnim(r,!1,parseInt(r.style.top||0),-this._dnd.h-this.ofs.m.between),r._ontop=!0):r._ontop&&(r._tm&&window.clearTimeout(r._tm),this._dndAnim(r,!0,parseInt(r.style.top||0),0),r._ontop=!1),r=r.nextSibling;for(var i=this._dnd.dy-t.clientY,s=0,n=0,o=this._dnd.dragObj._ind-1;o>=this._dnd.dragObj.parentNode.firstChild._ind;o--){var l=this._dnd.dragObj.parentNode.childNodes[o].offsetHeight;i>s+2*l/3&&n++,s+=l}for(var r=this._dnd.dragObj.previousSibling,o=0;null!=r;)++o<=n&&null!=r?r._onbottom||(r._tm&&window.clearTimeout(r._tm),this._dndAnim(r,!0,parseInt(r.style.top||0),this._dnd.h+this.ofs.m.between),r._onbottom=!0):r._onbottom&&(r._tm&&window.clearTimeout(r._tm),this._dndAnim(r,!1,parseInt(r.style.top),0),r._onbottom=!1),r=r.previousSibling}},this._dndDragStop=function(t,e){if(e);else if(this._dnd.tr_count>0)return void(this._dnd.tr_waiting=!0);if(this._dnd.dragObj){this._dnd.dragObj.className=String(this._dnd.dragObj.className).replace(/\s{0,}acc_cell_dragged/gi,""),this._dnd.dragObj.style.top="0px";for(var i=!1,s=0;s<this._dnd.dragObj.parentNode.childNodes.length;s++){var n=this._dnd.dragObj.parentNode.childNodes[s];n!=this._dnd.dragObj&&(n._tm&&window.clearTimeout(n._tm),n.style.top="0px",n._ontop&&(null!=n.nextSibling&&1!=n.nextSibling._ontop||!n.nextSibling)&&(i=n.nextSibling||null),n._onbottom&&(null!=n.previousSibling&&1!=n.previousSibling._onbottom||!n.previousSibling)&&(i=n)),n=null}for(var s=0;s<this._dnd.dragObj.parentNode.childNodes.length;s++)this._dnd.dragObj.parentNode.childNodes[s]._ontop=null,this._dnd.dragObj.parentNode.childNodes[s]._onbottom=null;i!==!1&&(null==i?this._dnd.dragObj.parentNode.appendChild(this._dnd.dragObj):this._dnd.dragObj.parentNode.insertBefore(this._dnd.dragObj,i));for(var o=this._dnd.dragObj._accId,l=this._dnd.dragObj._ind,r=l,s=0;s<this._dnd.dragObj.parentNode.childNodes.length;s++)this._dnd.dragObj.parentNode.childNodes[s]==this._dnd.dragObj&&(r=s);this._dnd.dragObj=null,this._dnd.tr_waiting=!1,this._updateCellsMargin(),l!=r&&(this.setSizes(),this.callEvent("onDrop",[o,l,r]))}},this._dndAnim=function(e,i,s,n){if(0!=this.conf.tr.prop)return e._dnd_ev||(e._dnd_ev=!0,e._dnd_tr_prop=this.conf.tr.prop,e.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,!1)),1!=this._dnd.tr_items[e._accId]&&(this._dnd.tr_items[e._accId]=!0,this._dnd.tr_count++),e.style[this.conf.tr.prop]=this.conf.tr.dnd_top,void(e.style.top=n+"px");var o=!1;i?(s+=5,s>=n&&(s=n,o=!0)):(s-=5,n>=s&&(s=n,o=!0)),e.style.top=s+"px",e._tm&&window.clearTimeout(e._tm),e._tm=o?null:window.setTimeout(function(){t._dndAnim(e,i,s,n)},5)},this._dndOnTrEnd=function(e){e.stopPropagation&&e.stopPropagation(),"top"==e.propertyName&&(1==t._dnd.tr_items[this._accId]&&(t._dnd.tr_count--,t._dnd.tr_items[this._accId]=!1),this.style[this._dnd_tr_prop]="",0==t._dnd.tr_count&&1==t._dnd.tr_waiting&&t._dndDragStop(null,!0))},this._dndOnMouseMove=function(e){t._dndDoDrag(e||event)},this._dndOnMouseUp=function(e){t._dndDragStop(e||event)},window.addEventListener?(document.body.addEventListener("mousemove",this._dndOnMouseMove,!1),document.body.addEventListener("mouseup",this._dndOnMouseUp,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove,!1),document.body.attachEvent("onmouseup",this._dndOnMouseUp,!1)),this._dndClearCell=function(t){this.t[t].cell.cell._dnd_ev&&this.t[t].cell.cell.addEventListener(this.conf.tr.ev,this._dndOnTrEnd,!1),this._dndDetachEvent(t)},this._unloadDND=function(){"function"==typeof window.addEventListener?(document.body.removeEventListener("mousemove",this._dndOnMouseMove,!1),document.body.removeEventListener("mouseup",this._dndOnMouseUp,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove,!1),document.body.detachEvent("onmouseup",this._dndOnMouseUp,!1));for(var e in this)0==String(e).indexOf("_dnd")&&"function"==typeof this[e]&&(this[e]=null);this._dnd=null,t=null};for(var e in this.t)this._dndAttachEvent(e)}},dhtmlXLayoutObject.prototype.cells=function(t){for(var e in this.cdata){if(this.cdata[e].conf.name==t)return this.cdata[e];if("layout"==this.cdata[e].dataType&&1==this.cdata[e].dataNested&&null!=this.cdata[e].dataObj){var i=this.cdata[e].dataObj.cells(t);if(null!=i)return i}}return null},dhtmlXLayoutObject.prototype.forEachItem=function(t,e){if("function"==typeof t){"undefined"==typeof e&&(e=this);for(var i in this.cdata)"undefined"!=typeof this.cdata[i].conf.name&&t.apply(e,[this.cdata[i]]),"layout"==this.cdata[i].dataType&&1==this.cdata[i].dataNested&&null!=this.cdata[i].dataObj&&this.cdata[i].dataObj.forEachItem(t,e);e=null}},dhtmlXLayoutObject.prototype._forEachSep=function(t,e){if("function"==typeof t){"undefined"==typeof e&&(e=this),null!=this.sep&&t.apply(e,[this.sep]);for(var i in this.cdata)"layout"==this.cdata[i].dataType&&1==this.cdata[i].dataNested&&null!=this.cdata[i].dataObj&&this.cdata[i].dataObj._forEachSep(t,e);e=null}},dhtmlXLayoutObject.prototype.setOffsets=function(t){var e=!1;for(var i in t){var s=i.charAt(0);"undefined"==typeof this.conf.ofs[s]||isNaN(t[i])||(this.conf.ofs[s]=parseInt(t[i]),e=!0)}"function"==typeof this.setSizes&&1==e&&this.setSizes()},dhtmlXLayoutObject.prototype._detectSW=function(){if(null==dhtmlXLayoutObject.prototype._confGlob.sw&&(dhtmlXLayoutObject.prototype._confGlob.sw={}),null==dhtmlXLayoutObject.prototype._confGlob.sw[this.conf.skin]){var t=document.createElement("DIV");t.className="dhxlayout_sep_sw_"+this.conf.skin,null!=document.body.firstChild?document.body.insertBefore(t,document.body.firstChild):document.body.appendChild(t),dhtmlXLayoutObject.prototype._confGlob.sw[this.conf.skin]=t.offsetWidth,document.body.removeChild(t),t=null}return dhtmlXLayoutObject.prototype._confGlob.sw[this.conf.skin]},dhtmlXLayoutObject.prototype._confGlob={},dhtmlXLayoutObject.prototype.attachHeader=function(t,e){null==this.dataNodes.haObj&&("object"!=typeof t&&(t=document.getElementById(t)),this.dataNodes.haObj=document.createElement("DIV"),this.dataNodes.haObj.className="dhxlayout_hdr_attached",this.dataNodes.haObj.style.height=(e||t.offsetHeight)+"px",this.base.insertBefore(this.dataNodes.haObj,this.dataNodes.menuObj||this.dataNodes.toolbarObj||this.cdata.a.cell),this.dataNodes.haObj.appendChild(t),t.style.visibility="visible",t=null,this.dataNodes.haEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.haObj.style.left=this.conf.ofs.l+"px",this.dataNodes.haObj.style.marginTop=this.conf.ofs.t+"px",this.dataNodes.haObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.conf.ofs_nodes.t.haObj=!0,this.setSizes())},dhtmlXLayoutObject.prototype.detachHeader=function(){if(this.dataNodes.haObj){for(;this.dataNodes.haObj.childNodes.length>0;)this.dataNodes.haObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.haObj.lastChild);this.dataNodes.haObj.parentNode.removeChild(this.dataNodes.haObj),this.dataNodes.haObj=null,this.detachEvent(this.dataNodes.haEv),this.dataNodes.haEv=null,this.conf.ofs_nodes.t.haObj=!1,delete this.dataNodes.haEv,delete this.dataNodes.haObj,this.conf.unloading||this.setSizes()}},dhtmlXLayoutObject.prototype.attachFooter=function(t,e){if(null==this.dataNodes.faObj){"object"!=typeof t&&(t=document.getElementById(t)),this.dataNodes.faObj=document.createElement("DIV"),this.dataNodes.faObj.className="dhxlayout_ftr_attached",this.dataNodes.faObj.style.height=(e||t.offsetHeight)+"px";var i=this.dataNodes.sbObj||("1C"==this.conf.pattern?this.cdata.a:this.sep.sep);this.base.lastChild==i?this.base.appendChild(this.dataNodes.faObj):this.base.insertBefore(this.dataNodes.faObj,i.nextSibling),this.dataNodes.faEv=this.attachEvent("_onSetSizes",function(){this.dataNodes.faObj.style.left=this.conf.ofs.l+"px",this.dataNodes.faObj.style.bottom=this.conf.ofs.t+"px",this.dataNodes.faObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px"}),this.dataNodes.faObj.appendChild(t),t.style.visibility="visible",i=t=null,this.conf.ofs_nodes.b.faObj=!0,this.setSizes()}},dhtmlXLayoutObject.prototype.detachFooter=function(){if(this.dataNodes.faObj){for(;this.dataNodes.faObj.childNodes.length>0;)this.dataNodes.faObj.lastChild.style.visibility="hidden",document.body.appendChild(this.dataNodes.faObj.lastChild);this.dataNodes.faObj.parentNode.removeChild(this.dataNodes.faObj),this.dataNodes.faObj=null,this.detachEvent(this.dataNodes.faEv),this.dataNodes.faEv=null,this.conf.ofs_nodes.b.faObj=!1,delete this.dataNodes.faEv,delete this.dataNodes.faObj,this.conf.unloading||this.setSizes()}},dhtmlXLayoutObject.prototype.attachMenu=function(t){return null==this.dataNodes.menu?(this.dataNodes.menuObj=document.createElement("DIV"),this.dataNodes.menuObj.className="dhxlayout_menu",this.base.insertBefore(this.dataNodes.menuObj,this.dataNodes.toolbarObj||this.dataNodes.ribbonObj||this.cdata.a.cell),("object"!=typeof t||null==t)&&(t={}),t.skin=this.conf.skin,t.parent=this.dataNodes.menuObj,this.dataNodes.menu=new dhtmlXMenuObject(t),this.dataNodes.menuEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.menuObj.style.display&&(this.dataNodes.menuObj.style.left=this.conf.ofs.l+"px",this.dataNodes.menuObj.style.marginTop=(null!=this.dataNodes.haObj?0:this.conf.ofs.t)+"px",this.dataNodes.menuObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.conf.ofs_nodes.t.menuObj=!0,this.setSizes(),t.parnt=null,t=null,this.dataNodes.menu):void 0},dhtmlXLayoutObject.prototype.detachMenu=function(){null!=this.dataNodes.menu&&(this.dataNodes.menu.unload(),this.dataNodes.menu=null,this.dataNodes.menuObj.parentNode.removeChild(this.dataNodes.menuObj),this.dataNodes.menuObj=null,this.detachEvent(this.dataNodes.menuEv),this.dataNodes.menuEv=null,delete this.dataNodes.menu,delete this.dataNodes.menuObj,delete this.dataNodes.menuEv,this.conf.ofs_nodes.t.menuObj=!1,this.conf.unloading||this.setSizes())},dhtmlXLayoutObject.prototype.attachToolbar=function(t){return null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar?(this.dataNodes.toolbarObj=document.createElement("DIV"),this.dataNodes.toolbarObj.className="dhxlayout_toolbar",this.base.insertBefore(this.dataNodes.toolbarObj,this.cdata.a.cell),this.dataNodes.toolbarObj.appendChild(document.createElement("DIV")),("object"!=typeof t||null==t)&&(t={}),t.skin=this.conf.skin,t.parent=this.dataNodes.toolbarObj.firstChild,this.dataNodes.toolbar=new dhtmlXToolbarObject(t),this.dataNodes.toolbarEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.toolbarObj.style.display&&(this.dataNodes.toolbarObj.style.left=this.conf.ofs.l+"px",this.dataNodes.toolbarObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.toolbarObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.dataNodes.toolbar._masterCell=this,this.dataNodes.toolbar.attachEvent("_onIconSizeChange",function(){this._masterCell.setSizes()}),this.conf.ofs_nodes.t.toolbarObj=!0,this.setSizes(),t.parnt=null,t=null,this.dataNodes.toolbar):void 0},dhtmlXLayoutObject.prototype.detachToolbar=function(){null!=this.dataNodes.toolbar&&(this.dataNodes.toolbar._masterCell=null,this.dataNodes.toolbar.unload(),this.dataNodes.toolbar=null,this.dataNodes.toolbarObj.parentNode.removeChild(this.dataNodes.toolbarObj),this.dataNodes.toolbarObj=null,this.detachEvent(this.dataNodes.toolbarEv),this.dataNodes.toolbarEv=null,this.conf.ofs_nodes.t.toolbarObj=!1,delete this.dataNodes.toolbar,delete this.dataNodes.toolbarObj,delete this.dataNodes.toolbarEv,this.conf.unloading||this.setSizes())},dhtmlXLayoutObject.prototype.attachRibbon=function(t){if(null==this.dataNodes.ribbon&&null==this.dataNodes.toolbar){this.dataNodes.ribbonObj=document.createElement("DIV"),this.dataNodes.ribbonObj.className="dhxlayout_ribbon",this.base.insertBefore(this.dataNodes.ribbonObj,this.cdata.a.cell),this.dataNodes.ribbonObj.appendChild(document.createElement("DIV")),("object"!=typeof t||null==t)&&(t={}),t.skin=this.conf.skin,t.parent=this.dataNodes.ribbonObj.firstChild,this.dataNodes.ribbon=new dhtmlXRibbon(t),this.dataNodes.ribbonEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.ribbonObj.style.display&&(this.dataNodes.ribbonObj.style.left=this.conf.ofs.l+"px",this.dataNodes.ribbonObj.style.marginTop=(null!=this.dataNodes.haObj||null!=this.dataNodes.menuObj?0:this.conf.ofs.t)+"px",this.dataNodes.ribbonObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px",this.dataNodes.ribbon.setSizes())
}),this.conf.ofs_nodes.t.ribbonObj=!0;var e=this;return this.dataNodes.ribbon.attachEvent("_onHeightChanged",function(){e.setSizes()}),this.setSizes(),t.parnt=null,t=null,this.dataNodes.ribbon}},dhtmlXLayoutObject.prototype.detachRibbon=function(){null!=this.dataNodes.ribbon&&(this.dataNodes.ribbon.unload(),this.dataNodes.ribbon=null,this.dataNodes.ribbonObj.parentNode.removeChild(this.dataNodes.ribbonObj),this.dataNodes.ribbonObj=null,this.detachEvent(this.dataNodes.ribbonEv),this.dataNodes.ribbonEv=null,this.conf.ofs_nodes.t.ribbonObj=!1,delete this.dataNodes.ribbon,delete this.dataNodes.ribbonObj,delete this.dataNodes.ribbonEv,this.conf.unloading||this.setSizes())},dhtmlXLayoutObject.prototype.attachStatusBar=function(t){return this.dataNodes.sbObj?void 0:("undefined"==typeof t&&(t={}),this.dataNodes.sbObj=document.createElement("DIV"),this.dataNodes.sbObj.className="dhxlayout_statusbar",null!=this.dataNodes.faObj?this.base.insertBefore(this.dataNodes.sbObj,this.dataNodes.faObj):null==this.sep||this.base.lastChild==this.sep.sep?this.base.appendChild(this.dataNodes.sbObj):this.base.insertBefore(this.dataNodes.sbObj,this.sep.sep.nextSibling),this.dataNodes.sbObj.innerHTML="<div class='dhxcont_statusbar'>"+("string"==typeof t.text&&t.text.length>0?t.text:"&nbsp;")+"</div>","number"==typeof t.height&&(this.dataNodes.sbObj.firstChild.style.height=this.dataNodes.sbObj.firstChild.style.lineHeight=t.height+"px"),this.dataNodes.sbObj.setText=function(t){this.childNodes[0].innerHTML=t},this.dataNodes.sbObj.getText=function(){return this.childNodes[0].innerHTML},this.dataNodes.sbObj.onselectstart=function(){return!1},this.dataNodes.sbEv=this.attachEvent("_onSetSizes",function(){"none"!=this.dataNodes.sbObj.style.display&&(this.dataNodes.sbObj.style.left=this.conf.ofs.l+"px",this.dataNodes.sbObj.style.bottom=(null!=this.dataNodes.faObj?this.dataNodes.faObj.offsetHeight:0)+this.conf.ofs.t+"px",this.dataNodes.sbObj.style.width=this.base.offsetWidth-this.conf.ofs.l-this.conf.ofs.r+"px")}),this.conf.ofs_nodes.b.sbObj=!0,this.setSizes(),this.dataNodes.sbObj)},dhtmlXLayoutObject.prototype.detachStatusBar=function(){this.dataNodes.sbObj&&(this.dataNodes.sbObj.setText=this.dataNodes.sbObj.getText=this.dataNodes.sbObj.onselectstart=null,this.dataNodes.sbObj.parentNode.removeChild(this.dataNodes.sbObj),this.dataNodes.sbObj=null,this.detachEvent(this.dataNodes.sbEv),this.dataNodes.sbEv=null,this.conf.ofs_nodes.b.sbObj=!1,delete this.dataNodes.sb,delete this.dataNodes.sbObj,delete this.dataNodes.sbEv,this.conf.unloading||this.setSizes())},dhtmlXLayoutObject.prototype.showMenu=function(){this._mtbShowHide("menuObj","")},dhtmlXLayoutObject.prototype.hideMenu=function(){this._mtbShowHide("menuObj","none")},dhtmlXLayoutObject.prototype.showToolbar=function(){this._mtbShowHide("toolbarObj","")},dhtmlXLayoutObject.prototype.hideToolbar=function(){this._mtbShowHide("toolbarObj","none")},dhtmlXLayoutObject.prototype.showRibbon=function(){this._mtbShowHide("ribbonObj","")},dhtmlXLayoutObject.prototype.hideRibbon=function(){this._mtbShowHide("ribbonObj","none")},dhtmlXLayoutObject.prototype.showStatusBar=function(){this._mtbShowHide("sbObj","")},dhtmlXLayoutObject.prototype.hideStatusBar=function(){this._mtbShowHide("sbObj","none")},dhtmlXLayoutObject.prototype._mtbShowHide=function(t,e){null!=this.dataNodes[t]&&(this.dataNodes[t].style.display=e,this.setSizes())},dhtmlXLayoutObject.prototype._mtbUnload=function(){this.detachMenu(),this.detachToolbar(),this.detachStatusBar(),this.detachRibbon()},dhtmlXLayoutObject.prototype.getAttachedMenu=function(){return this.dataNodes.menu},dhtmlXLayoutObject.prototype.getAttachedToolbar=function(){return this.dataNodes.toolbar},dhtmlXLayoutObject.prototype.getAttachedRibbon=function(){return this.dataNodes.ribbon},dhtmlXLayoutObject.prototype.getAttachedStatusBar=function(){return this.dataNodes.sbObj},dhtmlXLayoutObject.prototype.progressOn=function(){if(!this.conf.progress){this.conf.progress=!0;var t=document.createElement("DIV");t.className="dhxlayout_progress",this.base.appendChild(t);var e=document.createElement("DIV");e.className="dhxlayout_progress_img",this.base.appendChild(e),t=e=null}},dhtmlXLayoutObject.prototype.progressOff=function(){if(this.conf.progress){for(var t={dhxlayout_progress:!0,dhxlayout_progress_img:!0},e=0;e<this.base.childNodes.length;e++)"undefined"!=typeof this.base.childNodes[e].className&&1==t[this.base.childNodes[e].className]&&(t[this.base.childNodes[e].className]=this.base.childNodes[e]);for(var i in t)1!=t[i]&&this.base.removeChild(t[i]),t[i]=null;this.conf.progress=!1,t=null}},dhtmlXLayoutObject.prototype.listPatterns=function(){var t=[];for(var e in this.tplData)t.push(e);return t},dhtmlXLayoutObject.prototype.listAutoSizes=function(){var t=null!=this.conf.as_cells?this.conf.as_cells.h.join(";"):"",e=null!=this.conf.as_cells?this.conf.as_cells.v.join(";"):"",i=this._availAutoSize[this.conf.pattern].h,s=this._availAutoSize[this.conf.pattern].v;return[t,e,i,s]},dhtmlXLayoutObject.prototype._getCellsNames=function(t){var e={};if(null!=this.cdata[t].conf.name&&(e[this.cdata[t].conf.name]=!0),"layout"==this.cdata[t].dataType&&null!=this.cdata[t].dataObj&&this.cdata[t].dataObj.mainInst==this){var i=this.cdata[t].dataObj._getCellsNames("a"),s=this.cdata[t].dataObj._getCellsNames("b");for(var n in i)e[n]=i[n];for(var n in s)e[n]=s[n]}return e},dhtmlXLayoutObject.prototype.setAutoSize=function(t,e,i){if(i!==!0){var s=this.listAutoSizes();if(s[0]==t&&s[1]==e)return;for(var n=!1,o=!1,l=0;l<s[2].length;l++)n=n||s[2][l]==t;for(var l=0;l<s[3].length;l++)o=o||s[3][l]==e;if(!n||!o)return}this.conf.as_cells={h:t.split(";"),v:e.split(";")};var r="v"==this.conf.mode?"h":"v";for(var a in this.cdata){for(var h=this._getCellsNames(a),d=!1,l=0;l<this.conf.as_cells[r].length;l++)d=d||h[this.conf.as_cells[r][l]];d&&(this.conf.autosize=a),"layout"==this.cdata[a].dataType&&null!=this.cdata[a].dataObj&&this.cdata[a].dataObj.setAutoSize(t,e,!0)}},dhtmlXLayoutObject.prototype.tplData={"1C":{mode:"c",cells:{a:{name:"a"}}},"2E":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{name:"b",fsize:{v:1}}}},"2U":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{name:"b",fsize:{h:1}}}},"3E":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{name:"c",fsize:{v:2}}}}}}},"3W":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{name:"c",fsize:{h:2}}}}}}},"3J":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}},b:{name:"b",fsize:{h:1}}}},"3L":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:2}},b:{name:"c",fsize:{h:1,v:2}}}}}}},"3T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:2,v:1}},b:{name:"c",fsize:{h:2,v:1}}}}}}},"3U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{name:"c",fsize:{v:1}}}},"4H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:[1,2],v:3}},b:{name:"c",fsize:{h:[1,2],v:3}}}}},b:{name:"d",fsize:{h:2}}}}}}},"4I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:3,v:[1,2]}},b:{name:"c",fsize:{h:3,v:[1,2]}}}}},b:{name:"d",fsize:{v:2}}}}}}},"4T":{mode:"h",cells:{a:{name:"a",fsize:{v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3],v:1}},b:{name:"d",fsize:{h:3,v:1}}}}}}}}}},"4U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[2,3],v:1}},b:{name:"c",fsize:{h:3,v:1}}}}}}}},b:{name:"d",fsize:{v:1}}}},"4E":{mode:"h",cells:{a:{name:"a",height:.25,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[2,3]}},b:{name:"d",fsize:{v:3}}}}}}}}}},"4W":{mode:"v",cells:{a:{name:"a",width:.25,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[2,3]}},b:{name:"d",fsize:{h:3}}}}}}}}}},"4A":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[1,3]}},b:{name:"d",fsize:{h:3}}}}}}},"4L":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:2,v:3}},b:{name:"d",fsize:{h:2,v:3}}}}}}}}}},"4J":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:3,v:2}},b:{name:"d",fsize:{h:3,v:2}}}}}}}}}},"4F":{mode:"h",cells:{a:{height:1/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2,v:1}},b:{name:"b",fsize:{h:2,v:1}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{v:[1,3]}},b:{name:"d",fsize:{v:3}}}}}}},"4G":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{name:"d",fsize:{h:1}}}},"4C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[2,3]}},b:{name:"d",fsize:{h:1,v:3}}}}}}}}}},"5H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:[1,2],v:[3,4]}},b:{name:"d",fsize:{h:[1,2],v:4}}}}}}}},b:{name:"e",fsize:{h:2}}}}}}},"5I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:[1,2]}},b:{name:"d",fsize:{h:4,v:[1,2]}}}}}}}},b:{name:"e",fsize:{v:2}}}}}}},"5U":{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"a",width:.25,fsize:{h:2,v:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:1/3,fsize:{h:[2,3],v:1}},b:{layout:{mode:"v",cells:{a:{name:"c",fsize:{h:[3,4],v:1}},b:{name:"d",fsize:{h:4,v:1}}}}}}}}}}},b:{name:"e",fsize:{v:1}}}},"5E":{mode:"h",cells:{a:{name:"a",height:.2,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{v:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{v:[3,4]}},b:{name:"e",fsize:{v:4}}}}}}}}}}}}},"5W":{mode:"v",cells:{a:{name:"a",width:.2,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:.25,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[3,4]}},b:{name:"e",fsize:{h:4}}}}}}}}}}}}},"5K":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:4}},b:{name:"e",fsize:{h:1,v:4}}}}}}},"5S":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",fsize:{h:1,v:2}},b:{name:"b",fsize:{h:1,v:2}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,2]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"5G":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",fsize:{h:1,v:[2,3]}},b:{name:"c",fsize:{h:1,v:3}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[1,4]}},b:{name:"e",fsize:{h:4}}}}}}},"5C":{mode:"v",cells:{a:{width:2/3,layout:{mode:"v",cells:{a:{name:"a",fsize:{h:2}},b:{name:"b",fsize:{h:[2,1]}}}}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[3,4]}},b:{name:"e",fsize:{h:1,v:4}}}}}}}}}},"6H":{mode:"v",cells:{a:{width:1/3,name:"a",fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:[1,2],v:[4,5]}},b:{name:"e",fsize:{h:[1,2],v:5}}}}}}}}}}},b:{name:"f",fsize:{h:2}}}}}}},"6I":{mode:"h",cells:{a:{height:1/3,name:"a",fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:.25,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:1/3,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",fsize:{h:[4,5],v:[1,2]}},b:{name:"e",fsize:{h:5,v:[1,2]}}}}}}}}}}},b:{name:"f",fsize:{v:2}}}}}}},"6A":{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"a",height:.2,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.25,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",fsize:{h:1,v:[4,5]}},b:{name:"e",fsize:{h:1,v:5}}}}}}}}}}}}}},b:{name:"f",fsize:{h:1}}}},"6C":{mode:"v",cells:{a:{name:"a",fsize:{h:1}},b:{layout:{mode:"h",cells:{a:{name:"b",height:.2,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:1,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:1,v:[4,5]}},b:{name:"f",fsize:{h:1,v:5}}}}}}}}}}}}}}}},"6J":{mode:"v",cells:{a:{width:1/3,layout:{mode:"h",cells:{a:{name:"a",height:.25,fsize:{h:1,v:2}},b:{layout:{mode:"h",cells:{a:{name:"b",height:1/3,fsize:{h:1,v:[2,3]}},b:{layout:{mode:"h",cells:{a:{name:"c",fsize:{h:1,v:[3,4]}},b:{name:"d",fsize:{h:1,v:4}}}}}}}}}}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[1,5]}},b:{name:"f",fsize:{h:5}}}}}}},"6E":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",fsize:{h:[1,2]}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:2,v:3}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:2,v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:2,v:[4,5]}},b:{name:"f",fsize:{h:2,v:5}}}}}}}}}}}}}}}},"6W":{mode:"v",cells:{a:{name:"a",width:1/6,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{name:"b",width:.2,fsize:{h:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:.25,fsize:{h:[2,3]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[3,4]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[4,5]}},b:{name:"f",fsize:{h:5}}}}}}}}}}}}}}}},"7H":{mode:"v",cells:{a:{name:"a",width:1/3,fsize:{h:1}},b:{layout:{mode:"v",cells:{a:{layout:{mode:"h",cells:{a:{name:"b",height:.2,fsize:{h:[1,2],v:3}},b:{layout:{mode:"h",cells:{a:{name:"c",height:.25,fsize:{h:[1,2],v:[3,4]}},b:{layout:{mode:"h",cells:{a:{name:"d",height:1/3,fsize:{h:[1,2],v:[4,5]}},b:{layout:{mode:"h",cells:{a:{name:"e",fsize:{h:[1,2],v:[5,6]}},b:{name:"f",fsize:{h:[1,2],v:6}}}}}}}}}}}}}},b:{name:"g",fsize:{h:2}}}}}}},"7I":{mode:"h",cells:{a:{name:"a",height:1/3,fsize:{v:1}},b:{layout:{mode:"h",cells:{a:{layout:{mode:"v",cells:{a:{name:"b",width:.2,fsize:{h:3,v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"c",width:.25,fsize:{h:[3,4],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"d",width:1/3,fsize:{h:[4,5],v:[1,2]}},b:{layout:{mode:"v",cells:{a:{name:"e",fsize:{h:[5,6],v:[1,2]}},b:{name:"f",fsize:{h:6,v:[1,2]}}}}}}}}}}}}}},b:{name:"g",fsize:{v:2}}}}}}}},dhtmlXLayoutObject.prototype._availAutoSize={"1C":{h:["a"],v:["a"]},"2E":{h:["a;b"],v:["a","b"]},"2U":{h:["a","b"],v:["a;b"]},"3E":{h:["a;b;c"],v:["a","b","c"]},"3W":{h:["a","b","c"],v:["a;b;c"]},"3J":{h:["a;c","b"],v:["a;b","b;c"]},"3L":{h:["a","b;c"],v:["a;b","a;c"]},"3T":{h:["a;b","a;c"],v:["a","b;c"]},"3U":{h:["a;c","b;c"],v:["a;b","c"]},"4H":{h:["a","b;c","d"],v:["a;b;d","a;c;d"]},"4I":{h:["a;b;d","a;c;d"],v:["a","b;c","d"]},"4T":{h:["a;b","a;c","a;d"],v:["a","b;c;d"]},"4U":{h:["a;d","b;d","c;d"],v:["a;b;c","d"]},"4E":{h:["a;b;c;d"],v:["a","b","c","d"]},"4W":{h:["a","b","c","d"],v:["a;b;c;d"]},"4A":{h:["a;b","c","d"],v:["a;c;d","b;c;d"]},"4L":{h:["a","b","c;d"],v:["a;b;c","a;b;d"]},"4J":{h:["a;b;c","a;b;d"],v:["a","b","c;d"]},"4F":{h:["a;c;d","b;c;d"],v:["a;b","c","d"]},"4G":{h:["a;b;c","d"],v:["a;d","b;d","c;d"]},"4C":{h:["a","b;c;d"],v:["a;b","a;c","a;d"]},"5H":{h:["a","b;c;d","e"],v:["a;b;e","a;c;e","a;d;e"]},"5I":{h:["a;b;e","a;c;e","a;d;e"],v:["a","b;c;d","e"]},"5U":{h:["a;e","b;e","c;e","d;e"],v:["a;b;c;d","e"]},"5E":{h:["a;b;c;d;e"],v:["a","b","c","d","e"]},"5W":{h:["a","b","c","d","e"],v:["a;b;c;d;e"]},"5K":{h:["a;b;c","d;e"],v:["a;d","b;d","c;d","a;e","b;e","c;e"]},"5S":{h:["a;b","c;d;e"],v:["a;c","a;d","a;e","b;c","b;d","b;e"]},"5G":{h:["a;b;c","d","e"],v:["a;d;e","b;d;e","c;d;e"]},"5C":{h:["a","b","c;d;e"],v:["a;b;c","a;b;d","a;b;e"]},"6H":{h:["a","b;c;d;e","f"],v:["a;b;f","a;c;f","a;d;f","a;e;f"]},"6I":{h:["a;b;f","a;c;f","a;d;f","a;e;f"],v:["a","b;c;d;e","f"]},"6A":{h:["a;b;c;d;e","f"],v:["a;f","b;f","c;f","d;f","e;f"]},"6C":{h:["a","b;c;d;e;f"],v:["a;b","a;c","a;d","a;e","a;f"]},"6J":{h:["a;b;c;d","e","f"],v:["a;e;f","b;e;f","c;e;f","d;e;f"]},"6E":{h:["a","b","c;d;e;f"],v:["a;b;c","a;b;d","a;b;e","a;b;f"]},"6W":{h:["a","b","c","d","e","f"],v:["a;b;c;d;e;f"]},"7H":{h:["a","b;c;d;e;f","g"],v:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"]},"7I":{h:["a;b;g","a;c;g","a;d;g","a;e;g","a;f;g"],v:["a","b;c;d;e;f","g"]}},window.dhtmlXLayoutCell=function(t,e){dhtmlXCellObject.apply(this,[t,"_layout"]);var i=this;if(this.layout=e,this.conf.skin=this.layout.conf.skin,this.conf.mode=this.layout.conf.mode,this.conf.collapsed=!1,this.conf.fixed={w:!1,h:!1},this.conf.docked=!0,this.attachEvent("_onCellUnload",function(){this.cell.childNodes[this.conf.idx.hdr].ondblclick=null,this._unloadDocking(),this.layout=null,i=null}),this._hdrInit(),this.cell.childNodes[this.conf.idx.hdr].ondblclick=function(){var t=i.layout._getMainInst();t._callMainEvent("onDblClick",[i.conf.name]),t=null},this.attachEvent("_onContentLoaded",function(){var t=this.layout._getMainInst();t._callMainEvent("onContentLoaded",[this.conf.name]),t=null}),"c"!=this.conf.mode){var s=document.createElement("DIV");s.className="dhxlayout_arrow dhxlayout_arrow_"+this.conf.mode+this._idd,this.cell.childNodes[this.conf.idx.hdr].appendChild(s),s.onclick=function(){i.conf.collapsed?i.expand():i.collapse()},s=null}return this._initDocking(),this},dhtmlXLayoutCell.prototype=new dhtmlXCellObject,dhtmlXLayoutCell.prototype.getId=function(){return this.conf.name},dhtmlXLayoutCell.prototype._initDocking=function(){var t=this;this.dock=function(){var t=this.layout._getMainInst();if(null==t.dhxWins||this.conf.docked)return void(t=null);var e=t.dhxWins.window(this.conf.name);e.close(),this._attachFromCell(e),this.conf.docked=!0,this.conf.dock_collapsed||this.expand(),t._callMainEvent("onDock",[this.conf.name]),t=e=null},this.undock=function(t,e,i,s){var n=this.layout._getMainInst();if(null==n.dhxWins||0==this.conf.docked)return void(n=null);if(this.conf.dock_collapsed=this.conf.collapsed,this.conf.collapsed||this.collapse(),null!=n.dhxWins.window(this.conf.name)){var o=n.dhxWins.window(this.conf.name);o.show()}else{null==t&&(t=20),null==e&&(e=20),null==i&&(i=320),null==s&&(s=200);var o=n.dhxWins.createWindow(this.conf.name,t,e,i,s);o.button("close").hide(),o.addUserButton("dock",99,"Dock"),o.button("dock").show(),o.button("dock").attachEvent("onClick",this._doOnDockClick),o.setText(this.getText()),o.attachEvent("onClose",this._doOnDockWinClose)}this.conf.docked=!1,o._attachFromCell(this),n._callMainEvent("onUnDock",[this.conf.name]),n=o=null},this._doOnDockClick=function(){t.dock()},this._doOnDockWinClose=function(t){return t.hide(),!1},this._unloadDocking=function(){t=null}},dhtmlXLayoutCell.prototype._hdrInit=function(){var t="";window.dhx4.isIE?-1!=navigator.userAgent.indexOf("MSIE 8.0")?t=" dhx_cell_hdr_text_ie8":-1!=navigator.userAgent.indexOf("MSIE 7.0")?t=" dhx_cell_hdr_text_ie7":-1!=navigator.userAgent.indexOf("MSIE 6.0")&&(t=" dhx_cell_hdr_text_ie6"):window.dhx4.isChrome&&(t=" dhx_cell_hdr_text_chrome");var e=document.createElement("DIV");e.className="dhx_cell_hdr",e.innerHTML="<div class='dhx_cell_hdr_text"+t+"'></div>",this.cell.insertBefore(e,this.cell.childNodes[this.conf.idx.cont]),e=null,this.conf.ofs_nodes.t._getHdrHeight="func",this.conf.hdr={visible:!0},this.conf.idx_data.hdr="dhx_cell_hdr",this._updateIdx(),this.attachEvent("_onSetSize",this._hdrOnSetSize),this.attachEvent("_onBorderChange",this._hdrOnBorderChange),this.attachEvent("_onViewSave",this._hdrOnViewSave),this.attachEvent("_onViewRestore",this._hdrOnViewRestore)},dhtmlXLayoutCell.prototype.showHeader=function(t){this.conf.hdr.visible||this.conf.collapsed||this.conf.hdr.w_saved>this._getAvailWidth()||this.conf.hdr.h_saved>this._getAvailHeight()||(this.conf.hdr.w_saved=this.conf.hdr.h_saved=null,this.conf.hdr.visible=!0,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr",t!==!0&&this._adjustCont(this._idd))},dhtmlXLayoutCell.prototype.hideHeader=function(t){this.conf.hdr.visible&&!this.conf.collapsed&&(this.conf.hdr.w_saved=this._getMinWidth(),this.conf.hdr.h_saved=this._getMinHeight(),this.conf.hdr.visible=!1,this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden",this._hdrUpdBorder(),this._mtbUpdBorder(),t!==!0&&this._adjustCont(this._idd))},dhtmlXLayoutCell.prototype.isHeaderVisible=function(){return 1==this.conf.hdr.visible},dhtmlXLayoutCell.prototype.showArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display=""},dhtmlXLayoutCell.prototype.hideArrow=function(){this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display="none"},dhtmlXLayoutCell.prototype.isArrowVisible=function(){return""==this.cell.childNodes[this.conf.idx.hdr].childNodes[1].style.display},dhtmlXLayoutCell.prototype.setText=function(t){this.conf.hdr.text=t,this._hdrUpdText()},dhtmlXLayoutCell.prototype.getText=function(){return this.conf.hdr.text},dhtmlXLayoutCell.prototype.setCollapsedText=function(t){this.conf.hdr.text_collapsed=t,this._hdrUpdText()},dhtmlXLayoutCell.prototype.getCollapsedText=function(){return null!=this.conf.hdr.text_collapsed?this.conf.hdr.text_collapsed:this.conf.hdr.text},dhtmlXLayoutCell.prototype._hdrUpdText=function(){var t=1==this.conf.collapsed&&null!=this.conf.hdr.text_collapsed?this.conf.hdr.text_collapsed:this.conf.hdr.text;this.cell.childNodes[this.conf.idx.hdr].firstChild.innerHTML="<span>"+t+"</span>"},dhtmlXLayoutCell.prototype._hdrUpdBorder=function(){1==this.conf.borders?this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr"+(this.conf.hdr.visible?"":" dhx_cell_hdr_hidden"):this.conf.hdr.visible||(this.cell.childNodes[this.conf.idx.hdr].className="dhx_cell_hdr dhx_cell_hdr_hidden_no_borders")},dhtmlXLayoutCell.prototype._hdrOnSetSize=function(){this.conf.collapsed&&"v"==this.conf.mode&&this._fitHdr()},dhtmlXLayoutCell.prototype._hdrOnBorderChange=function(){this.hideHeader(!0),this._hdrUpdBorder()},dhtmlXLayoutCell.prototype._hdrOnViewSave=function(t){this.views[t].hdr_vis=this.conf.hdr.visible},dhtmlXLayoutCell.prototype._hdrOnViewRestore=function(t){this.conf.hdr.visible!=this.views[t].hdr_vis&&this[this.views[t].hdr_vis?"showHeader":"hideHeader"](!0),this.views[t].hdr_vis=null,delete this.views[t].hdr_vis},dhtmlXLayoutCell.prototype._getHdrHeight=function(t){return this.conf.collapsed&&"v"==this.conf.mode&&t!==!0?27:this.cell.childNodes[this.conf.idx.hdr].offsetHeight},dhtmlXLayoutCell.prototype._fitHdr=function(){this.conf.collapsed?("undefined"==typeof dhtmlXLayoutObject.prototype._confGlob.hdrColH&&(this.cell.childNodes[this.conf.idx.hdr].style.height=this.cell.offsetHeight+"px",dhtmlXLayoutObject.prototype._confGlob.hdrColH=parseInt(this.cell.childNodes[this.conf.idx.hdr].style.height)-this._getHdrHeight(!0)),this.cell.childNodes[this.conf.idx.hdr].style.height=this.cell.offsetHeight+dhtmlXLayoutObject.prototype._confGlob.hdrColH+"px"):this.cell.childNodes[this.conf.idx.hdr].style.height=null},dhtmlXLayoutCell.prototype.expand=function(t){if(!this.conf.collapsed)return!0;var e=this.layout;if("v"==this.conf.mode){var i=t?e.conf.hh:e.cdata[e.conf.nextCell[this._idd]]._getMinWidth(this._idd),s=e.base.offsetWidth-e.conf.sw;if(i+this.conf.size.w_avl>s)return e=null,!1}else{var n=t?e.conf.hh:e.cdata[e.conf.nextCell[this._idd]]._getMinHeight(this._idd)+e.cdata[e.conf.nextCell[this._idd]]._getHdrHeight(),o=e.base.offsetHeight-e.conf.sw;if(n+this.conf.size.h_avl>o)return e=null,!1}if(0==this.conf.docked)return void this.dock();this.cell.className=String(this.cell.className).replace(/\s{0,}dhxlayout_collapsed_[hv]/gi,""),this.conf.collapsed=!1,"v"==this.conf.mode?(this.conf.size.w=Math.min(s-i,this.conf.size.w_saved),this.conf.size.w_saved=this.conf.size.w_avl=null):(this.conf.size.h=Math.min(o-n,this.conf.size.h_saved),this.conf.size.h_saved=this.conf.size.h_avl=null),"v"==this.conf.mode&&this._fitHdr(),e.setSizes(e.conf.nextCell[this._idd],e.conf.nextCell[this._idd],1==t,"expand"),e.sep._blockSep(),e=null,this._hdrUpdText();var l=this.layout._getMainInst();return l._callMainEvent("onExpand",[this.conf.name]),l=null,!0},dhtmlXLayoutCell.prototype.collapse=function(){if(this.conf.collapsed)return!1;var t=this.layout;if(0==t.cdata[t.conf.nextCell[this._idd]].expand(!0))return!1;"v"==this.conf.mode?(this.conf.size.w_saved=this.conf.size.w,this.conf.size.w_avl=this._getMinWidth(this._idd)):(this.conf.size.h_saved=this.conf.size.h,this.conf.size.h_avl=this._getMinHeight(this._idd)+this._getHdrHeight()),this.cell.className+=" dhxlayout_collapsed_"+this.conf.mode,this.conf.collapsed=!0,"v"==this.conf.mode?this.conf.size.w=t.conf.hh:this.conf.size.h=this._getHdrHeight(),t.setSizes(t.conf.nextCell[this._idd],t.conf.nextCell[this._idd],!1,"collapse"),t.sep._blockSep(),t=null,this._hdrUpdText();var e=this.layout._getMainInst();return e._callMainEvent("onCollapse",[this.conf.name]),e=null,!0},dhtmlXLayoutCell.prototype.isCollapsed=function(){return 1==this.conf.collapsed},dhtmlXLayoutCell.prototype._getMinWidth=function(t){if("layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getMinWidth(t);if("v"==this.dataObj.conf.mode){var e=t;return this.dataObj.cdata[e].conf.collapsed&&(e=this.dataObj.conf.nextCell[e]),this.dataObj.cdata[e]._getMinWidth(t)+this.dataObj.cdata[this.dataObj.conf.nextCell[e]]._getWidth()+this.dataObj.conf.sw}return Math.max(this.dataObj.cdata.a._getMinWidth(t),this.dataObj.cdata.b._getMinWidth(t))}return 26},dhtmlXLayoutCell.prototype._getMinHeight=function(t){var e=26;if(null!=this.conf.idx.menu&&(e+=this.cell.childNodes[this.conf.idx.menu].offsetHeight),"layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getMinHeight(t);if("h"==this.dataObj.conf.mode){var i=t;return this.dataObj.cdata[i].conf.collapsed&&(i=this.dataObj.conf.nextCell[i]),this.dataObj.cdata[i]._getMinHeight(t)+this.dataObj.cdata[i]._getHdrHeight()+this.dataObj.cdata[this.dataObj.conf.nextCell[i]]._getHeight()+this.dataObj.conf.sw}return Math.max(this.dataObj.cdata.a._getMinHeight(t)+this.dataObj.cdata.a._getHdrHeight(),this.dataObj.cdata.b._getMinHeight(t)+this.dataObj.cdata.b._getHdrHeight())}return e},dhtmlXLayoutCell.prototype._getAvailWidth=function(t){if("layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getAvailWidth(t);if("v"==this.dataObj.conf.mode){var e=1==this.dataObj.cdata.a.conf.collapsed,i=1==this.dataObj.cdata.b.conf.collapsed;return"a"==t?this.dataObj.cdata[i?"a":"b"]._getAvailWidth(t):this.dataObj.cdata[e?"b":"a"]._getAvailWidth(t)}return Math.min(this.dataObj.cdata.a._getAvailWidth(t),this.dataObj.cdata.b._getAvailWidth(t))}return this.cell.offsetWidth-this._getMinWidth()},dhtmlXLayoutCell.prototype._getAvailHeight=function(t){if("layout"==this.dataType&&null!=this.dataObj){if("1C"==this.dataObj.conf.pattern)return this.dataObj.cdata.a._getAvailHeight(t);if("h"==this.dataObj.conf.mode){var e=1==this.dataObj.cdata.a.conf.collapsed,i=1==this.dataObj.cdata.b.conf.collapsed;return"a"==t?this.dataObj.cdata[i?"a":"b"]._getAvailHeight(t):this.dataObj.cdata[e?"b":"a"]._getAvailHeight(t)}return Math.min(this.dataObj.cdata.a._getAvailHeight(t),this.dataObj.cdata.b._getAvailHeight(t))}var s=this._getHdrHeight();return"v"==this.conf.mode&&this.conf.collapsed&&(s=this.conf.hh),this.cell.offsetHeight-s-this._getMinHeight()},dhtmlXLayoutCell.prototype.setWidth=function(t){if("v"==this.conf.mode){if(this.conf.collapsed)return;var e=this.layout,i=e.cdata[e.conf.nextCell[this._idd]];if(i.conf.collapsed)return t=t+e.conf.sw+i._getWidth(),void(o=e=i=null);var s=this._getMinWidth(this._idd),n=e.base.offsetWidth-i._getMinWidth(this._idd)-e.conf.sw;t=Math.max(s,Math.min(t,n)),this.conf.size.w=t,e.setSizes(i._idd,i._idd),e=i=null}else{if(null==this.layout||null==this.layout.parentLayout)return;var o=this.layout.parentLayout,e=this.layout,i=e.cdata[e.conf.nextCell[this._idd]];for(var l in o.cdata)o.cdata[l].dataObj==e&&o.cdata[l].setWidth(t);o=e=null}},dhtmlXLayoutCell.prototype.setHeight=function(t){if("h"==this.conf.mode){if(this.conf.collapsed)return;var e=this.layout,i=e.cdata[e.conf.nextCell[this._idd]];if(i.conf.collapsed){t=t+e.conf.sw+i._getHeight();var s=null!=this.layout&&null!=this.layout.parentLayout?this.layout.parentLayout:null;if(null!=s)for(var n in s.cdata)s.cdata[n].dataObj==e&&s.cdata[n].setHeight(t);return void(s=e=i=null)}var o=this._getMinHeight(this._idd)+this._getHdrHeight(),l=e.base.offsetHeight-i._getMinHeight(this._idd)-i._getHdrHeight()-e.conf.sw;t=Math.max(o,Math.min(t,l)),this.conf.size.h=t,e.setSizes(i._idd,i._idd),e=i=null}else{if(null==this.layout||null==this.layout.parentLayout)return;var s=this.layout.parentLayout,e=this.layout,i=e.cdata[e.conf.nextCell[this._idd]];for(var n in s.cdata)s.cdata[n].dataObj==e&&s.cdata[n].setHeight(t);s=e=null}},dhtmlXLayoutCell.prototype.getWidth=function(){return this.conf.size.w},dhtmlXLayoutCell.prototype.getHeight=function(){return this.conf.size.h},dhtmlXLayoutCell.prototype.fixSize=function(t,e){this.conf.fixed.w=window.dhx4.s2b(t),this.conf.fixed.h=window.dhx4.s2b(e);var i=this.layout._getMainInst(),s={};i.forEachItem(function(t){if(null!=t.conf.fsize){var e=(t.getId(),{h:1==t.conf.fixed.w,v:1==t.conf.fixed.h});for(var i in e)if(1==e[i]&&null!=t.conf.fsize[i]){t.conf.fsize[i]instanceof Array||(t.conf.fsize[i]=[t.conf.fsize[i]]);for(var n=0;n<t.conf.fsize[i].length;n++)s[t.conf.fsize[i][n]]=!0}}t=null}),i._forEachSep(function(t){t._lockSep(1==s[t.conf.idx]),t=null}),i=null},dhtmlXTabBar.prototype._fixTabsOfs=function(){},dhtmlXTabBar.prototype.cells=dhtmlXTabBar.prototype.tabs=function(t){return this.t[t]?this.t[t].cell:null},dhtmlXTabBar.prototype.getAllTabs=function(){var t=[];for(var e in this.t)t.push(e);return t},dhtmlXTabBar.prototype._setTabActive=function(t,e){this.t[t]&&this.t[t].conf.visible&&!this.t[t].conf.active&&("undefined"==typeof e&&(e=!0),(1!=e||this.callEvent("onSelect",[t,this.conf.lastActive])===!0)&&(this.setTabInActive(),this.t[t].conf.active=!0,this.conf.contZone&&(this.t[t].cell.cell.style.visibility="visible",this.t[t].cell.cell.style.top="0px",this.t[t].cell.cell.style.zIndex=1),this.t[t].tab.className=this._tabCss(t),this.conf.lastActive=t,this.setSizes()))},dhtmlXTabBar.prototype.setTabInActive=function(){this.conf.lastActive&&this.t[this.conf.lastActive]&&(this.t[this.conf.lastActive].conf.active=!1,this.conf.contZone&&(this.t[this.conf.lastActive].cell.cell.style.visibility="hidden",this.t[this.conf.lastActive].cell.cell.style.top="-5000px",this.t[this.conf.lastActive].cell.cell.style.zIndex=0),this.t[this.conf.lastActive].tab.className=this._tabCss(this.conf.lastActive),this.conf.lastActive=null)},dhtmlXTabBar.prototype._isTabActive=function(t){return t==this.conf.lastActive&&null!=this.conf.lastActive},dhtmlXTabBar.prototype.getActiveTab=function(){return this.conf.lastActive
},dhtmlXTabBar.prototype.goToNextTab=function(){var t=this._getNextVisible(this.conf.lastActive,!0);null!=t&&this._setTabActive(t)},dhtmlXTabBar.prototype.goToPrevTab=function(){var t=this._getPrevVisible(this.conf.lastActive,!0);null!=t&&this._setTabActive(t)},dhtmlXTabBar.prototype._enableTab=function(t,e){this.t[t]&&!this.t[t].conf.enabled&&(this.t[t].conf.enabled=!0,this.t[t].tab.className=this._tabCss(t),1==e&&this._setTabActive(t))},dhtmlXTabBar.prototype._disableTab=function(t,e){this.t[t]&&this.t[t].conf.enabled&&(this.t[t].conf.enabled=!1,this.t[t].tab.className=this._tabCss(t),e!==!1&&this.conf.lastActive==t&&(1==e&&(e=this._getNextVisible(t)||this._getPrevVisible(t)),this._setTabActive(e)))},dhtmlXTabBar.prototype._isTabEnabled=function(t){return null!=this.t[t]&&1==this.t[t].conf.enabled},dhtmlXTabBar.prototype._setTabText=function(t,e,i){if(this.t[t]){var s=!1;("undefined"==typeof i||null==i)&&(i=this._getLabelWidth(e,this.t[t].conf.close),s=!0),this.t[t].tab.style.width=i+"px",this.t[t].tab.childNodes[0].innerHTML=e,this.t[t].conf.text=e,this.t[t].conf.width=i,this.t[t].conf.autowidth=s}},dhtmlXTabBar.prototype._getTabText=function(t){return this.t[t]?this.t[t].conf.text:null},dhtmlXTabBar.prototype._removeTab=function(t,e,i){if(this.t[t]){if(1!=i&&1!=this.t[t].conf.remove)return this.t[t].conf.remove=!0,void this._hideTab(t,e);"undefined"==typeof e&&(e=!0);var s=this._getNextVisible(t),n=this._getPrevVisible(t);1==this.t[t].conf.transEv&&(this.t[t].tab.removeEventListener(this.conf.transEv,this._doOnTrEnd),this.t[t].conf.transEv=!1);for(var o in this.t[t].conf)this.t[t].conf[o]=null;if(this.t[t].conf=null,delete this.t[t].conf,this.t[t].cell._unload(),this.t[t].cell=null,this.t[t].tab.parentNode.removeChild(this.t[t].tab),this.t[t].tab=null,this.t[t]=null,delete this.t[t],this.conf.lastActive==t&&0!=e){this.conf.lastActive=null;var l=1==e?s||n||this._getFirstVisible():e;null!=l&&this._setTabActive(l)}else 1!=i&&this._adjustTabs()}},dhtmlXTabBar.prototype.clearAll=function(){for(var t in this.t)this._removeTab(t,!1,!0);this.tabsArea.childNodes[1].childNodes[0].style[this.conf.align]="0px"},dhtmlXTabBar.prototype.moveTab=function(t,e){if(this.t[t]&&!(0>e)){e+=1;var i=this.tabsArea.childNodes[1].firstChild;i.childNodes[e]!=this.t[t].tab&&(i.removeChild(this.t[t].tab),e>=i.childNodes.length?i.appendChild(this.t[t].tab):i.insertBefore(this.t[t].tab,i.childNodes[e])),i=null}},dhtmlXTabBar.prototype._getIndex=function(t){for(var e=-1,i=this.tabsArea.childNodes[1].firstChild,s=1;s<i.childNodes.length;s++)i.childNodes[s]._tabId==t&&(e=s-1);return i=null,e},dhtmlXTabBar.prototype.getNumberOfTabs=function(t){var e=0;for(var i in this.t)e+=1!=t?1:1==this.t[i].conf.visible?1:0;return e},dhtmlXTabBar.prototype.forEachCell=dhtmlXTabBar.prototype.forEachTab=function(t){for(var e in this.t)t.apply(window,[this.t[e].cell])},dhtmlXTabBar.prototype.enableAutoReSize=function(){this._initFullScreenResize()},window.dhtmlXTabBarCell=function(t,e){dhtmlXCellObject.apply(this,[t,"_tabbar"]),this.tabbar=e,this.conf.skin=this.tabbar.conf.skin,this.conf.tabbar_funcs={show:"_showTab",hide:"_hideTab",isVisible:"_isTabVisible",enable:"_enableTab",disable:"_disableTab",isEnabled:"_isTabEnabled",getIndex:"_getIndex",getText:"_getTabText",setText:"_setTabText",setActive:"_setTabActive",isActive:"_isTabActive",close:"_removeTab"},this._tabbarCall=function(t){return function(){for(var e=[this._idd],i=0;i<arguments.length;i++)e.push(arguments[i]);return this.tabbar[t].apply(this.tabbar,e)}};for(var i in this.conf.tabbar_funcs)this[i]=this._tabbarCall(this.conf.tabbar_funcs[i]);this.attachEvent("_onCellUnload",function(){this.tabbar=null;for(var t in this.conf.tabbar_funcs)this[t]=null,this.conf.tabbar_funcs[t]=null;this.conf.tabbar_funcs=null}),this.attachEvent("_onContentLoaded",function(){this.tabbar._callMainEvent("onContentLoaded",arguments),this.tabbar._callMainEvent("onTabContentLoaded",arguments)}),this.attachEvent("_onContentAttach",function(){this.tabbar._adjustCell(this.tabbar.conf.lastActive)})},window.dhtmlXTabBarCell.prototype=new dhtmlXCellObject,"function"==typeof window.addEventListener?window.addEventListener("load",dhtmlXTabBarInitFromHTML,!1):window.attachEvent("onload",dhtmlXTabBarInitFromHTML),dhtmlXWindows.prototype.forEachWindow=function(t){for(var e in this.w)t.apply(window,[this.w[e].cell])},dhtmlXWindows.prototype.window=function(t){return null!=this.w[t]?this.w[t].cell:null},dhtmlXWindows.prototype.isWindow=function(t){return null!=this.w[t]},dhtmlXWindows.prototype.findByText=function(t){var e=[];for(var i in this.w)this.w[i].cell.getText().indexOf(String(t))>=0&&e.push(this.w[i]);return e},dhtmlXWindows.prototype.setSkin=function(t){if(t!=this.conf.skin){null!=this.vp&&(this.vp.className=String(this.vp.className).replace("dhxwins_vp_"+this.conf.skin," dhxwins_vp_"+t));for(var e in this.w)this.w[e].cell._resetSizeState(),this._winAdjustCell(e),this._winAdjustTitle(e);this.conf.skin=t}},dhtmlXWindows.prototype.getBottommostWindow=function(){return this._getTopBottomWin(!1)},dhtmlXWindows.prototype.getTopmostWindow=function(){return this._getTopBottomWin(!0)},dhtmlXWindows.prototype._getTopBottomWin=function(t){var e=null;for(var i in this.w)if(this.w[i].conf.visible){var s=!1;null!=e&&(s=e.z>this.w[i].win.style.zIndex,t&&(s=!s)),(null==e||s)&&(e={id:i,z:this.w[i].win.style.zIndex})}return e?e.id:null},dhtmlXWindows.prototype._winMakeActive=function(t,e){if(null==t||e===!0||1!=this.w[t].conf.actv){for(var i=[],s=[{name:"modal",value:!0},{name:"sticked",value:!0},{name:"sticked",value:!1}],n={},o=0;o<s.length;o++){var l=s[o].name,r=s[o].value,a=[];for(var h in this.w){var d=this.w[h];null==n[h]&&d.conf[l]===r&&1==d.conf.visible&&t!=h&&(window.dhx4.zim.clear(d.conf.z_id),a.push([h,Number(d.win.style.zIndex)]),n[h]=!0),d=null}if(a.sort(function(t,e){return t[1]<e[1]?1:-1}),null!=t&&this.w[t].conf[l]===r&&null==n[t]){window.dhx4.zim.clear(this.w[t].conf.z_id);var c=[[t,Number(this.w[t].win.style.zIndex)]];a=c.concat(a),n[t]=!0}i=i.concat(a)}for(var o=i.length-1;o>=0;o--){var h=i[o][0],d=this.w[h];if(d.win.style.zIndex=window.dhx4.zim.reserve(d.conf.z_id),d.conf.modal&&null!=this.mcover)for(var u in this.mcover)this.mcover[u].style.zIndex=d.win.style.zIndex;this._winAdjustFRMZIndex(h),null==t&&0==o&&(t=h),d.conf.actv=t==h,d.win.className=d.conf.actv?"dhxwin_active":"dhxwin_inactive",d=null}null!=t&&this.conf.last_active!=t&&this._callMainEvent("onFocus",t),this.conf.last_active=t}},dhtmlXWindows.prototype.attachViewportTo=function(t){if(this.conf.vp_custom){for(;this.vp.childNodes.length>0;)this.vp.removeChild(this.vp.lastChild);this.vp.parentNode.removeChild(this.vp),this.vp=null}else null!=this.vp&&(this.vp.className=String(this.vp.className).replace(new RegExp("\\s{1,}dhxwins_vp_"+this.conf.skin),""));if(null==t)this.vp=null;else{this.vp="string"==typeof t?document.getElementById(t):t,this.vp.className+=" dhxwins_vp_"+this.conf.skin,t=null;for(var e in this.w)this.vp.appendChild(this.w[e].win);this.conf.vp_custom=!1}this.vp==document.body&&(document.body.style.position="static")},dhtmlXWindows.prototype.setViewport=function(t,e,i,s,n){var o=document.createElement("DIV");o.style.position="absolute",o.style.left=t+"px",o.style.top=e+"px",o.style.width=i+"px",o.style.height=s+"px","undefined"==typeof n||null==n?n=document.body:"string"==typeof n&&(n=document.getElementById(n)),n.appendChild(o),this.attachViewportTo(o),this.conf.vp_custom=!0,n=o=null},dhtmlXWindows.prototype._winSetPosition=function(t,e,i){var s=this.w[t];s.conf.maxed&&(s.conf.lastMX+=e-s.conf.x,s.conf.lastMY+=i-s.conf.y),s.conf.x=e,s.conf.y=i,s.win.style.left=s.conf.x+"px",s.win.style.top=s.conf.y+"px",this._winAdjustFRMPosition(t),s=null},dhtmlXWindows.prototype._winAdjustPosition=function(t,e,i){var s=this.w[t];"undefined"==typeof e&&(e=s.conf.x),"undefined"==typeof i&&(i=s.conf.y);var n=s.conf.keep_in_vp?0:-s.conf.w+this.conf.vp_pos_ofs,o=s.conf.keep_in_vp?this.vp.clientWidth-s.conf.w:this.vp.clientWidth-this.conf.vp_pos_ofs;n>e?e=n:e>o&&(e=o);var l=s.conf.keep_in_vp?this.vp.clientHeight-s.conf.h:this.vp.clientHeight-this.conf.vp_pos_ofs;0>i?i=0:i>l&&(i=l),(e!=s.conf.x||i!=s.conf.y)&&this._winSetPosition(t,e,i),s=null},dhtmlXWindows.prototype._winSetSize=function(t,e,i,s,n){var o=this.w[t],l=null!=e?e:o.conf.w,r=null!=i?i:o.conf.h;null==this.conf.ofs_w&&(o.win.style.width=l+"px",o.win.style.height=r+"px",this.conf.ofs_w=o.win.offsetWidth-l,this.conf.ofs_h=o.win.offsetHeight-r),null!=o.conf.min_w&&l<o.conf.min_w&&(l=o.conf.min_w),null!=o.conf.max_w&&l>o.conf.max_w&&(l=o.conf.max_w),!o.conf.parked&&null!=o.conf.min_h&&r<o.conf.min_h&&(r=o.conf.min_h),null!=o.conf.max_h&&r>o.conf.max_h&&(r=o.conf.max_h),o.conf.keep_in_vp&&(l>this.vp.clientWidth&&(l=this.vp.clientWidth),r>this.vp.clientHeight&&(r=this.vp.clientHeight)),o.win.style.width=l-this.conf.ofs_w+"px",o.win.style.height=r-this.conf.ofs_h+"px",o.conf.w=l,o.conf.h=r,this._winAdjustFRMSize(t),n&&this._winAdjustPosition(t,o.conf.x,o.conf.y),o.conf.parked||1==s||this._winAdjustCell(t),o=null},dhtmlXWindows.prototype._winMinmax=function(t,e){if(("undefined"==typeof e||this.w[t].conf.maxed!=e)&&0!=this.w[t].conf.allow_resize){var i=this.w[t];if(i.conf.parked&&this._winPark(t,!1),i.conf.maxed)this._winSetSize(t,i.conf.lastMW,i.conf.lastMH),this._winAdjustPosition(t,i.conf.lastMX,i.conf.lastMY),i.conf.maxed=!1;else{var s=0,n=0;null!=i.conf.max_w&&(s=i.conf.x+Math.round(i.conf.w-i.conf.max_w)/2),null!=i.conf.max_h&&(n=Math.max(i.conf.y+Math.round(i.conf.h-i.conf.max_h)/2,0)),i.conf.lastMX=i.conf.x,i.conf.lastMY=i.conf.y,i.conf.lastMW=i.conf.w,i.conf.lastMH=i.conf.h,this._winSetSize(t,this.vp.clientWidth,this.vp.clientHeight),this._winAdjustPosition(t,s,n),i.conf.maxed=!0}i.b.minmax.setCss(i.conf.maxed?"minmaxed":"minmax"),i.conf.maxed?this._callMainEvent("onMaximize",t):this._callMainEvent("onMinimize",t),i=null}},dhtmlXWindows.prototype._winShow=function(t,e){1!=this.w[t].conf.visible&&(this.w[t].win.style.display="",this.w[t].conf.visible=!0,(1==e||null==this.conf.last_active)&&this._winMakeActive(t,!0),this._callMainEvent("onShow",t))},dhtmlXWindows.prototype._winHide=function(t){0!=this.w[t].conf.visible&&(this.w[t].win.style.display="none",this.w[t].conf.visible=!1,this.w[t].conf.actv&&(this.w[t].conf.actv=!1,this.w[t].win.className="dhxwin_inactive",this._winMakeActive(null,!0)),this._callMainEvent("onHide",t))},dhtmlXWindows.prototype._winPark=function(t,e){if(0!=this.w[t].conf.allow_park&&0!=this.w[t].conf.header){var i=this.w[t];1==e&&this.conf.tr.prop!==!1&&(i.win.style[this.conf.tr.prop]=this.conf.tr[i.conf.parked?"height_open":"height_close"],i.conf.tr_ev||(i.win.addEventListener(this.conf.tr.ev,this._winOnParkTrans,!1),i.conf.tr_ev=!0)),i.conf.parked?(i.hdr.className=String(i.hdr.className).replace(/\s{1,}dhxwin_hdr_parked/gi,""),i.hdr.style.zIndex=0,i.conf.parked=!1,i.conf.tr_mode="park",this._winCellSetOpacity(t,"open",e),this._winSetSize(t,i.conf.w,i.conf.lastPH,1==e&&this.conf.tr.prop!==!1),(1!=e||this.conf.tr.prop===!1)&&(this._callMainEvent("onParkDown",t),i.conf.keep_in_vp&&this._winAdjustPosition(t,i.conf.x,i.conf.y))):(i.conf.lastPH=i.conf.h,i.hdr.className+=" dhxwin_hdr_parked",(0==e||0==this.conf.tr.prop)&&(i.hdr.style.zIndex=3),i.conf.parked=!0,i.conf.tr_mode="park",this._winCellSetOpacity(t,"close",e),this._winSetSize(t,i.conf.w,i.hdr.offsetHeight+this.conf.ofs_h,1==e&&this.conf.tr.prop!==!1),(1!=e||this.conf.tr.prop===!1)&&this._callMainEvent("onParkUp",t)),i=null}},dhtmlXWindows.prototype._winCellSetOpacity=function(t,e,i){var s=this.w[t].cell;for(var n in s.conf.idx)1!={pr1:!0,pr2:!0}[n]&&(1==i&&0!=this.conf.tr.prop&&(s.cell.childNodes[s.conf.idx[n]].style[this.conf.tr.prop]=this.conf.tr["op_"+e]),s.cell.childNodes[s.conf.idx[n]].style.opacity=this.conf.tr["op_v_"+e]);s=null},dhtmlXWindows.prototype._winCellClearOpacity=function(t){var e=this.w[t].cell;for(var i in e.conf.idx)1!={pr1:!0,pr2:!0}[i]&&0!=this.conf.tr.prop&&(e.cell.childNodes[e.conf.idx[i]].style[this.conf.tr.prop]="");e=null},dhtmlXWindows.prototype._winStick=function(t,e){("undefined"==typeof e||this.w[t].conf.sticked!=e)&&(this.w[t].conf.sticked=!this.w[t].conf.sticked,this.w[t].b.stick.setCss(this.w[t].conf.sticked?"sticked":"stick"),this._winMakeActive(this.conf.last_active,!0),this.w[t].conf.sticked?this._callMainEvent("onStick",t):this._callMainEvent("onUnStick",t))},dhtmlXWindows.prototype._winClose=function(t){if(this._callMainEvent("onClose",t)===!0||1==this.conf.unloading){var e=this.w[t];e.conf.fs_mode&&e.cell.setToFullScreen(!1),e.conf.modal&&this._winSetModal(t,!1),window.dhx4.zim.clear(e.conf.z_id),null!=this.cm&&null!=this.cm.icon[t]&&this._detachContextMenu("icon",t,null),"function"==typeof window.addEventListener?(e.win.removeEventListener("mousedown",this._winOnMouseDown,!1),this.conf.dblclick_ev&&e.win.removeEventListener("dblclick",this._winOnMouseDown,!1)):(e.win.detachEvent("onmousedown",this._winOnMouseDown),this.conf.dblclick_ev&&e.win.attachEvent("ondblclick",this._winOnMouseDown));for(var i in e.b)this._winRemoveButton(t,i,!0);e.b=null,e.cell._unload(),e.cell=null,e.brd.parentNode.removeChild(e.brd),e.brd=null,null!=e.fr_cover&&(e.fr_cover.parentNode.removeChild(e.fr_cover),e.fr_cover=null),null!=e.fr_m_cover&&(e.fr_m_cover.parentNode.removeChild(e.fr_m_cover),e.fr_m_cover=null),e.hdr._isWinHdr=!0,e.hdr.firstChild._isWinIcon=!0,e.hdr.onselectstart=null,e.hdr.parentNode.removeChild(e.hdr),e.hdr=null;for(var i in e.conf)e.conf[i]=null,delete e.conf[i];e.conf=null,e.win._idd=null,e.win._isWindow=null,e.win.parentNode.removeChild(e.win),e.win=null,e=null,this.w[t]=null,delete this.w[t],this.conf.unloading||this._winMakeActive(null,!0)}},dhtmlXWindows.prototype._winSetModal=function(t,e,i){if(this.w[t].conf.modal!=e){"undefined"==typeof i&&(i=!0);var s=this.w[t];if(1==e&&0==s.conf.modal){if(null!=this.conf.last_modal&&this._winSetModal(this.conf.last_modal,!1,!1),null==this.mcover){var n=document.createElement("DIV");n.className="dhxwins_mcover",this.vp.insertBefore(n,s.fr_m_cover||s.win),this.mcover={d:n},this.conf.fr_cover&&(this.mcover.f=document.createElement("IFRAME"),this.mcover.f.className="dhxwins_mcover",this.mcover.f.border=0,this.mcover.f.frameBorder=0,this.vp.insertBefore(this.mcover.f,n)),n=null}else this.mcover.d.nextSibling!=(s.fr_m_cover||s.win)&&(this.vp.insertBefore(this.mcover.d,s.fr_m_cover||s.win),null!=this.mcover.f&&this.vp.insertBefore(this.mcover.f,this.mcover.d));s.conf.modal=!0,this.conf.last_modal=t,this._winMakeActive(t,!0)}else if(0==e&&1==s.conf.modal&&(s.conf.modal=!1,this.conf.last_modal=null,i&&null!=this.mcover)){for(var o in this.mcover)this.vp.removeChild(this.mcover[o]),this.mcover[o]=null;this.mcover=null}s=null}},dhtmlXWindows.prototype._winMouseDownHandler=function(t,e){var i=t.target||t.srcElement;if(!(t.button>=2)){if("button"==e.mode)if("mousedown"==e.press_type)this.conf.button_last=e.button_name;else if("mouseup"==e.press_type&&e.button_name==this.conf.button_last&&(this.conf.button_last=null,this._winButtonClick(e.id,e.button_name,t)!==!0))return;if(("mousedown"==e.press_type||"dblclick"==e.press_type)&&"hdr"==e.mode){if(this.conf.dblclick_active=!1,1==this.conf.dblclick_ev)"dblclick"==e.press_type&&(this.conf.dblclick_active=!0);else if(null==this.conf.dblclick_last)this.conf.dblclick_last=(new Date).getTime(),this.dblclick_id=e.id;else{var i=(new Date).getTime();this.conf.dblclick_last+this.conf.dblclick_tm>i&&this.dblclick_id==e.id?(this.conf.dblclick_active=!0,this.conf.dblclick_last=null,this.dblclick_id=null):(this.conf.dblclick_last=i,this.dblclick_id=e.id)}if(this.conf.dblclick_active)return void this._winDoHeaderDblClick(e.id)}"mousedown"==e.press_type&&this._winMakeActive(e.id)}},dhtmlXWindows.prototype._winDoHeaderDblClick=function(t){return"minmax"==this.conf.dblclick_mode?void this._winMinmax(t):"park"==this.conf.dblclick_mode?void this._winPark(t,!0):"function"==typeof this.conf.dblclick_mode?void this.conf.dblclick_mode.apply(window,[t]):"function"==typeof window[this.conf.dblclick_mode]?void window[this.conf.dblclick_mode].apply(window,[t]):void 0},dhtmlXWindows.prototype._winAdjustCell=function(t){var e=this.w[t],i=1,s=e.conf.header?e.hdr.offsetHeight:1,n=e.win.clientWidth-2,o=e.win.clientHeight-s-1;e.brd.style.left=i+"px",e.brd.style.top=s+"px",null==e.conf.brd&&(e.brd.style.width=n+"px",e.brd.style.height=o+"px",e.conf.brd={w:n-e.brd.offsetWidth,h:o-e.brd.offsetHeight}),e.brd.style.width=n+e.conf.brd.w+"px",e.brd.style.height=o+e.conf.brd.h+"px";var l=5,r=1+l,a=e.conf.header?s:s+l,h=e.brd.clientWidth,d=e.brd.clientHeight;e.cell._setSize(r,a,h,d),e.fr_cover.style.left=r+"px",e.fr_cover.style.top=a+"px",e.fr_cover.style.width=h+"px",e.fr_cover.style.height=d+"px",e=null},dhtmlXWindows.prototype._winAdjustTitle=function(t){var e=this.w[t].hdr.childNodes[0],i=this.w[t].hdr.childNodes[1],s=this.w[t].hdr.childNodes[2];i.style.paddingLeft=e.offsetWidth+12+"px",i.style.paddingRight=s.offsetWidth+10+"px",i=s=e=null},dhtmlXWindows.prototype._callMainEvent=function(t,e){var i=this.w[e];if(i.cell.checkEvent(t))var s=i.cell._callMainEvent(t,[i.cell]);else var s=this.callEvent(t,[i.cell]);return i=null,s},dhtmlXWindows.prototype._winInitFRM=function(t){if(1==this.conf.fr_cover){var e=this.w[t],i=document.createElement("IFRAME");i.className="dhxwin_main_fr_cover",i.border=0,i.frameBorder=0,i.style.zIndex=e.win.style.zIndex,e.win.parentNode.insertBefore(i,e.win),e.fr_m_cover=i,i=null}},dhtmlXWindows.prototype._winAdjustFRMSize=function(t){var e=this.w[t];null!=e.fr_m_cover&&(e.fr_m_cover.style.width=e.conf.w+"px",e.fr_m_cover.style.height=e.conf.h+"px"),e=null},dhtmlXWindows.prototype._winAdjustFRMPosition=function(t){var e=this.w[t];null!=e.fr_m_cover&&(e.fr_m_cover.style.left=e.win.style.left,e.fr_m_cover.style.top=e.win.style.top),e=null},dhtmlXWindows.prototype._winAdjustFRMZIndex=function(t){var e=this.w[t];null!=e.fr_m_cover&&(e.fr_m_cover.style.zIndex=e.win.style.zIndex),e=null},dhtmlXWindowsCell.prototype=new dhtmlXCellObject,dhtmlXWindowsCell.prototype.setText=function(t){this.wins.w[this._idd].conf.text=t,this.wins.w[this._idd].hdr.childNodes[1].firstChild.innerHTML=t},dhtmlXWindowsCell.prototype.getText=function(){return this.wins.w[this._idd].conf.text},dhtmlXWindowsCell.prototype.allowMove=function(){this.wins.w[this._idd].conf.allow_move=!0},dhtmlXWindowsCell.prototype.denyMove=function(){this.wins.w[this._idd].conf.allow_move=!1},dhtmlXWindowsCell.prototype.isMovable=function(){return 1==this.wins.w[this._idd].conf.allow_move},dhtmlXWindowsCell.prototype.allowResize=function(){this.wins.w[this._idd].conf.allow_resize=!0,this.wins.w[this._idd].b.minmax.enable()},dhtmlXWindowsCell.prototype.denyResize=function(){this.wins.w[this._idd].conf.allow_resize=!1,this.wins.w[this._idd].b.minmax.disable()},dhtmlXWindowsCell.prototype.isResizable=function(){return 1==this.wins.w[this._idd].conf.allow_resize},dhtmlXWindowsCell.prototype.maximize=function(){this.wins._winMinmax(this._idd,!0)},dhtmlXWindowsCell.prototype.minimize=function(){this.wins._winMinmax(this._idd,!1)},dhtmlXWindowsCell.prototype.isMaximized=function(){return 1==this.wins.w[this._idd].conf.maxed},dhtmlXWindowsCell.prototype.setPosition=function(t,e){this.wins._winSetPosition(this._idd,t,e)},dhtmlXWindowsCell.prototype.getPosition=function(){var t=this.wins.w[this._idd],e=[t.conf.x,t.conf.y];return t=null,e},dhtmlXWindowsCell.prototype.adjustPosition=function(){this.wins._winAdjustPosition(this._idd)},dhtmlXWindowsCell.prototype.park=function(){this.wins._winPark(this._idd,!0)},dhtmlXWindowsCell.prototype.isParked=function(){return 1==this.wins.w[this._idd].conf.parked},dhtmlXWindowsCell.prototype.allowPark=function(){this.wins.w[this._idd].conf.allow_park=!0,this.wins.w[this._idd].b.park.enable()},dhtmlXWindowsCell.prototype.denyPark=function(){this.wins.w[this._idd].conf.allow_park=!1,this.wins.w[this._idd].b.park.disable()},dhtmlXWindowsCell.prototype.isParkable=function(){return 1==this.wins.w[this._idd].conf.allow_park},dhtmlXWindowsCell.prototype.show=function(t){this.wins._winShow(this._idd,window.dhx4.s2b(t))},dhtmlXWindowsCell.prototype.hide=function(){this.wins._winHide(this._idd)},dhtmlXWindowsCell.prototype.isHidden=function(){return 1!=this.wins.w[this._idd].conf.visible},dhtmlXWindowsCell.prototype.stick=function(){this.wins._winStick(this._idd,!0)},dhtmlXWindowsCell.prototype.unstick=function(){this.wins._winStick(this._idd,!1)},dhtmlXWindowsCell.prototype.isSticked=function(){return 1==this.wins.w[this._idd].conf.sticked},dhtmlXWindowsCell.prototype.setDimension=function(t,e){var i=this.wins.w[this._idd];i.conf.parked&&this.wins._winPark(this._idd,!1),i.conf.maxed?(null!=t&&(i.conf.lastMW=t),null!=e&&(i.conf.lastMH=e),this.wins._winMinmax(this._idd)):this.wins._winSetSize(this._idd,t,e,!1,!0),i=null},dhtmlXWindowsCell.prototype.getDimension=function(){var t=this.wins.w[this._idd],e=[t.conf.w,t.conf.h];return t=null,e},dhtmlXWindowsCell.prototype.setMinDimension=function(t,e){var i=this.wins.w[this._idd];i.conf.min_w=t,i.conf.min_h=e,this.wins._winSetSize(this._idd,i.conf.w,i.conf.h),i=null},dhtmlXWindowsCell.prototype.getMinDimension=function(){var t=this.wins.w[this._idd],e=[t.conf.min_w,t.conf.min_h];return t=null,e},dhtmlXWindowsCell.prototype.setMaxDimension=function(t,e){var i=this.wins.w[this._idd];i.conf.max_w=t,i.conf.max_h=e,this.wins._winSetSize(this._idd,i.conf.w,i.conf.h),i=null},dhtmlXWindowsCell.prototype.getMaxDimension=function(){var t=this.wins.w[this._idd],e=[t.conf.max_w,t.conf.max_h];return t=null,e},dhtmlXWindowsCell.prototype.keepInViewport=function(t){this.wins.w[this._idd].conf.keep_in_vp=window.dhx4.s2b(t)},dhtmlXWindowsCell.prototype.center=function(){var t=this.wins.vp,e=this.wins.w[this._idd],i=Math.round((t.clientWidth-e.conf.w)/2),s=Math.round((t.clientHeight-e.conf.h)/2);this.wins._winSetPosition(this._idd,i,s),t=e=null},dhtmlXWindowsCell.prototype.centerOnScreen=function(){for(var t=this.wins.w[this._idd],e=window.dhx4.screenDim(),i=window.dhx4.absLeft(this.wins.vp),s=window.dhx4.absTop(this.wins.vp),n=this.wins.vp.parentNode;null!=n;)n.scrollLeft&&(i-=n.scrollLeft),n.scrollTop&&(s-=n.scrollTop),n=n.parentNode;var o=Math.round((e.right-e.left-t.conf.w)/2),l=Math.round((e.bottom-e.top-t.conf.h)/2);this.wins._winAdjustPosition(this._idd,o-i,l-s),d=t=null},dhtmlXWindowsCell.prototype.bringToTop=function(){this.wins._winMakeActive(this._idd,!0)},dhtmlXWindowsCell.prototype.bringToBottom=function(){var t=this.wins.w[this._idd].conf.actv?null:this.wins.conf.last_active;window.dhx4.zim.clear(this.wins.w[this._idd].conf.z_id),this.wins.w[this._idd].win.style.zIndex=0,this.wins._winMakeActive(t,!0)},dhtmlXWindowsCell.prototype.isOnTop=function(){return 1==this.wins.w[this._idd].conf.actv},dhtmlXWindowsCell.prototype.isOnBottom=function(){var t={id:null,z:+1/0};for(var e in this.wins.w)this.wins.w[e].conf.visible&&this.wins.w[e].win.style.zIndex<t.z&&(t.id=e,t.z=this.wins.w[e].win.style.zIndex);return t.id==this._idd},dhtmlXWindowsCell.prototype.showHeader=function(){var t=this.wins.w[this._idd];0==t.conf.header&&(t.hdr.className=String(t.hdr.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),t.brd.className=String(t.brd.className).replace(/\s{0,}dhxwin_hdr_hidden/gi,""),this.conf.cells_cont=null,t.conf.brd=null,t.conf.header=!0,this.wins._winAdjustCell(this._idd)),t=null},dhtmlXWindowsCell.prototype.hideHeader=function(){var t=this.wins.w[this._idd];1==t.conf.header&&(t.conf.parked&&this.wins._winPark(this._idd,!1),t.hdr.className+=" dhxwin_hdr_hidden",t.brd.className+=" dhxwin_hdr_hidden",this.conf.cells_cont=null,t.conf.brd=null,t.conf.header=!1,this.wins._winAdjustCell(this._idd)),t=null},dhtmlXWindowsCell.prototype.setModal=function(t){this.wins._winSetModal(this._idd,window.dhx4.s2b(t))},dhtmlXWindowsCell.prototype.isModal=function(){return 1==this.wins.w[this._idd].conf.modal},dhtmlXWindowsCell.prototype._adjustByCont=function(t,e){t+=this.wins.w[this._idd].conf.w-this.conf.size.w,e+=this.wins.w[this._idd].conf.h-this.conf.size.h,this.wins._winSetSize(this._idd,t,e)},dhtmlXWindowsCell.prototype.close=function(){this.wins._winClose(this._idd)},dhtmlXWindowsCell.prototype.setIconCss=function(t){this.wins.w[this._idd].hdr.firstChild.className="dhxwin_icon "+t,this.wins._winAdjustTitle(this._idd)},dhtmlXWindowsCell.prototype.setToFullScreen=function(t){t=window.dhx4.s2b(t);var e=this.wins.w[this._idd];return e.conf.fs_mode==t?void(e=null):(null==this.wins.fsn&&(this.wins.fsn=document.createElement("DIV"),this.wins.fsn.className=this.wins.vp.className+" dhxwins_vp_fs",document.body.appendChild(this.wins.fsn)),t?(this.wins.fsn.appendChild(e.win),this.maximize(),this.hideHeader()):(this.wins.vp.appendChild(e.win),this.minimize(),this.showHeader(),0==this.wins.fsn.childNodes.length&&(this.wins.fsn.parentNode.removeChild(this.wins.fsn),this.wins.fsn=null)),e.conf.fs_mode=t,void(e=null))},dhtmlXWindowsCell.prototype.button=function(t){return("minmax1"==t||"minmax2"==t)&&(t="minmax"),this.wins.w[this._idd].b[t]},dhtmlXWindowsCell.prototype.addUserButton=function(t,e,i){var s=new dhtmlXWindowsButton(this.wins,this._idd,t,i,!0),n=null,o=this.wins.w[this._idd].hdr.lastChild;isNaN(e)?e=0:0>e&&(e=0),null!=o.childNodes[e]&&(n=o.childNodes[e]),null!=n?o.insertBefore(s.button,n):o.appendChild(s.button),this.wins.w[this._idd].b[t]=s,s=n=o=null,this.wins._winAdjustTitle(this._idd)},dhtmlXWindowsCell.prototype.removeUserButton=function(t){null!=this.wins.w[this._idd].b[t]&&1==this.wins.w[this._idd].b[t].conf.custom&&this.wins._winRemoveButton(this._idd,t)},window.dhtmlXWindowsButton=function(t,e,i,s){return this.conf={wins:t,winId:e,name:i,enabled:!0,visible:!0,custom:!0},this.button=document.createElement("DIV"),this.button._buttonName=i,this.button.title=s,this.enable=function(){this.conf.enabled=!0,this.setCss(this.conf.css)},this.disable=function(){this.conf.enabled=!1,this.setCss(this.conf.css)},this.isEnabled=function(){return 1==this.conf.enabled},this.show=function(){this.button.style.display="",this.conf.visible=!0,this.conf.wins._winAdjustTitle(this.conf.winId)},this.hide=function(){this.button.style.display="none",this.conf.visible=!1,this.conf.wins._winAdjustTitle(this.conf.winId)},this.isHidden=function(){return 0==this.conf.visible},this.setCss=function(t){this.conf.css=t;var e=this.conf.enabled?"":"_dis";this.button.className="dhxwin_button"+e+" dhxwin_button_"+this.conf.css+e},this._doOnClick=function(){return this.callEvent("onClick",[this.conf.wins.w[this.conf.winId].cell,this])},this.unload=function(t){dhx4._eventable(this,"clear"),this.button._buttonName=null,this.button.parentNode.removeChild(this.button),null!=this.conf.wins.cm&&null!=this.conf.wins.cm.button[this.conf.winId]&&null!=this.conf.wins.cm.button[this.conf.winId][this.conf.name]&&this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name),this.button=null,this.enable=null,this.disable=null,this.isEnabled=null,this.show=null,this.hide=null,this.isHidden=null,this.setCss=null,this.unload=null,1!=t&&this.conf.wins._winAdjustTitle(this.conf.winId),this.conf.wins=null,this.conf.winId=null,this.conf=null},this.setCss(i),dhx4._eventable(this),this},dhtmlXWindows.prototype._winButtonClick=function(t,e){if(!this.w[t].b[e].isEnabled())return!0;if(this.w[t].b[e]._doOnClick()===!0)return"help"==e&&this._callMainEvent("onHelp",t),"park"==e&&this._winPark(t,!0),"minmax"==e&&this._winMinmax(t),"stick"==e?(this._winStick(t),!1):"close"==e?(this._winClose(t),!1):!0},dhtmlXWindows.prototype._winRemoveButton=function(t,e,i){this.w[t].b[e].unload(i),this.w[t].b[e]=null,delete this.w[t].b[e]},dhtmlXWindows.prototype._dndInitModule=function(){var t=this;this._dndOnMouseDown=function(e,i){if(!t.conf.dblclick_active){e.preventDefault?e.preventDefault():e.returnValue=!1,t.conf.dnd={id:i,x:e.clientX,y:e.clientY,ready:!0,css:!1,tr:null,mode:"def",moved:!1},t.w[i].conf.keep_in_vp?(t.conf.dnd.minX=0,t.conf.dnd.maxX=t.vp.clientWidth-t.w[i].conf.w,t.conf.dnd.minY=0,t.conf.dnd.maxY=t.vp.clientHeight-t.w[i].conf.h):(t.conf.dnd.minX=-t.w[i].conf.w+t.conf.vp_pos_ofs,t.conf.dnd.maxX=t.vp.clientWidth-t.conf.vp_pos_ofs,t.conf.dnd.minY=0,t.conf.dnd.maxY=t.vp.clientHeight-t.conf.vp_pos_ofs);for(var s=["MozTransform","WebkitTransform","OTransform","msTransform","transform"],n=0;n<s.length;n++)null!=document.documentElement.style[s[n]]&&null==t.conf.dnd.tr&&(t.conf.dnd.tr=s[n],t.conf.dnd.mode="tr");"tr"==t.conf.dnd.mode&&(t.w[i].win.style[t.conf.dnd.tr]="translate(0px,0px)"),t._dndInitEvents()}},this._dndOnMouseMove=function(e){e=e||event,e.preventDefault?e.preventDefault():e.returnValue=!1;var i=t.conf.dnd,s=t.w[i.id];i.css||(s.win.className+=" dhxwin_dnd",s.fr_cover.className+=" dhxwin_fr_cover_dnd",t.vp.className+=" dhxwins_vp_dnd",i.css=!0);var n=e.clientX-i.x,o=e.clientY-i.y;i.newX=s.conf.x+n,i.newY=s.conf.y+o,"tr"==i.mode?(i.newX=Math.min(Math.max(i.newX,i.minX),i.maxX),n=i.newX-s.conf.x,i.newY=Math.min(Math.max(i.newY,i.minY),i.maxY),o=i.newY-s.conf.y,s.win.style[i.tr]="translate("+n+"px,"+o+"px)"):(i.newX<i.minX||i.newX>i.maxX?i.newX=Math.min(Math.max(i.newX,i.minX),i.maxX):i.x=e.clientX,i.newY<i.minY||i.newY>i.maxY?i.newY=Math.min(Math.max(i.newY,i.minY),i.maxY):i.y=e.clientY,t._winSetPosition(i.id,i.newX,i.newY)),i.moved=!0,s=i=null},this._dndOnMouseUp=function(){if(null!=t.conf.dnd){var e=t.conf.dnd,i=t.w[e.id];null!=e.newX&&"tr"==e.mode&&(t._winSetPosition(e.id,e.newX,e.newY),i.win.style[e.tr]="translate(0px,0px)"),e.css&&(i.win.className=String(i.win.className).replace(/\s{0,}dhxwin_dnd/gi,""),i.fr_cover.className=String(i.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_dnd/gi,""),t.vp.className=String(t.vp.className).replace(/\s{0,}dhxwins_vp_dnd/gi,"")),t._dndUnloadEvents(),e.moved&&t._callMainEvent("onMoveFinish",e.id),i=e=t.conf.dnd=null}},this._dndOnSelectStart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this._dndInitEvents=function(){"function"==typeof window.addEventListener?(window.addEventListener("mousemove",this._dndOnMouseMove,!1),window.addEventListener("mouseup",this._dndOnMouseUp,!1),window.addEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.attachEvent("onmousemove",this._dndOnMouseMove),document.body.attachEvent("onmouseup",this._dndOnMouseUp),document.body.attachEvent("onselectstart",this._dndOnSelectStart))},this._dndUnloadEvents=function(){"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",this._dndOnMouseMove,!1),window.removeEventListener("mouseup",this._dndOnMouseUp,!1),window.removeEventListener("selectstart",this._dndOnSelectStart,!1)):(document.body.detachEvent("onmousemove",this._dndOnMouseMove),document.body.detachEvent("onmouseup",this._dndOnMouseUp),document.body.detachEvent("onselectstart",this._dndOnSelectStart))},this._dndUnloadModule=function(){this.detachEvent(this.conf.dnd_evid),this.conf.dnd_evid=null,this._dndOnMouseDown=null,this._dndOnMouseMove=null,this._dndOnMouseUp=null,this._dndOnSelectStart=null,this._dndInitEvents=null,this._dndUnloadEvents=null,this._dndInitModule=null,this._dndUnloadModule=null,t=null},this.conf.dnd_evid=this.attachEvent("_winMouseDown",function(t,e){return t.button>=2||"hdr"!=e.mode||"mousedown"!=t.type||1!=this.w[e.id].conf.allow_move||this.w[e.id].conf.maxed&&null==this.w[e.id].conf.max_w&&null==this.w[e.id].conf.max_h?void 0:(t.preventDefault?t.preventDefault():t.returnValue=!1,this._dndOnMouseDown(t,e.id),!1)})},dhtmlXWindowsCell.prototype._initResize=function(){var t=this,e=navigator.userAgent;this.conf.resize={b_width:6,c_type:e.indexOf("MSIE 10.0")>0||e.indexOf("MSIE 9.0")>0||e.indexOf("MSIE 8.0")>0||e.indexOf("MSIE 7.0")>0||e.indexOf("MSIE 6.0")>0},this._rOnCellMouseMove=function(e){if(1==t.wins.conf.resize_actv||0==t.wins.w[t._idd].conf.allow_resize||1==t.conf.progress||1==t.wins.w[t._idd].conf.maxed||1==t.wins.w[t._idd].conf.fs_mode){var i=t.wins.w[t._idd].brd;return"default"!=i.style.cursor&&(i.style.cursor="default"),void(i=null)
}e=e||event;var s=t.wins.w[t._idd].brd,n=t.conf.resize,o=0==t.wins.w[t._idd].conf.header,l=e.clientX,r=e.clientY,a=window.dhx4.absLeft(s),h=window.dhx4.absTop(s),d="";l<=a+n.b_width?d="w":l>=a+s.offsetWidth-n.b_width&&(d="e"),r>=h+s.offsetHeight-n.b_width?d="s"+d:o&&r<=h+n.b_width&&(d="n"+d),""==d&&(d=!1),n.mode!=d&&(n.mode=d,s.style.cursor=0==d?"default":d+"-resize"),s=n=null},this._rOnCellMouseDown=function(e){if(0!=t.conf.resize.mode&&1!=t.conf.progress&&0!=t.wins.w[t._idd].conf.allow_resize&&1!=t.wins.w[t._idd].conf.fs_mode){e.preventDefault?e.preventDefault():e.returnValue=!1;var i=t.wins.w[t._idd],s=t.conf.resize;if(t.wins.conf.resize_actv=!0,s.min_w=i.conf.min_w,s.min_h=i.conf.min_h,s.max_w=i.conf.max_w||+1/0,s.max_h=i.conf.max_h||+1/0,"layout"==i.cell.dataType&&null!=i.cell.dataObj&&"function"==typeof i.cell.dataObj._getWindowMinDimension){var n=i.cell.dataObj._getWindowMinDimension(i.cell);s.min_w=Math.max(n.w,s.min_w),s.min_h=Math.max(n.h,s.min_h)}s.vp_l=t.wins.conf.vp_pos_ofs,s.vp_r=t.wins.vp.clientWidth-t.wins.conf.vp_pos_ofs,s.vp_b=t.wins.vp.clientHeight-t.wins.conf.vp_pos_ofs,s.x=e.clientX,s.y=e.clientY,"function"==typeof window.addEventListener?(window.addEventListener("mousemove",t._rOnWinMouseMove,!1),window.addEventListener("mouseup",t._rOnWinMouseUp,!1),window.addEventListener("selectstart",t._rOnSelectStart,!1)):(document.body.attachEvent("onmousemove",t._rOnWinMouseMove),document.body.attachEvent("onmouseup",t._rOnWinMouseUp),document.body.attachEvent("onselectstart",t._rOnSelectStart)),s.resized=!1,s.vp_cursor=t.wins.vp.style.cursor,t.wins.vp.style.cursor=s.mode+"-resize",i=s=null}},this._rOnWinMouseMove=function(e){e=e||event;var i=t.wins.w[t._idd],s=t.conf.resize;s.resized||(i.fr_cover.className+=" dhxwin_fr_cover_resize",s.resized=!0);var n=e.clientX-s.x,o=e.clientY-s.y;s.mode.indexOf("e")>=0?(s.rw=Math.min(Math.max(i.conf.w+n,s.min_w),s.max_w),s.rx=null,i.conf.x+s.rw<s.vp_l?s.rw=s.vp_l-i.conf.x:i.conf.x+s.rw>t.wins.vp.clientWidth&&(s.rw=t.wins.vp.clientWidth-i.conf.x)):s.mode.indexOf("w")>=0&&(s.rw=Math.min(Math.max(i.conf.w-n,s.min_w),s.max_w),s.rx=i.conf.x+i.conf.w-s.rw,s.rx<0?(s.rw=s.rw+s.rx,s.rx=0):s.rx>s.vp_r&&(s.rw=s.rw-s.vp_r,s.rx=s.vp_r)),s.mode.indexOf("s")>=0?(s.rh=Math.min(Math.max(i.conf.h+o,s.min_h),s.max_h),s.ry=null,i.conf.y+s.rh>t.wins.vp.clientHeight&&(s.rh=t.wins.vp.clientHeight-i.conf.y)):s.mode.indexOf("n")>=0&&(s.rh=Math.min(Math.max(i.conf.h-o,s.min_h),s.max_h),s.ry=i.conf.y+i.conf.h-s.rh,s.ry<0?(s.rh=s.rh+s.ry,s.ry=0):s.ry>s.vp_b&&(s.rh=s.rh-s.vp_b,s.ry=s.vp_b)),t._rAdjustSizer(),i=s=null},this._rOnWinMouseUp=function(){var e=t.conf.resize,i=t.wins.w[t._idd];t.wins.conf.resize_actv=!1,t.wins.vp.style.cursor=e.vp_cursor,i.fr_cover.className=String(i.fr_cover.className).replace(/\s{0,}dhxwin_fr_cover_resize/gi,""),e.resized&&(t.wins._winSetSize(t._idd,e.rw,e.rh),null==e.rx&&(e.rx=i.conf.x),null==e.ry&&(e.ry=i.conf.y),(e.rx!=i.conf.x||e.ry!=i.conf.y)&&t.wins._winSetPosition(t._idd,e.rx,e.ry)),null!=e.obj&&(e.obj.parentNode.removeChild(e.obj),e.obj=null),null!=e.objFR&&(e.objFR.parentNode.removeChild(e.objFR),e.objFR=null),"function"==typeof window.addEventListener?(window.removeEventListener("mousemove",t._rOnWinMouseMove,!1),window.removeEventListener("mouseup",t._rOnWinMouseUp,!1),window.removeEventListener("selectstart",t._rOnSelectStart,!1)):(document.body.detachEvent("onmousemove",t._rOnWinMouseMove),document.body.detachEvent("onmouseup",t._rOnWinMouseUp),document.body.detachEvent("onselectstart",t._rOnSelectStart)),e.resized&&("layout"==t.dataType&&null!=t.dataObj&&t.dataObj.callEvent("onResize",[]),t.wins._callMainEvent("onResizeFinish",t._idd)),e.mode="",i=e=null},this._rOnSelectStart=function(t){return t=t||event,t.preventDefault?t.preventDefault():t.returnValue=!1,!1},this._rInitSizer=function(){var e=t.conf.resize,i=t.wins.w[t._idd];e.obj=document.createElement("DIV"),e.obj.className="dhxwin_resize",e.obj.style.zIndex=i.win.style.zIndex,e.obj.style.cursor=e.mode+"-resize",t.wins.vp.appendChild(e.obj),1==t.wins.conf.fr_cover&&(e.objFR=document.createElement("IFRAME"),e.objFR.className="dhxwin_resize_fr_cover",e.objFR.style.zIndex=e.obj.style.zIndex,t.wins.vp.insertBefore(e.objFR,e.obj)),e.rx=i.conf.x,e.ry=i.conf.y,e.rw=i.conf.w,e.rh=i.conf.h,e=null},this._rAdjustSizer=function(){var e=t.conf.resize;e.obj||this._rInitSizer(),e.obj.style.width=e.rw+"px",e.obj.style.height=e.rh+"px",null!=e.rx&&(e.obj.style.left=e.rx+"px"),null!=e.ry&&(e.obj.style.top=e.ry+"px"),null!=e.objFR&&(e.objFR.style.width=e.obj.style.width,e.objFR.style.height=e.obj.style.height,null!=e.rx&&(e.objFR.style.left=e.obj.style.left),null!=e.ry&&(e.objFR.style.top=e.obj.style.top)),e=null},"function"==typeof window.addEventListener?(this.wins.w[this._idd].brd.addEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.addEventListener("mousedown",this._rOnCellMouseDown,!1)):(this.wins.w[this._idd].brd.attachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.attachEvent("onmousedown",this._rOnCellMouseDown)),this._unloadResize=function(){"function"==typeof window.addEventListener?(this.wins.w[this._idd].brd.removeEventListener("mousemove",this._rOnCellMouseMove,!1),this.wins.w[this._idd].brd.removeEventListener("mousedown",this._rOnCellMouseDown,!1)):(this.wins.w[this._idd].brd.detachEvent("onmousemove",this._rOnCellMouseMove),this.wins.w[this._idd].brd.detachEvent("onmousedown",this._rOnCellMouseDown)),this._initResize=null,this._rOnCellMouseMove=null,this._rOnCellMouseDown=null,this._rOnWinMouseMove=null,this._rOnWinMouseUp=null,this._rOnSelectStart=null,this._rInitSizer=null,this._rAdjustSizer=null,this._unloadResize=null,this.conf.resize=null,t=null}},dhtmlXWindows.prototype.attachContextMenu=function(t){return this._renderContextMenu("icon",null,null,t)},dhtmlXWindows.prototype.getContextMenu=function(){return null!=this.cm&&null!=this.cm.global?this.cm.global:null},dhtmlXWindows.prototype.detachContextMenu=function(){this._detachContextMenu("icon",null,null)},dhtmlXWindowsCell.prototype.attachContextMenu=function(t){return this.wins._renderContextMenu("icon",this._idd,null,t)},dhtmlXWindowsCell.prototype.getContextMenu=function(){return null!=this.wins.cm&&null!=this.wins.cm.icon[this._idd]?this.wins.cm.icon[this._idd]:null},dhtmlXWindowsCell.prototype.detachContextMenu=function(){this.wins._detachContextMenu("icon",this._idd,null)},dhtmlXWindowsButton.prototype.attachContextMenu=function(t){return this.conf.wins._renderContextMenu("button",this.conf.winId,this.conf.name,t)},dhtmlXWindowsButton.prototype.getContextMenu=function(){return null==this.conf.wins.cm||null==this.conf.wins.cm.button[this.conf.winId]?null:null!=this.conf.wins.cm.button[this.conf.winId][this.conf.name]?this.conf.wins.cm.button[this.conf.winId][this.conf.name]:null},dhtmlXWindowsButton.prototype.detachContextMenu=function(){this.conf.wins._detachContextMenu("button",this.conf.winId,this.conf.name)},dhtmlXWindows.prototype._renderContextMenu=function(t,e,i,s){var n=this,o=!1;if(null==this.cm&&(this.cm={global:null,icon:{},button:{}},o=!0),null==e){if(null!=this.cm.global)return}else if("icon"==t){if(null!=this.cm.icon[e])return}else if("button"==t&&null!=this.cm.button[e]&&null!=this.cm.button[e][i])return;null==s&&(s={}),s.parent=null,s.context=!0;var l=new dhtmlXMenuObject(s);return l.setAutoHideMode(!1),l.attachEvent("onShow",function(){this.conf.wins_menu_open=!0}),l.attachEvent("onHide",function(){this.conf.wins_menu_open=!1,n.conf.opened_menu=null}),null==e?this.cm.global=l:"icon"==t?this.cm.icon[e]=l:"button"==t&&(null==this.cm.button[e]&&(this.cm.button[e]={}),this.cm.button[e][i]=l),o&&(this._showContextMenu=function(t,e){if(!(t.button>=2)){if("icon"==e.mode&&null!=e.id&&"mousedown"==e.press_type){var i=this.cm.icon[e.id]||this.cm.global;if(null==i)return;t.cancelBubble=!0;var s=this.w[e.id].hdr.firstChild;i.conf.wins_menu_open&&this.conf.opened_menu==e.id?i.hideContextMenu():(this._hideContextMenu(),i.showContextMenu(window.dhx4.absLeft(s),window.dhx4.absTop(s)+s.offsetHeight),this.conf.opened_menu=e.id),i=s=null}if("button"==e.mode&&null!=e.id&&"mousedown"==e.press_type){if(null==this.cm.button[e.id]||null==this.cm.button[e.id][e.button_name])return;t.cancelBubble=!0,this.conf.button_last=null;var i=this.cm.button[e.id][e.button_name],n=this.w[e.id].b[e.button_name].button;i.conf.wins_menu_open&&this.conf.opened_menu==e.id?i.hideContextMenu():(this._hideContextMenu(),i.showContextMenu(window.dhx4.absLeft(n),window.dhx4.absTop(n)+n.offsetHeight),this.conf.opened_menu=e.id),i=n=null}}},this._hideContextMenu=function(t){if(null!=t){if(t=t||event,"keydown"==t.type&&27!=t.keyCode)return;for(var e=t.target||t.srcElement,i=!0;null!=e&&1==i;)null!=e.className&&e.className.search(/SubLevelArea_Polygon/)>=0?i=!1:e=e.parentNode}if(i||null==t){null!=n.cm.global&&n.cm.global.hideContextMenu();for(var s in n.cm.icon)null!=n.cm.icon[s]&&n.cm.icon[s].hideContextMenu();for(var s in n.cm.button)for(var o in n.cm.button[s])null!=n.cm.button[s][o]&&n.cm.button[s][o].hideContextMenu()}},this._detachContextMenu=function(t,e,i){null!=this.cm&&(null==e?null!=this.cm.global&&(this.cm.global.unload(),this.cm.global=null):"icon"==t?null!=this.cm.icon[e]&&(this.cm.icon[e].unload(),this.cm.icon[e]=null):"button"==t&&null!=this.cm.button[e]&&null!=this.cm.button[e][i]&&(this.cm.button[e][i].unload(),this.cm.button[e][i]=null))},this.attachEvent("_winMouseDown",this._showContextMenu),"function"==typeof window.addEventListener?(window.addEventListener("mousedown",this._hideContextMenu,!1),window.addEventListener("keydown",this._hideContextMenu,!1)):(document.body.attachEvent("onmousedown",this._hideContextMenu),document.body.attachEvent("onkeydown",this._hideContextMenu)),this._unloadContextMenu=function(){this._detachContextMenu("icon",null,null),this.cm=null,"function"==typeof window.addEventListener?(window.removeEventListener("mousedown",this._hideContextMenu,!1),window.removeEventListener("keydown",this._hideContextMenu,!1)):(document.body.detachEvent("onmousedown",this._hideContextMenu),document.body.detachEvent("onkeydown",this._hideContextMenu)),n=null}),l},window.dhx||(dhx={}),dhx.assert=function(t,e){t||dhx.assert_error(e)},dhx.assert_error=function(message){dhx.log("error",message),dhx.message&&"string"==typeof message&&dhx.message({type:"debug",text:message,expire:-1}),dhx.debug!==!1&&eval("debugger;")},dhx.assert_core_ready=function(){window.dhx_on_core_ready&&dhx_on_core_ready()},dhx.version="3.0",dhx.codebase="./",dhx.name="Core",dhx.clone=function(t){var e=dhx.clone._function;return e.prototype=t,new e},dhx.clone._function=function(){},dhx.extend=function(t,e,i){if(dhx.assert(t,"Invalid mixing target"),dhx.assert(e,"Invalid mixing source"),t._dhx_proto_wait)return dhx.PowerArray.insertAt.call(t._dhx_proto_wait,e,1),t;for(var s in e)(!t[s]||i)&&(t[s]=e[s]);return e.defaults&&dhx.extend(t.defaults,e.defaults),e.$init&&e.$init.call(t),t},dhx.copy=function(t){if(dhx.assert(t,"Invalid mixing target"),arguments.length>1){var e=arguments[0];t=arguments[1]}else var e=dhx.isArray(t)?[]:{};for(var i in t)t[i]&&"object"==typeof t[i]&&!dhx.isDate(t[i])?(e[i]=dhx.isArray(t[i])?[]:{},dhx.copy(e[i],t[i])):e[i]=t[i];return e},dhx.single=function(t){var e=null,i=function(){return e||(e=new t({})),e._reinit&&e._reinit.apply(e,arguments),e};return i},dhx.protoUI=function(){dhx.debug_proto&&dhx.log("UI registered: "+arguments[0].name);var t=arguments,e=t[0].name,i=function(t){if(!i)return dhx.ui[e].prototype;var s=i._dhx_proto_wait;if(s){for(var n=[s[0]],o=1;o<s.length;o++)n[o]=s[o],n[o]._dhx_proto_wait&&(n[o]=n[o].call(dhx,n[o].name)),n[o].prototype&&n[o].prototype.name&&(dhx.ui[n[o].prototype.name]=n[o]);if(dhx.ui[e]=dhx.proto.apply(dhx,n),i._dhx_type_wait)for(var o=0;o<i._dhx_type_wait.length;o++)dhx.Type(dhx.ui[e],i._dhx_type_wait[o]);i=s=null}return this!=dhx?new dhx.ui[e](t):dhx.ui[e]};return i._dhx_proto_wait=Array.prototype.slice.call(arguments,0),dhx.ui[e]=i},dhx.proto=function(){dhx.debug_proto&&dhx.log("Proto chain:"+arguments[0].name+"["+arguments.length+"]");var t=arguments,e=t[0],i=!!e.$init,s=[];dhx.assert(e,"Invalid mixing target");for(var n=t.length-1;n>0;n--){if(dhx.assert(t[n],"Invalid mixing source"),"function"==typeof t[n]&&(t[n]=t[n].prototype),t[n].$init&&s.push(t[n].$init),t[n].defaults){var o=t[n].defaults;e.defaults||(e.defaults={});for(var l in o)dhx.isUndefined(e.defaults[l])&&(e.defaults[l]=o[l])}if(t[n].type&&e.type)for(var l in t[n].type)e.type[l]||(e.type[l]=t[n].type[l]);for(var r in t[n])e[r]||(e[r]=t[n][r])}i&&s.push(e.$init),e.$init=function(){for(var t=0;t<s.length;t++)s[t].apply(this,arguments)};var a=function(t){this.$ready=[],dhx.assert(this.$init,"object without init method"),this.$init(t),this._parseSettings&&this._parseSettings(t,this.defaults);for(var e=0;e<this.$ready.length;e++)this.$ready[e].call(this)};return a.prototype=e,e=t=null,a},dhx.bind=function(t,e){return function(){return t.apply(e,arguments)}},dhx.require=function(t,e,i){if("string"==typeof t){if(dhx._modules[t]!==!0){if(".css"==t.substr(-4)){var s=dhx.html.create("LINK",{type:"text/css",rel:"stylesheet",href:dhx.codebase+t});return document.head.appendChild(s),void(e&&e.call(i||window))}{arguments[4]}e?dhx._modules[t]?dhx._modules[t].push([e,i]):(dhx._modules[t]=[[e,i]],dhx.ajax(dhx.codebase+t,function(e){dhx.exec(e);var i=dhx._modules[t];dhx._modules[t]=!0;for(var s=0;s<i.length;s++)i[s][0].call(i[s][1]||window,!s)})):(dhx.exec(dhx.ajax().sync().get(dhx.codebase+t).responseText),dhx._modules[t]=!0)}}else{var n=t.length||0,o=e;if(n)(e=function(){return n?(n--,void dhx.require(t[t.length-n-1],e,i)):o.apply(this,arguments)})();else{for(var l in t)n++;e=function(){n--,0===n&&o.apply(this,arguments)};for(var l in t)dhx.require(l,e,i)}}},dhx._modules={},dhx.exec=function(t){window.execScript?window.execScript(t):window.eval(t)},dhx.wrap=function(t,e){return t?function(){var i=t.apply(this,arguments);return e.apply(this,arguments),i}:e},dhx.isUndefined=function(t){return"undefined"==typeof t},dhx.delay=function(t,e,i,s){return window.setTimeout(function(){var s=t.apply(e,i||[]);return t=e=i=null,s},s||1)},dhx.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++,this._seed},dhx.toNode=function(t){return"string"==typeof t?document.getElementById(t):t},dhx.toArray=function(t){return dhx.extend(t||[],dhx.PowerArray,!0)},dhx.toFunctor=function(str){return"string"==typeof str?eval(str):str},dhx.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)},dhx.isDate=function(t){return t instanceof Date},dhx._events={},dhx.event=function(t,e,i,s){t=dhx.toNode(t);var n=dhx.uid();return s&&(i=dhx.bind(i,s)),dhx._events[n]=[t,e,i],t.addEventListener?t.addEventListener(e,i,!1):t.attachEvent&&t.attachEvent("on"+e,i),n},dhx.eventRemove=function(t){if(t){dhx.assert(this._events[t],"Removing non-existing event");var e=dhx._events[t];e[0].removeEventListener?e[0].removeEventListener(e[1],e[2],!1):e[0].detachEvent&&e[0].detachEvent("on"+e[1],e[2]),delete this._events[t]}},dhx.log=function(t,e,i){1==arguments.length&&(e=t,t="log"),window.console&&console.log&&(t=t.toLowerCase(),window.console[t]?window.console[t](e||"unknown error"):window.console.log(t+": "+e),i&&window.console.log(i))},dhx.log_full_time=function(t){dhx._start_time_log=new Date,dhx.log("Timing start ["+t+"]"),window.setTimeout(function(){var e=new Date;dhx.log("Timing end ["+t+"]:"+(e.valueOf()-dhx._start_time_log.valueOf())/1e3+"s")},1)},dhx.log_time=function(t){var e="_start_time_log"+t;if(dhx[e]){var i=new Date;dhx.log("Info","Timing end ["+t+"]:"+(i.valueOf()-dhx[e].valueOf())/1e3+"s"),dhx[e]=null}else dhx[e]=new Date,dhx.log("Info","Timing start ["+t+"]")},dhx.debug_code=function(t){t.call(dhx)},dhx.EventSystem={$init:function(){this._evs_events||(this._evs_events={},this._evs_handlers={},this._evs_map={})},blockEvent:function(){this._evs_events._block=!0},unblockEvent:function(){this._evs_events._block=!1},mapEvent:function(t){dhx.extend(this._evs_map,t,!0)},on_setter:function(t){if(t)for(var e in t)"function"==typeof t[e]&&this.attachEvent(e,t[e])},callEvent:function(t,e){if(this._evs_events._block)return!0;t=t.toLowerCase();var i=this._evs_events[t.toLowerCase()],s=!0;if(dhx.debug&&dhx.log("info","["+this.name+"] event:"+t,e),i)for(var n=0;n<i.length;n++)i[n].apply(this,e||[])===!1&&(s=!1);return this._evs_map[t]&&!this._evs_map[t].callEvent(t,e)&&(s=!1),s},attachEvent:function(t,e,i){dhx.assert(e,"Invalid event handler for "+t),t=t.toLowerCase(),i=i||dhx.uid(),e=dhx.toFunctor(e);var s=this._evs_events[t]||dhx.toArray();return s.push(e),this._evs_events[t]=s,this._evs_handlers[i]={f:e,t:t},i},detachEvent:function(t){if(this._evs_handlers[t]){var e=this._evs_handlers[t].t,i=this._evs_handlers[t].f,s=this._evs_events[e];s.remove(i),delete this._evs_handlers[t]}},hasEvent:function(t){return t=t.toLowerCase(),this._evs_events[t]?!0:!1}},dhx.extend(dhx,dhx.EventSystem),dhx.PowerArray={removeAt:function(t,e){t>=0&&this.splice(t,e||1)},remove:function(t){this.removeAt(this.find(t))},insertAt:function(t,e){if(e||0===e){var i=this.splice(e,this.length-e);this[e]=t,this.push.apply(this,i)}else this.push(t)},find:function(t){for(var e=0;e<this.length;e++)if(t==this[e])return e;return-1},each:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])},map:function(t,e){for(var i=0;i<this.length;i++)this[i]=t.call(e||this,this[i]);return this},filter:function(t,e){for(var i=0;i<this.length;i++)t.call(e||this,this[i])||(this.splice(i,1),i--);return this}},dhx.env={},function(){-1!=navigator.userAgent.indexOf("Mobile")&&(dhx.env.mobile=!0),(dhx.env.mobile||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android"))&&(dhx.env.touch=!0),-1!=navigator.userAgent.indexOf("Opera")?dhx.env.isOpera=!0:(dhx.env.isIE=!!document.all,dhx.env.isFF=!document.all,dhx.env.isWebKit=-1!=navigator.userAgent.indexOf("KHTML"),dhx.env.isSafari=dhx.env.isWebKit&&-1!=navigator.userAgent.indexOf("Mac")),-1!=navigator.userAgent.toLowerCase().indexOf("android")&&(dhx.env.isAndroid=!0),dhx.env.transform=!1,dhx.env.transition=!1;var t={};t.names=["transform","transition"],t.transform=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],t.transition=["transition","WebkitTransition","MozTransition","OTransition","msTransition"];for(var e=document.createElement("DIV"),i=0;i<t.names.length;i++)for(var s=t[t.names[i]],n=0;n<s.length;n++)if("undefined"!=typeof e.style[s[n]]){dhx.env[t.names[i]]=s[n];break}e.style[dhx.env.transform]="translate3d(0,0,0)",dhx.env.translate=e.style[dhx.env.transform]?"translate3d":"translate";var o="",l=!1;dhx.env.isOpera&&(o="-o-",l="O"),dhx.env.isFF&&(o="-Moz-"),dhx.env.isWebKit&&(o="-webkit-"),dhx.env.isIE&&(o="-ms-"),dhx.env.transformCSSPrefix=o,dhx.env.transformPrefix=l||dhx.env.transformCSSPrefix.replace(/-/gi,""),dhx.env.transitionEnd="-Moz-"==dhx.env.transformCSSPrefix?"transitionend":dhx.env.transformPrefix+"TransitionEnd"}(),dhx.env.svg=function(){return document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")}(),dhx.html={_native_on_selectstart:0,denySelect:function(){dhx._native_on_selectstart||(dhx._native_on_selectstart=document.onselectstart),document.onselectstart=dhx.html.stopEvent},allowSelect:function(){0!==dhx._native_on_selectstart&&(document.onselectstart=dhx._native_on_selectstart||null),dhx._native_on_selectstart=0},index:function(t){for(var e=0;t=t.previousSibling;)e++;return e},_style_cache:{},createCss:function(t){var e="";for(var i in t)e+=i+":"+t[i]+";";var s=this._style_cache[e];return s||(s="s"+dhx.uid(),this.addStyle("."+s+"{"+e+"}"),this._style_cache[e]=s),s},addStyle:function(t){var e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("media","screen"),e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t)),document.getElementsByTagName("head")[0].appendChild(e)},create:function(t,e,i){e=e||{};var s=document.createElement(t);for(var n in e)s.setAttribute(n,e[n]);return e.style&&(s.style.cssText=e.style),e["class"]&&(s.className=e["class"]),i&&(s.innerHTML=i),s},getValue:function(t){return t=dhx.toNode(t),t?dhx.isUndefined(t.value)?t.innerHTML:t.value:""},remove:function(t){if(t instanceof Array)for(var e=0;e<t.length;e++)this.remove(t[e]);else t&&t.parentNode&&t.parentNode.removeChild(t)},insertBefore:function(t,e,i){t&&(e&&e.parentNode?e.parentNode.insertBefore(t,e):i.appendChild(t))},locate:function(t,e){if(t.tagName)var i=t;else{t=t||event;var i=t.target||t.srcElement}for(;i;){if(i.getAttribute){var s=i.getAttribute(e);if(s)return s}i=i.parentNode}return null},offset:function(t){if(t.getBoundingClientRect){var e=t.getBoundingClientRect(),i=document.body,s=document.documentElement,n=window.pageYOffset||s.scrollTop||i.scrollTop,o=window.pageXOffset||s.scrollLeft||i.scrollLeft,l=s.clientTop||i.clientTop||0,r=s.clientLeft||i.clientLeft||0,a=e.top+n-l,h=e.left+o-r;return{y:Math.round(a),x:Math.round(h)}}for(var a=0,h=0;t;)a+=parseInt(t.offsetTop,10),h+=parseInt(t.offsetLeft,10),t=t.offsetParent;return{y:a,x:h}},posRelative:function(t){return t=t||event,dhx.isUndefined(t.offsetX)?{x:t.layerX,y:t.layerY}:{x:t.offsetX,y:t.offsetY}},pos:function(t){if(t=t||event,t.pageX||t.pageY)return{x:t.pageX,y:t.pageY};var e=dhx.env.isIE&&"BackCompat"!=document.compatMode?document.documentElement:document.body;return{x:t.clientX+e.scrollLeft-e.clientLeft,y:t.clientY+e.scrollTop-e.clientTop}},preventEvent:function(t){return t&&t.preventDefault&&t.preventDefault(),dhx.html.stopEvent(t)},stopEvent:function(t){return(t||event).cancelBubble=!0,!1},addCss:function(t,e){t.className+=" "+e},removeCss:function(t,e){t.className=t.className.replace(RegExp(" "+e,"g"),"")}},dhx.ready=function(t){this._ready?t.call():this._ready_code.push(t)},dhx._ready_code=[],function(){var t=document.getElementsByTagName("SCRIPT");dhx.assert(t.length,"Can't locate codebase"),t.length&&(t=(t[t.length-1].getAttribute("src")||"").split("/"),t.splice(t.length-1,1),dhx.codebase=t.slice(0,t.length).join("/")+"/"),dhx.event(window,"load",function(){dhx.callEvent("onReady",[]),dhx.delay(function(){dhx._ready=!0;for(var t=0;t<dhx._ready_code.length;t++)dhx._ready_code[t].call();dhx._ready_code=[]})})}(),dhx.locale=dhx.locale||{},dhx.assert_core_ready(),dhx.ready(function(){dhx.event(document.body,"click",function(t){dhx.callEvent("onClick",[t||event])})}),function(){var t={},e=new RegExp("(\\r\\n|\\n)","g"),i=new RegExp('(\\")',"g");dhx.Template=function(s){if("function"==typeof s)return s;if(t[s])return t[s];if(s=(s||"").toString(),-1!=s.indexOf("->"))switch(s=s.split("->"),s[0]){case"html":s=dhx.html.getValue(s[1]);break;case"http":s=(new dhx.ajax).sync().get(s[1],{uid:dhx.uid()}).responseText}s=(s||"").toString(),s=s.replace(e,"\\n"),s=s.replace(i,'\\"'),s=s.replace(/\{obj\.([^}?]+)\?([^:]*):([^}]*)\}/g,'"+(obj.$1?"$2":"$3")+"'),s=s.replace(/\{common\.([^}\(]*)\}/g,"\"+(common.$1||'')+\""),s=s.replace(/\{common\.([^\}\(]*)\(\)\}/g,'"+(common.$1?common.$1.apply(this, arguments):"")+"'),s=s.replace(/\{obj\.([^}]*)\}/g,'"+(obj.$1)+"'),s=s.replace("{obj}",'"+obj+"'),s=s.replace(/#([^#'";, ]+)#/gi,'"+(obj.$1)+"');try{t[s]=Function("obj","common",'return "'+s+'";')}catch(n){dhx.assert_error("Invalid template:"+s)}return t[s]},dhx.Template.empty=function(){return""},dhx.Template.bind=function(t){return dhx.bind(dhx.Template(t),this)},dhx.Type=function(t,e){if(t._dhx_proto_wait)return t._dhx_type_wait||(t._dhx_type_wait=[]),void t._dhx_type_wait.push(e);"function"==typeof t&&(t=t.prototype),t.types||(t.types={"default":t.type},t.type.name="default");var i=e.name,s=t.type;i&&(s=t.types[i]=dhx.clone(e.baseType?t.types[e.baseType]:t.type));for(var n in e)s[n]=0===n.indexOf("template")?dhx.Template(e[n]):e[n];return i}}(),dhx.Settings={$init:function(){this._settings=this.config={}},define:function(t,e){return"object"==typeof t?this._parseSeetingColl(t):this._define(t,e)},_define:function(t,e){var i=this[t+"_setter"];return this._settings[t]=i?i.call(this,e,t):e},_parseSeetingColl:function(t){if(t)for(var e in t)this._define(e,t[e])},_parseSettings:function(t,e){var i={};e&&(i=dhx.extend(i,e)),"object"!=typeof t||t.tagName||dhx.extend(i,t,!0),this._parseSeetingColl(i)},_mergeSettings:function(t,e){for(var i in e)switch(typeof t[i]){case"object":t[i]=this._mergeSettings(t[i]||{},e[i]);break;case"undefined":t[i]=e[i]}return t},debug_freid_c_id:!0,debug_freid_a_name:!0},dhx.ajax=function(t,e,i){if(0!==arguments.length){var s=new dhx.ajax;return i&&(s.master=i),s.get(t,null,e)}return this.getXHR?this:new dhx.ajax},dhx.ajax.count=0,dhx.ajax.prototype={master:null,getXHR:function(){return dhx.env.isIE?new ActiveXObject("Microsoft.xmlHTTP"):new XMLHttpRequest},send:function(t,e,i){var s=this.getXHR();if(dhx.isArray(i)||(i=[i]),"object"==typeof e){var n=[];for(var o in e){var l=e[o];(null===l||l===dhx.undefined)&&(l=""),n.push(o+"="+encodeURIComponent(l))}e=n.join("&")}e&&"GET"===this.request&&(t=t+(-1!=t.indexOf("?")?"&":"?")+e,e=null),s.open(this.request,t,!this._sync),"POST"===this.request&&s.setRequestHeader("Content-type","application/x-www-form-urlencoded");var r=this;return s.onreadystatechange=function(){if(!s.readyState||4==s.readyState){if(dhx.debug_time&&dhx.log_full_time("data_loading"),dhx.ajax.count++,i&&r)for(var t=0;t<i.length;t++)if(i[t]){var e=i[t].success||i[t];(s.status>=400||!s.status&&!s.responseText)&&(e=i[t].error),e&&e.call(r.master||r,s.responseText,s.responseXML,s)}r&&(r.master=null),i=r=null}},s.send(e||null),s},get:function(t,e,i){return 2==arguments.length&&(i=e,e=null),this.request="GET",this.send(t,e,i)},post:function(t,e,i){return this.request="POST",this.send(t,e,i)},put:function(t,e,i){return this.request="PUT",this.send(t,e,i)},del:function(t,e,i){return this.request="DELETE",this.send(t,e,i)},sync:function(){return this._sync=!0,this},bind:function(t){return this.master=t,this}},dhx.send=function(t,e,i,s){var n=dhx.html.create("FORM",{target:s||"_self",action:t,method:i||"POST"},"");for(var o in e){var l=dhx.html.create("INPUT",{type:"hidden",name:o,value:e[o]},"");n.appendChild(l)}n.style.display="none",document.body.appendChild(n),n.submit(),document.body.removeChild(n)},dhx.AtomDataLoader={$init:function(t){this.data={},t&&(this._settings.datatype=t.datatype||"json",this.$ready.push(this._load_when_ready))},_load_when_ready:function(){this._ready_for_data=!0,this._settings.url&&this.url_setter(this._settings.url),this._settings.data&&this.data_setter(this._settings.data)},url_setter:function(t){return this._ready_for_data?(this.load(t,this._settings.datatype),t):t},data_setter:function(t){return this._ready_for_data?(this.parse(t,this._settings.datatype),!0):t},debug_freid_c_datatype:!0,debug_freid_c_dataFeed:!0,load:function(t,e){if(t.$proxy)return void t.load(this,"string"==typeof e?e:"json");this.callEvent("onXLS",[]),"string"==typeof e?(this.data.driver=dhx.DataDriver[e],e=arguments[2]):this.data.driver||(this.data.driver=dhx.DataDriver.json);var i=[{success:this._onLoad,error:this._onLoadError}];return e&&(dhx.isArray(e)?i.push.apply(i,e):i.push(e)),dhx.ajax(t,i,this)},parse:function(t,e){this.callEvent("onXLS",[]),this.data.driver=dhx.DataDriver[e||"json"],this._onLoad(t,null)},_onLoad:function(t,e,i){var s=this.data.driver,n=s.toObject(t,e);if(n){var o=s.getRecords(n)[0];this.data=s?s.getDetails(o):t}else this._onLoadError(t,e,i);this.callEvent("onXLE",[])},_onLoadError:function(t,e,i){this.callEvent("onXLE",[]),this.callEvent("onLoadError",arguments),dhx.callEvent("onLoadError",[t,e,i,this])},_check_data_feed:function(t){if(!this._settings.dataFeed||this._ignore_feed||!t)return!0;var e=this._settings.dataFeed;return"function"==typeof e?e.call(this,t.id||t,t):(e=e+(-1==e.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(t.id||t),this.callEvent("onXLS",[]),dhx.ajax(e,function(t,e,i){this._ignore_feed=!0;var s=dhx.DataDriver.toObject(t,e);s?this.setValues(s.getDetails(s.getRecords()[0])):this._onLoadError(t,e,i),this._ignore_feed=!1,this.callEvent("onXLE",[])},this),!1)}},dhx.DataDriver={},dhx.DataDriver.json={toObject:function(data){if(data||(data="[]"),"string"==typeof data){try{eval("dhx.temp="+data)}catch(e){return dhx.assert_error(e),null}data=dhx.temp}if(data.data){var t=data.data.config={};for(var key in data)"data"!=key&&(t[key]=data[key]);data=data.data}return data},getRecords:function(t){return t&&!dhx.isArray(t)?[t]:t},getDetails:function(t){return"string"==typeof t?{id:dhx.uid(),value:t}:t},getInfo:function(t){var e=t.config;return e?{_size:e.total_count||0,_from:e.pos||0,_parent:e.parent||0,_config:e.config,_key:e.dhx_security}:{}},child:"data"},dhx.DataDriver.html={toObject:function(t){if("string"==typeof t){var e=null;return-1==t.indexOf("<")&&(e=dhx.toNode(t)),e||(e=document.createElement("DIV"),e.innerHTML=t),e.getElementsByTagName(this.tag)}return t},getRecords:function(t){for(var e=[],i=0;i<t.childNodes.length;i++){var s=t.childNodes[i];1==s.nodeType&&e.push(s)}return e},getDetails:function(t){return dhx.DataDriver.xml.tagToObject(t)},getInfo:function(){return{_size:0,_from:0}},tag:"LI"},dhx.DataDriver.jsarray={toObject:function(data){return"string"==typeof data?(eval("dhx.temp="+data),dhx.temp):data},getRecords:function(t){return t},getDetails:function(t){for(var e={},i=0;i<t.length;i++)e["data"+i]=t[i];return e},getInfo:function(){return{_size:0,_from:0}}},dhx.DataDriver.csv={toObject:function(t){return t},getRecords:function(t){return t.split(this.row)},getDetails:function(t){t=this.stringToArray(t);for(var e={},i=0;i<t.length;i++)e["data"+i]=t[i];return e},getInfo:function(){return{_size:0,_from:0}},stringToArray:function(t){t=t.split(this.cell);for(var e=0;e<t.length;e++)t[e]=t[e].replace(/^[ \t\n\r]*(\"|)/g,"").replace(/(\"|)[ \t\n\r]*$/g,"");return t},row:"\n",cell:","},dhx.DataDriver.xml={_isValidXML:function(t){return t&&t.documentElement?t.getElementsByTagName("parsererror").length?null:t:null},toObject:function(t){if(this._isValidXML(e))return e;if("string"==typeof t)var e=this.fromString(t.replace(/^[\s]+/,""));else e=t;return this._isValidXML(e)?e:null},getRecords:function(t){return this.xpath(t,this.records)},records:"/*/item",child:"item",config:"/*/config",getDetails:function(t){return this.tagToObject(t,{})},getInfo:function(t){var e=this.xpath(t,this.config);return e=e.length?this.assignTypes(this.tagToObject(e[0],{})):null,{_size:t.documentElement.getAttribute("total_count")||0,_from:t.documentElement.getAttribute("pos")||0,_parent:t.documentElement.getAttribute("parent")||0,_config:e,_key:t.documentElement.getAttribute("dhx_security")||null}},xpath:function(t,e){if(window.XPathResult){var i=t;-1==t.nodeName.indexOf("document")&&(t=t.ownerDocument);for(var s=[],n=t.evaluate(e,i,null,XPathResult.ANY_TYPE,null),o=n.iterateNext();o;)s.push(o),o=n.iterateNext();return s}var l=!0;try{"undefined"==typeof t.selectNodes&&(l=!1)}catch(r){}if(l)return t.selectNodes(e);var a=e.split("/").pop();return t.getElementsByTagName(a)},assignTypes:function(t){for(var e in t){var i=t[e];if("object"==typeof i)this.assignTypes(i);else if("string"==typeof i){if(""===i)continue;"true"==i?t[e]=!0:"false"==i?t[e]=!1:i==1*i&&(t[e]=1*t[e])}}return t},tagToObject:function(t,e){e=e||{};var i=!1,s=t.attributes;if(s&&s.length){for(var n=0;n<s.length;n++)e[s[n].name]=s[n].value;i=!0}for(var o=t.childNodes,n=0;n<o.length;n++)if(1==o[n].nodeType){var l=o[n].tagName;"undefined"!=typeof e[l]?(dhx.isArray(e[l])||(e[l]=[e[l]]),e[l].push(this.tagToObject(o[n],{}))):e[o[n].tagName]=this.tagToObject(o[n],{}),i=!0}return i?(e.value=e.value||this.nodeValue(t),e):this.nodeValue(t)},nodeValue:function(t){return t.firstChild?t.firstChild.data:""},fromString:function(t){try{if(window.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");if(window.ActiveXObject){var e=new ActiveXObject("Microsoft.xmlDOM");
return e.loadXML(t),e}}catch(i){return dhx.assert_error(i),null}dhx.assert_error("Load from xml string is not supported")}},dhx.DataLoader=dhx.proto({$init:function(t){t=t||"",this._ajax_queue=dhx.toArray(),this.data=new dhx.DataStore,this.data.attachEvent("onClearAll",dhx.bind(this._call_onclearall,this)),this.data.attachEvent("onServerConfig",dhx.bind(this._call_on_config,this)),this.data.feed=this._feed},_feed:function(t,e,i){return this._load_count?this._load_count=[t,e,i]:(this._load_count=!0,this._feed_last=[t,e],void this._feed_common.call(this,t,e,i))},_feed_common:function(t,e,i){var s=this.data.url;0>t&&(t=0),this.load(s+(-1==s.indexOf("?")?"?":"&")+(this.dataCount()?"continue=true&":"")+"start="+t+"&count="+e,[this._feed_callback,i])},_feed_callback:function(){var t=this._load_count,e=this._feed_last;this._load_count=!1,"object"!=typeof t||t[0]==e[0]&&t[1]==e[1]||this.data.feed.apply(this,t)},load:function(t){var e=dhx.AtomDataLoader.load.apply(this,arguments);this._ajax_queue.push(e),this.data.url||(this.data.url=t)},loadNext:function(t,e,i,s,n){return this._settings.datathrottle&&!n?(this._throttle_request&&window.clearTimeout(this._throttle_request),void(this._throttle_request=dhx.delay(function(){this.loadNext(t,e,i,s,!0)},this,0,this._settings.datathrottle))):(e||0===e||(e=this.dataCount()),this.data.url=this.data.url||s,void(this.callEvent("onDataRequest",[e,t,i,s])&&this.data.url&&this.data.feed.call(this,e,t,i)))},_maybe_loading_already:function(t,e){var i=this._feed_last;return this._load_count&&i&&i[0]<=e&&i[1]+i[0]>=t+e?!0:!1},_onLoad:function(t,e,i){this._ajax_queue.remove(i);var s=this.data.driver.toObject(t,e);return s?(this.data._parse(s),this._call_onready(),void this.callEvent("onXLE",[])):this._onLoadError(t,e,i)},removeMissed_setter:function(t){return this.data._removeMissed=t},scheme_setter:function(t){this.data.scheme(t)},dataFeed_setter:function(t){return this.data.attachEvent("onBeforeFilter",dhx.bind(function(t,e){if(this._settings.dataFeed){var i={};if(!t&&!e)return;if("function"==typeof t){if(!e)return;t(e,i)}else i={text:e};this.clearAll();var s=this._settings.dataFeed,n=[];if("function"==typeof s)return s.call(this,e,i);for(var o in i)n.push("dhx_filter["+o+"]="+encodeURIComponent(i[o]));return this.load(s+(s.indexOf("?")<0?"?":"&")+n.join("&"),this._settings.datatype),!1}},this)),t},debug_freid_c_ready:!0,debug_freid_c_datathrottle:!0,_call_onready:function(){if(this._settings.ready&&!this._ready_was_used){var t=dhx.toFunctor(this._settings.ready);t&&dhx.delay(t,this,arguments),this._ready_was_used=!0}},_call_onclearall:function(){for(var t=0;t<this._ajax_queue.length;t++)this._ajax_queue[t].abort();this._ajax_queue=dhx.toArray()},_call_on_config:function(t){this._parseSeetingColl(t)}},dhx.AtomDataLoader),dhx.DataStore=function(){this.name="DataStore",dhx.extend(this,dhx.EventSystem),this.setDriver("json"),this.pull={},this.order=dhx.toArray(),this._marks={}},dhx.DataStore.prototype={setDriver:function(t){dhx.assert(dhx.DataDriver[t],"incorrect DataDriver"),this.driver=dhx.DataDriver[t]},_parse:function(t){this.callEvent("onParse",[this.driver,t]),this._filter_order&&this.filter();var e=this.driver.getInfo(t);e._key&&(dhx.securityKey=e._key),e._config&&this.callEvent("onServerConfig",[e._config]);var i=this.driver.getRecords(t);this._inner_parse(e,i),this._scheme_group&&this._group_processing&&this._group_processing(this._scheme_group),this._scheme_sort&&(this.blockEvent(),this.sort(this._scheme_sort),this.unblockEvent()),this.callEvent("onStoreLoad",[this.driver,t]),this.refresh()},_inner_parse:function(t,e){var i=1*(t._from||0),s=!0,n=!1;if(0===i&&this.order[0]){if(this._removeMissed){n={};for(var o=0;o<this.order.length;o++)n[this.order[o]]=!0}s=!1,i=this.order.length}for(var l=0,o=0;o<e.length;o++){var r=this.driver.getDetails(e[o]),a=this.id(r);this.pull[a]?s&&this.order[l+i]&&l++:(this.order[l+i]=a,l++),this.pull[a]?(dhx.extend(this.pull[a],r,!0),this._scheme_update&&this._scheme_update(this.pull[a]),n&&delete n[a]):(this.pull[a]=r,this._scheme_init&&this._scheme_init(r))}if(n){this.blockEvent();for(var h in n)this.remove(h);this.unblockEvent()}this.order[t._size-1]||(this.order[t._size-1]=dhx.undefined)},id:function(t){return t.id||(t.id=dhx.uid())},changeId:function(t,e){this.pull[t]&&(this.pull[e]=this.pull[t]),this.pull[e].id=e,this.order[this.order.find(t)]=e,this._filter_order&&(this._filter_order[this._filter_order.find(t)]=e),this._marks[t]&&(this._marks[e]=this._marks[t],delete this._marks[t]),this.callEvent("onIdChange",[t,e]),this._render_change_id&&this._render_change_id(t,e),delete this.pull[t]},item:function(t){return this.pull[t]},update:function(t,e){return dhx.isUndefined(e)&&(e=this.item(t)),this._scheme_update&&this._scheme_update(e),this.callEvent("onBeforeUpdate",[t,e])===!1?!1:(this.pull[t]=e,void this.callEvent("onStoreUpdated",[t,e,"update"]))},refresh:function(t){this._skip_refresh||(t?this.callEvent("onStoreUpdated",[t,this.pull[t],"paint"]):this.callEvent("onStoreUpdated",[null,null,null]))},silent:function(t,e){this._skip_refresh=!0,t.call(e||this),this._skip_refresh=!1},getRange:function(t,e){if(t=t?this.indexById(t):this.$min||this.startOffset||0,e?e=this.indexById(e):(e=Math.min(this.$max||this.endOffset||1/0,this.dataCount()-1),0>e&&(e=0)),t>e){var i=e;e=t,t=i}return this.getIndexRange(t,e)},getIndexRange:function(t,e){e=Math.min(e||1/0,this.dataCount()-1);for(var i=dhx.toArray(),s=t||0;e>=s;s++)i.push(this.item(this.order[s]));return i},dataCount:function(){return this.order.length},exists:function(t){return!!this.pull[t]},move:function(t,e){dhx.assert(t>=0&&e>=0,"DataStore::move","Incorrect indexes");var i=this.idByIndex(t),s=this.item(i);this.order.removeAt(t),this.order.insertAt(i,Math.min(this.order.length,e)),this.callEvent("onStoreUpdated",[i,s,"move"])},scheme:function(t){this._scheme={},this._scheme_init=t.$init,this._scheme_update=t.$update,this._scheme_serialize=t.$serialize,this._scheme_group=t.$group,this._scheme_sort=t.$sort;for(var e in t)"$"!=e.substr(0,1)&&(this._scheme[e]=t[e])},sync:function(t,e,i){"string"==typeof t&&(t=$$("source")),"function"!=typeof e&&(i=e,e=null),dhx.debug_bind&&(this.debug_sync_master=t,dhx.log("[sync] "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id+" <= "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id)),this._backbone_source=!1,"DataStore"!=t.name&&(t.data&&"DataStore"==t.data.name?t=t.data:this._backbone_source=!0);var s=dhx.bind(function(s,n,o){if(this._backbone_source){if(!s)return;if(0===s.indexOf("change"))return"change"==s?(this.pull[n.id]=n.attributes,void this.refresh(n.id)):void 0;"reset"==s&&(o=n),this.order=[],this.pull={},this._filter_order=null;for(var l=0;l<o.models.length;l++){var r=o.models[l].id;this.order.push(r),this.pull[r]=o.models[l].attributes}}else this._filter_order=null,this.order=dhx.toArray([].concat(t.order)),this.pull=t.pull;e&&this.silent(e),this._on_sync&&this._on_sync(),dhx.debug_bind&&dhx.log("[sync:request] "+this.debug_sync_master.name+"@"+this.debug_sync_master._settings.id+" <= "+this.debug_bind_master.name+"@"+this.debug_bind_master._settings.id),this.callEvent("onSyncApply",[]),i?i=!1:this.refresh()},this);this._backbone_source?t.bind("all",s):this._sync_events=[t.attachEvent("onStoreUpdated",s),t.attachEvent("onIdChange",dhx.bind(function(t,e){this.changeId(t,e)},this))],s()},add:function(t,e){if(this._scheme)for(var i in this._scheme)dhx.isUndefined(t[i])&&(t[i]=this._scheme[i]);this._scheme_init&&this._scheme_init(t);var s=this.id(t),n=arguments[2]||this.order,o=n.length;if((dhx.isUndefined(e)||0>e)&&(e=o),e>o&&(dhx.log("Warning","DataStore:add","Index of out of bounds"),e=Math.min(n.length,e)),this.callEvent("onBeforeAdd",[s,t,e])===!1)return!1;if(dhx.assert(!this.exists(s),"Not unique ID"),this.pull[s]=t,n.insertAt(s,e),this._filter_order){var l=this._filter_order.length;!e&&this.order.length&&(l=0),this._filter_order.insertAt(s,l)}return this.callEvent("onAfterAdd",[s,e]),this.callEvent("onStoreUpdated",[s,t,"add"]),s},remove:function(t){if(dhx.isArray(t))for(var e=0;e<t.length;e++)this.remove(t[e]);else{if(this.callEvent("onBeforeDelete",[t])===!1)return!1;dhx.assert(this.exists(t),"Not existing ID in remove command"+t);var i=this.item(t);this.order.remove(t),this._filter_order&&this._filter_order.remove(t),delete this.pull[t],this._marks[t]&&delete this._marks[t],this.callEvent("onAfterDelete",[t]),this.callEvent("onStoreUpdated",[t,i,"delete"])}},clearAll:function(){this.pull={},this.order=dhx.toArray(),this._filter_order=this.url=null,this.callEvent("onClearAll",[]),this.refresh()},idByIndex:function(t){return(t>=this.order.length||0>t)&&dhx.log("Warning","DataStore::idByIndex Incorrect index"),this.order[t]},indexById:function(t){var e=this.order.find(t);return this.pull[t]||dhx.log("Warning","DataStore::indexById Non-existing ID: "+t),e},next:function(t,e){return this.order[this.indexById(t)+(e||1)]},first:function(){return this.order[0]},last:function(){return this.order[this.order.length-1]},previous:function(t,e){return this.order[this.indexById(t)-(e||1)]},sort:function(t,e,i){var s=t;"function"==typeof t?s={as:t,dir:e}:"string"==typeof t&&(s={by:t.replace(/#/g,""),dir:e,as:i});var n=[s.by,s.dir,s.as];this.callEvent("onBeforeSort",n)&&(this._sort_core(s),this.refresh(),this.callEvent("onAfterSort",n))},_sort_core:function(t){if(this.order.length){var e=this._sort._create(t),i=this.getRange(this.first(),this.last());i.sort(e),this.order=i.map(function(t){return dhx.assert(t,"Client sorting can't be used with dynamic loading"),this.id(t)},this)}},_filter_reset:function(t){this._filter_order&&!t&&(this.order=this._filter_order,delete this._filter_order)},_filter_core:function(t,e,i){for(var s=dhx.toArray(),n=0;n<this.order.length;n++){var o=this.order[n];t(this.item(o),e)&&s.push(o)}i&&this._filter_order||(this._filter_order=this.order),this.order=s},filter:function(t,e,i){if(this.callEvent("onBeforeFilter",[t,e])&&(this._filter_reset(i),this.order.length)){if(t){var s=t;e=e||"","string"==typeof t&&(t=t.replace(/#/g,""),"function"==typeof e?s=function(i){return e(i[t])}:(e=e.toString().toLowerCase(),s=function(e,i){return dhx.assert(e,"Client side filtering can't be used with dynamic loading"),-1!=(e[t]||"").toString().toLowerCase().indexOf(i)})),this._filter_core(s,e,i,this._filterMode)}this.refresh(),this.callEvent("onAfterFilter",[])}},each:function(t,e){for(var i=0;i<this.order.length;i++)t.call(e||this,this.item(this.order[i]))},_methodPush:function(t,e){return function(){return t[e].apply(t,arguments)}},addMark:function(t,e,i,s){var n=this._marks[t]||{};return this._marks[t]=n,n[e]||(n[e]=s||!0,i&&(this.item(t).$css=(this.item(t).$css||"")+" "+e,this.refresh(t))),n[e]},removeMark:function(t,e,i){var s=this._marks[t];if(s&&s[e]&&delete s[e],i){var n=this.item(t).$css;n&&(this.item(t).$css=n.replace(e,""),this.refresh(t))}},hasMark:function(t,e){var i=this._marks[t];return i&&i[e]},provideApi:function(t,e){this.debug_bind_master=t,e&&this.mapEvent({onbeforesort:t,onaftersort:t,onbeforeadd:t,onafteradd:t,onbeforedelete:t,onafterdelete:t,onbeforeupdate:t});for(var i=["sort","add","remove","exists","idByIndex","indexById","item","update","refresh","dataCount","filter","next","previous","clearAll","first","last","serialize","sync","addMark","removeMark","hasMark"],s=0;s<i.length;s++)t[i[s]]=this._methodPush(this,i[s])},serialize:function(){for(var t=this.order,e=[],i=0;i<t.length;i++){var s=this.pull[t[i]];this._scheme_serialize&&(s=this._scheme_serialize(s),s===!1)||e.push(s)}return e},_sort:{_create:function(t){return this._dir(t.dir,this._by(t.by,t.as))},_as:{date:function(t,e){return t-=0,e-=0,t>e?1:e>t?-1:0},"int":function(t,e){return t=1*t,e=1*e,t>e?1:e>t?-1:0},string_strict:function(t,e){return t=t.toString(),e=e.toString(),t>e?1:e>t?-1:0},string:function(t,e){return e?t?(t=t.toString().toLowerCase(),e=e.toString().toLowerCase(),t>e?1:e>t?-1:0):-1:1}},_by:function(t,e){return t?("function"!=typeof e&&(e=this._as[e||"string"]),dhx.assert(e,"Invalid sorting method"),function(i,s){return e(i[t],s[t])}):e},_dir:function(t,e){return"asc"!=t&&t?function(t,i){return-1*e(t,i)}:e}}},dhx.BaseBind={debug_freid_ignore:{id:!0},bind:function(t,e,i){if("string"==typeof t&&(t=dhx.ui.get(t)),t._initBindSource&&t._initBindSource(),this._initBindSource&&this._initBindSource(),t.getBindData||dhx.extend(t,dhx.BindSource),!this._bind_ready){var s=this.render;if(this.filter){var n=this._settings.id;this.data._on_sync=function(){t._bind_updated[n]=!1}}this.render=function(){if(!this._in_bind_processing){this._in_bind_processing=!0;var t=this.callEvent("onBindRequest");return this._in_bind_processing=!1,s.apply(this,t===!1?arguments:[])}},(this.getValue||this.getValues)&&(this.save=function(){(!this.validate||this.validate())&&t.setBindData(this.getValue?this.getValue:this.getValues(),this._settings.id)}),this._bind_ready=!0}t.addBind(this._settings.id,e,i),dhx.debug_bind&&dhx.log("[bind] "+this.name+"@"+this._settings.id+" <= "+t.name+"@"+t._settings.id);var o=this._settings.id;this.attachEvent(this.touchable?"onAfterRender":"onBindRequest",function(){return t.getBindData(o)}),!this._settings.dataFeed&&this.loadNext&&this.data.attachEvent("onStoreLoad",function(){t._bind_updated[o]=!1}),this.isVisible(this._settings.id)&&this.refresh()},_unbind:function(t){t.removeBind(this._settings.id);var e=this._sync_events||(this.data?this.data._sync_events:0);if(e&&t.data)for(var i=0;i<e.length;i++)t.data.detachEvent(e[i])}},dhx.BindSource={$init:function(){this._bind_hash={},this._bind_updated={},this._ignore_binds={},this._bind_specific_rules(this)},saveBatch:function(t){this._do_not_update_binds=!0,t.call(this),this._do_not_update_binds=!1,this._update_binds()},setBindData:function(t,e){if(e&&(this._ignore_binds[e]=!0),dhx.debug_bind&&dhx.log("[bind:save] "+this.name+"@"+this._settings.id+" <= @"+e),this.setValue)this.setValue(t);else if(this.setValues)this.setValues(t);else{var i=this.getCursor();i&&(t=dhx.extend(this.item(i),t,!0),this.update(i,t))}this.callEvent("onBindUpdate",[t,e]),this.save&&this.save(),e&&(this._ignore_binds[e]=!1)},getBindData:function(t,e){if(this._bind_updated[t])return!1;var i=dhx.ui.get(t);i.isVisible(i._settings.id)&&(this._bind_updated[t]=!0,dhx.debug_bind&&dhx.log("[bind:request] "+this.name+"@"+this._settings.id+" => "+i.name+"@"+i._settings.id),this._bind_update(i,this._bind_hash[t][0],this._bind_hash[t][1]),e&&i.filter&&i.refresh())},addBind:function(t,e,i){this._bind_hash[t]=[e,i]},removeBind:function(t){delete this._bind_hash[t],delete this._bind_updated[t],delete this._ignore_binds[t]},_bind_specific_rules:function(t){t.filter?dhx.extend(this,dhx.CollectionBind):t.setValue?dhx.extend(this,dhx.ValueBind):dhx.extend(this,dhx.RecordBind)},_update_binds:function(){if(!this._do_not_update_binds)for(var t in this._bind_hash)this._ignore_binds[t]||(this._bind_updated[t]=!1,this.getBindData(t,!0))},_bind_update_common:function(t,e,i){t.setValue?t.setValue(i?i[e]:i):t.filter?t.data.silent(function(){this.filter(e,i)}):!i&&t.clear?t.clear():t._check_data_feed(i)&&t.setValues(dhx.clone(i)),t.callEvent("onBindApply",[i,e,this])}},dhx.DataValue=dhx.proto({name:"DataValue",isVisible:function(){return!0},$init:function(t){this.data=""||t;var e=t&&t.id?t.id:dhx.uid();this._settings={id:e},dhx.ui.views[e]=this},setValue:function(t){this.data=t,this.callEvent("onChange",[t])},getValue:function(){return this.data},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind),dhx.DataRecord=dhx.proto({name:"DataRecord",isVisible:function(){return!0},$init:function(t){this.data=t||{};var e=t&&t.id?t.id:dhx.uid();this._settings={id:e},dhx.ui.views[e]=this},getValues:function(){return this.data},setValues:function(t){this.data=t,this.callEvent("onChange",[t])},refresh:function(){this.callEvent("onBindRequest")}},dhx.EventSystem,dhx.BaseBind,dhx.AtomDataLoader,dhx.Settings),dhx.DataCollection=dhx.proto({name:"DataCollection",isVisible:function(){return this.data.order.length||this.data._filter_order||this._settings.dataFeed?!0:!1},$init:function(t){this.data.provideApi(this,!0);var e=t&&t.id?t.id:dhx.uid();this._settings.id=e,dhx.ui.views[e]=this,this.data.attachEvent("onStoreLoad",dhx.bind(function(){this.callEvent("onBindRequest",[])},this))},refresh:function(){this.callEvent("onBindRequest",[])}},dhx.DataLoader,dhx.EventSystem,dhx.BaseBind,dhx.Settings),dhx.ValueBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(t,e,i){var s=this.getValue()||"";if(i&&(s=i(s)),t.setValue)t.setValue(s);else if(t.filter)t.data.silent(function(){this.filter(e,s)});else{var n={};n[e]=s,t._check_data_feed(s)&&t.setValues(n)}t.callEvent("onBindApply",[s,e,this])}},dhx.RecordBind={$init:function(){this.attachEvent("onChange",this._update_binds)},_bind_update:function(t,e){var i=this.getValues()||null;this._bind_update_common(t,e,i)}},dhx.CollectionBind={$init:function(){this._cursor=null,this.attachEvent("onSelectChange",function(){var t=this.getSelected();this.setCursor(t?t.id||t:null)}),this.attachEvent("onAfterCursorChange",this._update_binds),this.data.attachEvent("onStoreUpdated",dhx.bind(function(t,e,i){t&&t==this.getCursor()&&"paint"!=i&&this._update_binds()},this)),this.data.attachEvent("onClearAll",dhx.bind(function(){this._cursor=null},this)),this.data.attachEvent("onIdChange",dhx.bind(function(t,e){this._cursor==t&&(this._cursor=e)},this))},setCursor:function(t){t==this._cursor||null!==t&&!this.item(t)||(this.callEvent("onBeforeCursorChange",[this._cursor]),this._cursor=t,this.callEvent("onAfterCursorChange",[t]))},getCursor:function(){return this._cursor},_bind_update:function(t,e){var i=this.item(this.getCursor())||this._settings.defaultData||null;this._bind_update_common(t,e,i)}},dhx.ui||(dhx.ui={}),dhx.ui.views||(dhx.ui.views={},dhx.ui.get=function(t){return t._settings?t:dhx.ui.views[t]}),dhtmlXDataStore=function(t){var e=new dhx.DataCollection(t),i="_dp_init";return e[i]=function(t){var e="_methods";t[e]=["dummy","dummy","changeId","dummy"],this.data._old_names={add:"inserted",update:"updated","delete":"deleted"},this.data.attachEvent("onStoreUpdated",function(e,i,s){e&&!t._silent&&t.setUpdated(e,!0,this._old_names[s])}),e="_getRowData",t[e]=function(t){var e=this.obj.data.item(t),i={id:t};if(i[this.action_param]=this.obj.getUserData(t),e)for(var s in e)i[s]=e[s];return i},this.changeId=function(e,i){this.data.changeId(e,i),t._silent=!0,this.data.callEvent("onStoreUpdated",[i,this.item(i),"update"]),t._silent=!1},e="_clearUpdateFlag",t[e]=function(){},this._userdata={}},e.dummy=function(){},e.setUserData=function(t,e,i){this._userdata[t]=i},e.getUserData=function(t){return this._userdata[t]},e.dataFeed=function(t){this.define("dataFeed",t)},dhx.extend(e,dhx.BindSource),e},window.dhtmlXDataView&&(dhtmlXDataView.prototype._initBindSource=function(){this.isVisible=function(){return this.data.order.length||this.data._filter_order||this._settings.dataFeed?!0:!1};var t="_settings";this._settings=this._settings||this[t],this._settings.id||(this._settings.id=dhx.uid()),this.unbind=dhx.BaseBind.unbind,this.unsync=dhx.BaseBind.unsync,dhx.ui.views[this._settings.id]=this}),window.dhtmlXChart&&(dhtmlXChart.prototype._initBindSource=function(){this.isVisible=function(){return this.data.order.length||this.data._filtered_state||this._settings.dataFeed?!0:!1};var t="_settings";this._settings=this._settings||this[t],this._settings.id||(this._settings.id=dhx.uid()),this.unbind=dhx.BaseBind.unbind,this.unsync=dhx.BaseBind.unsync,dhx.ui.views[this._settings.id]=this}),dhx.BaseBind.unsync=function(t){return dhx.BaseBind._unbind.call(this,t)},dhx.BaseBind.unbind=function(t){return dhx.BaseBind._unbind.call(this,t)},dhx.BaseBind.legacyBind=function(){return dhx.BaseBind.bind.apply(this,arguments)},dhx.BaseBind.legacySync=function(t){return this._initBindSource&&this._initBindSource(),t._initBindSource&&t._initBindSource(),this.attachEvent("onAfterEditStop",function(t){return this.save(t),!0}),this.attachEvent("onDataRequest",function(e,i){for(var s=e;e+i>s;s++)if(!t.data.order[s])return t.loadNext(i,e),!1}),this.save=function(e){e||(e=this.getCursor());var i=this.item(e),s=t.item(e);for(var n in i)0!==n.indexOf("$")&&(s[n]=i[n]);t.refresh(e)},t&&"DataCollection"==t.name?t.data.sync.apply(this.data,arguments):this.data.sync.apply(this.data,arguments)},window.dhtmlXForm&&(dhtmlXForm.prototype.bind=function(t){dhx.BaseBind.bind.apply(this,arguments),t.getBindData(this._settings.id)},dhtmlXForm.prototype.unbind=function(t){dhx.BaseBind._unbind.call(this,t)},dhtmlXForm.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this)},dhtmlXForm.prototype._check_data_feed=function(t){if(!this._settings.dataFeed||this._ignore_feed||!t)return!0;var e=this._settings.dataFeed;return"function"==typeof e?e.call(this,t.id||t,t):(e=e+(-1==e.indexOf("?")?"?":"&")+"action=get&id="+encodeURIComponent(t.id||t),this.load(e),!1)},dhtmlXForm.prototype.setValues=dhtmlXForm.prototype.setFormData,dhtmlXForm.prototype.getValues=function(){return this.getFormData(!1,!0)},dhtmlXForm.prototype.dataFeed=function(t){this._settings?this._settings.dataFeed=t:this._server_feed=t},dhtmlXForm.prototype.refresh=dhtmlXForm.prototype.isVisible=function(){return!0}),window.scheduler&&(window.Scheduler||(window.Scheduler={}),Scheduler.$syncFactory=function(t){t.sync=function(e,i){this._initBindSource&&this._initBindSource(),e._initBindSource&&e._initBindSource();var s="_process_loading",n=function(){t.clearAll();for(var n=e.data.order,o=e.data.pull,l=[],r=0;r<n.length;r++)l[r]=i&&i.copy?dhx.clone(o[n[r]]):o[n[r]];t[s](l)};this.save=function(t){t||(t=this.getCursor());var i=this.item(t),s=e.item(t);this.callEvent("onStoreSave",[t,i,s])&&(dhx.extend(e.item(t),i,!0),e.update(t))},this.item=function(t){return this.getEvent(t)},this._sync_events=[e.data.attachEvent("onStoreUpdated",function(){n.call(this)}),e.data.attachEvent("onIdChange",function(t,e){combo.changeOptionId(t,e)})],this.attachEvent("onEventChanged",function(t){this.save(t)}),this.attachEvent("onEventAdded",function(t,i){e.data.pull[t]||e.add(i)}),this.attachEvent("onEventDeleted",function(t){e.data.pull[t]&&e.remove(t)}),n()},t.unsync=function(t){dhx.BaseBind._unbind.call(this,t)},t._initBindSource=function(){this._settings||(this._settings={id:dhx.uid()})}},Scheduler.$syncFactory(window.scheduler)),window.dhtmlXCombo&&(dhtmlXCombo.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXCombo.unbind=function(t){dhx.BaseBind._unbind.call(this,t)},dhtmlXCombo.unsync=function(t){dhx.BaseBind._unbind.call(this,t)},dhtmlXCombo.prototype.dataFeed=function(t){this._settings?this._settings.dataFeed=t:this._server_feed=t},dhtmlXCombo.prototype.sync=function(t){this._initBindSource&&this._initBindSource(),t._initBindSource&&t._initBindSource();var e=this,i=function(){e.clearAll(),e.addOption(this.serialize())};this._sync_events=[t.data.attachEvent("onStoreUpdated",function(){i.call(this)}),t.data.attachEvent("onIdChange",function(t,i){e.changeOptionId(t,i)})],i.call(t)},dhtmlXCombo.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(t){t.call(this)},this)},dhtmlxEventable(this.data),this.attachEvent("onChange",function(){this.callEvent("onSelectChange",[this.getSelectedValue()])}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])}))},dhtmlXCombo.prototype.item=function(t){return this.getOption(t)},dhtmlXCombo.prototype.getSelected=function(){return this.getSelectedValue()},dhtmlXCombo.prototype.isVisible=function(){return this.optionsArr.length||this._settings.dataFeed?!0:!1},dhtmlXCombo.prototype.refresh=function(){this.render(!0)},dhtmlXCombo.prototype.filter=function(){alert("not implemented")}),window.dhtmlXGridObject&&(dhtmlXGridObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXGridObject.prototype.unbind=function(t){dhx.BaseBind._unbind.call(this,t)},dhtmlXGridObject.prototype.unsync=function(t){dhx.BaseBind._unbind.call(this,t)},dhtmlXGridObject.prototype.dataFeed=function(t){this._settings?this._settings.dataFeed=t:this._server_feed=t},dhtmlXGridObject.prototype.sync=function(t,e){this._initBindSource&&this._initBindSource(),t._initBindSource&&t._initBindSource();var i=this,s="_parsing",n="_parser",o="_locator",l="_process_store_row",r="_get_store_data";this.save=function(e){e||(e=this.getCursor()),dhx.extend(t.item(e),this.item(e),!0),t.update(e)};var a=function(){var t=i.getCursor?i.getCursor():null,e=0;i._legacy_ignore_next?(e=i._legacy_ignore_next,i._legacy_ignore_next=!1):i.clearAll();var a=this.dataCount();if(a){i[s]=!0;for(var h=e;a>h;h++){var d=this.order[h];d&&(e&&i.rowsBuffer[h]||(i.rowsBuffer[h]={idd:d,data:this.pull[d]},i.rowsBuffer[h][n]=i[l],i.rowsBuffer[h][o]=i[r],i.rowsAr[d]=this.pull[d]))}i.rowsBuffer[a-1]||(i.rowsBuffer[a-1]=dhtmlx.undefined,i.xmlFileUrl=i.xmlFileUrl||this.url),i.pagingOn?i.changePage():i._srnd&&i._fillers?i._update_srnd_view():(i.render_dataset(),i.callEvent("onXLE",[])),i[s]=!1}t&&i.setCursor&&i.setCursor(i.rowsAr[t]?t:null)};this._sync_events=[t.data.attachEvent("onStoreUpdated",function(t,e,s){"delete"==s?(i.deleteRow(t),i.data.callEvent("onStoreUpdated",[t,e,s])):"update"==s?(i.callEvent("onSyncUpdate",[e,s]),i.update(t,e),i.data.callEvent("onStoreUpdated",[t,e,s])):"add"==s?(i.callEvent("onSyncUpdate",[e,s]),i.add(t,e,this.indexById(t)),i.data.callEvent("onStoreUpdated",[t,e,s])):a.call(this)}),t.data.attachEvent("onStoreLoad",function(e,s){i.xmlFileUrl=t.data.url,i._legacy_ignore_next=e.getInfo(s)._from}),t.data.attachEvent("onIdChange",function(t,e){i.changeRowId(t,e)})],i.attachEvent("onDynXLS",function(e,s){for(var n=e;e+s>n;n++)if(!t.data.order[n])return t.loadNext(s,e),!1;i._legacy_ignore_next=e,a.call(t.data)}),a.call(t.data),i.attachEvent("onEditCell",function(t,e,i,s,n){return 2==t&&s!=n&&this.save(e),!0}),i.attachEvent("onClearAll",function(){var t="_f_rowsBuffer";this[t]=null}),e&&e.sort&&i.attachEvent("onBeforeSorting",function(e,s,n){if("connector"==s)return!1;var o=this.getColumnId(e);return t.sort("#"+o+"#","asc"==n?"asc":"desc","int"==s?s:"string"),i.setSortImgState(!0,e,n),!1}),e&&e.filter&&(i.attachEvent("onFilterStart",function(e,s){var n="_con_f_used";return i[n]&&i[n].length?!1:(t.data.silent(function(){t.filter();for(var n=0;n<e.length;n++)if(""!=s[n]){var o=i.getColumnId(e[n]);t.filter("#"+o+"#",s[n],0!=n)}}),t.refresh(),!1)}),i.collectValues=function(e){var i=this.getColumnId(e);return function(t){var e=[],i={};return this.data.each(function(s){var n=s[t];i[n]||(i[n]=!0,e.push(n))}),e.sort(),e}.call(t,i)}),e&&e.select&&i.attachEvent("onRowSelect",function(e){t.setCursor(e)}),i.clearAndLoad=function(e){t.clearAll(),t.load(e)}},dhtmlXGridObject.prototype._initBindSource=function(){if(dhx.isUndefined(this._settings)){this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(t){t.call(this)},this)},dhtmlxEventable(this.data);for(var t="_cCount",e=0;e<this[t];e++)this.columnIds[e]||(this.columnIds[e]="cell"+e);this.attachEvent("onSelectStateChanged",function(t){this.callEvent("onSelectChange",[t])}),this.attachEvent("onSelectionCleared",function(){this.callEvent("onSelectChange",[null])}),this.attachEvent("onEditCell",function(t,e){return 2===t&&this.getCursor&&e&&e==this.getCursor()&&this._update_binds(),!0}),this.attachEvent("onXLE",function(){this.callEvent("onBindRequest",[])})}},dhtmlXGridObject.prototype.item=function(t){if(null===t)return null;var e=this.getRowById(t);if(!e)return null;var i="_attrs",s=dhx.copy(e[i]);s.id=t;for(var n=this.getColumnsNum(),o=0;n>o;o++)s[this.columnIds[o]]=this.cells(t,o).getValue();return s},dhtmlXGridObject.prototype.update=function(t,e){for(var i=0;i<this.columnIds.length;i++){var s=this.columnIds[i];dhx.isUndefined(e[s])||this.cells(t,i).setValue(e[s])}var n="_attrs",o=this.getRowById(t)[n];for(var s in e)o[s]=e[s];this.callEvent("onBindUpdate",[t])},dhtmlXGridObject.prototype.add=function(t,e,i){for(var s=[],n=0;n<this.columnIds.length;n++){var o=this.columnIds[n];s[n]=dhx.isUndefined(e[o])?"":e[o]}this.addRow(t,s,i);var l="_attrs";this.getRowById(t)[l]=dhx.copy(e)},dhtmlXGridObject.prototype.getSelected=function(){return this.getSelectedRowId()},dhtmlXGridObject.prototype.isVisible=function(){var t="_f_rowsBuffer";return this.rowsBuffer.length||this[t]||this._settings.dataFeed?!0:!1},dhtmlXGridObject.prototype.refresh=function(){this.render_dataset()},dhtmlXGridObject.prototype.filter=function(t,e){if(this._settings.dataFeed){var i={};if(!t&&!e)return;if("function"==typeof t){if(!e)return;t(e,i)}else dhx.isUndefined(t)?i=e:i[t]=e;this.clearAll();var s=this._settings.dataFeed;if("function"==typeof s)return s.call(this,e,i);var n=[];for(var o in i)n.push("dhx_filter["+o+"]="+encodeURIComponent(i[o]));return this.load(s+(s.indexOf("?")<0?"?":"&")+n.join("&")),!1}return null===e?this.filterBy(0,function(){return!1}):void this.filterBy(0,function(i,s){return t.call(this,s,e)})}),window.dhtmlXTreeObject&&(dhtmlXTreeObject.prototype.bind=function(){dhx.BaseBind.bind.apply(this,arguments)},dhtmlXTreeObject.prototype.unbind=function(t){dhx.BaseBind._unbind.call(this,t)},dhtmlXTreeObject.prototype.dataFeed=function(t){this._settings?this._settings.dataFeed=t:this._server_feed=t},dhtmlXTreeObject.prototype._initBindSource=function(){dhx.isUndefined(this._settings)&&(this._settings={id:dhx.uid(),dataFeed:this._server_feed},dhx.ui.views[this._settings.id]=this,this.data={silent:dhx.bind(function(t){t.call(this)},this)},dhtmlxEventable(this.data),this.attachEvent("onSelect",function(t){this.callEvent("onSelectChange",[t])}),this.attachEvent("onEdit",function(t,e){return 2===t&&e&&e==this.getCursor()&&this._update_binds(),!0}))},dhtmlXTreeObject.prototype.item=function(t){return null===t?null:{id:t,text:this.getItemText(t)}},dhtmlXTreeObject.prototype.getSelected=function(){return this.getSelectedItemId()},dhtmlXTreeObject.prototype.isVisible=function(){return!0},dhtmlXTreeObject.prototype.refresh=function(){},dhtmlXTreeObject.prototype.filter=function(t,e){if(this._settings.dataFeed){var i={};if(!t&&!e)return;if("function"==typeof t){if(!e)return;t(e,i)}else dhx.isUndefined(t)?i=e:i[t]=e;this.deleteChildItems(0);var s=this._settings.dataFeed;if("function"==typeof s)return s.call(this,[data.id||data,data]);var n=[];for(var o in i)n.push("dhx_filter["+o+"]="+encodeURIComponent(i[o]));return this.loadXML(s+(s.indexOf("?")<0?"?":"&")+n.join("&")),!1}},dhtmlXTreeObject.prototype.update=function(t,e){dhx.isUndefined(e.text)||this.setItemText(t,e.text)}),window.dhtmlx||(window.dhtmlx={}),function(){function t(t,e){var s=t.callback;i(!1),t.box.parentNode.removeChild(t.box),u=t.box=null,s&&s(e)}function e(e){if(u){e=e||event;var i=e.which||event.keyCode;return dhtmlx.message.keyboard&&((13==i||32==i)&&t(u,!0),27==i&&t(u,!1)),e.preventDefault&&e.preventDefault(),!(e.cancelBubble=!0)}}function i(t){i.cover||(i.cover=document.createElement("DIV"),i.cover.onkeydown=e,i.cover.className="dhx_modal_cover",document.body.appendChild(i.cover));document.body.scrollHeight;i.cover.style.display=t?"inline-block":"none"}function s(t,e){return"<div class='dhtmlx_popup_button' result='"+e+"' ><div>"+t+"</div></div>"}function n(t){_.area||(_.area=document.createElement("DIV"),_.area.className="dhtmlx_message_area",_.area.style[_.position]="5px",document.body.appendChild(_.area)),_.hide(t.id);var e=document.createElement("DIV");return e.innerHTML="<div>"+t.text+"</div>",e.className="dhtmlx-info dhtmlx-"+t.type,e.onclick=function(){_.hide(t.id),t=null},"bottom"==_.position&&_.area.firstChild?_.area.insertBefore(e,_.area.firstChild):_.area.appendChild(e),t.expire>0&&(_.timers[t.id]=window.setTimeout(function(){_.hide(t.id)
},t.expire)),_.pull[t.id]=e,e=null,t.id}function o(e,i,n){var o=document.createElement("DIV");o.className=" dhtmlx_modal_box dhtmlx-"+e.type,o.setAttribute("dhxbox",1);var l="";if(e.width&&(o.style.width=e.width),e.height&&(o.style.height=e.height),e.title&&(l+='<div class="dhtmlx_popup_title">'+e.title+"</div>"),l+='<div class="dhtmlx_popup_text"><span>'+(e.content?"":e.text)+'</span></div><div  class="dhtmlx_popup_controls">',i&&(l+=s(e.ok||"OK",!0)),n&&(l+=s(e.cancel||"Cancel",!1)),e.buttons)for(var r=0;r<e.buttons.length;r++)l+=s(e.buttons[r],r);if(l+="</div>",o.innerHTML=l,e.content){var a=e.content;"string"==typeof a&&(a=document.getElementById(a)),"none"==a.style.display&&(a.style.display=""),o.childNodes[e.title?1:0].appendChild(a)}return o.onclick=function(i){i=i||event;var s=i.target||i.srcElement;if(s.className||(s=s.parentNode),"dhtmlx_popup_button"==s.className){var n=s.getAttribute("result");n="true"==n||("false"==n?!1:n),t(e,n)}},e.box=o,(i||n)&&(u=e),o}function l(t,s,n){var l=t.tagName?t:o(t,s,n);t.hidden||i(!0),document.body.appendChild(l);var r=t.left||Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-l.offsetWidth)/2)),a=t.top||Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-l.offsetHeight)/2));return l.style.top="top"==t.position?"-3px":a+"px",l.style.left=r+"px",l.onkeydown=e,l.focus(),t.hidden&&dhtmlx.modalbox.hide(l),l}function r(t){return l(t,!0,!1)}function a(t){return l(t,!0,!0)}function h(t){return l(t)}function d(t,e,i){return"object"!=typeof t&&("function"==typeof e&&(i=e,e=""),t={text:t,type:e,callback:i}),t}function c(t,e,i,s){return"object"!=typeof t&&(t={text:t,type:e,expire:i,id:s}),t.id=t.id||_.uid(),t.expire=t.expire||_.expire,t}var u=null;document.attachEvent?document.attachEvent("onkeydown",e):document.addEventListener("keydown",e,!0),dhtmlx.alert=function(){var t=d.apply(this,arguments);return t.type=t.type||"confirm",r(t)},dhtmlx.confirm=function(){var t=d.apply(this,arguments);return t.type=t.type||"alert",a(t)},dhtmlx.modalbox=function(){var t=d.apply(this,arguments);return t.type=t.type||"alert",h(t)},dhtmlx.modalbox.hide=function(t){for(;t&&t.getAttribute&&!t.getAttribute("dhxbox");)t=t.parentNode;t&&(t.parentNode.removeChild(t),i(!1))};var _=dhtmlx.message=function(t){t=c.apply(this,arguments),t.type=t.type||"info";var e=t.type.split("-")[0];switch(e){case"alert":return r(t);case"confirm":return a(t);case"modalbox":return h(t);default:return n(t)}};_.seed=(new Date).valueOf(),_.uid=function(){return _.seed++},_.expire=4e3,_.keyboard=!0,_.position="top",_.pull={},_.timers={},_.hideAll=function(){for(var t in _.pull)_.hide(t)},_.hide=function(t){var e=_.pull[t];e&&e.parentNode&&(window.setTimeout(function(){e.parentNode.removeChild(e),e=null},2e3),e.className+=" hidden",_.timers[t]&&window.clearTimeout(_.timers[t]),delete _.pull[t])}}();